{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\isavc\\\\OneDrive\\\\Documents\\\\AIS\\\\Apps\\\\magmo\\\\pages\\\\NewSearch\\\\item\\\\[id]\\\\NewLocal.js\";\nvar __jsx = React.createElement;\n// NewLocal.js\nimport React, { useState, useEffect } from \"react\";\nimport { Form, Row, Col, Button, Stack } from \"react-bootstrap\";\nimport { useRouter } from \"next/router\";\nimport firebase from \"../../../../context/Firebase\";\nimport WarehouseMapModal from \"../../../../components/WarehouseMapModal\";\nimport styles from \"./NewLocal.module.css\";\nexport default function NewLocal({\n  onSave = () => {},\n  onCancel = () => {},\n  selectedClient,\n  showLocalLoc,\n  value = {},\n  onChange\n}) {\n  const router = useRouter();\n  const {\n    0: regionOptions,\n    1: setRegionOptions\n  } = useState([]);\n  const {\n    0: binCount,\n    1: setBinCount\n  } = useState(0);\n  const {\n    0: palletCount,\n    1: setPalletCount\n  } = useState(0);\n  const {\n    0: region,\n    1: setRegion\n  } = useState(\"\");\n  const {\n    0: sectionLetter,\n    1: setSectionLetter\n  } = useState(\"\");\n  const {\n    0: sectionNumber,\n    1: setSectionNumber\n  } = useState(\"\");\n  const {\n    0: binSelected,\n    1: setBinSelected\n  } = useState(\"\");\n  const {\n    0: palletSelected,\n    1: setPalletSelected\n  } = useState(\"\");\n  const {\n    0: showMap,\n    1: setShowMap\n  } = useState(false); // 1) load directory exactly as before\n\n  useEffect(() => {\n    if (!showLocalLoc) return;\n    const db = firebase.firestore();\n    db.collection(\"Warehouse\").doc(\"directory\").get().then(doc => {\n      const d = doc.data() || {};\n      setRegionOptions(d.Region || []);\n      setBinCount(d.Bin || 0);\n      setPalletCount(d.Pallet || 0);\n    });\n  }, [showLocalLoc]); // 2) when we open the modal (or value changes), initialize from value\n\n  useEffect(() => {\n    var _value$section, _value$section2, _value$bin, _value$pallet;\n\n    if (!showLocalLoc) return;\n    setRegion(value.region || \"\");\n    setSectionLetter(((_value$section = value.section) === null || _value$section === void 0 ? void 0 : _value$section.letter) || \"\");\n    setSectionNumber(((_value$section2 = value.section) === null || _value$section2 === void 0 ? void 0 : _value$section2.number) || \"\");\n    setBinSelected(((_value$bin = value.bin) === null || _value$bin === void 0 ? void 0 : _value$bin.toString()) || \"\");\n    setPalletSelected(((_value$pallet = value.pallet) === null || _value$pallet === void 0 ? void 0 : _value$pallet.toString()) || \"\");\n  }, [showLocalLoc]); // 3) notify parent on any change\n\n  useEffect(() => {\n    const p = {};\n    if (region) p.region = region;\n    if (sectionLetter && sectionNumber) p.section = {\n      letter: sectionLetter,\n      number: sectionNumber\n    };\n    if (binSelected) p.bin = parseInt(binSelected, 10);\n    if (palletSelected) p.pallet = parseInt(palletSelected, 10);\n    onChange(p);\n  }, [region, sectionLetter, sectionNumber, binSelected, palletSelected]); // helpers:\n\n  const letters = Array.from({\n    length: 26\n  }, (_, i) => String.fromCharCode(65 + i));\n  const numbers = Array.from({\n    length: 50\n  }, (_, i) => i + 1);\n  const binOptions = Array.from({\n    length: binCount\n  }, (_, i) => i + 1);\n  const palletOptions = Array.from({\n    length: palletCount\n  }, (_, i) => i + 1); // bump and persist bin count\n\n  const handleAddBin = async () => {\n    const next = binCount + 1;\n    await firebase.firestore().collection(\"Warehouse\").doc(\"directory\").update({\n      Bin: next\n    });\n    setBinCount(next);\n    setBinSelected(next.toString());\n  }; // bump and persist pallet count\n\n\n  const handleAddPallet = async () => {\n    const next = palletCount + 1;\n    await firebase.firestore().collection(\"Warehouse\").doc(\"directory\").update({\n      Pallet: next\n    });\n    setPalletCount(next);\n    setPalletSelected(next.toString());\n  }; // only fire parent when they click OK\n\n\n  const handleOk = () => {\n    const p = {};\n    if (region) p.region = region;\n    if (sectionLetter && sectionNumber) p.section = {\n      letter: sectionLetter,\n      number: sectionNumber\n    };\n    if (binSelected) p.bin = parseInt(binSelected, 10);\n    if (palletSelected) p.pallet = parseInt(palletSelected, 10);\n    onSave(p);\n  };\n\n  const openMap = () => {\n    setShowMap(true);\n  };\n\n  const handleMapSelectionChange = (selection = {}) => {\n    if (Object.prototype.hasOwnProperty.call(selection, \"region\")) {\n      setRegion(selection.region || \"\");\n    }\n\n    if (Object.prototype.hasOwnProperty.call(selection, \"sectionLetter\")) {\n      setSectionLetter(selection.sectionLetter || \"\");\n    }\n\n    if (Object.prototype.hasOwnProperty.call(selection, \"sectionNumber\")) {\n      setSectionNumber(selection.sectionNumber ? String(selection.sectionNumber) : \"\");\n    }\n\n    if (Object.prototype.hasOwnProperty.call(selection, \"pallet\")) {\n      setPalletSelected(selection.pallet ? String(selection.pallet) : \"\");\n    }\n\n    if (Object.prototype.hasOwnProperty.call(selection, \"bin\")) {\n      setBinSelected(selection.bin ? String(selection.bin) : \"\");\n    }\n  };\n\n  const handleViewInventory = (selection = {}) => {\n    var _selection$region, _selection$sectionLet, _selection$sectionNum, _selection$pallet, _selection$bin;\n\n    const params = new URLSearchParams();\n    const regionValue = (_selection$region = selection.region) !== null && _selection$region !== void 0 ? _selection$region : region;\n    const letterValue = (_selection$sectionLet = selection.sectionLetter) !== null && _selection$sectionLet !== void 0 ? _selection$sectionLet : sectionLetter;\n    const numberValue = (_selection$sectionNum = selection.sectionNumber) !== null && _selection$sectionNum !== void 0 ? _selection$sectionNum : sectionNumber;\n    const palletValue = (_selection$pallet = selection.pallet) !== null && _selection$pallet !== void 0 ? _selection$pallet : palletSelected;\n    const binValue = (_selection$bin = selection.bin) !== null && _selection$bin !== void 0 ? _selection$bin : binSelected;\n    if (regionValue) params.set(\"region\", regionValue);\n    if (letterValue) params.set(\"sectionLetter\", letterValue);\n    if (numberValue) params.set(\"sectionNumber\", numberValue);\n    if (palletValue) params.set(\"pallet\", palletValue);\n    if (binValue) params.set(\"bin\", binValue);\n    const query = params.toString();\n    router.push(`/NewSearch/inventory/inventoryManage${query ? `?${query}` : \"\"}`);\n    setShowMap(false);\n  };\n\n  return __jsx(\"div\", {\n    className: styles.wrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 5\n    }\n  }, __jsx(Row, {\n    className: styles.formRow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }\n  }, __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, __jsx(Form.Group, {\n    className: styles.formGroup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, \"Region\"), __jsx(Form.Select, {\n    value: region,\n    onChange: e => setRegion(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 15\n    }\n  }, \"Select region\"), regionOptions.map(r => __jsx(\"option\", {\n    key: r,\n    value: r,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 38\n    }\n  }, r))))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }\n  }, __jsx(Form.Group, {\n    className: styles.formGroup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, \"Section Letter\"), __jsx(Form.Select, {\n    value: sectionLetter,\n    onChange: e => setSectionLetter(e.target.value) // disabled={!region}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 15\n    }\n  }, \"Letter\"), letters.map(l => __jsx(\"option\", {\n    key: l,\n    value: l,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 32\n    }\n  }, l))))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  }, __jsx(Form.Group, {\n    className: styles.formGroup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }\n  }, \"Section Number\"), __jsx(Form.Select, {\n    value: sectionNumber,\n    onChange: e => setSectionNumber(e.target.value) // disabled={!region}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 15\n    }\n  }, \"Number\"), numbers.map(n => __jsx(\"option\", {\n    key: n,\n    value: n,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 32\n    }\n  }, n)))))), __jsx(Row, {\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }\n  }, __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }\n  }, __jsx(Form.Group, {\n    className: styles.formGroup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }\n  }, \"Bin\"), __jsx(Stack, {\n    direction: \"horizontal\",\n    gap: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }, __jsx(Form.Select, {\n    value: binSelected,\n    onChange: e => setBinSelected(e.target.value) // disabled={!region}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 15\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 17\n    }\n  }, \"Select bin\"), binOptions.map(b => __jsx(\"option\", {\n    key: b,\n    value: b,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 38\n    }\n  }, b))), __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: handleAddBin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 15\n    }\n  }, \"+ Bin\")))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 9\n    }\n  }, __jsx(Form.Group, {\n    className: styles.formGroup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 11\n    }\n  }, \"Pallet\"), __jsx(Stack, {\n    direction: \"horizontal\",\n    gap: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Select, {\n    value: palletSelected,\n    onChange: e => setPalletSelected(e.target.value) // disabled={!region}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 11\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 15\n    }\n  }, \"Select pallet\"), palletOptions.map(p => __jsx(\"option\", {\n    key: p,\n    value: p,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 41\n    }\n  }, p))), __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: handleAddPallet,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 15\n    }\n  }, \"+ Pallet\"))))), __jsx(\"div\", {\n    className: styles.actionRow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }\n  }, __jsx(Button, {\n    variant: \"outline-primary\",\n    onClick: openMap,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 9\n    }\n  }, \"Map\"), __jsx(\"div\", {\n    className: styles.actionSpacer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 9\n    }\n  }), __jsx(Button, {\n    variant: \"secondary\",\n    onClick: onCancel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }\n  }, \"Cancel\"), __jsx(Button, {\n    variant: \"primary\",\n    onClick: handleOk,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 9\n    }\n  }, \"OK\")), __jsx(WarehouseMapModal, {\n    show: showMap,\n    onHide: () => setShowMap(false),\n    onView: handleViewInventory,\n    onSelectionChange: handleMapSelectionChange,\n    initialSelection: {\n      region,\n      sectionLetter,\n      sectionNumber,\n      pallet: palletSelected,\n      bin: binSelected\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["C:/Users/isavc/OneDrive/Documents/AIS/Apps/magmo/pages/NewSearch/item/[id]/NewLocal.js"],"names":["React","useState","useEffect","Form","Row","Col","Button","Stack","useRouter","firebase","WarehouseMapModal","styles","NewLocal","onSave","onCancel","selectedClient","showLocalLoc","value","onChange","router","regionOptions","setRegionOptions","binCount","setBinCount","palletCount","setPalletCount","region","setRegion","sectionLetter","setSectionLetter","sectionNumber","setSectionNumber","binSelected","setBinSelected","palletSelected","setPalletSelected","showMap","setShowMap","db","firestore","collection","doc","get","then","d","data","Region","Bin","Pallet","section","letter","number","bin","toString","pallet","p","parseInt","letters","Array","from","length","_","i","String","fromCharCode","numbers","binOptions","palletOptions","handleAddBin","next","update","handleAddPallet","handleOk","openMap","handleMapSelectionChange","selection","Object","prototype","hasOwnProperty","call","handleViewInventory","params","URLSearchParams","regionValue","letterValue","numberValue","palletValue","binValue","set","query","push","wrapper","formRow","formGroup","e","target","map","r","l","n","b","actionRow","actionSpacer"],"mappings":"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","sourcesContent":["// NewLocal.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Form, Row, Col, Button, Stack } from \"react-bootstrap\";\r\nimport { useRouter } from \"next/router\";\r\nimport firebase from \"../../../../context/Firebase\";\r\nimport WarehouseMapModal from \"../../../../components/WarehouseMapModal\";\r\nimport styles from \"./NewLocal.module.css\";\r\n\r\nexport default function NewLocal({\r\n  onSave = () => {},\r\n  onCancel = () => {},\r\n  selectedClient,\r\n  showLocalLoc,\r\n  value = {},\r\n  onChange,\r\n}) {\r\n  const router = useRouter();\r\n  const [regionOptions, setRegionOptions] = useState([]);\r\n  const [binCount, setBinCount]         = useState(0);\r\n  const [palletCount, setPalletCount]   = useState(0);\r\n\r\n  const [region, setRegion] = useState(\"\");\r\n  const [sectionLetter, setSectionLetter] = useState(\"\");\r\n  const [sectionNumber, setSectionNumber] = useState(\"\");\r\n  const [binSelected, setBinSelected]     = useState(\"\");\r\n  const [palletSelected, setPalletSelected] = useState(\"\");\r\n  const [showMap, setShowMap] = useState(false);\r\n\r\n  // 1) load directory exactly as before\r\n  useEffect(() => {\r\n    if (!showLocalLoc) return;\r\n    const db = firebase.firestore();\r\n    db.collection(\"Warehouse\").doc(\"directory\").get().then(doc => {\r\n      const d = doc.data() || {};\r\n      setRegionOptions(d.Region   || []);\r\n      setBinCount     (d.Bin      || 0);\r\n      setPalletCount  (d.Pallet   || 0);\r\n    });\r\n  }, [showLocalLoc]);\r\n\r\n  // 2) when we open the modal (or value changes), initialize from value\r\n  useEffect(() => {\r\n    if (!showLocalLoc) return;\r\n    setRegion        (value.region             || \"\");\r\n    setSectionLetter(value.section?.letter    || \"\");\r\n    setSectionNumber(value.section?.number    || \"\");\r\n    setBinSelected   (value.bin?.toString()    || \"\");\r\n    setPalletSelected(value.pallet?.toString()|| \"\");\r\n  }, [showLocalLoc]);\r\n\r\n  // 3) notify parent on any change\r\n  useEffect(() => {\r\n    const p = {};\r\n    if (region)         p.region  = region;\r\n    if (sectionLetter && sectionNumber) p.section = { letter: sectionLetter, number: sectionNumber };\r\n    if (binSelected)    p.bin     = parseInt(binSelected,10);\r\n    if (palletSelected) p.pallet  = parseInt(palletSelected,10);\r\n    onChange(p);\r\n  }, [region, sectionLetter, sectionNumber, binSelected, palletSelected]);\r\n\r\n  // helpers:\r\n  const letters = Array.from({ length: 26 }, (_, i) =>\r\n    String.fromCharCode(65 + i)\r\n  );\r\n  const numbers = Array.from({ length: 50 }, (_, i) => i + 1);\r\n  const binOptions = Array.from({ length: binCount }, (_, i) => i + 1);\r\n  const palletOptions = Array.from({ length: palletCount }, (_, i) => i + 1);\r\n\r\n  // bump and persist bin count\r\n  const handleAddBin = async () => {\r\n    const next = binCount + 1;\r\n    await firebase.firestore()\r\n      .collection(\"Warehouse\").doc(\"directory\")\r\n      .update({ Bin: next });\r\n    setBinCount(next);\r\n    setBinSelected(next.toString());\r\n  };\r\n\r\n  // bump and persist pallet count\r\n  const handleAddPallet = async () => {\r\n    const next = palletCount + 1;\r\n    await firebase.firestore()\r\n      .collection(\"Warehouse\").doc(\"directory\")\r\n      .update({ Pallet: next });\r\n    setPalletCount(next);\r\n    setPalletSelected(next.toString());\r\n  };\r\n\r\n  // only fire parent when they click OK\r\n  const handleOk = () => {\r\n    const p = {};\r\n    if (region) p.region = region;\r\n    if (sectionLetter && sectionNumber)\r\n      p.section = { letter: sectionLetter, number: sectionNumber };\r\n    if (binSelected) p.bin = parseInt(binSelected, 10);\r\n    if (palletSelected) p.pallet = parseInt(palletSelected, 10);\r\n    onSave(p);\r\n  };\r\n\r\n  const openMap = () => {\r\n    setShowMap(true);\r\n  };\r\n\r\n  const handleMapSelectionChange = (selection = {}) => {\r\n    if (Object.prototype.hasOwnProperty.call(selection, \"region\")) {\r\n      setRegion(selection.region || \"\");\r\n    }\r\n    if (Object.prototype.hasOwnProperty.call(selection, \"sectionLetter\")) {\r\n      setSectionLetter(selection.sectionLetter || \"\");\r\n    }\r\n    if (Object.prototype.hasOwnProperty.call(selection, \"sectionNumber\")) {\r\n      setSectionNumber(\r\n        selection.sectionNumber ? String(selection.sectionNumber) : \"\"\r\n      );\r\n    }\r\n    if (Object.prototype.hasOwnProperty.call(selection, \"pallet\")) {\r\n      setPalletSelected(selection.pallet ? String(selection.pallet) : \"\");\r\n    }\r\n    if (Object.prototype.hasOwnProperty.call(selection, \"bin\")) {\r\n      setBinSelected(selection.bin ? String(selection.bin) : \"\");\r\n    }\r\n  };\r\n\r\n  const handleViewInventory = (selection = {}) => {\r\n    const params = new URLSearchParams();\r\n    const regionValue = selection.region ?? region;\r\n    const letterValue = selection.sectionLetter ?? sectionLetter;\r\n    const numberValue = selection.sectionNumber ?? sectionNumber;\r\n    const palletValue = selection.pallet ?? palletSelected;\r\n    const binValue = selection.bin ?? binSelected;\r\n\r\n    if (regionValue) params.set(\"region\", regionValue);\r\n    if (letterValue) params.set(\"sectionLetter\", letterValue);\r\n    if (numberValue) params.set(\"sectionNumber\", numberValue);\r\n    if (palletValue) params.set(\"pallet\", palletValue);\r\n    if (binValue) params.set(\"bin\", binValue);\r\n\r\n    const query = params.toString();\r\n    router.push(\r\n      `/NewSearch/inventory/inventoryManage${query ? `?${query}` : \"\"}`\r\n    );\r\n    setShowMap(false);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <Row className={styles.formRow}>\r\n        <Col>\r\n          <Form.Group className={styles.formGroup}>\r\n            <Form.Label>Region</Form.Label>\r\n            <Form.Select\r\n              value={region} onChange={e=>setRegion(e.target.value)}\r\n            >\r\n              <option value=\"\">Select region</option>\r\n              {regionOptions.map(r=> <option key={r} value={r}>{r}</option>)}\r\n            </Form.Select>\r\n          </Form.Group>\r\n        </Col>\r\n        <Col>\r\n          <Form.Group className={styles.formGroup}>\r\n            <Form.Label>Section Letter</Form.Label>\r\n            <Form.Select\r\n              value={sectionLetter}\r\n              onChange={e=>setSectionLetter(e.target.value)}\r\n              // disabled={!region}\r\n            >\r\n              <option value=\"\">Letter</option>\r\n              {letters.map(l=> <option key={l} value={l}>{l}</option>)}\r\n            </Form.Select>\r\n          </Form.Group>\r\n        </Col>\r\n        <Col>\r\n          <Form.Group className={styles.formGroup}>\r\n            <Form.Label>Section Number</Form.Label>\r\n            <Form.Select\r\n              value={sectionNumber}\r\n              onChange={e=>setSectionNumber(e.target.value)}\r\n              // disabled={!region}\r\n            >\r\n              <option value=\"\">Number</option>\r\n              {numbers.map(n=> <option key={n} value={n}>{n}</option>)}\r\n            </Form.Select>\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n      <Row className=\"mt-3\">\r\n        <Col>\r\n          <Form.Group className={styles.formGroup}>\r\n            <Form.Label>Bin</Form.Label>\r\n            <Stack direction=\"horizontal\" gap={2}>\r\n              <Form.Select\r\n                value={binSelected}\r\n                onChange={e => setBinSelected(e.target.value)}\r\n                // disabled={!region}\r\n              >\r\n                <option value=\"\">Select bin</option>\r\n                {binOptions.map(b => <option key={b} value={b}>{b}</option>)}\r\n              </Form.Select>\r\n              <Button variant=\"outline-secondary\" onClick={handleAddBin} >\r\n                + Bin\r\n              </Button>\r\n            </Stack>\r\n          </Form.Group>\r\n        </Col>\r\n        <Col>\r\n          <Form.Group className={styles.formGroup}>\r\n          <Form.Label>Pallet</Form.Label>\r\n          <Stack direction=\"horizontal\" gap={2}>\r\n          <Form.Select\r\n            value={palletSelected}\r\n            onChange={e =>setPalletSelected(e.target.value)}\r\n              // disabled={!region}\r\n            >\r\n              <option value=\"\">Select pallet</option>\r\n                {palletOptions.map(p => <option key={p} value={p}>{p}</option>)}\r\n              </Form.Select>\r\n              <Button variant=\"outline-secondary\" onClick={handleAddPallet} >\r\n                + Pallet\r\n              </Button>\r\n            </Stack>\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n      {/* OK / Cancel footer */}\r\n      <div className={styles.actionRow}>\r\n        <Button variant=\"outline-primary\" onClick={openMap}>\r\n          Map\r\n        </Button>\r\n        <div className={styles.actionSpacer} />\r\n        <Button variant=\"secondary\" onClick={onCancel}>\r\n          Cancel\r\n        </Button>\r\n        <Button variant=\"primary\" onClick={handleOk}>\r\n          OK\r\n        </Button>\r\n      </div>\r\n      <WarehouseMapModal\r\n        show={showMap}\r\n        onHide={() => setShowMap(false)}\r\n        onView={handleViewInventory}\r\n        onSelectionChange={handleMapSelectionChange}\r\n        initialSelection={{\r\n          region,\r\n          sectionLetter,\r\n          sectionNumber,\r\n          pallet: palletSelected,\r\n          bin: binSelected,\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}