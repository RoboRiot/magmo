{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mack2\\\\Desktop\\\\code\\\\utils\\\\PartTable.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Table, Button, Form } from \"react-bootstrap\";\nimport { formatDate } from \"./fetchAssociations\";\nimport styles from \"../styles/PartTable.module.css\";\nexport default function PartTable({\n  info,\n  labels,\n  ids,\n  hoverStyle,\n  sortCheckAll,\n  checkDelete,\n  isDeleting,\n  rowSelect,\n  setHoverIndex,\n  hoverIndex,\n  selectedItems,\n  setSelectedItems,\n  minRows = 10\n}) {\n  // const [selectedItems, setSelectedItems] = useState([]);\n  const {\n    0: longPressName,\n    1: setLongPressName\n  } = useState(null);\n  const {\n    0: isMobile,\n    1: setIsMobile\n  } = useState(false);\n  const pressTimerRef = useRef(null);\n  const longPressTriggeredRef = useRef(false);\n  useEffect(() => {\n    if (true) return undefined;\n    const media = window.matchMedia(\"(max-width: 640px)\");\n\n    const update = () => setIsMobile(media.matches);\n\n    update();\n\n    if (media.addEventListener) {\n      media.addEventListener(\"change\", update);\n      return () => media.removeEventListener(\"change\", update);\n    }\n\n    media.addListener(update);\n    return () => media.removeListener(update);\n  }, []); // Toggle selection of items\n\n  const handleSelectItem = id => {\n    setSelectedItems(prevSelectedItems => prevSelectedItems.includes(id) ? prevSelectedItems.filter(itemId => itemId !== id) : [...prevSelectedItems, id]);\n  }; // Handle delete button click for selected items\n\n\n  const handleDeleteSelected = () => {\n    if (selectedItems.length > 0) {\n      checkDelete(null, null, selectedItems, \"selected items\");\n    }\n  };\n\n  const startLongPress = name => () => {\n    if (!isMobile) return;\n\n    if (pressTimerRef.current) {\n      clearTimeout(pressTimerRef.current);\n    }\n\n    pressTimerRef.current = setTimeout(() => {\n      longPressTriggeredRef.current = true;\n      setLongPressName(name);\n    }, 450);\n  };\n\n  const cancelLongPress = () => {\n    if (pressTimerRef.current) {\n      clearTimeout(pressTimerRef.current);\n      pressTimerRef.current = null;\n    }\n  };\n\n  const dismissLongPress = () => {\n    longPressTriggeredRef.current = false;\n    setLongPressName(null);\n  };\n\n  const paddingCount = Math.max(0, minRows - info.length);\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: styles.scrollableTable,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, __jsx(Table, {\n    striped: true,\n    bordered: true,\n    hover: true,\n    size: \"sm\",\n    className: `mb-0 ${styles.fixedTable}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, __jsx(\"thead\", {\n    className: styles.stickyHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }, __jsx(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, labels.map((item, index) => __jsx(\"th\", {\n    style: hoverStyle(index),\n    onMouseOver: () => setHoverIndex(index),\n    onMouseOut: () => setHoverIndex(null),\n    onClick: () => sortCheckAll(index),\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, item)), __jsx(\"th\", {\n    className: styles.actionCol,\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 15\n    }\n  }, selectedItems.length > 0 ? __jsx(Button, {\n    variant: \"danger\",\n    onClick: handleDeleteSelected,\n    disabled: isDeleting,\n    size: \"sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 19\n    }\n  }, \"Delete Selected (\", selectedItems.length, \")\") : \"select\"))), __jsx(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, info.map((item, index) => __jsx(\"tr\", {\n    key: index,\n    onClick: e => {\n      if (longPressTriggeredRef.current) {\n        longPressTriggeredRef.current = false;\n        return;\n      } // Only trigger rowSelect if the target is not a checkbox\n\n\n      if (e.target.type !== \"checkbox\") {\n        rowSelect(item);\n      }\n    },\n    onTouchStart: startLongPress(item.name),\n    onTouchEnd: cancelLongPress,\n    onTouchCancel: cancelLongPress,\n    onTouchMove: cancelLongPress,\n    className: \"clickable-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 15\n    }\n  }, __jsx(\"td\", {\n    style: {\n      textAlign: \"center\",\n      cursor: \"default\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: styles.cellClamp,\n    title: item.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 19\n    }\n  }, item.name)), __jsx(\"td\", {\n    style: {\n      textAlign: \"center\",\n      cursor: \"default\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: styles.cellClamp,\n    title: formatDate(item.date),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 19\n    }\n  }, formatDate(item.date))), __jsx(\"td\", {\n    style: {\n      textAlign: \"center\",\n      cursor: \"default\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: styles.cellClamp,\n    title: item.workOrders && item.workOrders.length > 0 ? item.workOrders[item.workOrders.length - 1].workOrder : \"N/A\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 19\n    }\n  }, item.workOrders && item.workOrders.length > 0 ? item.workOrders[item.workOrders.length - 1].workOrder : \"N/A\")), __jsx(\"td\", {\n    style: {\n      textAlign: \"center\",\n      cursor: \"default\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: styles.cellClamp,\n    title: item.pn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 19\n    }\n  }, item.pn)), __jsx(\"td\", {\n    style: {\n      textAlign: \"center\",\n      cursor: \"default\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: styles.cellClamp,\n    title: item.sn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 19\n    }\n  }, item.sn)), __jsx(\"td\", {\n    className: styles.actionCol,\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }\n  }, __jsx(Form.Check, {\n    type: \"checkbox\",\n    checked: selectedItems.includes(item.id),\n    onChange: e => {\n      e.stopPropagation(); // Prevent row click when checkbox is clicked\n      // Toggle selection using item.id directly\n\n      setSelectedItems(prevSelectedItems => prevSelectedItems.includes(item.id) ? prevSelectedItems.filter(id => id !== item.id) : [...prevSelectedItems, item.id]);\n    },\n    \"aria-label\": `Select ${item.name}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 19\n    }\n  })))), paddingCount > 0 && Array.from({\n    length: paddingCount\n  }).map((_, index) => __jsx(\"tr\", {\n    key: `empty-${index}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 17\n    }\n  }, __jsx(\"td\", {\n    colSpan: labels.length + 1,\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 19\n    }\n  }, \"\\xA0\")))))), isMobile && longPressName && __jsx(\"div\", {\n    className: styles.longPressOverlay,\n    onClick: dismissLongPress,\n    role: \"button\",\n    tabIndex: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: styles.longPressCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 11\n    }\n  }, longPressName)));\n}","map":{"version":3,"sources":["C:/Users/mack2/Desktop/code/utils/PartTable.js"],"names":["React","useState","useEffect","useRef","Table","Button","Form","formatDate","styles","PartTable","info","labels","ids","hoverStyle","sortCheckAll","checkDelete","isDeleting","rowSelect","setHoverIndex","hoverIndex","selectedItems","setSelectedItems","minRows","longPressName","setLongPressName","isMobile","setIsMobile","pressTimerRef","longPressTriggeredRef","undefined","media","window","matchMedia","update","matches","addEventListener","removeEventListener","addListener","removeListener","handleSelectItem","id","prevSelectedItems","includes","filter","itemId","handleDeleteSelected","length","startLongPress","name","current","clearTimeout","setTimeout","cancelLongPress","dismissLongPress","paddingCount","Math","max","scrollableTable","fixedTable","stickyHeader","map","item","index","actionCol","textAlign","e","target","type","cursor","cellClamp","date","workOrders","workOrder","pn","sn","stopPropagation","Array","from","_","longPressOverlay","longPressCard"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { Table, Button, Form } from \"react-bootstrap\";\nimport { formatDate } from \"./fetchAssociations\";\nimport styles from \"../styles/PartTable.module.css\";\n\n\nexport default function PartTable({\n  info,\n  labels,\n  ids,\n  hoverStyle,\n  sortCheckAll,\n  checkDelete,\n  isDeleting,\n  rowSelect,\n  setHoverIndex,\n  hoverIndex,\n  selectedItems,\n  setSelectedItems,\n  minRows = 10,\n}) {\n  // const [selectedItems, setSelectedItems] = useState([]);\n  const [longPressName, setLongPressName] = useState(null);\n  const [isMobile, setIsMobile] = useState(false);\n  const pressTimerRef = useRef(null);\n  const longPressTriggeredRef = useRef(false);\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") return undefined;\n    const media = window.matchMedia(\"(max-width: 640px)\");\n    const update = () => setIsMobile(media.matches);\n    update();\n    if (media.addEventListener) {\n      media.addEventListener(\"change\", update);\n      return () => media.removeEventListener(\"change\", update);\n    }\n    media.addListener(update);\n    return () => media.removeListener(update);\n  }, []);\n\n  // Toggle selection of items\n  const handleSelectItem = (id) => {\n    setSelectedItems((prevSelectedItems) =>\n      prevSelectedItems.includes(id)\n        ? prevSelectedItems.filter((itemId) => itemId !== id)\n        : [...prevSelectedItems, id]\n    );\n  };\n\n  // Handle delete button click for selected items\n  const handleDeleteSelected = () => {\n    if (selectedItems.length > 0) {\n      checkDelete(null, null, selectedItems, \"selected items\");\n    }\n  };\n\n  const startLongPress = (name) => () => {\n    if (!isMobile) return;\n    if (pressTimerRef.current) {\n      clearTimeout(pressTimerRef.current);\n    }\n    pressTimerRef.current = setTimeout(() => {\n      longPressTriggeredRef.current = true;\n      setLongPressName(name);\n    }, 450);\n  };\n\n  const cancelLongPress = () => {\n    if (pressTimerRef.current) {\n      clearTimeout(pressTimerRef.current);\n      pressTimerRef.current = null;\n    }\n  };\n\n  const dismissLongPress = () => {\n    longPressTriggeredRef.current = false;\n    setLongPressName(null);\n  };\n\n  const paddingCount = Math.max(0, minRows - info.length);\n\n  return (\n    <>\n      <div className={styles.scrollableTable}>\n        <Table\n          striped\n          bordered\n          hover\n          size=\"sm\"\n          className={`mb-0 ${styles.fixedTable}`}\n        >\n          <thead className={styles.stickyHeader}>\n            <tr>\n              {labels.map((item, index) => (\n                <th\n                  style={hoverStyle(index)}\n                  onMouseOver={() => setHoverIndex(index)}\n                  onMouseOut={() => setHoverIndex(null)}\n                  onClick={() => sortCheckAll(index)}\n                  key={index}\n                >\n                  {item}\n                </th>\n              ))}\n              <th className={styles.actionCol} style={{ textAlign: \"center\" }}>\n                {selectedItems.length > 0 ? (\n                  <Button\n                    variant=\"danger\"\n                    onClick={handleDeleteSelected}\n                    disabled={isDeleting}\n                    size=\"sm\"\n                  >\n                    Delete Selected ({selectedItems.length})\n                  </Button>\n                ) : (\n                  \"select\"\n                )}\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {info.map((item, index) => (\n              <tr\n                key={index}\n                onClick={(e) => {\n                  if (longPressTriggeredRef.current) {\n                    longPressTriggeredRef.current = false;\n                    return;\n                  }\n                  // Only trigger rowSelect if the target is not a checkbox\n                  if (e.target.type !== \"checkbox\") {\n                    rowSelect(item);\n                  }\n                }}\n                onTouchStart={startLongPress(item.name)}\n                onTouchEnd={cancelLongPress}\n                onTouchCancel={cancelLongPress}\n                onTouchMove={cancelLongPress}\n                className=\"clickable-row\"\n              >\n                <td style={{ textAlign: \"center\", cursor: \"default\" }}>\n                  <div className={styles.cellClamp} title={item.name}>\n                    {item.name}\n                  </div>\n                </td>\n                <td style={{ textAlign: \"center\", cursor: \"default\" }}>\n                  <div className={styles.cellClamp} title={formatDate(item.date)}>\n                    {formatDate(item.date)}\n                  </div>\n                </td>\n                <td style={{ textAlign: \"center\", cursor: \"default\" }}>\n                  <div\n                    className={styles.cellClamp}\n                    title={\n                      item.workOrders && item.workOrders.length > 0\n                        ? item.workOrders[item.workOrders.length - 1].workOrder\n                        : \"N/A\"\n                    }\n                  >\n                    {item.workOrders && item.workOrders.length > 0\n                      ? item.workOrders[item.workOrders.length - 1].workOrder\n                      : \"N/A\"}\n                  </div>\n                </td>\n                <td style={{ textAlign: \"center\", cursor: \"default\" }}>\n                  <div className={styles.cellClamp} title={item.pn}>\n                    {item.pn}\n                  </div>\n                </td>\n                <td style={{ textAlign: \"center\", cursor: \"default\" }}>\n                  <div className={styles.cellClamp} title={item.sn}>\n                    {item.sn}\n                  </div>\n                </td>\n                <td className={styles.actionCol} style={{ textAlign: \"center\" }}>\n                  <Form.Check\n                    type=\"checkbox\"\n                    checked={selectedItems.includes(item.id)}\n                    onChange={(e) => {\n                      e.stopPropagation(); // Prevent row click when checkbox is clicked\n                      // Toggle selection using item.id directly\n                      setSelectedItems((prevSelectedItems) =>\n                        prevSelectedItems.includes(item.id)\n                          ? prevSelectedItems.filter((id) => id !== item.id)\n                          : [...prevSelectedItems, item.id]\n                      );\n                    }}\n                    aria-label={`Select ${item.name}`}\n                  />\n                </td>\n              </tr>\n            ))}\n            {paddingCount > 0 &&\n              Array.from({ length: paddingCount }).map((_, index) => (\n                <tr key={`empty-${index}`}>\n                  <td colSpan={labels.length + 1} style={{ textAlign: \"center\" }}>\n                    &nbsp;\n                  </td>\n                </tr>\n              ))}\n          </tbody>\n        </Table>\n      </div>\n      {isMobile && longPressName && (\n        <div\n          className={styles.longPressOverlay}\n          onClick={dismissLongPress}\n          role=\"button\"\n          tabIndex={0}\n        >\n          <div className={styles.longPressCard}>{longPressName}</div>\n        </div>\n      )}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}