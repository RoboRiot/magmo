{"ast":null,"code":"// // pages/api/slack/add-to-list.js\n// export default async function handler(req, res) {\n//   try {\n//     if (req.method !== \"POST\") {\n//       return res.status(405).json({ ok: false, error: \"method_not_allowed\" });\n//     }\n//     const token = process.env.SLACK_BOT_TOKEN;\n//     if (!token) {\n//       return res.status(500).json({ ok: false, error: \"missing_SLACK_BOT_TOKEN\" });\n//     }\n//     // payload from client\n//     const {\n//       listKey,             // \"tasks\" | \"shipping\" | \"receiving\"\n//       title,               // item title (what shows in the primary column)\n//       // keeping minimal per your request: PN/SN only for now\n//       pn, sn,\n//     } = req.body || {};\n//     // list ids from env\n//     const LIST_IDS = {\n//       tasks: process.env.SLACK_LIST_TASKS_ID,\n//       shipping: process.env.SLACK_LIST_SHIPPING_ID,\n//       receiving: process.env.SLACK_LIST_RECEIVING_ID,\n//     };\n//     const list_id = LIST_IDS[listKey];\n//     if (!list_id) {\n//       return res.status(400).json({ ok: false, error: `unknown_listKey_${listKey}` });\n//     }\n//     // ---- Slack helpers ----\n//     async function slackJson(method, payload) {\n//       const r = await fetch(`https://slack.com/api/${method}`, {\n//         method: \"POST\",\n//         headers: {\n//           Authorization: `Bearer ${token}`,\n//           \"Content-Type\": \"application/json; charset=utf-8\",\n//         },\n//         body: JSON.stringify(payload),\n//       });\n//       return r.json();\n//     }\n//     const plain = (v) => (v ?? \"\").toString().trim();\n//     const joinArr = (a) => Array.isArray(a) ? a.filter(Boolean).map(plain).join(\", \") : plain(a);\n//     function toRichText(text) {\n//       const t = plain(text);\n//       return [{\n//         type: \"rich_text\",\n//         elements: [{\n//           type: \"rich_text_section\",\n//           elements: [{ type: \"text\", text: t }],\n//         }],\n//       }];\n//     }\n//     // Try to resolve primary/text column id (\"Item\"/\"Task\") by scanning existing rows\n//     async function resolveTitleColId(listId) {\n//       const probe = await slackJson(\"slackLists.items.list\", { list_id: listId, limit: 50 });\n//       if (!probe?.ok) return null;\n//       // Heuristics: prefer a text field whose key looks like 'item' or 'task'\n//       let fallback = null;\n//       for (const it of probe.items || []) {\n//         for (const f of it.fields || []) {\n//           const key = (f.key || \"\").toLowerCase();\n//           const hasText = !!f.text || Array.isArray(f.rich_text);\n//           if (f.column_id && hasText) {\n//             if (key.includes(\"item\") || key.includes(\"task\")) return f.column_id;\n//             if (!fallback) fallback = f.column_id;\n//           }\n//         }\n//       }\n//       return fallback; // first text-like field if we didn't find a perfect match\n//     }\n//     // Find the PN/SN column id by scanning for a field with key or text like \"PN\" / \"SN\"\n//     async function resolvePnSnColId(listId) {\n//       const probe = await slackJson(\"slackLists.items.list\", { list_id: listId, limit: 100 });\n//       if (!probe?.ok) return null;\n//       let candidate = null;\n//       for (const it of probe.items || []) {\n//         for (const f of it.fields || []) {\n//           if (!f.column_id) continue;\n//           const key = (f.key || \"\").toLowerCase();\n//           const text = (f.text || \"\").toLowerCase();\n//           const looksPnSn =\n//             key.includes(\"pn\") || key.includes(\"sn\") ||\n//             text.includes(\"pn:\") || text.includes(\"sn:\");\n//           if (looksPnSn) return f.column_id;\n//           if (!candidate && (key.includes(\"part\") || key.includes(\"serial\"))) {\n//             candidate = f.column_id;\n//           }\n//         }\n//       }\n//       return candidate;\n//     }\n//     // 1) Resolve columns\n//     const titleColId = await resolveTitleColId(list_id);\n//     if (!titleColId) {\n//       return res.status(400).json({ ok: false, error: \"could_not_resolve_title_column\" });\n//     }\n//     // 2) Create the item with the title in the title column (must use initial_fields with a real column_id)\n//     const safeTitle = plain(title) || \"New Item\";\n//     const createBody = {\n//       list_id,\n//       initial_fields: [{ column_id: titleColId, rich_text: toRichText(safeTitle) }],\n//     };\n//     const created = await slackJson(\"slackLists.items.create\", createBody);\n//     if (!created?.ok) {\n//       return res.status(200).json({\n//         ok: false,\n//         error: created?.error || \"create_failed\",\n//         mode: \"list\",\n//         sent: createBody,\n//       });\n//     }\n//     // 3) (Minimal) update: PN/SN only, per your request\n//     const pn0 = Array.isArray(pn) ? pn[0] : pn;\n//     const sn0 = Array.isArray(sn) ? sn[0] : sn;\n//     const pnPart = plain(pn0) ? `PN: ${plain(pn0)}` : \"\";\n//     const snPart = plain(sn0) ? `SN: ${plain(sn0)}` : \"\";\n//     const pnSnText = [pnPart, snPart].filter(Boolean).join(\"  \");\n//     let updated = null;\n//     let usedPnSnCol = null;\n//     if (pnSnText) {\n//       const pnSnColId = await resolvePnSnColId(list_id);\n//       if (pnSnColId) {\n//         const cells = [{\n//           row_id: created.item.id,\n//           column_id: pnSnColId,\n//           rich_text: toRichText(pnSnText),\n//         }];\n//         updated = await slackJson(\"slackLists.items.update\", { list_id, cells });\n//         usedPnSnCol = pnSnColId;\n//         // If update fails, we still return ok:false so you can see the error\n//         if (!updated?.ok) {\n//           return res.status(200).json({\n//             ok: false,\n//             error: updated?.error || \"update_failed\",\n//             mode: \"list\",\n//             list_id,\n//             item_id: created.item.id,\n//             used_title_col: titleColId,\n//             used_pnsn_col: usedPnSnCol,\n//           });\n//         }\n//       }\n//     }\n//     return res.status(200).json({\n//       ok: true,\n//       mode: \"list\",\n//       list_id,\n//       item_id: created.item.id,\n//       used_title_col: titleColId,\n//       used_pnsn_col: usedPnSnCol || null,\n//       sent_title: safeTitle,\n//     });\n//   } catch (err) {\n//     console.error(\"API /slack/add-to-list crashed:\", err);\n//     return res.status(500).json({ ok: false, error: \"exception\", message: err?.message || String(err) });\n//   }\n// }\n// pages/api/slack/add-to-list.js\nexport default async function handler(req, res) {\n  try {\n    var _created, _created2, _created3;\n\n    if (req.method !== \"POST\") {\n      return res.status(405).json({\n        ok: false,\n        error: \"method_not_allowed\"\n      });\n    }\n\n    const token = process.env.SLACK_BOT_TOKEN;\n\n    if (!token) {\n      return res.status(500).json({\n        ok: false,\n        error: \"missing_SLACK_BOT_TOKEN\"\n      });\n    }\n\n    const {\n      listKey,\n      // \"shipping\" | \"receiving\" | \"tasks\"\n      title,\n      // string\n      pn,\n      sn,\n      // strings\n      workOrder,\n      // string\n      localSN,\n      // string (your item ID)\n      description,\n      // string\n      photoUrls = [],\n      // string[]\n      tracking,\n      // string (optional, supported via *_TRACKING_COL)\n      linkUrl // optional text column if you add one\n      // shippingDate intentionally omitted (you asked to keep blank)\n\n    } = req.body || {}; // Helpers to safely read/clean envs\n\n    const clean = s => (s !== null && s !== void 0 ? s : \"\").trim() || undefined;\n\n    const get = k => clean(process.env[k]);\n\n    const anyOf = (...keys) => {\n      for (const k of keys) {\n        const v = get(k);\n        if (v) return v;\n      }\n\n      return undefined;\n    }; // Build per-list config; every value is trimmed\n\n\n    const CFG = {\n      tasks: {\n        list_id: get(\"SLACK_LIST_TASKS_ID\"),\n        title_col: get(\"SLACK_LIST_TASKS_TITLE_COL\"),\n        pnsn_col: get(\"SLACK_LIST_TASKS_PNSN_COL\"),\n        wo_col: anyOf(\"SLACK_LIST_TASKS_WORKORDER_COL\", \"SLACK_LIST_TASKS_WO_COL\"),\n        localsn_col: get(\"SLACK_LIST_TASKS_LOCALSN_COL\"),\n        desc_col: anyOf(\"SLACK_LIST_TASKS_DESCRIPTION_COL\", \"SLACK_LIST_TASKS_DESC_COL\"),\n        photos_col: get(\"SLACK_LIST_TASKS_PHOTOS_COL\"),\n        tracking_col: get(\"SLACK_LIST_TASKS_TRACKING_COL\"),\n        link_col: get(\"SLACK_LIST_TASKS_LINK_COL\")\n      },\n      shipping: {\n        list_id: get(\"SLACK_LIST_SHIPPING_ID\"),\n        title_col: get(\"SLACK_LIST_SHIPPING_TITLE_COL\"),\n        pnsn_col: get(\"SLACK_LIST_SHIPPING_PNSN_COL\"),\n        wo_col: anyOf(\"SLACK_LIST_SHIPPING_WORKORDER_COL\", \"SLACK_LIST_SHIPPING_WO_COL\"),\n        localsn_col: get(\"SLACK_LIST_SHIPPING_LOCALSN_COL\"),\n        desc_col: anyOf(\"SLACK_LIST_SHIPPING_DESCRIPTION_COL\", \"SLACK_LIST_SHIPPING_DESC_COL\"),\n        photos_col: get(\"SLACK_LIST_SHIPPING_PHOTOS_COL\"),\n        tracking_col: get(\"SLACK_LIST_SHIPPING_TRACKING_COL\"),\n        link_col: get(\"SLACK_LIST_SHIPPING_LINK_COL\")\n      },\n      receiving: {\n        list_id: get(\"SLACK_LIST_RECEIVING_ID\"),\n        title_col: get(\"SLACK_LIST_RECEIVING_TITLE_COL\"),\n        pnsn_col: get(\"SLACK_LIST_RECEIVING_PNSN_COL\"),\n        wo_col: anyOf(\"SLACK_LIST_RECEIVING_WORKORDER_COL\", \"SLACK_LIST_RECEIVING_WO_COL\"),\n        localsn_col: get(\"SLACK_LIST_RECEIVING_LOCALSN_COL\"),\n        desc_col: anyOf(\"SLACK_LIST_RECEIVING_DESCRIPTION_COL\", \"SLACK_LIST_RECEIVING_DESC_COL\"),\n        photos_col: get(\"SLACK_LIST_RECEIVING_PHOTOS_COL\"),\n        tracking_col: get(\"SLACK_LIST_RECEIVING_TRACKING_COL\"),\n        link_col: get(\"SLACK_LIST_RECEIVING_LINK_COL\")\n      }\n    }[listKey || \"\"];\n    if (!(CFG !== null && CFG !== void 0 && CFG.list_id)) return res.status(400).json({\n      ok: false,\n      error: `unknown_listKey_${listKey}`\n    });\n\n    if (!CFG.title_col) {\n      return res.status(400).json({\n        ok: false,\n        error: \"missing_title_column_in_env\",\n        fix: `Set SLACK_LIST_${(listKey || \"\").toUpperCase()}_TITLE_COL in .env.local`\n      });\n    } // Slack helpers\n\n\n    async function slackJson(method, payload) {\n      const r = await fetch(`https://slack.com/api/${method}`, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json; charset=utf-8\"\n        },\n        body: JSON.stringify(payload)\n      });\n      return r.json();\n    }\n\n    const plain = v => (v !== null && v !== void 0 ? v : \"\").toString().trim();\n\n    const toRichText = text => [{\n      type: \"rich_text\",\n      elements: [{\n        type: \"rich_text_section\",\n        elements: [{\n          type: \"text\",\n          text: plain(text)\n        }]\n      }]\n    }];\n\n    async function setTextCell(list_id, row_id, column_id, value) {\n      var _r, _r2, _r3;\n\n      const val = plain(value);\n      if (!val || !column_id) return {\n        ok: true,\n        skipped: true\n      };\n      let r = await slackJson(\"slackLists.items.update\", {\n        list_id,\n        cells: [{\n          row_id,\n          column_id,\n          rich_text: toRichText(val)\n        }]\n      });\n      if ((_r = r) !== null && _r !== void 0 && _r.ok) return r;\n\n      if (((_r2 = r) === null || _r2 === void 0 ? void 0 : _r2.error) === \"invalid_arguments\" || ((_r3 = r) === null || _r3 === void 0 ? void 0 : _r3.error) === \"invalid_input_type\") {\n        r = await slackJson(\"slackLists.items.update\", {\n          list_id,\n          cells: [{\n            row_id,\n            column_id,\n            text: val\n          }]\n        });\n      }\n\n      return r;\n    }\n\n    async function setFilesCell(list_id, row_id, column_id, urls = []) {\n      var _r4, _r5, _r6;\n\n      if (!column_id || !Array.isArray(urls) || urls.length === 0) {\n        return {\n          ok: true,\n          skipped: true\n        };\n      }\n\n      const ids = [];\n\n      for (let i = 0; i < urls.length; i++) {\n        var _add$file;\n\n        const url = plain(urls[i]);\n        if (!url) continue;\n        const add = await slackJson(\"files.remote.add\", {\n          external_url: url,\n          title: `Photo ${i + 1}`\n        });\n        if (add !== null && add !== void 0 && add.ok && add !== null && add !== void 0 && (_add$file = add.file) !== null && _add$file !== void 0 && _add$file.id) ids.push(add.file.id);\n      }\n\n      if (ids.length === 0) return {\n        ok: true,\n        skipped: true\n      }; // Try objects form\n\n      let r = await slackJson(\"slackLists.items.update\", {\n        list_id,\n        cells: [{\n          row_id,\n          column_id,\n          files: ids.map(id => ({\n            id\n          }))\n        }]\n      });\n      if ((_r4 = r) !== null && _r4 !== void 0 && _r4.ok) return r;\n\n      if (((_r5 = r) === null || _r5 === void 0 ? void 0 : _r5.error) === \"invalid_arguments\" || ((_r6 = r) === null || _r6 === void 0 ? void 0 : _r6.error) === \"invalid_input_type\") {\n        // Try raw IDs\n        r = await slackJson(\"slackLists.items.update\", {\n          list_id,\n          cells: [{\n            row_id,\n            column_id,\n            file_ids: ids\n          }]\n        });\n      }\n\n      return r;\n    } // 1) Create the row with Title\n\n\n    const safeTitle = plain(title) || \"New Item\";\n    let created = await slackJson(\"slackLists.items.create\", {\n      list_id: CFG.list_id,\n      initial_fields: [{\n        column_id: CFG.title_col,\n        rich_text: toRichText(safeTitle)\n      }]\n    });\n\n    if (!((_created = created) !== null && _created !== void 0 && _created.ok) && ((_created2 = created) === null || _created2 === void 0 ? void 0 : _created2.error) === \"invalid_arguments\") {\n      created = await slackJson(\"slackLists.items.create\", {\n        list_id: CFG.list_id,\n        initial_fields: [{\n          column_id: CFG.title_col,\n          text: safeTitle\n        }]\n      });\n    }\n\n    if (!((_created3 = created) !== null && _created3 !== void 0 && _created3.ok)) {\n      var _created4;\n\n      return res.status(200).json({\n        ok: false,\n        error: ((_created4 = created) === null || _created4 === void 0 ? void 0 : _created4.error) || \"create_failed\",\n        list_id: CFG.list_id,\n        title_col: CFG.title_col,\n        sent_title: safeTitle\n      });\n    }\n\n    const rowId = created.item.id; // 2) PN/SN\n\n    if (CFG.pnsn_col) {\n      const pnPart = pn ? `PN: ${plain(pn)}` : \"\";\n      const snPart = sn ? `SN: ${plain(sn)}` : \"\";\n      const pnSnText = [pnPart, snPart].filter(Boolean).join(\"  \");\n\n      if (pnSnText) {\n        const r = await setTextCell(CFG.list_id, rowId, CFG.pnsn_col, pnSnText);\n        if (!(r !== null && r !== void 0 && r.ok)) return res.status(200).json({\n          ok: false,\n          error: (r === null || r === void 0 ? void 0 : r.error) || \"update_failed_pnsn\",\n          list_id: CFG.list_id,\n          item_id: rowId,\n          used_pnsn_col: CFG.pnsn_col\n        });\n      }\n    } // 3) Work Order (supports *_WORKORDER_COL or *_WO_COL)\n\n\n    if (CFG.wo_col && workOrder) {\n      const r = await setTextCell(CFG.list_id, rowId, CFG.wo_col, workOrder);\n      if (!(r !== null && r !== void 0 && r.ok)) return res.status(200).json({\n        ok: false,\n        error: (r === null || r === void 0 ? void 0 : r.error) || \"update_failed_workorder\",\n        list_id: CFG.list_id,\n        item_id: rowId,\n        used_workorder_col: CFG.wo_col\n      });\n    } // 4) LocalSN (ID)\n\n\n    if (CFG.localsn_col && localSN) {\n      const r = await setTextCell(CFG.list_id, rowId, CFG.localsn_col, localSN);\n      if (!(r !== null && r !== void 0 && r.ok)) return res.status(200).json({\n        ok: false,\n        error: (r === null || r === void 0 ? void 0 : r.error) || \"update_failed_localsn\",\n        list_id: CFG.list_id,\n        item_id: rowId,\n        used_localsn_col: CFG.localsn_col\n      });\n    } // 5) Description (supports *_DESCRIPTION_COL and *_DESC_COL)\n\n\n    if (CFG.desc_col && description) {\n      const r = await setTextCell(CFG.list_id, rowId, CFG.desc_col, description);\n      if (!(r !== null && r !== void 0 && r.ok)) return res.status(200).json({\n        ok: false,\n        error: (r === null || r === void 0 ? void 0 : r.error) || \"update_failed_description\",\n        list_id: CFG.list_id,\n        item_id: rowId,\n        used_description_col: CFG.desc_col\n      });\n    } // 6) Tracking (optional)\n\n\n    if (CFG.tracking_col && tracking) {\n      const r = await setTextCell(CFG.list_id, rowId, CFG.tracking_col, tracking);\n      if (!(r !== null && r !== void 0 && r.ok)) return res.status(200).json({\n        ok: false,\n        error: (r === null || r === void 0 ? void 0 : r.error) || \"update_failed_tracking\",\n        list_id: CFG.list_id,\n        item_id: rowId,\n        used_tracking_col: CFG.tracking_col\n      });\n    } // 7) Link back (optional)\n\n\n    if (CFG.link_col && linkUrl) {\n      const r = await setTextCell(CFG.list_id, rowId, CFG.link_col, linkUrl);\n      if (!(r !== null && r !== void 0 && r.ok)) return res.status(200).json({\n        ok: false,\n        error: (r === null || r === void 0 ? void 0 : r.error) || \"update_failed_link\",\n        list_id: CFG.list_id,\n        item_id: rowId,\n        used_link_col: CFG.link_col\n      });\n    } // 8) Photos (files column). If Slack rejects, append URLs into Description so nothing is lost.\n\n\n    if (CFG.photos_col && Array.isArray(photoUrls) && photoUrls.length) {\n      const r = await setFilesCell(CFG.list_id, rowId, CFG.photos_col, photoUrls);\n\n      if (!(r !== null && r !== void 0 && r.ok)) {\n        if (CFG.desc_col) {\n          const joined = `Photos:\\n${photoUrls.map(plain).filter(Boolean).join(\"\\n\")}`;\n          await setTextCell(CFG.list_id, rowId, CFG.desc_col, [description, joined].filter(Boolean).join(\"\\n\\n\"));\n        }\n\n        return res.status(200).json({\n          ok: false,\n          error: (r === null || r === void 0 ? void 0 : r.error) || \"invalid_input_type\",\n          list_id: CFG.list_id,\n          item_id: rowId,\n          used_photos_col: CFG.photos_col\n        });\n      }\n    } // Ship date intentionally left blank\n\n\n    return res.status(200).json({\n      ok: true,\n      list_id: CFG.list_id,\n      item_id: rowId,\n      used_cols: {\n        title_col: CFG.title_col,\n        pnsn_col: CFG.pnsn_col || null,\n        workorder_col: CFG.wo_col || null,\n        localsn_col: CFG.localsn_col || null,\n        description_col: CFG.desc_col || null,\n        tracking_col: CFG.tracking_col || null,\n        photos_col: CFG.photos_col || null,\n        link_col: CFG.link_col || null\n      }\n    });\n  } catch (err) {\n    console.error(\"API /slack/add-to-list crashed:\", err);\n    return res.status(500).json({\n      ok: false,\n      error: \"exception\",\n      message: (err === null || err === void 0 ? void 0 : err.message) || String(err)\n    });\n  }\n}","map":{"version":3,"sources":["C:/Users/mack2/Desktop/code/pages/api/slack/add-to-list.js"],"names":["handler","req","res","method","status","json","ok","error","token","process","env","SLACK_BOT_TOKEN","listKey","title","pn","sn","workOrder","localSN","description","photoUrls","tracking","linkUrl","body","clean","s","trim","undefined","get","k","anyOf","keys","v","CFG","tasks","list_id","title_col","pnsn_col","wo_col","localsn_col","desc_col","photos_col","tracking_col","link_col","shipping","receiving","fix","toUpperCase","slackJson","payload","r","fetch","headers","Authorization","JSON","stringify","plain","toString","toRichText","text","type","elements","setTextCell","row_id","column_id","value","val","skipped","cells","rich_text","setFilesCell","urls","Array","isArray","length","ids","i","url","add","external_url","file","id","push","files","map","file_ids","safeTitle","created","initial_fields","sent_title","rowId","item","pnPart","snPart","pnSnText","filter","Boolean","join","item_id","used_pnsn_col","used_workorder_col","used_localsn_col","used_description_col","used_tracking_col","used_link_col","joined","used_photos_col","used_cols","workorder_col","description_col","err","console","message","String"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA,eAAe,eAAeA,OAAf,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;AAC9C,MAAI;AAAA;;AACF,QAAID,GAAG,CAACE,MAAJ,KAAe,MAAnB,EAA2B;AACzB,aAAOD,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,QAAAA,EAAE,EAAE,KAAN;AAAaC,QAAAA,KAAK,EAAE;AAApB,OAArB,CAAP;AACD;;AAED,UAAMC,KAAK,GAAGC,OAAO,CAACC,GAAR,CAAYC,eAA1B;;AACA,QAAI,CAACH,KAAL,EAAY;AACV,aAAON,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,QAAAA,EAAE,EAAE,KAAN;AAAaC,QAAAA,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","sourcesContent":["// // pages/api/slack/add-to-list.js\r\n// export default async function handler(req, res) {\r\n//   try {\r\n//     if (req.method !== \"POST\") {\r\n//       return res.status(405).json({ ok: false, error: \"method_not_allowed\" });\r\n//     }\r\n\r\n//     const token = process.env.SLACK_BOT_TOKEN;\r\n//     if (!token) {\r\n//       return res.status(500).json({ ok: false, error: \"missing_SLACK_BOT_TOKEN\" });\r\n//     }\r\n\r\n//     // payload from client\r\n//     const {\r\n//       listKey,             // \"tasks\" | \"shipping\" | \"receiving\"\r\n//       title,               // item title (what shows in the primary column)\r\n//       // keeping minimal per your request: PN/SN only for now\r\n//       pn, sn,\r\n//     } = req.body || {};\r\n\r\n//     // list ids from env\r\n//     const LIST_IDS = {\r\n//       tasks: process.env.SLACK_LIST_TASKS_ID,\r\n//       shipping: process.env.SLACK_LIST_SHIPPING_ID,\r\n//       receiving: process.env.SLACK_LIST_RECEIVING_ID,\r\n//     };\r\n\r\n//     const list_id = LIST_IDS[listKey];\r\n//     if (!list_id) {\r\n//       return res.status(400).json({ ok: false, error: `unknown_listKey_${listKey}` });\r\n//     }\r\n\r\n//     // ---- Slack helpers ----\r\n//     async function slackJson(method, payload) {\r\n//       const r = await fetch(`https://slack.com/api/${method}`, {\r\n//         method: \"POST\",\r\n//         headers: {\r\n//           Authorization: `Bearer ${token}`,\r\n//           \"Content-Type\": \"application/json; charset=utf-8\",\r\n//         },\r\n//         body: JSON.stringify(payload),\r\n//       });\r\n//       return r.json();\r\n//     }\r\n\r\n//     const plain = (v) => (v ?? \"\").toString().trim();\r\n//     const joinArr = (a) => Array.isArray(a) ? a.filter(Boolean).map(plain).join(\", \") : plain(a);\r\n\r\n//     function toRichText(text) {\r\n//       const t = plain(text);\r\n//       return [{\r\n//         type: \"rich_text\",\r\n//         elements: [{\r\n//           type: \"rich_text_section\",\r\n//           elements: [{ type: \"text\", text: t }],\r\n//         }],\r\n//       }];\r\n//     }\r\n\r\n//     // Try to resolve primary/text column id (\"Item\"/\"Task\") by scanning existing rows\r\n//     async function resolveTitleColId(listId) {\r\n//       const probe = await slackJson(\"slackLists.items.list\", { list_id: listId, limit: 50 });\r\n//       if (!probe?.ok) return null;\r\n\r\n//       // Heuristics: prefer a text field whose key looks like 'item' or 'task'\r\n//       let fallback = null;\r\n//       for (const it of probe.items || []) {\r\n//         for (const f of it.fields || []) {\r\n//           const key = (f.key || \"\").toLowerCase();\r\n//           const hasText = !!f.text || Array.isArray(f.rich_text);\r\n//           if (f.column_id && hasText) {\r\n//             if (key.includes(\"item\") || key.includes(\"task\")) return f.column_id;\r\n//             if (!fallback) fallback = f.column_id;\r\n//           }\r\n//         }\r\n//       }\r\n//       return fallback; // first text-like field if we didn't find a perfect match\r\n//     }\r\n\r\n//     // Find the PN/SN column id by scanning for a field with key or text like \"PN\" / \"SN\"\r\n//     async function resolvePnSnColId(listId) {\r\n//       const probe = await slackJson(\"slackLists.items.list\", { list_id: listId, limit: 100 });\r\n//       if (!probe?.ok) return null;\r\n\r\n//       let candidate = null;\r\n//       for (const it of probe.items || []) {\r\n//         for (const f of it.fields || []) {\r\n//           if (!f.column_id) continue;\r\n//           const key = (f.key || \"\").toLowerCase();\r\n//           const text = (f.text || \"\").toLowerCase();\r\n\r\n//           const looksPnSn =\r\n//             key.includes(\"pn\") || key.includes(\"sn\") ||\r\n//             text.includes(\"pn:\") || text.includes(\"sn:\");\r\n\r\n//           if (looksPnSn) return f.column_id;\r\n//           if (!candidate && (key.includes(\"part\") || key.includes(\"serial\"))) {\r\n//             candidate = f.column_id;\r\n//           }\r\n//         }\r\n//       }\r\n//       return candidate;\r\n//     }\r\n\r\n//     // 1) Resolve columns\r\n//     const titleColId = await resolveTitleColId(list_id);\r\n//     if (!titleColId) {\r\n//       return res.status(400).json({ ok: false, error: \"could_not_resolve_title_column\" });\r\n//     }\r\n\r\n//     // 2) Create the item with the title in the title column (must use initial_fields with a real column_id)\r\n//     const safeTitle = plain(title) || \"New Item\";\r\n//     const createBody = {\r\n//       list_id,\r\n//       initial_fields: [{ column_id: titleColId, rich_text: toRichText(safeTitle) }],\r\n//     };\r\n\r\n//     const created = await slackJson(\"slackLists.items.create\", createBody);\r\n//     if (!created?.ok) {\r\n//       return res.status(200).json({\r\n//         ok: false,\r\n//         error: created?.error || \"create_failed\",\r\n//         mode: \"list\",\r\n//         sent: createBody,\r\n//       });\r\n//     }\r\n\r\n//     // 3) (Minimal) update: PN/SN only, per your request\r\n//     const pn0 = Array.isArray(pn) ? pn[0] : pn;\r\n//     const sn0 = Array.isArray(sn) ? sn[0] : sn;\r\n//     const pnPart = plain(pn0) ? `PN: ${plain(pn0)}` : \"\";\r\n//     const snPart = plain(sn0) ? `SN: ${plain(sn0)}` : \"\";\r\n//     const pnSnText = [pnPart, snPart].filter(Boolean).join(\"  \");\r\n\r\n//     let updated = null;\r\n//     let usedPnSnCol = null;\r\n\r\n//     if (pnSnText) {\r\n//       const pnSnColId = await resolvePnSnColId(list_id);\r\n//       if (pnSnColId) {\r\n//         const cells = [{\r\n//           row_id: created.item.id,\r\n//           column_id: pnSnColId,\r\n//           rich_text: toRichText(pnSnText),\r\n//         }];\r\n\r\n//         updated = await slackJson(\"slackLists.items.update\", { list_id, cells });\r\n//         usedPnSnCol = pnSnColId;\r\n//         // If update fails, we still return ok:false so you can see the error\r\n//         if (!updated?.ok) {\r\n//           return res.status(200).json({\r\n//             ok: false,\r\n//             error: updated?.error || \"update_failed\",\r\n//             mode: \"list\",\r\n//             list_id,\r\n//             item_id: created.item.id,\r\n//             used_title_col: titleColId,\r\n//             used_pnsn_col: usedPnSnCol,\r\n//           });\r\n//         }\r\n//       }\r\n//     }\r\n\r\n//     return res.status(200).json({\r\n//       ok: true,\r\n//       mode: \"list\",\r\n//       list_id,\r\n//       item_id: created.item.id,\r\n//       used_title_col: titleColId,\r\n//       used_pnsn_col: usedPnSnCol || null,\r\n//       sent_title: safeTitle,\r\n//     });\r\n//   } catch (err) {\r\n//     console.error(\"API /slack/add-to-list crashed:\", err);\r\n//     return res.status(500).json({ ok: false, error: \"exception\", message: err?.message || String(err) });\r\n//   }\r\n// }\r\n\r\n// pages/api/slack/add-to-list.js\r\nexport default async function handler(req, res) {\r\n  try {\r\n    if (req.method !== \"POST\") {\r\n      return res.status(405).json({ ok: false, error: \"method_not_allowed\" });\r\n    }\r\n\r\n    const token = process.env.SLACK_BOT_TOKEN;\r\n    if (!token) {\r\n      return res.status(500).json({ ok: false, error: \"missing_SLACK_BOT_TOKEN\" });\r\n    }\r\n\r\n    const {\r\n      listKey,        // \"shipping\" | \"receiving\" | \"tasks\"\r\n      title,          // string\r\n      pn, sn,         // strings\r\n      workOrder,      // string\r\n      localSN,        // string (your item ID)\r\n      description,    // string\r\n      photoUrls = [], // string[]\r\n      tracking,       // string (optional, supported via *_TRACKING_COL)\r\n      linkUrl,        // optional text column if you add one\r\n      // shippingDate intentionally omitted (you asked to keep blank)\r\n    } = req.body || {};\r\n\r\n    // Helpers to safely read/clean envs\r\n    const clean = (s) => (s ?? \"\").trim() || undefined;\r\n    const get = (k) => clean(process.env[k]);\r\n    const anyOf = (...keys) => {\r\n      for (const k of keys) {\r\n        const v = get(k);\r\n        if (v) return v;\r\n      }\r\n      return undefined;\r\n    };\r\n\r\n    // Build per-list config; every value is trimmed\r\n    const CFG = ({\r\n      tasks: {\r\n        list_id:   get(\"SLACK_LIST_TASKS_ID\"),\r\n        title_col: get(\"SLACK_LIST_TASKS_TITLE_COL\"),\r\n        pnsn_col:  get(\"SLACK_LIST_TASKS_PNSN_COL\"),\r\n        wo_col:    anyOf(\"SLACK_LIST_TASKS_WORKORDER_COL\", \"SLACK_LIST_TASKS_WO_COL\"),\r\n        localsn_col: get(\"SLACK_LIST_TASKS_LOCALSN_COL\"),\r\n        desc_col:    anyOf(\"SLACK_LIST_TASKS_DESCRIPTION_COL\", \"SLACK_LIST_TASKS_DESC_COL\"),\r\n        photos_col:  get(\"SLACK_LIST_TASKS_PHOTOS_COL\"),\r\n        tracking_col:get(\"SLACK_LIST_TASKS_TRACKING_COL\"),\r\n        link_col:    get(\"SLACK_LIST_TASKS_LINK_COL\"),\r\n      },\r\n      shipping: {\r\n        list_id:   get(\"SLACK_LIST_SHIPPING_ID\"),\r\n        title_col: get(\"SLACK_LIST_SHIPPING_TITLE_COL\"),\r\n        pnsn_col:  get(\"SLACK_LIST_SHIPPING_PNSN_COL\"),\r\n        wo_col:    anyOf(\"SLACK_LIST_SHIPPING_WORKORDER_COL\", \"SLACK_LIST_SHIPPING_WO_COL\"),\r\n        localsn_col: get(\"SLACK_LIST_SHIPPING_LOCALSN_COL\"),\r\n        desc_col:    anyOf(\"SLACK_LIST_SHIPPING_DESCRIPTION_COL\", \"SLACK_LIST_SHIPPING_DESC_COL\"),\r\n        photos_col:  get(\"SLACK_LIST_SHIPPING_PHOTOS_COL\"),\r\n        tracking_col:get(\"SLACK_LIST_SHIPPING_TRACKING_COL\"),\r\n        link_col:    get(\"SLACK_LIST_SHIPPING_LINK_COL\"),\r\n      },\r\n      receiving: {\r\n        list_id:   get(\"SLACK_LIST_RECEIVING_ID\"),\r\n        title_col: get(\"SLACK_LIST_RECEIVING_TITLE_COL\"),\r\n        pnsn_col:  get(\"SLACK_LIST_RECEIVING_PNSN_COL\"),\r\n        wo_col:    anyOf(\"SLACK_LIST_RECEIVING_WORKORDER_COL\", \"SLACK_LIST_RECEIVING_WO_COL\"),\r\n        localsn_col: get(\"SLACK_LIST_RECEIVING_LOCALSN_COL\"),\r\n        desc_col:    anyOf(\"SLACK_LIST_RECEIVING_DESCRIPTION_COL\", \"SLACK_LIST_RECEIVING_DESC_COL\"),\r\n        photos_col:  get(\"SLACK_LIST_RECEIVING_PHOTOS_COL\"),\r\n        tracking_col:get(\"SLACK_LIST_RECEIVING_TRACKING_COL\"),\r\n        link_col:    get(\"SLACK_LIST_RECEIVING_LINK_COL\"),\r\n      },\r\n    })[listKey || \"\"];\r\n\r\n    if (!CFG?.list_id) return res.status(400).json({ ok: false, error: `unknown_listKey_${listKey}` });\r\n    if (!CFG.title_col) {\r\n      return res.status(400).json({\r\n        ok: false,\r\n        error: \"missing_title_column_in_env\",\r\n        fix: `Set SLACK_LIST_${(listKey || \"\").toUpperCase()}_TITLE_COL in .env.local`,\r\n      });\r\n    }\r\n\r\n    // Slack helpers\r\n    async function slackJson(method, payload) {\r\n      const r = await fetch(`https://slack.com/api/${method}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          \"Content-Type\": \"application/json; charset=utf-8\",\r\n        },\r\n        body: JSON.stringify(payload),\r\n      });\r\n      return r.json();\r\n    }\r\n    const plain = (v) => (v ?? \"\").toString().trim();\r\n    const toRichText = (text) => [{\r\n      type: \"rich_text\",\r\n      elements: [{ type: \"rich_text_section\", elements: [{ type: \"text\", text: plain(text) }] }],\r\n    }];\r\n\r\n    async function setTextCell(list_id, row_id, column_id, value) {\r\n      const val = plain(value);\r\n      if (!val || !column_id) return { ok: true, skipped: true };\r\n      let r = await slackJson(\"slackLists.items.update\", {\r\n        list_id, cells: [{ row_id, column_id, rich_text: toRichText(val) }],\r\n      });\r\n      if (r?.ok) return r;\r\n      if (r?.error === \"invalid_arguments\" || r?.error === \"invalid_input_type\") {\r\n        r = await slackJson(\"slackLists.items.update\", {\r\n          list_id, cells: [{ row_id, column_id, text: val }],\r\n        });\r\n      }\r\n      return r;\r\n    }\r\n\r\n    async function setFilesCell(list_id, row_id, column_id, urls = []) {\r\n      if (!column_id || !Array.isArray(urls) || urls.length === 0) {\r\n        return { ok: true, skipped: true };\r\n      }\r\n      const ids = [];\r\n      for (let i = 0; i < urls.length; i++) {\r\n        const url = plain(urls[i]);\r\n        if (!url) continue;\r\n        const add = await slackJson(\"files.remote.add\", { external_url: url, title: `Photo ${i + 1}` });\r\n        if (add?.ok && add?.file?.id) ids.push(add.file.id);\r\n      }\r\n      if (ids.length === 0) return { ok: true, skipped: true };\r\n\r\n      // Try objects form\r\n      let r = await slackJson(\"slackLists.items.update\", {\r\n        list_id, cells: [{ row_id, column_id, files: ids.map((id) => ({ id })) }],\r\n      });\r\n      if (r?.ok) return r;\r\n      if (r?.error === \"invalid_arguments\" || r?.error === \"invalid_input_type\") {\r\n        // Try raw IDs\r\n        r = await slackJson(\"slackLists.items.update\", {\r\n          list_id, cells: [{ row_id, column_id, file_ids: ids }],\r\n        });\r\n      }\r\n      return r;\r\n    }\r\n\r\n    // 1) Create the row with Title\r\n    const safeTitle = plain(title) || \"New Item\";\r\n    let created = await slackJson(\"slackLists.items.create\", {\r\n      list_id: CFG.list_id,\r\n      initial_fields: [{ column_id: CFG.title_col, rich_text: toRichText(safeTitle) }],\r\n    });\r\n    if (!created?.ok && created?.error === \"invalid_arguments\") {\r\n      created = await slackJson(\"slackLists.items.create\", {\r\n        list_id: CFG.list_id,\r\n        initial_fields: [{ column_id: CFG.title_col, text: safeTitle }],\r\n      });\r\n    }\r\n    if (!created?.ok) {\r\n      return res.status(200).json({\r\n        ok: false, error: created?.error || \"create_failed\",\r\n        list_id: CFG.list_id, title_col: CFG.title_col, sent_title: safeTitle,\r\n      });\r\n    }\r\n    const rowId = created.item.id;\r\n\r\n    // 2) PN/SN\r\n    if (CFG.pnsn_col) {\r\n      const pnPart = pn ? `PN: ${plain(pn)}` : \"\";\r\n      const snPart = sn ? `SN: ${plain(sn)}` : \"\";\r\n      const pnSnText = [pnPart, snPart].filter(Boolean).join(\"  \");\r\n      if (pnSnText) {\r\n        const r = await setTextCell(CFG.list_id, rowId, CFG.pnsn_col, pnSnText);\r\n        if (!r?.ok) return res.status(200).json({ ok: false, error: r?.error || \"update_failed_pnsn\", list_id: CFG.list_id, item_id: rowId, used_pnsn_col: CFG.pnsn_col });\r\n      }\r\n    }\r\n\r\n    // 3) Work Order (supports *_WORKORDER_COL or *_WO_COL)\r\n    if (CFG.wo_col && workOrder) {\r\n      const r = await setTextCell(CFG.list_id, rowId, CFG.wo_col, workOrder);\r\n      if (!r?.ok) return res.status(200).json({ ok: false, error: r?.error || \"update_failed_workorder\", list_id: CFG.list_id, item_id: rowId, used_workorder_col: CFG.wo_col });\r\n    }\r\n\r\n    // 4) LocalSN (ID)\r\n    if (CFG.localsn_col && localSN) {\r\n      const r = await setTextCell(CFG.list_id, rowId, CFG.localsn_col, localSN);\r\n      if (!r?.ok) return res.status(200).json({ ok: false, error: r?.error || \"update_failed_localsn\", list_id: CFG.list_id, item_id: rowId, used_localsn_col: CFG.localsn_col });\r\n    }\r\n\r\n    // 5) Description (supports *_DESCRIPTION_COL and *_DESC_COL)\r\n    if (CFG.desc_col && description) {\r\n      const r = await setTextCell(CFG.list_id, rowId, CFG.desc_col, description);\r\n      if (!r?.ok) return res.status(200).json({ ok: false, error: r?.error || \"update_failed_description\", list_id: CFG.list_id, item_id: rowId, used_description_col: CFG.desc_col });\r\n    }\r\n\r\n    // 6) Tracking (optional)\r\n    if (CFG.tracking_col && tracking) {\r\n      const r = await setTextCell(CFG.list_id, rowId, CFG.tracking_col, tracking);\r\n      if (!r?.ok) return res.status(200).json({ ok: false, error: r?.error || \"update_failed_tracking\", list_id: CFG.list_id, item_id: rowId, used_tracking_col: CFG.tracking_col });\r\n    }\r\n\r\n    // 7) Link back (optional)\r\n    if (CFG.link_col && linkUrl) {\r\n      const r = await setTextCell(CFG.list_id, rowId, CFG.link_col, linkUrl);\r\n      if (!r?.ok) return res.status(200).json({ ok: false, error: r?.error || \"update_failed_link\", list_id: CFG.list_id, item_id: rowId, used_link_col: CFG.link_col });\r\n    }\r\n\r\n    // 8) Photos (files column). If Slack rejects, append URLs into Description so nothing is lost.\r\n    if (CFG.photos_col && Array.isArray(photoUrls) && photoUrls.length) {\r\n      const r = await setFilesCell(CFG.list_id, rowId, CFG.photos_col, photoUrls);\r\n      if (!r?.ok) {\r\n        if (CFG.desc_col) {\r\n          const joined = `Photos:\\n${photoUrls.map(plain).filter(Boolean).join(\"\\n\")}`;\r\n          await setTextCell(CFG.list_id, rowId, CFG.desc_col, [description, joined].filter(Boolean).join(\"\\n\\n\"));\r\n        }\r\n        return res.status(200).json({\r\n          ok: false, error: r?.error || \"invalid_input_type\", list_id: CFG.list_id, item_id: rowId, used_photos_col: CFG.photos_col,\r\n        });\r\n      }\r\n    }\r\n\r\n    // Ship date intentionally left blank\r\n\r\n    return res.status(200).json({\r\n      ok: true,\r\n      list_id: CFG.list_id,\r\n      item_id: rowId,\r\n      used_cols: {\r\n        title_col: CFG.title_col,\r\n        pnsn_col: CFG.pnsn_col || null,\r\n        workorder_col: CFG.wo_col || null,\r\n        localsn_col: CFG.localsn_col || null,\r\n        description_col: CFG.desc_col || null,\r\n        tracking_col: CFG.tracking_col || null,\r\n        photos_col: CFG.photos_col || null,\r\n        link_col: CFG.link_col || null,\r\n      },\r\n    });\r\n  } catch (err) {\r\n    console.error(\"API /slack/add-to-list crashed:\", err);\r\n    return res.status(500).json({ ok: false, error: \"exception\", message: err?.message || String(err) });\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}