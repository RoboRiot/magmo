{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mack2\\\\Desktop\\\\code\\\\pages\\\\NewSearch\\\\AddItem\\\\parentModal.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport { Modal, InputGroup, Dropdown, FormControl, Button, NavDropdown, Form, Table, Pagination } from \"react-bootstrap\";\nimport { fetchPartsWithMachineDataPage, fetchClients, fetchModels, formatDate } from \"../../../utils/fetchAssociations\";\nimport ClientTable from \"../../../utils/ClientTable\";\nimport ModelTable from \"../../../utils/ModelTable\";\nimport styles from \"./ParentModal.module.css\";\nconst CLIENT_WAREHOUSE = \"igor-house\";\nconst CLIENT_UNASSIGNED = \"unassigned\";\nconst PAGE_SIZE = 20;\n\nconst ParentModal = ({\n  show,\n  handleClose,\n  setSelectedParent,\n  parts\n}) => {\n  const {\n    0: info,\n    1: setInfo\n  } = useState([]);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    0: page,\n    1: setPage\n  } = useState(1);\n  const {\n    0: pageCursors,\n    1: setPageCursors\n  } = useState([]);\n  const {\n    0: hasNextPage,\n    1: setHasNextPage\n  } = useState(false);\n  const {\n    0: queryEpoch,\n    1: setQueryEpoch\n  } = useState(0);\n  const {\n    0: loadError,\n    1: setLoadError\n  } = useState(null);\n  const {\n    0: search,\n    1: setSearch\n  } = useState(\"\");\n  const {\n    0: select,\n    1: setSelect\n  } = useState(\"Name\");\n  const {\n    0: showList,\n    1: setShowList\n  } = useState(false);\n  const {\n    0: showListSearch,\n    1: setShowListSearch\n  } = useState(\"text\");\n  const {\n    0: selectedOEM,\n    1: setSelectedOEM\n  } = useState(null);\n  const {\n    0: selectedModality,\n    1: setSelectedModality\n  } = useState(null);\n  const {\n    0: selectedClient,\n    1: setSelectedClient\n  } = useState(null);\n  const {\n    0: clients,\n    1: setClients\n  } = useState([]);\n  const {\n    0: showClientModal,\n    1: setShowClientModal\n  } = useState(false);\n  const {\n    0: clientButtonText,\n    1: setClientButtonText\n  } = useState(\"Select Option\");\n  const {\n    0: hoverIndex,\n    1: setHoverIndex\n  } = useState(null);\n  const {\n    0: selectedModel,\n    1: setSelectedModel\n  } = useState(null);\n  const {\n    0: models,\n    1: setModels\n  } = useState([]);\n  const {\n    0: showModelModal,\n    1: setShowModelModal\n  } = useState(false);\n  const {\n    0: modelButtonText,\n    1: setModelButtonText\n  } = useState(\"Select Option\");\n  const {\n    0: clientSearchTerm,\n    1: setClientSearchTerm\n  } = useState(\"\");\n  const {\n    0: modelSearchTerm,\n    1: setModelSearchTerm\n  } = useState(\"\");\n\n  const getMachineField = (item, key) => {\n    var _ref, _ref2, _ref3, _item$machineData$key, _item$machineData, _item$machineData2, _key$toLowerCase, _item$currentMachineD, _item$currentMachineD2, _key$toLowerCase2;\n\n    if (!item) return null;\n    return (_ref = (_ref2 = (_ref3 = (_item$machineData$key = item === null || item === void 0 ? void 0 : (_item$machineData = item.machineData) === null || _item$machineData === void 0 ? void 0 : _item$machineData[key]) !== null && _item$machineData$key !== void 0 ? _item$machineData$key : item === null || item === void 0 ? void 0 : (_item$machineData2 = item.machineData) === null || _item$machineData2 === void 0 ? void 0 : _item$machineData2[key === null || key === void 0 ? void 0 : (_key$toLowerCase = key.toLowerCase) === null || _key$toLowerCase === void 0 ? void 0 : _key$toLowerCase.call(key)]) !== null && _ref3 !== void 0 ? _ref3 : item === null || item === void 0 ? void 0 : (_item$currentMachineD = item.currentMachineData) === null || _item$currentMachineD === void 0 ? void 0 : _item$currentMachineD[key]) !== null && _ref2 !== void 0 ? _ref2 : item === null || item === void 0 ? void 0 : (_item$currentMachineD2 = item.currentMachineData) === null || _item$currentMachineD2 === void 0 ? void 0 : _item$currentMachineD2[key === null || key === void 0 ? void 0 : (_key$toLowerCase2 = key.toLowerCase) === null || _key$toLowerCase2 === void 0 ? void 0 : _key$toLowerCase2.call(key)]) !== null && _ref !== void 0 ? _ref : null;\n  };\n\n  const resetPagination = () => {\n    setPage(1);\n    setPageCursors([]);\n    setHasNextPage(false);\n  };\n\n  const handleCloseClientModal = () => setShowClientModal(false);\n\n  const handleShowClientModal = () => setShowClientModal(true);\n\n  const handleCloseModelModal = () => setShowModelModal(false);\n\n  const handleShowModelModal = () => setShowModelModal(true); // Handle search input changes\n\n\n  const searchChangeHandler = event => setSearch(event.target.value);\n\n  const matchesFilters = useCallback(item => {\n    if (!item) return false;\n\n    if (selectedOEM) {\n      const OEM = getMachineField(item, \"OEM\");\n      if (OEM !== selectedOEM) return false;\n    }\n\n    if (selectedModality) {\n      const Modality = getMachineField(item, \"Modality\");\n      if (Modality !== selectedModality) return false;\n    }\n\n    if (selectedModel) {\n      const Model = getMachineField(item, \"Model\");\n      if (Model !== selectedModel) return false;\n    }\n\n    if (selectedClient) {\n      const clientRef = getMachineField(item, \"client\");\n      const clientId = typeof clientRef === \"string\" ? clientRef : (clientRef === null || clientRef === void 0 ? void 0 : clientRef.id) || null;\n      if (clientId !== selectedClient) return false;\n    }\n\n    return true;\n  }, [selectedOEM, selectedModality, selectedModel, selectedClient]);\n  const fetchData = useCallback(async (requestedPage = 1) => {\n    if (!show) return;\n    const startAfterDoc = requestedPage > 1 ? pageCursors[requestedPage - 2] : null;\n\n    if (requestedPage > 1 && !startAfterDoc) {\n      setPage(1);\n      return;\n    }\n\n    setIsLoading(true);\n    setLoadError(null);\n    const searchLower = (search || \"\").toLowerCase().trim();\n\n    try {\n      const {\n        parts: data,\n        lastDoc,\n        hasNextPage: nextPage\n      } = await fetchPartsWithMachineDataPage({\n        pageSize: PAGE_SIZE,\n        startAfterDoc,\n        visibleOnly: true,\n        filterFn: selectedOEM || selectedModality || selectedModel || selectedClient ? matchesFilters : null,\n        search: searchLower ? {\n          type: select,\n          raw: search,\n          lower: searchLower\n        } : null,\n        needsMachineData: Boolean(selectedOEM) || Boolean(selectedModality) || Boolean(selectedModel) || Boolean(selectedClient)\n      });\n      setInfo(data);\n      setHasNextPage(nextPage);\n      setPageCursors(prev => {\n        const next = requestedPage === 1 ? [] : [...prev];\n\n        if (lastDoc) {\n          next[requestedPage - 1] = lastDoc;\n        }\n\n        return next;\n      });\n    } catch (error) {\n      console.error(\"Parent modal load failed:\", error);\n      setLoadError((error === null || error === void 0 ? void 0 : error.message) || \"Failed to load items.\");\n      setInfo([]);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [show, pageCursors, search, select, selectedOEM, selectedModality, selectedModel, selectedClient, matchesFilters]);\n  useEffect(() => {\n    if (!show) return;\n    resetPagination();\n    setQueryEpoch(v => v + 1);\n  }, [show, selectedOEM, selectedModality, selectedModel, selectedClient, search, select]);\n  useEffect(() => {\n    if (!show) return;\n    fetchData(page);\n  }, [show, page, queryEpoch, fetchData]); // Row selection handler\n\n  const rowSelect = item => {\n    // item.id must be present in fetchPartsWithMachineData() results\n    setSelectedParent({\n      id: item.id,\n      name: item.name,\n      pn: item.pn\n    });\n    handleClose();\n  }; // Dropdown handlers\n\n\n  const {\n    0: dropdown1Text,\n    1: setDropdown1Text\n  } = useState(\"Select Option\");\n  const {\n    0: dropdown2Text,\n    1: setDropdown2Text\n  } = useState(\"Select Option\");\n\n  const handleSelect1 = (eventKey, event) => {\n    if (eventKey === \"unassigned\") {\n      setDropdown1Text(\"Select Option\");\n      setSelectedOEM(null);\n    } else {\n      setDropdown1Text(event.target.textContent);\n      setSelectedOEM(event.target.textContent);\n    }\n  };\n\n  const handleSelect2 = (eventKey, event) => {\n    if (eventKey === \"unassigned\") {\n      setDropdown2Text(\"Select Option\");\n      setSelectedModality(null);\n    } else {\n      setDropdown2Text(event.target.textContent);\n      setSelectedModality(event.target.textContent);\n    }\n  }; // Fetch clients and show modal\n\n\n  const handleClientClick = async () => {\n    const clientsData = await fetchClients(selectedOEM, selectedModality);\n    setClients(clientsData);\n    setClientSearchTerm(\"\"); // Reset search term\n\n    setShowClientModal(true);\n  }; // Client selection handler\n\n\n  const handleClientSelect = clientId => {\n    if (!clientId) {\n      setClientButtonText(\"Select Option\");\n      setSelectedClient(null);\n      setShowClientModal(false);\n      return;\n    }\n\n    const client = clients.find(c => c.id === clientId);\n    setClientButtonText((client === null || client === void 0 ? void 0 : client.name) || \"Select Option\");\n    setSelectedClient(clientId);\n    setShowClientModal(false);\n  }; // Client info handler\n\n\n  const handleClientInfo = (clientId, clientName) => {\n    console.log(`Client ID: ${clientId}, Client Name: ${clientName}`);\n  }; // Clear client selection handler\n\n\n  const handleClearClientSelection = () => {\n    setClientButtonText(\"Select Option\");\n    setSelectedClient(null);\n    setShowClientModal(false);\n  }; // Fetch models and show modal\n\n\n  const handleModelClick = async () => {\n    const modelsData = await fetchModels(selectedOEM, selectedModality, selectedClient);\n    setModels(modelsData);\n    setModelSearchTerm(\"\"); // Reset search term\n\n    setShowModelModal(true);\n  }; // Model selection handler\n\n\n  const handleModelSelect = modelName => {\n    setModelButtonText(modelName || \"Select Option\");\n    setSelectedModel(modelName || null);\n    setShowModelModal(false);\n  }; // Clear model selection handler\n\n\n  const handleClearModelSelection = () => {\n    setModelButtonText(\"Select Option\");\n    setSelectedModel(null);\n    setShowModelModal(false);\n    searchFilter();\n  };\n\n  const handleWarehouseClick = () => {\n    setClientButtonText(CLIENT_WAREHOUSE);\n    setSelectedClient(CLIENT_WAREHOUSE);\n  };\n\n  const handleUnassignedClick = () => {\n    setClientButtonText(CLIENT_UNASSIGNED);\n    setSelectedClient(CLIENT_UNASSIGNED);\n  };\n\n  const totalKnownPages = Math.max(1, pageCursors.filter(Boolean).length + (hasNextPage ? 1 : 0));\n\n  const pageButtons = (() => {\n    const buttons = [];\n    const maxVisible = 6;\n\n    const pushPage = p => buttons.push(__jsx(Pagination.Item, {\n      key: `page-${p}`,\n      active: p === page,\n      onClick: () => setPage(p),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }\n    }, p));\n\n    const pushEllipsis = key => buttons.push(__jsx(Pagination.Ellipsis, {\n      key: key,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 20\n      }\n    }));\n\n    if (totalKnownPages <= maxVisible) {\n      for (let i = 1; i <= totalKnownPages; i += 1) pushPage(i);\n\n      return buttons;\n    }\n\n    let start = Math.max(2, page - 1);\n    let end = Math.min(totalKnownPages - 1, page + 1);\n    const desiredWindow = maxVisible - 2;\n    let currentWindow = end - start + 1;\n    let remaining = desiredWindow - currentWindow;\n\n    while (remaining > 0) {\n      if (start > 2) {\n        start -= 1;\n        remaining -= 1;\n      }\n\n      if (remaining > 0 && end < totalKnownPages - 1) {\n        end += 1;\n        remaining -= 1;\n      }\n\n      if (start === 2 && end === totalKnownPages - 1) break;\n    }\n\n    pushPage(1);\n    if (start > 2) pushEllipsis(\"start-ellipsis\");\n\n    for (let i = start; i <= end; i += 1) pushPage(i);\n\n    if (end < totalKnownPages - 1) pushEllipsis(\"end-ellipsis\");\n    pushPage(totalKnownPages);\n    if (hasNextPage) pushEllipsis(\"more-ellipsis\");\n    return buttons;\n  })();\n\n  return __jsx(Modal, {\n    show: show,\n    onHide: handleClose,\n    size: \"lg\",\n    centered: true,\n    scrollable: true,\n    dialogClassName: \"parent-modal-dialog\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 5\n    }\n  }, __jsx(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 7\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 9\n    }\n  }, \"Select Parent\")), __jsx(Modal.Body, {\n    style: {\n      maxHeight: \"75vh\",\n      overflowY: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 7\n    }\n  }, __jsx(Container, {\n    className: \"d-flex align-items-center justify-content-center\",\n    style: {\n      minHeight: \"unset\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"w-100\",\n    style: {\n      maxWidth: \"1200px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 11\n    }\n  }, __jsx(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 13\n    }\n  }, __jsx(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 15\n    }\n  }, __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 17\n    }\n  }, __jsx(Col, {\n    md: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 19\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 21\n    }\n  }, __jsx(InputGroup, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 23\n    }\n  }, __jsx(InputGroup.Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 25\n    }\n  }, \"OEM\"), __jsx(Dropdown, {\n    onSelect: handleSelect1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 25\n    }\n  }, __jsx(Dropdown.Toggle, {\n    variant: \"outline-secondary\",\n    id: \"dropdown-button-1\",\n    className: \"w-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 27\n    }\n  }, dropdown1Text), __jsx(Dropdown.Menu, {\n    className: \"w-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 27\n    }\n  }, __jsx(Dropdown.Item, {\n    eventKey: \"unassigned\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 29\n    }\n  }, \"Select Option\"), __jsx(Dropdown.Item, {\n    eventKey: \"GE\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 29\n    }\n  }, \"GE\"), __jsx(Dropdown.Item, {\n    eventKey: \"Toshiba\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 29\n    }\n  }, \"Toshiba\"), __jsx(Dropdown.Item, {\n    eventKey: \"Siemens\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 29\n    }\n  }, \"Siemens\"), __jsx(Dropdown.Item, {\n    eventKey: \"Philips\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 29\n    }\n  }, \"Philips\")))), __jsx(InputGroup, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 23\n    }\n  }, __jsx(InputGroup.Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 25\n    }\n  }, \"Modality\"), __jsx(Dropdown, {\n    onSelect: handleSelect2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 25\n    }\n  }, __jsx(Dropdown.Toggle, {\n    variant: \"outline-secondary\",\n    id: \"dropdown-button-2\",\n    className: \"w-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 27\n    }\n  }, dropdown2Text), __jsx(Dropdown.Menu, {\n    className: \"w-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 27\n    }\n  }, __jsx(Dropdown.Item, {\n    eventKey: \"unassigned\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 29\n    }\n  }, \"Select Option\"), __jsx(Dropdown.Item, {\n    eventKey: \"CT\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 29\n    }\n  }, \"CT\"), __jsx(Dropdown.Item, {\n    eventKey: \"MRI\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 29\n    }\n  }, \"MRI\")))), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 23\n    }\n  }, __jsx(InputGroup, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 25\n    }\n  }, __jsx(InputGroup.Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 27\n    }\n  }, \"Client\"), __jsx(Button, {\n    variant: \"outline-secondary\",\n    className: \"w-100\",\n    onClick: handleClientClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 27\n    }\n  }, clientButtonText)), __jsx(InputGroup, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 25\n    }\n  }, __jsx(InputGroup.Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 27\n    }\n  }, \"Client-2\"), __jsx(Button, {\n    variant: \"outline-secondary\",\n    className: \"w-100\",\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 27\n    }\n  }, \"Select Option\")), __jsx(InputGroup, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 25\n    }\n  }, __jsx(InputGroup.Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 27\n    }\n  }, \"Model\"), __jsx(Button, {\n    variant: \"outline-secondary\",\n    className: \"w-100\",\n    onClick: handleModelClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 27\n    }\n  }, modelButtonText)), __jsx(\"div\", {\n    className: styles.divider,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 25\n    }\n  }), __jsx(InputGroup, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 25\n    }\n  }, __jsx(InputGroup.Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 27\n    }\n  }, \"Warehouse\"), __jsx(\"div\", {\n    className: styles.buttonGroup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 27\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    className: styles.flexButton,\n    onClick: handleWarehouseClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 29\n    }\n  }, \"Warehouse\"), __jsx(Button, {\n    variant: \"outline-secondary\",\n    className: styles.flexButton,\n    onClick: handleUnassignedClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 29\n    }\n  }, \"Unassigned\")))))), __jsx(Col, {\n    md: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 19\n    }\n  }, __jsx(\"div\", {\n    className: styles.tableContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 463,\n      columnNumber: 21\n    }\n  }, __jsx(Table, {\n    striped: true,\n    bordered: true,\n    hover: true,\n    size: \"sm\",\n    className: \"mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 464,\n      columnNumber: 23\n    }\n  }, __jsx(\"thead\", {\n    className: styles.stickyHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 25\n    }\n  }, __jsx(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 27\n    }\n  }, __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 29\n    }\n  }, \"Name\"), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 29\n    }\n  }, \"Date\"), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 29\n    }\n  }, \"Work Order\"), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 29\n    }\n  }, \"Product Number\"), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 29\n    }\n  }, \"Serial Number\"), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 29\n    }\n  }, \"Select\"))), __jsx(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 25\n    }\n  }, info.map(item => __jsx(\"tr\", {\n    className: \"clickable-row\",\n    key: item.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 477,\n      columnNumber: 29\n    }\n  }, __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 478,\n      columnNumber: 31\n    }\n  }, item.name), __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 479,\n      columnNumber: 31\n    }\n  }, formatDate(item.date)), __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 31\n    }\n  }, item.workOrders && item.workOrders.length > 0 ? item.workOrders[item.workOrders.length - 1].workOrder : \"N/A\"), __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 31\n    }\n  }, item.pn), __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 31\n    }\n  }, item.sn), __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 488,\n      columnNumber: 31\n    }\n  }, __jsx(Button, {\n    variant: \"primary\",\n    onClick: () => rowSelect(item),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 489,\n      columnNumber: 33\n    }\n  }, \"Select\")))))), __jsx(\"div\", {\n    className: styles.searchContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 23\n    }\n  }, __jsx(Form, {\n    className: \"d-flex pb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 501,\n      columnNumber: 25\n    }\n  }, __jsx(FormControl, {\n    type: showListSearch,\n    placeholder: \"Search\",\n    className: \"me-2 flex-grow-1\",\n    \"aria-label\": \"Search\",\n    value: search,\n    onChange: searchChangeHandler,\n    style: {\n      flex: \"1\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 27\n    }\n  }), __jsx(NavDropdown, {\n    title: select,\n    id: \"collasible-nav-dropdown\",\n    show: showList,\n    onMouseEnter: () => setShowList(true),\n    onMouseLeave: () => setShowList(false),\n    style: {\n      marginTop: \"-5px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 511,\n      columnNumber: 27\n    }\n  }, __jsx(NavDropdown.Item, {\n    onClick: () => setSelect(\"Name\") & setShowListSearch(\"text\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 519,\n      columnNumber: 29\n    }\n  }, \"Name\"), __jsx(NavDropdown.Item, {\n    onClick: () => setSelect(\"Date\") & setShowListSearch(\"date\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 526,\n      columnNumber: 29\n    }\n  }, \"Date\"), __jsx(NavDropdown.Item, {\n    onClick: () => setSelect(\"Work Order\") & setShowListSearch(\"number\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 533,\n      columnNumber: 29\n    }\n  }, \"Work Order\"), __jsx(NavDropdown.Item, {\n    onClick: () => setSelect(\"Product Number\") & setShowListSearch(\"number\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 541,\n      columnNumber: 29\n    }\n  }, \"Product Number\"), __jsx(NavDropdown.Item, {\n    onClick: () => setSelect(\"Description\") & setShowListSearch(\"text\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 549,\n      columnNumber: 29\n    }\n  }, \"Description\")))))))))))), __jsx(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 571,\n      columnNumber: 7\n    }\n  }, __jsx(Button, {\n    variant: \"secondary\",\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 572,\n      columnNumber: 9\n    }\n  }, \"Cancel\"), __jsx(Button, {\n    variant: \"warning\",\n    onClick: () => {\n      setSelectedParent(null);\n      handleClose();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 575,\n      columnNumber: 9\n    }\n  }, \"Clear Selection\")), __jsx(Modal, {\n    show: showClientModal,\n    onHide: handleCloseClientModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 585,\n      columnNumber: 7\n    }\n  }, __jsx(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 586,\n      columnNumber: 9\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 587,\n      columnNumber: 11\n    }\n  }, \"Select Client\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 589,\n      columnNumber: 9\n    }\n  }, __jsx(FormControl, {\n    type: \"text\",\n    placeholder: \"Search by name\",\n    className: \"mb-3\",\n    value: clientSearchTerm,\n    onChange: e => setClientSearchTerm(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 590,\n      columnNumber: 11\n    }\n  }), __jsx(ClientTable, {\n    clients: clients.filter(client => client.name.toLowerCase().includes(clientSearchTerm.toLowerCase())),\n    disableInfo: true,\n    onSelectClient: handleClientSelect,\n    onInfoClick: handleClientInfo,\n    clearSelection: () => handleClientSelect(null) // Clear selection handler\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 597,\n      columnNumber: 11\n    }\n  }))), __jsx(Modal, {\n    show: showModelModal,\n    onHide: handleCloseModelModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 609,\n      columnNumber: 7\n    }\n  }, __jsx(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 610,\n      columnNumber: 9\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 611,\n      columnNumber: 11\n    }\n  }, \"Select Model\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 613,\n      columnNumber: 9\n    }\n  }, __jsx(FormControl, {\n    type: \"text\",\n    placeholder: \"Search by name\",\n    className: \"mb-3\",\n    value: modelSearchTerm,\n    onChange: e => setModelSearchTerm(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 614,\n      columnNumber: 11\n    }\n  }), __jsx(ModelTable, {\n    models: models.filter(model => typeof model === \"string\" ? model.toLowerCase().includes(modelSearchTerm.toLowerCase()) : false),\n    onSelectModel: handleModelSelect,\n    clearSelection: () => handleModelSelect(null) // Clear selection handler\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 621,\n      columnNumber: 11\n    }\n  }))));\n};\n\n__jsx(_JSXStyle, {\n  id: \"2081140824\",\n  dynamic: [styles.tableContainer],\n  __self: this,\n  __source: void 0\n}, `.parent-modal-dialog{max-width:95vw;margin:0 auto;}.parent-modal-dialog .modal-body .${styles.tableContainer}{max-height:70vh;overflow:auto;}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFjazJcXERlc2t0b3BcXGNvZGVcXHBhZ2VzXFxOZXdTZWFyY2hcXEFkZEl0ZW1cXHBhcmVudE1vZGFsLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTBuQm1CLEFBSW9CLEFBS0MsZUFKRixDQUtBLGFBSmhCLENBS0EiLCJmaWxlIjoiQzpcXFVzZXJzXFxtYWNrMlxcRGVza3RvcFxcY29kZVxccGFnZXNcXE5ld1NlYXJjaFxcQWRkSXRlbVxccGFyZW50TW9kYWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2sgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7XG4gIE1vZGFsLFxuICBJbnB1dEdyb3VwLFxuICBEcm9wZG93bixcbiAgRm9ybUNvbnRyb2wsXG4gIEJ1dHRvbixcbiAgTmF2RHJvcGRvd24sXG4gIEZvcm0sXG4gIFRhYmxlLFxuICBQYWdpbmF0aW9uLFxufSBmcm9tIFwicmVhY3QtYm9vdHN0cmFwXCI7XG5pbXBvcnQge1xuICBmZXRjaFBhcnRzV2l0aE1hY2hpbmVEYXRhUGFnZSxcbiAgZmV0Y2hDbGllbnRzLFxuICBmZXRjaE1vZGVscyxcbiAgZm9ybWF0RGF0ZSxcbn0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL2ZldGNoQXNzb2NpYXRpb25zXCI7XG5pbXBvcnQgQ2xpZW50VGFibGUgZnJvbSBcIi4uLy4uLy4uL3V0aWxzL0NsaWVudFRhYmxlXCI7XG5pbXBvcnQgTW9kZWxUYWJsZSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvTW9kZWxUYWJsZVwiO1xuaW1wb3J0IHN0eWxlcyBmcm9tIFwiLi9QYXJlbnRNb2RhbC5tb2R1bGUuY3NzXCI7XG5cbmNvbnN0IENMSUVOVF9XQVJFSE9VU0UgPSBcImlnb3ItaG91c2VcIjtcbmNvbnN0IENMSUVOVF9VTkFTU0lHTkVEID0gXCJ1bmFzc2lnbmVkXCI7XG5jb25zdCBQQUdFX1NJWkUgPSAyMDtcblxuY29uc3QgUGFyZW50TW9kYWwgPSAoeyBzaG93LCBoYW5kbGVDbG9zZSwgc2V0U2VsZWN0ZWRQYXJlbnQsIHBhcnRzIH0pID0+IHtcbiAgY29uc3QgW2luZm8sIHNldEluZm9dID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcGFnZSwgc2V0UGFnZV0gPSB1c2VTdGF0ZSgxKTtcbiAgY29uc3QgW3BhZ2VDdXJzb3JzLCBzZXRQYWdlQ3Vyc29yc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtoYXNOZXh0UGFnZSwgc2V0SGFzTmV4dFBhZ2VdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcXVlcnlFcG9jaCwgc2V0UXVlcnlFcG9jaF0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW2xvYWRFcnJvciwgc2V0TG9hZEVycm9yXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbc2VhcmNoLCBzZXRTZWFyY2hdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtzZWxlY3QsIHNldFNlbGVjdF0gPSB1c2VTdGF0ZShcIk5hbWVcIik7XG4gIGNvbnN0IFtzaG93TGlzdCwgc2V0U2hvd0xpc3RdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd0xpc3RTZWFyY2gsIHNldFNob3dMaXN0U2VhcmNoXSA9IHVzZVN0YXRlKFwidGV4dFwiKTtcbiAgY29uc3QgW3NlbGVjdGVkT0VNLCBzZXRTZWxlY3RlZE9FTV0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW3NlbGVjdGVkTW9kYWxpdHksIHNldFNlbGVjdGVkTW9kYWxpdHldID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IFtzZWxlY3RlZENsaWVudCwgc2V0U2VsZWN0ZWRDbGllbnRdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IFtjbGllbnRzLCBzZXRDbGllbnRzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3Nob3dDbGllbnRNb2RhbCwgc2V0U2hvd0NsaWVudE1vZGFsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NsaWVudEJ1dHRvblRleHQsIHNldENsaWVudEJ1dHRvblRleHRdID0gdXNlU3RhdGUoXCJTZWxlY3QgT3B0aW9uXCIpO1xuICBjb25zdCBbaG92ZXJJbmRleCwgc2V0SG92ZXJJbmRleF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW3NlbGVjdGVkTW9kZWwsIHNldFNlbGVjdGVkTW9kZWxdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IFttb2RlbHMsIHNldE1vZGVsc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtzaG93TW9kZWxNb2RhbCwgc2V0U2hvd01vZGVsTW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kZWxCdXR0b25UZXh0LCBzZXRNb2RlbEJ1dHRvblRleHRdID0gdXNlU3RhdGUoXCJTZWxlY3QgT3B0aW9uXCIpO1xuICBjb25zdCBbY2xpZW50U2VhcmNoVGVybSwgc2V0Q2xpZW50U2VhcmNoVGVybV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW21vZGVsU2VhcmNoVGVybSwgc2V0TW9kZWxTZWFyY2hUZXJtXSA9IHVzZVN0YXRlKFwiXCIpO1xuXG4gIGNvbnN0IGdldE1hY2hpbmVGaWVsZCA9IChpdGVtLCBrZXkpID0+IHtcbiAgICBpZiAoIWl0ZW0pIHJldHVybiBudWxsO1xuICAgIHJldHVybiAoXG4gICAgICBpdGVtPy5tYWNoaW5lRGF0YT8uW2tleV0gPz9cbiAgICAgIGl0ZW0/Lm1hY2hpbmVEYXRhPy5ba2V5Py50b0xvd2VyQ2FzZT8uKCldID8/XG4gICAgICBpdGVtPy5jdXJyZW50TWFjaGluZURhdGE/LltrZXldID8/XG4gICAgICBpdGVtPy5jdXJyZW50TWFjaGluZURhdGE/LltrZXk/LnRvTG93ZXJDYXNlPy4oKV0gPz9cbiAgICAgIG51bGxcbiAgICApO1xuICB9O1xuXG4gIGNvbnN0IHJlc2V0UGFnaW5hdGlvbiA9ICgpID0+IHtcbiAgICBzZXRQYWdlKDEpO1xuICAgIHNldFBhZ2VDdXJzb3JzKFtdKTtcbiAgICBzZXRIYXNOZXh0UGFnZShmYWxzZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ2xvc2VDbGllbnRNb2RhbCA9ICgpID0+IHNldFNob3dDbGllbnRNb2RhbChmYWxzZSk7XG4gIGNvbnN0IGhhbmRsZVNob3dDbGllbnRNb2RhbCA9ICgpID0+IHNldFNob3dDbGllbnRNb2RhbCh0cnVlKTtcblxuICBjb25zdCBoYW5kbGVDbG9zZU1vZGVsTW9kYWwgPSAoKSA9PiBzZXRTaG93TW9kZWxNb2RhbChmYWxzZSk7XG4gIGNvbnN0IGhhbmRsZVNob3dNb2RlbE1vZGFsID0gKCkgPT4gc2V0U2hvd01vZGVsTW9kYWwodHJ1ZSk7XG5cbiAgLy8gSGFuZGxlIHNlYXJjaCBpbnB1dCBjaGFuZ2VzXG4gIGNvbnN0IHNlYXJjaENoYW5nZUhhbmRsZXIgPSAoZXZlbnQpID0+IHNldFNlYXJjaChldmVudC50YXJnZXQudmFsdWUpO1xuXG4gIGNvbnN0IG1hdGNoZXNGaWx0ZXJzID0gdXNlQ2FsbGJhY2soXG4gICAgKGl0ZW0pID0+IHtcbiAgICAgIGlmICghaXRlbSkgcmV0dXJuIGZhbHNlO1xuICAgICAgaWYgKHNlbGVjdGVkT0VNKSB7XG4gICAgICAgIGNvbnN0IE9FTSA9IGdldE1hY2hpbmVGaWVsZChpdGVtLCBcIk9FTVwiKTtcbiAgICAgICAgaWYgKE9FTSAhPT0gc2VsZWN0ZWRPRU0pIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChzZWxlY3RlZE1vZGFsaXR5KSB7XG4gICAgICAgIGNvbnN0IE1vZGFsaXR5ID0gZ2V0TWFjaGluZUZpZWxkKGl0ZW0sIFwiTW9kYWxpdHlcIik7XG4gICAgICAgIGlmIChNb2RhbGl0eSAhPT0gc2VsZWN0ZWRNb2RhbGl0eSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKHNlbGVjdGVkTW9kZWwpIHtcbiAgICAgICAgY29uc3QgTW9kZWwgPSBnZXRNYWNoaW5lRmllbGQoaXRlbSwgXCJNb2RlbFwiKTtcbiAgICAgICAgaWYgKE1vZGVsICE9PSBzZWxlY3RlZE1vZGVsKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoc2VsZWN0ZWRDbGllbnQpIHtcbiAgICAgICAgY29uc3QgY2xpZW50UmVmID0gZ2V0TWFjaGluZUZpZWxkKGl0ZW0sIFwiY2xpZW50XCIpO1xuICAgICAgICBjb25zdCBjbGllbnRJZCA9XG4gICAgICAgICAgdHlwZW9mIGNsaWVudFJlZiA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBjbGllbnRSZWZcbiAgICAgICAgICAgIDogY2xpZW50UmVmPy5pZCB8fCBudWxsO1xuICAgICAgICBpZiAoY2xpZW50SWQgIT09IHNlbGVjdGVkQ2xpZW50KSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIFtzZWxlY3RlZE9FTSwgc2VsZWN0ZWRNb2RhbGl0eSwgc2VsZWN0ZWRNb2RlbCwgc2VsZWN0ZWRDbGllbnRdXG4gICk7XG5cbiAgY29uc3QgZmV0Y2hEYXRhID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKHJlcXVlc3RlZFBhZ2UgPSAxKSA9PiB7XG4gICAgICBpZiAoIXNob3cpIHJldHVybjtcbiAgICAgIGNvbnN0IHN0YXJ0QWZ0ZXJEb2MgPVxuICAgICAgICByZXF1ZXN0ZWRQYWdlID4gMSA/IHBhZ2VDdXJzb3JzW3JlcXVlc3RlZFBhZ2UgLSAyXSA6IG51bGw7XG4gICAgICBpZiAocmVxdWVzdGVkUGFnZSA+IDEgJiYgIXN0YXJ0QWZ0ZXJEb2MpIHtcbiAgICAgICAgc2V0UGFnZSgxKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuICAgICAgc2V0TG9hZEVycm9yKG51bGwpO1xuICAgICAgY29uc3Qgc2VhcmNoTG93ZXIgPSAoc2VhcmNoIHx8IFwiXCIpLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBwYXJ0czogZGF0YSwgbGFzdERvYywgaGFzTmV4dFBhZ2U6IG5leHRQYWdlIH0gPVxuICAgICAgICAgIGF3YWl0IGZldGNoUGFydHNXaXRoTWFjaGluZURhdGFQYWdlKHtcbiAgICAgICAgICAgIHBhZ2VTaXplOiBQQUdFX1NJWkUsXG4gICAgICAgICAgICBzdGFydEFmdGVyRG9jLFxuICAgICAgICAgICAgdmlzaWJsZU9ubHk6IHRydWUsXG4gICAgICAgICAgICBmaWx0ZXJGbjpcbiAgICAgICAgICAgICAgc2VsZWN0ZWRPRU0gfHwgc2VsZWN0ZWRNb2RhbGl0eSB8fCBzZWxlY3RlZE1vZGVsIHx8IHNlbGVjdGVkQ2xpZW50XG4gICAgICAgICAgICAgICAgPyBtYXRjaGVzRmlsdGVyc1xuICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgIHNlYXJjaDogc2VhcmNoTG93ZXJcbiAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBzZWxlY3QsXG4gICAgICAgICAgICAgICAgICByYXc6IHNlYXJjaCxcbiAgICAgICAgICAgICAgICAgIGxvd2VyOiBzZWFyY2hMb3dlcixcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgIG5lZWRzTWFjaGluZURhdGE6XG4gICAgICAgICAgICAgIEJvb2xlYW4oc2VsZWN0ZWRPRU0pIHx8XG4gICAgICAgICAgICAgIEJvb2xlYW4oc2VsZWN0ZWRNb2RhbGl0eSkgfHxcbiAgICAgICAgICAgICAgQm9vbGVhbihzZWxlY3RlZE1vZGVsKSB8fFxuICAgICAgICAgICAgICBCb29sZWFuKHNlbGVjdGVkQ2xpZW50KSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgc2V0SW5mbyhkYXRhKTtcbiAgICAgICAgc2V0SGFzTmV4dFBhZ2UobmV4dFBhZ2UpO1xuICAgICAgICBzZXRQYWdlQ3Vyc29ycygocHJldikgPT4ge1xuICAgICAgICAgIGNvbnN0IG5leHQgPSByZXF1ZXN0ZWRQYWdlID09PSAxID8gW10gOiBbLi4ucHJldl07XG4gICAgICAgICAgaWYgKGxhc3REb2MpIHtcbiAgICAgICAgICAgIG5leHRbcmVxdWVzdGVkUGFnZSAtIDFdID0gbGFzdERvYztcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlBhcmVudCBtb2RhbCBsb2FkIGZhaWxlZDpcIiwgZXJyb3IpO1xuICAgICAgICBzZXRMb2FkRXJyb3IoZXJyb3I/Lm1lc3NhZ2UgfHwgXCJGYWlsZWQgdG8gbG9hZCBpdGVtcy5cIik7XG4gICAgICAgIHNldEluZm8oW10pO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtcbiAgICAgIHNob3csXG4gICAgICBwYWdlQ3Vyc29ycyxcbiAgICAgIHNlYXJjaCxcbiAgICAgIHNlbGVjdCxcbiAgICAgIHNlbGVjdGVkT0VNLFxuICAgICAgc2VsZWN0ZWRNb2RhbGl0eSxcbiAgICAgIHNlbGVjdGVkTW9kZWwsXG4gICAgICBzZWxlY3RlZENsaWVudCxcbiAgICAgIG1hdGNoZXNGaWx0ZXJzLFxuICAgIF1cbiAgKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghc2hvdykgcmV0dXJuO1xuICAgIHJlc2V0UGFnaW5hdGlvbigpO1xuICAgIHNldFF1ZXJ5RXBvY2goKHYpID0+IHYgKyAxKTtcbiAgfSwgW3Nob3csIHNlbGVjdGVkT0VNLCBzZWxlY3RlZE1vZGFsaXR5LCBzZWxlY3RlZE1vZGVsLCBzZWxlY3RlZENsaWVudCwgc2VhcmNoLCBzZWxlY3RdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghc2hvdykgcmV0dXJuO1xuICAgIGZldGNoRGF0YShwYWdlKTtcbiAgfSwgW3Nob3csIHBhZ2UsIHF1ZXJ5RXBvY2gsIGZldGNoRGF0YV0pO1xuXG4gIC8vIFJvdyBzZWxlY3Rpb24gaGFuZGxlclxuICBjb25zdCByb3dTZWxlY3QgPSAoaXRlbSkgPT4ge1xuICAgIC8vIGl0ZW0uaWQgbXVzdCBiZSBwcmVzZW50IGluIGZldGNoUGFydHNXaXRoTWFjaGluZURhdGEoKSByZXN1bHRzXG4gICAgc2V0U2VsZWN0ZWRQYXJlbnQoeyBpZDogaXRlbS5pZCwgbmFtZTogaXRlbS5uYW1lLCBwbjogaXRlbS5wbiB9KTtcbiAgICBoYW5kbGVDbG9zZSgpO1xuICB9O1xuXG4gIC8vIERyb3Bkb3duIGhhbmRsZXJzXG4gIGNvbnN0IFtkcm9wZG93bjFUZXh0LCBzZXREcm9wZG93bjFUZXh0XSA9IHVzZVN0YXRlKFwiU2VsZWN0IE9wdGlvblwiKTtcbiAgY29uc3QgW2Ryb3Bkb3duMlRleHQsIHNldERyb3Bkb3duMlRleHRdID0gdXNlU3RhdGUoXCJTZWxlY3QgT3B0aW9uXCIpO1xuXG4gIGNvbnN0IGhhbmRsZVNlbGVjdDEgPSAoZXZlbnRLZXksIGV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50S2V5ID09PSBcInVuYXNzaWduZWRcIikge1xuICAgICAgc2V0RHJvcGRvd24xVGV4dChcIlNlbGVjdCBPcHRpb25cIik7XG4gICAgICBzZXRTZWxlY3RlZE9FTShudWxsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0RHJvcGRvd24xVGV4dChldmVudC50YXJnZXQudGV4dENvbnRlbnQpO1xuICAgICAgc2V0U2VsZWN0ZWRPRU0oZXZlbnQudGFyZ2V0LnRleHRDb250ZW50KTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU2VsZWN0MiA9IChldmVudEtleSwgZXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnRLZXkgPT09IFwidW5hc3NpZ25lZFwiKSB7XG4gICAgICBzZXREcm9wZG93bjJUZXh0KFwiU2VsZWN0IE9wdGlvblwiKTtcbiAgICAgIHNldFNlbGVjdGVkTW9kYWxpdHkobnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldERyb3Bkb3duMlRleHQoZXZlbnQudGFyZ2V0LnRleHRDb250ZW50KTtcbiAgICAgIHNldFNlbGVjdGVkTW9kYWxpdHkoZXZlbnQudGFyZ2V0LnRleHRDb250ZW50KTtcbiAgICB9XG4gIH07XG5cbiAgLy8gRmV0Y2ggY2xpZW50cyBhbmQgc2hvdyBtb2RhbFxuICBjb25zdCBoYW5kbGVDbGllbnRDbGljayA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBjbGllbnRzRGF0YSA9IGF3YWl0IGZldGNoQ2xpZW50cyhzZWxlY3RlZE9FTSwgc2VsZWN0ZWRNb2RhbGl0eSk7XG4gICAgc2V0Q2xpZW50cyhjbGllbnRzRGF0YSk7XG4gICAgc2V0Q2xpZW50U2VhcmNoVGVybShcIlwiKTsgLy8gUmVzZXQgc2VhcmNoIHRlcm1cbiAgICBzZXRTaG93Q2xpZW50TW9kYWwodHJ1ZSk7XG4gIH07XG5cbiAgLy8gQ2xpZW50IHNlbGVjdGlvbiBoYW5kbGVyXG4gIGNvbnN0IGhhbmRsZUNsaWVudFNlbGVjdCA9IChjbGllbnRJZCkgPT4ge1xuICAgIGlmICghY2xpZW50SWQpIHtcbiAgICAgIHNldENsaWVudEJ1dHRvblRleHQoXCJTZWxlY3QgT3B0aW9uXCIpO1xuICAgICAgc2V0U2VsZWN0ZWRDbGllbnQobnVsbCk7XG4gICAgICBzZXRTaG93Q2xpZW50TW9kYWwoZmFsc2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjbGllbnQgPSBjbGllbnRzLmZpbmQoKGMpID0+IGMuaWQgPT09IGNsaWVudElkKTtcbiAgICBzZXRDbGllbnRCdXR0b25UZXh0KGNsaWVudD8ubmFtZSB8fCBcIlNlbGVjdCBPcHRpb25cIik7XG4gICAgc2V0U2VsZWN0ZWRDbGllbnQoY2xpZW50SWQpO1xuICAgIHNldFNob3dDbGllbnRNb2RhbChmYWxzZSk7XG4gIH07XG5cbiAgLy8gQ2xpZW50IGluZm8gaGFuZGxlclxuICBjb25zdCBoYW5kbGVDbGllbnRJbmZvID0gKGNsaWVudElkLCBjbGllbnROYW1lKSA9PiB7XG4gICAgY29uc29sZS5sb2coYENsaWVudCBJRDogJHtjbGllbnRJZH0sIENsaWVudCBOYW1lOiAke2NsaWVudE5hbWV9YCk7XG4gIH07XG5cbiAgLy8gQ2xlYXIgY2xpZW50IHNlbGVjdGlvbiBoYW5kbGVyXG4gIGNvbnN0IGhhbmRsZUNsZWFyQ2xpZW50U2VsZWN0aW9uID0gKCkgPT4ge1xuICAgIHNldENsaWVudEJ1dHRvblRleHQoXCJTZWxlY3QgT3B0aW9uXCIpO1xuICAgIHNldFNlbGVjdGVkQ2xpZW50KG51bGwpO1xuICAgIHNldFNob3dDbGllbnRNb2RhbChmYWxzZSk7XG4gIH07XG5cbiAgLy8gRmV0Y2ggbW9kZWxzIGFuZCBzaG93IG1vZGFsXG4gIGNvbnN0IGhhbmRsZU1vZGVsQ2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9kZWxzRGF0YSA9IGF3YWl0IGZldGNoTW9kZWxzKFxuICAgICAgc2VsZWN0ZWRPRU0sXG4gICAgICBzZWxlY3RlZE1vZGFsaXR5LFxuICAgICAgc2VsZWN0ZWRDbGllbnRcbiAgICApO1xuICAgIHNldE1vZGVscyhtb2RlbHNEYXRhKTtcbiAgICBzZXRNb2RlbFNlYXJjaFRlcm0oXCJcIik7IC8vIFJlc2V0IHNlYXJjaCB0ZXJtXG4gICAgc2V0U2hvd01vZGVsTW9kYWwodHJ1ZSk7XG4gIH07XG5cbiAgLy8gTW9kZWwgc2VsZWN0aW9uIGhhbmRsZXJcbiAgY29uc3QgaGFuZGxlTW9kZWxTZWxlY3QgPSAobW9kZWxOYW1lKSA9PiB7XG4gICAgc2V0TW9kZWxCdXR0b25UZXh0KG1vZGVsTmFtZSB8fCBcIlNlbGVjdCBPcHRpb25cIik7XG4gICAgc2V0U2VsZWN0ZWRNb2RlbChtb2RlbE5hbWUgfHwgbnVsbCk7XG4gICAgc2V0U2hvd01vZGVsTW9kYWwoZmFsc2UpO1xuICB9O1xuXG4gIC8vIENsZWFyIG1vZGVsIHNlbGVjdGlvbiBoYW5kbGVyXG4gIGNvbnN0IGhhbmRsZUNsZWFyTW9kZWxTZWxlY3Rpb24gPSAoKSA9PiB7XG4gICAgc2V0TW9kZWxCdXR0b25UZXh0KFwiU2VsZWN0IE9wdGlvblwiKTtcbiAgICBzZXRTZWxlY3RlZE1vZGVsKG51bGwpO1xuICAgIHNldFNob3dNb2RlbE1vZGFsKGZhbHNlKTtcbiAgICBzZWFyY2hGaWx0ZXIoKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVXYXJlaG91c2VDbGljayA9ICgpID0+IHtcbiAgICBzZXRDbGllbnRCdXR0b25UZXh0KENMSUVOVF9XQVJFSE9VU0UpO1xuICAgIHNldFNlbGVjdGVkQ2xpZW50KENMSUVOVF9XQVJFSE9VU0UpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVVuYXNzaWduZWRDbGljayA9ICgpID0+IHtcbiAgICBzZXRDbGllbnRCdXR0b25UZXh0KENMSUVOVF9VTkFTU0lHTkVEKTtcbiAgICBzZXRTZWxlY3RlZENsaWVudChDTElFTlRfVU5BU1NJR05FRCk7XG4gIH07XG5cbiAgY29uc3QgdG90YWxLbm93blBhZ2VzID0gTWF0aC5tYXgoXG4gICAgMSxcbiAgICBwYWdlQ3Vyc29ycy5maWx0ZXIoQm9vbGVhbikubGVuZ3RoICsgKGhhc05leHRQYWdlID8gMSA6IDApXG4gICk7XG4gIGNvbnN0IHBhZ2VCdXR0b25zID0gKCgpID0+IHtcbiAgICBjb25zdCBidXR0b25zID0gW107XG4gICAgY29uc3QgbWF4VmlzaWJsZSA9IDY7XG5cbiAgICBjb25zdCBwdXNoUGFnZSA9IChwKSA9PlxuICAgICAgYnV0dG9ucy5wdXNoKFxuICAgICAgICA8UGFnaW5hdGlvbi5JdGVtXG4gICAgICAgICAga2V5PXtgcGFnZS0ke3B9YH1cbiAgICAgICAgICBhY3RpdmU9e3AgPT09IHBhZ2V9XG4gICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0UGFnZShwKX1cbiAgICAgICAgPlxuICAgICAgICAgIHtwfVxuICAgICAgICA8L1BhZ2luYXRpb24uSXRlbT5cbiAgICAgICk7XG5cbiAgICBjb25zdCBwdXNoRWxsaXBzaXMgPSAoa2V5KSA9PlxuICAgICAgYnV0dG9ucy5wdXNoKDxQYWdpbmF0aW9uLkVsbGlwc2lzIGtleT17a2V5fSBkaXNhYmxlZCAvPik7XG5cbiAgICBpZiAodG90YWxLbm93blBhZ2VzIDw9IG1heFZpc2libGUpIHtcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHRvdGFsS25vd25QYWdlczsgaSArPSAxKSBwdXNoUGFnZShpKTtcbiAgICAgIHJldHVybiBidXR0b25zO1xuICAgIH1cblxuICAgIGxldCBzdGFydCA9IE1hdGgubWF4KDIsIHBhZ2UgLSAxKTtcbiAgICBsZXQgZW5kID0gTWF0aC5taW4odG90YWxLbm93blBhZ2VzIC0gMSwgcGFnZSArIDEpO1xuICAgIGNvbnN0IGRlc2lyZWRXaW5kb3cgPSBtYXhWaXNpYmxlIC0gMjtcbiAgICBsZXQgY3VycmVudFdpbmRvdyA9IGVuZCAtIHN0YXJ0ICsgMTtcbiAgICBsZXQgcmVtYWluaW5nID0gZGVzaXJlZFdpbmRvdyAtIGN1cnJlbnRXaW5kb3c7XG5cbiAgICB3aGlsZSAocmVtYWluaW5nID4gMCkge1xuICAgICAgaWYgKHN0YXJ0ID4gMikge1xuICAgICAgICBzdGFydCAtPSAxO1xuICAgICAgICByZW1haW5pbmcgLT0gMTtcbiAgICAgIH1cbiAgICAgIGlmIChyZW1haW5pbmcgPiAwICYmIGVuZCA8IHRvdGFsS25vd25QYWdlcyAtIDEpIHtcbiAgICAgICAgZW5kICs9IDE7XG4gICAgICAgIHJlbWFpbmluZyAtPSAxO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXJ0ID09PSAyICYmIGVuZCA9PT0gdG90YWxLbm93blBhZ2VzIC0gMSkgYnJlYWs7XG4gICAgfVxuXG4gICAgcHVzaFBhZ2UoMSk7XG4gICAgaWYgKHN0YXJ0ID4gMikgcHVzaEVsbGlwc2lzKFwic3RhcnQtZWxsaXBzaXNcIik7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDw9IGVuZDsgaSArPSAxKSBwdXNoUGFnZShpKTtcbiAgICBpZiAoZW5kIDwgdG90YWxLbm93blBhZ2VzIC0gMSkgcHVzaEVsbGlwc2lzKFwiZW5kLWVsbGlwc2lzXCIpO1xuICAgIHB1c2hQYWdlKHRvdGFsS25vd25QYWdlcyk7XG4gICAgaWYgKGhhc05leHRQYWdlKSBwdXNoRWxsaXBzaXMoXCJtb3JlLWVsbGlwc2lzXCIpO1xuXG4gICAgcmV0dXJuIGJ1dHRvbnM7XG4gIH0pKCk7XG5cbiAgcmV0dXJuIChcbiAgICA8TW9kYWwgc2hvdz17c2hvd30gb25IaWRlPXtoYW5kbGVDbG9zZX0gc2l6ZT1cImxnXCIgY2VudGVyZWQgc2Nyb2xsYWJsZSBkaWFsb2dDbGFzc05hbWU9XCJwYXJlbnQtbW9kYWwtZGlhbG9nXCIgPlxuICAgICAgPE1vZGFsLkhlYWRlciBjbG9zZUJ1dHRvbj5cbiAgICAgICAgPE1vZGFsLlRpdGxlPlNlbGVjdCBQYXJlbnQ8L01vZGFsLlRpdGxlPlxuICAgICAgPC9Nb2RhbC5IZWFkZXI+XG4gICAgICA8TW9kYWwuQm9keSBzdHlsZT17eyBtYXhIZWlnaHQ6IFwiNzV2aFwiLCBvdmVyZmxvd1k6IFwiYXV0b1wiIH19PlxuICAgICAgICA8Q29udGFpbmVyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyXCJcbiAgICAgICAgICBzdHlsZT17eyBtaW5IZWlnaHQ6IFwidW5zZXRcIiB9fVxuICAgICAgICA+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwMFwiIHN0eWxlPXt7IG1heFdpZHRoOiBcIjEyMDBweFwiIH19PlxuICAgICAgICAgICAgPENhcmQ+XG4gICAgICAgICAgICAgIDxDYXJkLkJvZHk+XG4gICAgICAgICAgICAgICAgPFJvdz5cbiAgICAgICAgICAgICAgICAgIDxDb2wgbWQ9ezR9PlxuICAgICAgICAgICAgICAgICAgICB7LyogRHJvcGRvd25zICovfVxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dEdyb3VwIGNsYXNzTmFtZT1cIm1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dEdyb3VwLlRleHQ+T0VNPC9JbnB1dEdyb3VwLlRleHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8RHJvcGRvd24gb25TZWxlY3Q9e2hhbmRsZVNlbGVjdDF9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RHJvcGRvd24uVG9nZ2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmUtc2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD1cImRyb3Bkb3duLWJ1dHRvbi0xXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZHJvcGRvd24xVGV4dH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ecm9wZG93bi5Ub2dnbGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxEcm9wZG93bi5NZW51IGNsYXNzTmFtZT1cInctMTAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPERyb3Bkb3duLkl0ZW0gZXZlbnRLZXk9XCJ1bmFzc2lnbmVkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWxlY3QgT3B0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ecm9wZG93bi5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEcm9wZG93bi5JdGVtIGV2ZW50S2V5PVwiR0VcIj5HRTwvRHJvcGRvd24uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RHJvcGRvd24uSXRlbSBldmVudEtleT1cIlRvc2hpYmFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRvc2hpYmFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Ryb3Bkb3duLkl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPERyb3Bkb3duLkl0ZW0gZXZlbnRLZXk9XCJTaWVtZW5zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaWVtZW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ecm9wZG93bi5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEcm9wZG93bi5JdGVtIGV2ZW50S2V5PVwiUGhpbGlwc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGhpbGlwc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRHJvcGRvd24uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ecm9wZG93bi5NZW51PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Ecm9wZG93bj5cbiAgICAgICAgICAgICAgICAgICAgICA8L0lucHV0R3JvdXA+XG5cbiAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRHcm91cCBjbGFzc05hbWU9XCJtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRHcm91cC5UZXh0Pk1vZGFsaXR5PC9JbnB1dEdyb3VwLlRleHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8RHJvcGRvd24gb25TZWxlY3Q9e2hhbmRsZVNlbGVjdDJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RHJvcGRvd24uVG9nZ2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmUtc2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD1cImRyb3Bkb3duLWJ1dHRvbi0yXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZHJvcGRvd24yVGV4dH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ecm9wZG93bi5Ub2dnbGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxEcm9wZG93bi5NZW51IGNsYXNzTmFtZT1cInctMTAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPERyb3Bkb3duLkl0ZW0gZXZlbnRLZXk9XCJ1bmFzc2lnbmVkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWxlY3QgT3B0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ecm9wZG93bi5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEcm9wZG93bi5JdGVtIGV2ZW50S2V5PVwiQ1RcIj5DVDwvRHJvcGRvd24uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RHJvcGRvd24uSXRlbSBldmVudEtleT1cIk1SSVwiPk1SSTwvRHJvcGRvd24uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ecm9wZG93bi5NZW51PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Ecm9wZG93bj5cbiAgICAgICAgICAgICAgICAgICAgICA8L0lucHV0R3JvdXA+XG5cbiAgICAgICAgICAgICAgICAgICAgICB7LyogQnV0dG9ucyAqL31cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0R3JvdXAgY2xhc3NOYW1lPVwibWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRHcm91cC5UZXh0PkNsaWVudDwvSW5wdXRHcm91cC5UZXh0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmUtc2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQ2xpZW50Q2xpY2t9XG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2xpZW50QnV0dG9uVGV4dH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0lucHV0R3JvdXA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRHcm91cCBjbGFzc05hbWU9XCJtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dEdyb3VwLlRleHQ+Q2xpZW50LTI8L0lucHV0R3JvdXAuVGV4dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lLXNlY29uZGFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xMDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWxlY3QgT3B0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9JbnB1dEdyb3VwPlxuICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0R3JvdXAgY2xhc3NOYW1lPVwibWItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRHcm91cC5UZXh0Pk1vZGVsPC9JbnB1dEdyb3VwLlRleHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PVwib3V0bGluZS1zZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMTAwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVNb2RlbENsaWNrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge21vZGVsQnV0dG9uVGV4dH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0lucHV0R3JvdXA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogRGl2aWRlciAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuZGl2aWRlcn0+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRHcm91cCBjbGFzc05hbWU9XCJtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dEdyb3VwLlRleHQ+V2FyZWhvdXNlPC9JbnB1dEdyb3VwLlRleHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuYnV0dG9uR3JvdXB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lLXNlY29uZGFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5mbGV4QnV0dG9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlV2FyZWhvdXNlQ2xpY2t9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV2FyZWhvdXNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmUtc2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17c3R5bGVzLmZsZXhCdXR0b259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVVbmFzc2lnbmVkQ2xpY2t9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVW5hc3NpZ25lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvSW5wdXRHcm91cD5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L0NvbD5cblxuICAgICAgICAgICAgICAgICAgPENvbCBtZD17OH0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMudGFibGVDb250YWluZXJ9PlxuICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZSBzdHJpcGVkIGJvcmRlcmVkIGhvdmVyIHNpemU9XCJzbVwiIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZCBjbGFzc05hbWU9e3N0eWxlcy5zdGlja3lIZWFkZXJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPk5hbWU8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5EYXRlPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+V29yayBPcmRlcjwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlByb2R1Y3QgTnVtYmVyPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+U2VyaWFsIE51bWJlcjwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlNlbGVjdDwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7aW5mby5tYXAoKGl0ZW0pID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3NOYW1lPVwiY2xpY2thYmxlLXJvd1wiIGtleT17aXRlbS5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e2l0ZW0ubmFtZX08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPntmb3JtYXREYXRlKGl0ZW0uZGF0ZSl9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2l0ZW0ud29ya09yZGVycyAmJiBpdGVtLndvcmtPcmRlcnMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gaXRlbS53b3JrT3JkZXJzW2l0ZW0ud29ya09yZGVycy5sZW5ndGggLSAxXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAud29ya09yZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIk4vQVwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57aXRlbS5wbn08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPntpdGVtLnNufTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gcm93U2VsZWN0KGl0ZW0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgPC9UYWJsZT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnNlYXJjaENvbnRhaW5lcn0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybSBjbGFzc05hbWU9XCJkLWZsZXggcGItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUNvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPXtzaG93TGlzdFNlYXJjaH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlNlYXJjaFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibWUtMiBmbGV4LWdyb3ctMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIlNlYXJjaFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3NlYXJjaH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17c2VhcmNoQ2hhbmdlSGFuZGxlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBmbGV4OiBcIjFcIiB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8TmF2RHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17c2VsZWN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwiY29sbGFzaWJsZS1uYXYtZHJvcGRvd25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3c9e3Nob3dMaXN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VFbnRlcj17KCkgPT4gc2V0U2hvd0xpc3QodHJ1ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXsoKSA9PiBzZXRTaG93TGlzdChmYWxzZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luVG9wOiBcIi01cHhcIiB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPE5hdkRyb3Bkb3duLkl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNlbGVjdChcIk5hbWVcIikgJiBzZXRTaG93TGlzdFNlYXJjaChcInRleHRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9OYXZEcm9wZG93bi5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxOYXZEcm9wZG93bi5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWxlY3QoXCJEYXRlXCIpICYgc2V0U2hvd0xpc3RTZWFyY2goXCJkYXRlXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvTmF2RHJvcGRvd24uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TmF2RHJvcGRvd24uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2VsZWN0KFwiV29yayBPcmRlclwiKSAmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNob3dMaXN0U2VhcmNoKFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV29yayBPcmRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvTmF2RHJvcGRvd24uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TmF2RHJvcGRvd24uSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2VsZWN0KFwiUHJvZHVjdCBOdW1iZXJcIikgJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTaG93TGlzdFNlYXJjaChcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFByb2R1Y3QgTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9OYXZEcm9wZG93bi5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxOYXZEcm9wZG93bi5JdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWxlY3QoXCJEZXNjcmlwdGlvblwiKSAmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNob3dMaXN0U2VhcmNoKFwidGV4dFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9OYXZEcm9wZG93bi5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L05hdkRyb3Bkb3duPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogPEJ1dHRvbiB2YXJpYW50PVwiaW5mb1wiIG9uQ2xpY2s9e3NlYXJjaEZpbHRlcn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VhcmNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPiAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L0NvbD5cbiAgICAgICAgICAgICAgICA8L1Jvdz5cbiAgICAgICAgICAgICAgPC9DYXJkLkJvZHk+XG4gICAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvQ29udGFpbmVyPlxuICAgICAgPC9Nb2RhbC5Cb2R5PlxuICAgICAgPE1vZGFsLkZvb3Rlcj5cbiAgICAgICAgPEJ1dHRvbiB2YXJpYW50PVwic2Vjb25kYXJ5XCIgb25DbGljaz17aGFuZGxlQ2xvc2V9PlxuICAgICAgICAgIENhbmNlbFxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgPEJ1dHRvblxuICAgICAgICAgIHZhcmlhbnQ9XCJ3YXJuaW5nXCJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICBzZXRTZWxlY3RlZFBhcmVudChudWxsKTtcbiAgICAgICAgICAgIGhhbmRsZUNsb3NlKCk7XG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIENsZWFyIFNlbGVjdGlvblxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgIDwvTW9kYWwuRm9vdGVyPlxuICAgICAgPE1vZGFsIHNob3c9e3Nob3dDbGllbnRNb2RhbH0gb25IaWRlPXtoYW5kbGVDbG9zZUNsaWVudE1vZGFsfT5cbiAgICAgICAgPE1vZGFsLkhlYWRlciBjbG9zZUJ1dHRvbj5cbiAgICAgICAgICA8TW9kYWwuVGl0bGU+U2VsZWN0IENsaWVudDwvTW9kYWwuVGl0bGU+XG4gICAgICAgIDwvTW9kYWwuSGVhZGVyPlxuICAgICAgICA8TW9kYWwuQm9keT5cbiAgICAgICAgICA8Rm9ybUNvbnRyb2xcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiU2VhcmNoIGJ5IG5hbWVcIlxuICAgICAgICAgICAgY2xhc3NOYW1lPVwibWItM1wiXG4gICAgICAgICAgICB2YWx1ZT17Y2xpZW50U2VhcmNoVGVybX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0Q2xpZW50U2VhcmNoVGVybShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8Q2xpZW50VGFibGVcbiAgICAgICAgICAgIGNsaWVudHM9e2NsaWVudHMuZmlsdGVyKChjbGllbnQpID0+XG4gICAgICAgICAgICAgIGNsaWVudC5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoY2xpZW50U2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIGRpc2FibGVJbmZvPXt0cnVlfVxuICAgICAgICAgICAgb25TZWxlY3RDbGllbnQ9e2hhbmRsZUNsaWVudFNlbGVjdH1cbiAgICAgICAgICAgIG9uSW5mb0NsaWNrPXtoYW5kbGVDbGllbnRJbmZvfVxuICAgICAgICAgICAgY2xlYXJTZWxlY3Rpb249eygpID0+IGhhbmRsZUNsaWVudFNlbGVjdChudWxsKX0gLy8gQ2xlYXIgc2VsZWN0aW9uIGhhbmRsZXJcbiAgICAgICAgICAvPlxuICAgICAgICA8L01vZGFsLkJvZHk+XG4gICAgICA8L01vZGFsPlxuXG4gICAgICA8TW9kYWwgc2hvdz17c2hvd01vZGVsTW9kYWx9IG9uSGlkZT17aGFuZGxlQ2xvc2VNb2RlbE1vZGFsfT5cbiAgICAgICAgPE1vZGFsLkhlYWRlciBjbG9zZUJ1dHRvbj5cbiAgICAgICAgICA8TW9kYWwuVGl0bGU+U2VsZWN0IE1vZGVsPC9Nb2RhbC5UaXRsZT5cbiAgICAgICAgPC9Nb2RhbC5IZWFkZXI+XG4gICAgICAgIDxNb2RhbC5Cb2R5PlxuICAgICAgICAgIDxGb3JtQ29udHJvbFxuICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJTZWFyY2ggYnkgbmFtZVwiXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJtYi0zXCJcbiAgICAgICAgICAgIHZhbHVlPXttb2RlbFNlYXJjaFRlcm19XG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldE1vZGVsU2VhcmNoVGVybShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8TW9kZWxUYWJsZVxuICAgICAgICAgICAgbW9kZWxzPXttb2RlbHMuZmlsdGVyKChtb2RlbCkgPT5cbiAgICAgICAgICAgICAgdHlwZW9mIG1vZGVsID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgPyBtb2RlbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG1vZGVsU2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBvblNlbGVjdE1vZGVsPXtoYW5kbGVNb2RlbFNlbGVjdH1cbiAgICAgICAgICAgIGNsZWFyU2VsZWN0aW9uPXsoKSA9PiBoYW5kbGVNb2RlbFNlbGVjdChudWxsKX0gLy8gQ2xlYXIgc2VsZWN0aW9uIGhhbmRsZXJcbiAgICAgICAgICAvPlxuICAgICAgICA8L01vZGFsLkJvZHk+XG4gICAgICA8L01vZGFsPlxuICAgIDwvTW9kYWw+XG4gICk7XG59O1xuPHN0eWxlIGpzeCBnbG9iYWw+e2BcbiAgLyogQ29uc3RyYWluIHRoZSBtb2RhbCBkaWFsb2cgd2lkdGggdG8gdmlld3BvcnQgKi9cbiAgLnBhcmVudC1tb2RhbC1kaWFsb2cge1xuICAgIG1heC13aWR0aDogOTV2dztcbiAgICBtYXJnaW46IDAgYXV0bztcbiAgfVxuICAvKiBJZiB0aGUgdGFibGUgY29udGFpbmVyIGhhcyBhIGZpeGVkIGhlaWdodCBhbHJlYWR5LCBrZWVwIGl04oCUYnV0IGVuc3VyZSBpdCBuZXZlciBleGNlZWRzIGJvZHkgKi9cbiAgLnBhcmVudC1tb2RhbC1kaWFsb2cgLm1vZGFsLWJvZHkgLiR7c3R5bGVzLnRhYmxlQ29udGFpbmVyfSB7XG4gICAgbWF4LWhlaWdodDogNzB2aDtcbiAgICBvdmVyZmxvdzogYXV0bztcbiAgfVxuYH08L3N0eWxlPlxuZXhwb3J0IGRlZmF1bHQgUGFyZW50TW9kYWw7XG4iXX0= */\n/*@ sourceURL=C:\\\\Users\\\\mack2\\\\Desktop\\\\code\\\\pages\\\\NewSearch\\\\AddItem\\\\parentModal.js */`);\n\nexport default ParentModal;","map":{"version":3,"sources":["C:/Users/mack2/Desktop/code/pages/NewSearch/AddItem/parentModal.js"],"names":["React","useEffect","useState","useCallback","Modal","InputGroup","Dropdown","FormControl","Button","NavDropdown","Form","Table","Pagination","fetchPartsWithMachineDataPage","fetchClients","fetchModels","formatDate","ClientTable","ModelTable","styles","CLIENT_WAREHOUSE","CLIENT_UNASSIGNED","PAGE_SIZE","ParentModal","show","handleClose","setSelectedParent","parts","info","setInfo","isLoading","setIsLoading","page","setPage","pageCursors","setPageCursors","hasNextPage","setHasNextPage","queryEpoch","setQueryEpoch","loadError","setLoadError","search","setSearch","select","setSelect","showList","setShowList","showListSearch","setShowListSearch","selectedOEM","setSelectedOEM","selectedModality","setSelectedModality","selectedClient","setSelectedClient","clients","setClients","showClientModal","setShowClientModal","clientButtonText","setClientButtonText","hoverIndex","setHoverIndex","selectedModel","setSelectedModel","models","setModels","showModelModal","setShowModelModal","modelButtonText","setModelButtonText","clientSearchTerm","setClientSearchTerm","modelSearchTerm","setModelSearchTerm","getMachineField","item","key","machineData","toLowerCase","currentMachineData","resetPagination","handleCloseClientModal","handleShowClientModal","handleCloseModelModal","handleShowModelModal","searchChangeHandler","event","target","value","matchesFilters","OEM","Modality","Model","clientRef","clientId","id","fetchData","requestedPage","startAfterDoc","searchLower","trim","data","lastDoc","nextPage","pageSize","visibleOnly","filterFn","type","raw","lower","needsMachineData","Boolean","prev","next","error","console","message","v","rowSelect","name","pn","dropdown1Text","setDropdown1Text","dropdown2Text","setDropdown2Text","handleSelect1","eventKey","textContent","handleSelect2","handleClientClick","clientsData","handleClientSelect","client","find","c","handleClientInfo","clientName","log","handleClearClientSelection","handleModelClick","modelsData","handleModelSelect","modelName","handleClearModelSelection","searchFilter","handleWarehouseClick","handleUnassignedClick","totalKnownPages","Math","max","filter","length","pageButtons","buttons","maxVisible","pushPage","p","push","pushEllipsis","i","start","end","min","desiredWindow","currentWindow","remaining","maxHeight","overflowY","minHeight","maxWidth","divider","buttonGroup","flexButton","tableContainer","stickyHeader","map","date","workOrders","workOrder","sn","searchContainer","flex","marginTop","e","includes","model"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\nimport {\n  Modal,\n  InputGroup,\n  Dropdown,\n  FormControl,\n  Button,\n  NavDropdown,\n  Form,\n  Table,\n  Pagination,\n} from \"react-bootstrap\";\nimport {\n  fetchPartsWithMachineDataPage,\n  fetchClients,\n  fetchModels,\n  formatDate,\n} from \"../../../utils/fetchAssociations\";\nimport ClientTable from \"../../../utils/ClientTable\";\nimport ModelTable from \"../../../utils/ModelTable\";\nimport styles from \"./ParentModal.module.css\";\n\nconst CLIENT_WAREHOUSE = \"igor-house\";\nconst CLIENT_UNASSIGNED = \"unassigned\";\nconst PAGE_SIZE = 20;\n\nconst ParentModal = ({ show, handleClose, setSelectedParent, parts }) => {\n  const [info, setInfo] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [page, setPage] = useState(1);\n  const [pageCursors, setPageCursors] = useState([]);\n  const [hasNextPage, setHasNextPage] = useState(false);\n  const [queryEpoch, setQueryEpoch] = useState(0);\n  const [loadError, setLoadError] = useState(null);\n  const [search, setSearch] = useState(\"\");\n  const [select, setSelect] = useState(\"Name\");\n  const [showList, setShowList] = useState(false);\n  const [showListSearch, setShowListSearch] = useState(\"text\");\n  const [selectedOEM, setSelectedOEM] = useState(null);\n  const [selectedModality, setSelectedModality] = useState(null);\n  const [selectedClient, setSelectedClient] = useState(null);\n  const [clients, setClients] = useState([]);\n  const [showClientModal, setShowClientModal] = useState(false);\n  const [clientButtonText, setClientButtonText] = useState(\"Select Option\");\n  const [hoverIndex, setHoverIndex] = useState(null);\n  const [selectedModel, setSelectedModel] = useState(null);\n  const [models, setModels] = useState([]);\n  const [showModelModal, setShowModelModal] = useState(false);\n  const [modelButtonText, setModelButtonText] = useState(\"Select Option\");\n  const [clientSearchTerm, setClientSearchTerm] = useState(\"\");\n  const [modelSearchTerm, setModelSearchTerm] = useState(\"\");\n\n  const getMachineField = (item, key) => {\n    if (!item) return null;\n    return (\n      item?.machineData?.[key] ??\n      item?.machineData?.[key?.toLowerCase?.()] ??\n      item?.currentMachineData?.[key] ??\n      item?.currentMachineData?.[key?.toLowerCase?.()] ??\n      null\n    );\n  };\n\n  const resetPagination = () => {\n    setPage(1);\n    setPageCursors([]);\n    setHasNextPage(false);\n  };\n\n  const handleCloseClientModal = () => setShowClientModal(false);\n  const handleShowClientModal = () => setShowClientModal(true);\n\n  const handleCloseModelModal = () => setShowModelModal(false);\n  const handleShowModelModal = () => setShowModelModal(true);\n\n  // Handle search input changes\n  const searchChangeHandler = (event) => setSearch(event.target.value);\n\n  const matchesFilters = useCallback(\n    (item) => {\n      if (!item) return false;\n      if (selectedOEM) {\n        const OEM = getMachineField(item, \"OEM\");\n        if (OEM !== selectedOEM) return false;\n      }\n      if (selectedModality) {\n        const Modality = getMachineField(item, \"Modality\");\n        if (Modality !== selectedModality) return false;\n      }\n      if (selectedModel) {\n        const Model = getMachineField(item, \"Model\");\n        if (Model !== selectedModel) return false;\n      }\n      if (selectedClient) {\n        const clientRef = getMachineField(item, \"client\");\n        const clientId =\n          typeof clientRef === \"string\"\n            ? clientRef\n            : clientRef?.id || null;\n        if (clientId !== selectedClient) return false;\n      }\n      return true;\n    },\n    [selectedOEM, selectedModality, selectedModel, selectedClient]\n  );\n\n  const fetchData = useCallback(\n    async (requestedPage = 1) => {\n      if (!show) return;\n      const startAfterDoc =\n        requestedPage > 1 ? pageCursors[requestedPage - 2] : null;\n      if (requestedPage > 1 && !startAfterDoc) {\n        setPage(1);\n        return;\n      }\n      setIsLoading(true);\n      setLoadError(null);\n      const searchLower = (search || \"\").toLowerCase().trim();\n      try {\n        const { parts: data, lastDoc, hasNextPage: nextPage } =\n          await fetchPartsWithMachineDataPage({\n            pageSize: PAGE_SIZE,\n            startAfterDoc,\n            visibleOnly: true,\n            filterFn:\n              selectedOEM || selectedModality || selectedModel || selectedClient\n                ? matchesFilters\n                : null,\n            search: searchLower\n              ? {\n                  type: select,\n                  raw: search,\n                  lower: searchLower,\n                }\n              : null,\n            needsMachineData:\n              Boolean(selectedOEM) ||\n              Boolean(selectedModality) ||\n              Boolean(selectedModel) ||\n              Boolean(selectedClient),\n          });\n        setInfo(data);\n        setHasNextPage(nextPage);\n        setPageCursors((prev) => {\n          const next = requestedPage === 1 ? [] : [...prev];\n          if (lastDoc) {\n            next[requestedPage - 1] = lastDoc;\n          }\n          return next;\n        });\n      } catch (error) {\n        console.error(\"Parent modal load failed:\", error);\n        setLoadError(error?.message || \"Failed to load items.\");\n        setInfo([]);\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [\n      show,\n      pageCursors,\n      search,\n      select,\n      selectedOEM,\n      selectedModality,\n      selectedModel,\n      selectedClient,\n      matchesFilters,\n    ]\n  );\n\n  useEffect(() => {\n    if (!show) return;\n    resetPagination();\n    setQueryEpoch((v) => v + 1);\n  }, [show, selectedOEM, selectedModality, selectedModel, selectedClient, search, select]);\n\n  useEffect(() => {\n    if (!show) return;\n    fetchData(page);\n  }, [show, page, queryEpoch, fetchData]);\n\n  // Row selection handler\n  const rowSelect = (item) => {\n    // item.id must be present in fetchPartsWithMachineData() results\n    setSelectedParent({ id: item.id, name: item.name, pn: item.pn });\n    handleClose();\n  };\n\n  // Dropdown handlers\n  const [dropdown1Text, setDropdown1Text] = useState(\"Select Option\");\n  const [dropdown2Text, setDropdown2Text] = useState(\"Select Option\");\n\n  const handleSelect1 = (eventKey, event) => {\n    if (eventKey === \"unassigned\") {\n      setDropdown1Text(\"Select Option\");\n      setSelectedOEM(null);\n    } else {\n      setDropdown1Text(event.target.textContent);\n      setSelectedOEM(event.target.textContent);\n    }\n  };\n\n  const handleSelect2 = (eventKey, event) => {\n    if (eventKey === \"unassigned\") {\n      setDropdown2Text(\"Select Option\");\n      setSelectedModality(null);\n    } else {\n      setDropdown2Text(event.target.textContent);\n      setSelectedModality(event.target.textContent);\n    }\n  };\n\n  // Fetch clients and show modal\n  const handleClientClick = async () => {\n    const clientsData = await fetchClients(selectedOEM, selectedModality);\n    setClients(clientsData);\n    setClientSearchTerm(\"\"); // Reset search term\n    setShowClientModal(true);\n  };\n\n  // Client selection handler\n  const handleClientSelect = (clientId) => {\n    if (!clientId) {\n      setClientButtonText(\"Select Option\");\n      setSelectedClient(null);\n      setShowClientModal(false);\n      return;\n    }\n    const client = clients.find((c) => c.id === clientId);\n    setClientButtonText(client?.name || \"Select Option\");\n    setSelectedClient(clientId);\n    setShowClientModal(false);\n  };\n\n  // Client info handler\n  const handleClientInfo = (clientId, clientName) => {\n    console.log(`Client ID: ${clientId}, Client Name: ${clientName}`);\n  };\n\n  // Clear client selection handler\n  const handleClearClientSelection = () => {\n    setClientButtonText(\"Select Option\");\n    setSelectedClient(null);\n    setShowClientModal(false);\n  };\n\n  // Fetch models and show modal\n  const handleModelClick = async () => {\n    const modelsData = await fetchModels(\n      selectedOEM,\n      selectedModality,\n      selectedClient\n    );\n    setModels(modelsData);\n    setModelSearchTerm(\"\"); // Reset search term\n    setShowModelModal(true);\n  };\n\n  // Model selection handler\n  const handleModelSelect = (modelName) => {\n    setModelButtonText(modelName || \"Select Option\");\n    setSelectedModel(modelName || null);\n    setShowModelModal(false);\n  };\n\n  // Clear model selection handler\n  const handleClearModelSelection = () => {\n    setModelButtonText(\"Select Option\");\n    setSelectedModel(null);\n    setShowModelModal(false);\n    searchFilter();\n  };\n\n  const handleWarehouseClick = () => {\n    setClientButtonText(CLIENT_WAREHOUSE);\n    setSelectedClient(CLIENT_WAREHOUSE);\n  };\n\n  const handleUnassignedClick = () => {\n    setClientButtonText(CLIENT_UNASSIGNED);\n    setSelectedClient(CLIENT_UNASSIGNED);\n  };\n\n  const totalKnownPages = Math.max(\n    1,\n    pageCursors.filter(Boolean).length + (hasNextPage ? 1 : 0)\n  );\n  const pageButtons = (() => {\n    const buttons = [];\n    const maxVisible = 6;\n\n    const pushPage = (p) =>\n      buttons.push(\n        <Pagination.Item\n          key={`page-${p}`}\n          active={p === page}\n          onClick={() => setPage(p)}\n        >\n          {p}\n        </Pagination.Item>\n      );\n\n    const pushEllipsis = (key) =>\n      buttons.push(<Pagination.Ellipsis key={key} disabled />);\n\n    if (totalKnownPages <= maxVisible) {\n      for (let i = 1; i <= totalKnownPages; i += 1) pushPage(i);\n      return buttons;\n    }\n\n    let start = Math.max(2, page - 1);\n    let end = Math.min(totalKnownPages - 1, page + 1);\n    const desiredWindow = maxVisible - 2;\n    let currentWindow = end - start + 1;\n    let remaining = desiredWindow - currentWindow;\n\n    while (remaining > 0) {\n      if (start > 2) {\n        start -= 1;\n        remaining -= 1;\n      }\n      if (remaining > 0 && end < totalKnownPages - 1) {\n        end += 1;\n        remaining -= 1;\n      }\n      if (start === 2 && end === totalKnownPages - 1) break;\n    }\n\n    pushPage(1);\n    if (start > 2) pushEllipsis(\"start-ellipsis\");\n    for (let i = start; i <= end; i += 1) pushPage(i);\n    if (end < totalKnownPages - 1) pushEllipsis(\"end-ellipsis\");\n    pushPage(totalKnownPages);\n    if (hasNextPage) pushEllipsis(\"more-ellipsis\");\n\n    return buttons;\n  })();\n\n  return (\n    <Modal show={show} onHide={handleClose} size=\"lg\" centered scrollable dialogClassName=\"parent-modal-dialog\" >\n      <Modal.Header closeButton>\n        <Modal.Title>Select Parent</Modal.Title>\n      </Modal.Header>\n      <Modal.Body style={{ maxHeight: \"75vh\", overflowY: \"auto\" }}>\n        <Container\n          className=\"d-flex align-items-center justify-content-center\"\n          style={{ minHeight: \"unset\" }}\n        >\n          <div className=\"w-100\" style={{ maxWidth: \"1200px\" }}>\n            <Card>\n              <Card.Body>\n                <Row>\n                  <Col md={4}>\n                    {/* Dropdowns */}\n                    <div>\n                      <InputGroup className=\"mb-3\">\n                        <InputGroup.Text>OEM</InputGroup.Text>\n                        <Dropdown onSelect={handleSelect1}>\n                          <Dropdown.Toggle\n                            variant=\"outline-secondary\"\n                            id=\"dropdown-button-1\"\n                            className=\"w-100\"\n                          >\n                            {dropdown1Text}\n                          </Dropdown.Toggle>\n                          <Dropdown.Menu className=\"w-100\">\n                            <Dropdown.Item eventKey=\"unassigned\">\n                              Select Option\n                            </Dropdown.Item>\n                            <Dropdown.Item eventKey=\"GE\">GE</Dropdown.Item>\n                            <Dropdown.Item eventKey=\"Toshiba\">\n                              Toshiba\n                            </Dropdown.Item>\n                            <Dropdown.Item eventKey=\"Siemens\">\n                              Siemens\n                            </Dropdown.Item>\n                            <Dropdown.Item eventKey=\"Philips\">\n                              Philips\n                            </Dropdown.Item>\n                          </Dropdown.Menu>\n                        </Dropdown>\n                      </InputGroup>\n\n                      <InputGroup className=\"mb-3\">\n                        <InputGroup.Text>Modality</InputGroup.Text>\n                        <Dropdown onSelect={handleSelect2}>\n                          <Dropdown.Toggle\n                            variant=\"outline-secondary\"\n                            id=\"dropdown-button-2\"\n                            className=\"w-100\"\n                          >\n                            {dropdown2Text}\n                          </Dropdown.Toggle>\n                          <Dropdown.Menu className=\"w-100\">\n                            <Dropdown.Item eventKey=\"unassigned\">\n                              Select Option\n                            </Dropdown.Item>\n                            <Dropdown.Item eventKey=\"CT\">CT</Dropdown.Item>\n                            <Dropdown.Item eventKey=\"MRI\">MRI</Dropdown.Item>\n                          </Dropdown.Menu>\n                        </Dropdown>\n                      </InputGroup>\n\n                      {/* Buttons */}\n                      <div>\n                        <InputGroup className=\"mb-3\">\n                          <InputGroup.Text>Client</InputGroup.Text>\n                          <Button\n                            variant=\"outline-secondary\"\n                            className=\"w-100\"\n                            onClick={handleClientClick}\n                          >\n                            {clientButtonText}\n                          </Button>\n                        </InputGroup>\n                        <InputGroup className=\"mb-3\">\n                          <InputGroup.Text>Client-2</InputGroup.Text>\n                          <Button\n                            variant=\"outline-secondary\"\n                            className=\"w-100\"\n                            disabled\n                          >\n                            Select Option\n                          </Button>\n                        </InputGroup>\n                        <InputGroup className=\"mb-3\">\n                          <InputGroup.Text>Model</InputGroup.Text>\n                          <Button\n                            variant=\"outline-secondary\"\n                            className=\"w-100\"\n                            onClick={handleModelClick}\n                          >\n                            {modelButtonText}\n                          </Button>\n                        </InputGroup>\n                        {/* Divider */}\n                        <div className={styles.divider}></div>\n                        <InputGroup className=\"mb-3\">\n                          <InputGroup.Text>Warehouse</InputGroup.Text>\n                          <div className={styles.buttonGroup}>\n                            <Button\n                              variant=\"outline-secondary\"\n                              className={styles.flexButton}\n                              onClick={handleWarehouseClick}\n                            >\n                              Warehouse\n                            </Button>\n                            <Button\n                              variant=\"outline-secondary\"\n                              className={styles.flexButton}\n                              onClick={handleUnassignedClick}\n                            >\n                              Unassigned\n                            </Button>\n                          </div>\n                        </InputGroup>\n                      </div>\n                    </div>\n                  </Col>\n\n                  <Col md={8}>\n                    <div className={styles.tableContainer}>\n                      <Table striped bordered hover size=\"sm\" className=\"mb-0\">\n                        <thead className={styles.stickyHeader}>\n                          <tr>\n                            <th>Name</th>\n                            <th>Date</th>\n                            <th>Work Order</th>\n                            <th>Product Number</th>\n                            <th>Serial Number</th>\n                            <th>Select</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {info.map((item) => (\n                            <tr className=\"clickable-row\" key={item.id}>\n                              <td>{item.name}</td>\n                              <td>{formatDate(item.date)}</td>\n                              <td>\n                                {item.workOrders && item.workOrders.length > 0\n                                  ? item.workOrders[item.workOrders.length - 1]\n                                      .workOrder\n                                  : \"N/A\"}\n                              </td>\n                              <td>{item.pn}</td>\n                              <td>{item.sn}</td>\n                              <td>\n                                <Button\n                                  variant=\"primary\"\n                                  onClick={() => rowSelect(item)}\n                                >\n                                  Select\n                                </Button>\n                              </td>\n                            </tr>\n                          ))}\n                        </tbody>\n                      </Table>\n                      <div className={styles.searchContainer}>\n                        <Form className=\"d-flex pb-2\">\n                          <FormControl\n                            type={showListSearch}\n                            placeholder=\"Search\"\n                            className=\"me-2 flex-grow-1\"\n                            aria-label=\"Search\"\n                            value={search}\n                            onChange={searchChangeHandler}\n                            style={{ flex: \"1\" }}\n                          />\n                          <NavDropdown\n                            title={select}\n                            id=\"collasible-nav-dropdown\"\n                            show={showList}\n                            onMouseEnter={() => setShowList(true)}\n                            onMouseLeave={() => setShowList(false)}\n                            style={{ marginTop: \"-5px\" }}\n                          >\n                            <NavDropdown.Item\n                              onClick={() =>\n                                setSelect(\"Name\") & setShowListSearch(\"text\")\n                              }\n                            >\n                              Name\n                            </NavDropdown.Item>\n                            <NavDropdown.Item\n                              onClick={() =>\n                                setSelect(\"Date\") & setShowListSearch(\"date\")\n                              }\n                            >\n                              Date\n                            </NavDropdown.Item>\n                            <NavDropdown.Item\n                              onClick={() =>\n                                setSelect(\"Work Order\") &\n                                setShowListSearch(\"number\")\n                              }\n                            >\n                              Work Order\n                            </NavDropdown.Item>\n                            <NavDropdown.Item\n                              onClick={() =>\n                                setSelect(\"Product Number\") &\n                                setShowListSearch(\"number\")\n                              }\n                            >\n                              Product Number\n                            </NavDropdown.Item>\n                            <NavDropdown.Item\n                              onClick={() =>\n                                setSelect(\"Description\") &\n                                setShowListSearch(\"text\")\n                              }\n                            >\n                              Description\n                            </NavDropdown.Item>\n                          </NavDropdown>\n                          {/* <Button variant=\"info\" onClick={searchFilter}>\n                            Search\n                          </Button> */}\n                        </Form>\n                      </div>\n                    </div>\n                  </Col>\n                </Row>\n              </Card.Body>\n            </Card>\n          </div>\n        </Container>\n      </Modal.Body>\n      <Modal.Footer>\n        <Button variant=\"secondary\" onClick={handleClose}>\n          Cancel\n        </Button>\n        <Button\n          variant=\"warning\"\n          onClick={() => {\n            setSelectedParent(null);\n            handleClose();\n          }}\n        >\n          Clear Selection\n        </Button>\n      </Modal.Footer>\n      <Modal show={showClientModal} onHide={handleCloseClientModal}>\n        <Modal.Header closeButton>\n          <Modal.Title>Select Client</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <FormControl\n            type=\"text\"\n            placeholder=\"Search by name\"\n            className=\"mb-3\"\n            value={clientSearchTerm}\n            onChange={(e) => setClientSearchTerm(e.target.value)}\n          />\n          <ClientTable\n            clients={clients.filter((client) =>\n              client.name.toLowerCase().includes(clientSearchTerm.toLowerCase())\n            )}\n            disableInfo={true}\n            onSelectClient={handleClientSelect}\n            onInfoClick={handleClientInfo}\n            clearSelection={() => handleClientSelect(null)} // Clear selection handler\n          />\n        </Modal.Body>\n      </Modal>\n\n      <Modal show={showModelModal} onHide={handleCloseModelModal}>\n        <Modal.Header closeButton>\n          <Modal.Title>Select Model</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <FormControl\n            type=\"text\"\n            placeholder=\"Search by name\"\n            className=\"mb-3\"\n            value={modelSearchTerm}\n            onChange={(e) => setModelSearchTerm(e.target.value)}\n          />\n          <ModelTable\n            models={models.filter((model) =>\n              typeof model === \"string\"\n                ? model.toLowerCase().includes(modelSearchTerm.toLowerCase())\n                : false\n            )}\n            onSelectModel={handleModelSelect}\n            clearSelection={() => handleModelSelect(null)} // Clear selection handler\n          />\n        </Modal.Body>\n      </Modal>\n    </Modal>\n  );\n};\n<style jsx global>{`\n  /* Constrain the modal dialog width to viewport */\n  .parent-modal-dialog {\n    max-width: 95vw;\n    margin: 0 auto;\n  }\n  /* If the table container has a fixed height already, keep itbut ensure it never exceeds body */\n  .parent-modal-dialog .modal-body .${styles.tableContainer} {\n    max-height: 70vh;\n    overflow: auto;\n  }\n`}</style>\nexport default ParentModal;\n"]},"metadata":{},"sourceType":"module"}