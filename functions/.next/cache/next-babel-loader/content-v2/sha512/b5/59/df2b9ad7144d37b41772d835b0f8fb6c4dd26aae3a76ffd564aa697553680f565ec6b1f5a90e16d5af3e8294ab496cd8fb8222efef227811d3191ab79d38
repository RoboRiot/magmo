{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/isavc/OneDrive/Documents/AIS/Apps/magmo/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/isavc/OneDrive/Documents/AIS/Apps/magmo/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\isavc\\\\OneDrive\\\\Documents\\\\AIS\\\\Apps\\\\magmo\\\\pages\\\\NewSearch\\\\item\\\\[id]\\\\NewLocal.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n// NewLocal.js\nimport React, { useState, useEffect } from \"react\";\nimport { Form, Row, Col, Button, Stack } from \"react-bootstrap\";\nimport { useRouter } from \"next/router\";\nimport firebase from \"../../../../context/Firebase\";\nimport WarehouseMapModal from \"../../../../components/WarehouseMapModal\";\nimport styles from \"./NewLocal.module.css\";\nexport default function NewLocal(_ref) {\n  _s();\n\n  var _this = this;\n\n  var _ref$onSave = _ref.onSave,\n      onSave = _ref$onSave === void 0 ? function () {} : _ref$onSave,\n      _ref$onCancel = _ref.onCancel,\n      onCancel = _ref$onCancel === void 0 ? function () {} : _ref$onCancel,\n      selectedClient = _ref.selectedClient,\n      showLocalLoc = _ref.showLocalLoc,\n      _ref$value = _ref.value,\n      value = _ref$value === void 0 ? {} : _ref$value,\n      onChange = _ref.onChange;\n  var router = useRouter();\n\n  var _useState = useState([]),\n      regionOptions = _useState[0],\n      setRegionOptions = _useState[1];\n\n  var _useState2 = useState(0),\n      binCount = _useState2[0],\n      setBinCount = _useState2[1];\n\n  var _useState3 = useState(0),\n      palletCount = _useState3[0],\n      setPalletCount = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      region = _useState4[0],\n      setRegion = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      sectionLetter = _useState5[0],\n      setSectionLetter = _useState5[1];\n\n  var _useState6 = useState(\"\"),\n      sectionNumber = _useState6[0],\n      setSectionNumber = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      binSelected = _useState7[0],\n      setBinSelected = _useState7[1];\n\n  var _useState8 = useState(\"\"),\n      palletSelected = _useState8[0],\n      setPalletSelected = _useState8[1];\n\n  var _useState9 = useState(false),\n      showMap = _useState9[0],\n      setShowMap = _useState9[1]; // 1) load directory exactly as before\n\n\n  useEffect(function () {\n    if (!showLocalLoc) return;\n    var db = firebase.firestore();\n    db.collection(\"Warehouse\").doc(\"directory\").get().then(function (doc) {\n      var d = doc.data() || {};\n      setRegionOptions(d.Region || []);\n      setBinCount(d.Bin || 0);\n      setPalletCount(d.Pallet || 0);\n    });\n  }, [showLocalLoc]); // 2) when we open the modal (or value changes), initialize from value\n\n  useEffect(function () {\n    var _value$section, _value$section2, _value$bin, _value$pallet;\n\n    if (!showLocalLoc) return;\n    setRegion(value.region || \"\");\n    setSectionLetter(((_value$section = value.section) === null || _value$section === void 0 ? void 0 : _value$section.letter) || \"\");\n    setSectionNumber(((_value$section2 = value.section) === null || _value$section2 === void 0 ? void 0 : _value$section2.number) || \"\");\n    setBinSelected(((_value$bin = value.bin) === null || _value$bin === void 0 ? void 0 : _value$bin.toString()) || \"\");\n    setPalletSelected(((_value$pallet = value.pallet) === null || _value$pallet === void 0 ? void 0 : _value$pallet.toString()) || \"\");\n  }, [showLocalLoc]); // 3) notify parent on any change\n\n  useEffect(function () {\n    var p = {};\n    if (region) p.region = region;\n    if (sectionLetter && sectionNumber) p.section = {\n      letter: sectionLetter,\n      number: sectionNumber\n    };\n    if (binSelected) p.bin = parseInt(binSelected, 10);\n    if (palletSelected) p.pallet = parseInt(palletSelected, 10);\n    onChange(p);\n  }, [region, sectionLetter, sectionNumber, binSelected, palletSelected]); // helpers:\n\n  var letters = Array.from({\n    length: 26\n  }, function (_, i) {\n    return String.fromCharCode(65 + i);\n  });\n  var numbers = Array.from({\n    length: 50\n  }, function (_, i) {\n    return i + 1;\n  });\n  var binOptions = Array.from({\n    length: binCount\n  }, function (_, i) {\n    return i + 1;\n  });\n  var palletOptions = Array.from({\n    length: palletCount\n  }, function (_, i) {\n    return i + 1;\n  }); // bump and persist bin count\n\n  var handleAddBin = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var next;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              next = binCount + 1;\n              _context.next = 3;\n              return firebase.firestore().collection(\"Warehouse\").doc(\"directory\").update({\n                Bin: next\n              });\n\n            case 3:\n              setBinCount(next);\n              setBinSelected(next.toString());\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleAddBin() {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // bump and persist pallet count\n\n\n  var handleAddPallet = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var next;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              next = palletCount + 1;\n              _context2.next = 3;\n              return firebase.firestore().collection(\"Warehouse\").doc(\"directory\").update({\n                Pallet: next\n              });\n\n            case 3:\n              setPalletCount(next);\n              setPalletSelected(next.toString());\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleAddPallet() {\n      return _ref3.apply(this, arguments);\n    };\n  }(); // only fire parent when they click OK\n\n\n  var handleOk = function handleOk() {\n    var p = {};\n    if (region) p.region = region;\n    if (sectionLetter && sectionNumber) p.section = {\n      letter: sectionLetter,\n      number: sectionNumber\n    };\n    if (binSelected) p.bin = parseInt(binSelected, 10);\n    if (palletSelected) p.pallet = parseInt(palletSelected, 10);\n    onSave(p);\n  };\n\n  var openMap = function openMap() {\n    setShowMap(true);\n  };\n\n  var handleMapSelectionChange = function handleMapSelectionChange() {\n    var selection = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (Object.prototype.hasOwnProperty.call(selection, \"region\")) {\n      setRegion(selection.region || \"\");\n    }\n\n    if (Object.prototype.hasOwnProperty.call(selection, \"sectionLetter\")) {\n      setSectionLetter(selection.sectionLetter || \"\");\n    }\n\n    if (Object.prototype.hasOwnProperty.call(selection, \"sectionNumber\")) {\n      setSectionNumber(selection.sectionNumber ? String(selection.sectionNumber) : \"\");\n    }\n\n    if (Object.prototype.hasOwnProperty.call(selection, \"pallet\")) {\n      setPalletSelected(selection.pallet ? String(selection.pallet) : \"\");\n    }\n\n    if (Object.prototype.hasOwnProperty.call(selection, \"bin\")) {\n      setBinSelected(selection.bin ? String(selection.bin) : \"\");\n    }\n  };\n\n  var handleViewInventory = function handleViewInventory() {\n    var _selection$region, _selection$sectionLet, _selection$sectionNum, _selection$pallet, _selection$bin;\n\n    var selection = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var params = new URLSearchParams();\n    var regionValue = (_selection$region = selection.region) !== null && _selection$region !== void 0 ? _selection$region : region;\n    var letterValue = (_selection$sectionLet = selection.sectionLetter) !== null && _selection$sectionLet !== void 0 ? _selection$sectionLet : sectionLetter;\n    var numberValue = (_selection$sectionNum = selection.sectionNumber) !== null && _selection$sectionNum !== void 0 ? _selection$sectionNum : sectionNumber;\n    var palletValue = (_selection$pallet = selection.pallet) !== null && _selection$pallet !== void 0 ? _selection$pallet : palletSelected;\n    var binValue = (_selection$bin = selection.bin) !== null && _selection$bin !== void 0 ? _selection$bin : binSelected;\n    if (regionValue) params.set(\"region\", regionValue);\n    if (letterValue) params.set(\"sectionLetter\", letterValue);\n    if (numberValue) params.set(\"sectionNumber\", numberValue);\n    if (palletValue) params.set(\"pallet\", palletValue);\n    if (binValue) params.set(\"bin\", binValue);\n    var query = params.toString();\n    router.push(\"/NewSearch/inventory/inventoryManage\".concat(query ? \"?\".concat(query) : \"\"));\n    setShowMap(false);\n  };\n\n  return __jsx(\"div\", {\n    className: styles.wrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 5\n    }\n  }, __jsx(Row, {\n    className: styles.formRow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }\n  }, __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, __jsx(Form.Group, {\n    className: styles.formGroup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, \"Region\"), __jsx(Form.Select, {\n    value: region,\n    onChange: function onChange(e) {\n      return setRegion(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 15\n    }\n  }, \"Select region\"), regionOptions.map(function (r) {\n    return __jsx(\"option\", {\n      key: r,\n      value: r,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 38\n      }\n    }, r);\n  })))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }\n  }, __jsx(Form.Group, {\n    className: styles.formGroup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, \"Section Letter\"), __jsx(Form.Select, {\n    value: sectionLetter,\n    onChange: function onChange(e) {\n      return setSectionLetter(e.target.value);\n    } // disabled={!region}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 15\n    }\n  }, \"Letter\"), letters.map(function (l) {\n    return __jsx(\"option\", {\n      key: l,\n      value: l,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 32\n      }\n    }, l);\n  })))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  }, __jsx(Form.Group, {\n    className: styles.formGroup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }\n  }, \"Section Number\"), __jsx(Form.Select, {\n    value: sectionNumber,\n    onChange: function onChange(e) {\n      return setSectionNumber(e.target.value);\n    } // disabled={!region}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 15\n    }\n  }, \"Number\"), numbers.map(function (n) {\n    return __jsx(\"option\", {\n      key: n,\n      value: n,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 32\n      }\n    }, n);\n  }))))), __jsx(Row, {\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }\n  }, __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }\n  }, __jsx(Form.Group, {\n    className: styles.formGroup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }\n  }, \"Bin\"), __jsx(Stack, {\n    direction: \"horizontal\",\n    gap: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }, __jsx(Form.Select, {\n    value: binSelected,\n    onChange: function onChange(e) {\n      return setBinSelected(e.target.value);\n    } // disabled={!region}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 15\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 17\n    }\n  }, \"Select bin\"), binOptions.map(function (b) {\n    return __jsx(\"option\", {\n      key: b,\n      value: b,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 38\n      }\n    }, b);\n  })), __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: handleAddBin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 15\n    }\n  }, \"+ Bin\")))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 9\n    }\n  }, __jsx(Form.Group, {\n    className: styles.formGroup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 11\n    }\n  }, \"Pallet\"), __jsx(Stack, {\n    direction: \"horizontal\",\n    gap: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Select, {\n    value: palletSelected,\n    onChange: function onChange(e) {\n      return setPalletSelected(e.target.value);\n    } // disabled={!region}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 11\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 15\n    }\n  }, \"Select pallet\"), palletOptions.map(function (p) {\n    return __jsx(\"option\", {\n      key: p,\n      value: p,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 41\n      }\n    }, p);\n  })), __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: handleAddPallet,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 15\n    }\n  }, \"+ Pallet\"))))), __jsx(\"div\", {\n    className: styles.actionRow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }\n  }, __jsx(Button, {\n    variant: \"outline-primary\",\n    onClick: openMap,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 9\n    }\n  }, \"Map\"), __jsx(\"div\", {\n    className: styles.actionSpacer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 9\n    }\n  }), __jsx(Button, {\n    variant: \"secondary\",\n    onClick: onCancel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }\n  }, \"Cancel\"), __jsx(Button, {\n    variant: \"primary\",\n    onClick: handleOk,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 9\n    }\n  }, \"OK\")), __jsx(WarehouseMapModal, {\n    show: showMap,\n    onHide: function onHide() {\n      return setShowMap(false);\n    },\n    onView: handleViewInventory,\n    onSelectionChange: handleMapSelectionChange,\n    initialSelection: {\n      region: region,\n      sectionLetter: sectionLetter,\n      sectionNumber: sectionNumber,\n      pallet: palletSelected,\n      bin: binSelected\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }\n  }));\n}\n\n_s(NewLocal, \"xjmdQEV3hYQQiUyUv4t0fG41IrA=\", false, function () {\n  return [useRouter];\n});\n\n_c = NewLocal;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewLocal\");","map":{"version":3,"sources":["C:/Users/isavc/OneDrive/Documents/AIS/Apps/magmo/pages/NewSearch/item/[id]/NewLocal.js"],"names":["React","useState","useEffect","Form","Row","Col","Button","Stack","useRouter","firebase","WarehouseMapModal","styles","NewLocal","onSave","onCancel","selectedClient","showLocalLoc","value","onChange","router","regionOptions","setRegionOptions","binCount","setBinCount","palletCount","setPalletCount","region","setRegion","sectionLetter","setSectionLetter","sectionNumber","setSectionNumber","binSelected","setBinSelected","palletSelected","setPalletSelected","showMap","setShowMap","db","firestore","collection","doc","get","then","d","data","Region","Bin","Pallet","section","letter","number","bin","toString","pallet","p","parseInt","letters","Array","from","length","_","i","String","fromCharCode","numbers","binOptions","palletOptions","handleAddBin","next","update","handleAddPallet","handleOk","openMap","handleMapSelectionChange","selection","Object","prototype","hasOwnProperty","call","handleViewInventory","params","URLSearchParams","regionValue","letterValue","numberValue","palletValue","binValue","set","query","push","wrapper","formRow","formGroup","e","target","map","r","l","n","b","actionRow","actionSpacer"],"mappings":"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","sourcesContent":["// NewLocal.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Form, Row, Col, Button, Stack } from \"react-bootstrap\";\r\nimport { useRouter } from \"next/router\";\r\nimport firebase from \"../../../../context/Firebase\";\r\nimport WarehouseMapModal from \"../../../../components/WarehouseMapModal\";\r\nimport styles from \"./NewLocal.module.css\";\r\n\r\nexport default function NewLocal({\r\n  onSave = () => {},\r\n  onCancel = () => {},\r\n  selectedClient,\r\n  showLocalLoc,\r\n  value = {},\r\n  onChange,\r\n}) {\r\n  const router = useRouter();\r\n  const [regionOptions, setRegionOptions] = useState([]);\r\n  const [binCount, setBinCount]         = useState(0);\r\n  const [palletCount, setPalletCount]   = useState(0);\r\n\r\n  const [region, setRegion] = useState(\"\");\r\n  const [sectionLetter, setSectionLetter] = useState(\"\");\r\n  const [sectionNumber, setSectionNumber] = useState(\"\");\r\n  const [binSelected, setBinSelected]     = useState(\"\");\r\n  const [palletSelected, setPalletSelected] = useState(\"\");\r\n  const [showMap, setShowMap] = useState(false);\r\n\r\n  // 1) load directory exactly as before\r\n  useEffect(() => {\r\n    if (!showLocalLoc) return;\r\n    const db = firebase.firestore();\r\n    db.collection(\"Warehouse\").doc(\"directory\").get().then(doc => {\r\n      const d = doc.data() || {};\r\n      setRegionOptions(d.Region   || []);\r\n      setBinCount     (d.Bin      || 0);\r\n      setPalletCount  (d.Pallet   || 0);\r\n    });\r\n  }, [showLocalLoc]);\r\n\r\n  // 2) when we open the modal (or value changes), initialize from value\r\n  useEffect(() => {\r\n    if (!showLocalLoc) return;\r\n    setRegion        (value.region             || \"\");\r\n    setSectionLetter(value.section?.letter    || \"\");\r\n    setSectionNumber(value.section?.number    || \"\");\r\n    setBinSelected   (value.bin?.toString()    || \"\");\r\n    setPalletSelected(value.pallet?.toString()|| \"\");\r\n  }, [showLocalLoc]);\r\n\r\n  // 3) notify parent on any change\r\n  useEffect(() => {\r\n    const p = {};\r\n    if (region)         p.region  = region;\r\n    if (sectionLetter && sectionNumber) p.section = { letter: sectionLetter, number: sectionNumber };\r\n    if (binSelected)    p.bin     = parseInt(binSelected,10);\r\n    if (palletSelected) p.pallet  = parseInt(palletSelected,10);\r\n    onChange(p);\r\n  }, [region, sectionLetter, sectionNumber, binSelected, palletSelected]);\r\n\r\n  // helpers:\r\n  const letters = Array.from({ length: 26 }, (_, i) =>\r\n    String.fromCharCode(65 + i)\r\n  );\r\n  const numbers = Array.from({ length: 50 }, (_, i) => i + 1);\r\n  const binOptions = Array.from({ length: binCount }, (_, i) => i + 1);\r\n  const palletOptions = Array.from({ length: palletCount }, (_, i) => i + 1);\r\n\r\n  // bump and persist bin count\r\n  const handleAddBin = async () => {\r\n    const next = binCount + 1;\r\n    await firebase.firestore()\r\n      .collection(\"Warehouse\").doc(\"directory\")\r\n      .update({ Bin: next });\r\n    setBinCount(next);\r\n    setBinSelected(next.toString());\r\n  };\r\n\r\n  // bump and persist pallet count\r\n  const handleAddPallet = async () => {\r\n    const next = palletCount + 1;\r\n    await firebase.firestore()\r\n      .collection(\"Warehouse\").doc(\"directory\")\r\n      .update({ Pallet: next });\r\n    setPalletCount(next);\r\n    setPalletSelected(next.toString());\r\n  };\r\n\r\n  // only fire parent when they click OK\r\n  const handleOk = () => {\r\n    const p = {};\r\n    if (region) p.region = region;\r\n    if (sectionLetter && sectionNumber)\r\n      p.section = { letter: sectionLetter, number: sectionNumber };\r\n    if (binSelected) p.bin = parseInt(binSelected, 10);\r\n    if (palletSelected) p.pallet = parseInt(palletSelected, 10);\r\n    onSave(p);\r\n  };\r\n\r\n  const openMap = () => {\r\n    setShowMap(true);\r\n  };\r\n\r\n  const handleMapSelectionChange = (selection = {}) => {\r\n    if (Object.prototype.hasOwnProperty.call(selection, \"region\")) {\r\n      setRegion(selection.region || \"\");\r\n    }\r\n    if (Object.prototype.hasOwnProperty.call(selection, \"sectionLetter\")) {\r\n      setSectionLetter(selection.sectionLetter || \"\");\r\n    }\r\n    if (Object.prototype.hasOwnProperty.call(selection, \"sectionNumber\")) {\r\n      setSectionNumber(\r\n        selection.sectionNumber ? String(selection.sectionNumber) : \"\"\r\n      );\r\n    }\r\n    if (Object.prototype.hasOwnProperty.call(selection, \"pallet\")) {\r\n      setPalletSelected(selection.pallet ? String(selection.pallet) : \"\");\r\n    }\r\n    if (Object.prototype.hasOwnProperty.call(selection, \"bin\")) {\r\n      setBinSelected(selection.bin ? String(selection.bin) : \"\");\r\n    }\r\n  };\r\n\r\n  const handleViewInventory = (selection = {}) => {\r\n    const params = new URLSearchParams();\r\n    const regionValue = selection.region ?? region;\r\n    const letterValue = selection.sectionLetter ?? sectionLetter;\r\n    const numberValue = selection.sectionNumber ?? sectionNumber;\r\n    const palletValue = selection.pallet ?? palletSelected;\r\n    const binValue = selection.bin ?? binSelected;\r\n\r\n    if (regionValue) params.set(\"region\", regionValue);\r\n    if (letterValue) params.set(\"sectionLetter\", letterValue);\r\n    if (numberValue) params.set(\"sectionNumber\", numberValue);\r\n    if (palletValue) params.set(\"pallet\", palletValue);\r\n    if (binValue) params.set(\"bin\", binValue);\r\n\r\n    const query = params.toString();\r\n    router.push(\r\n      `/NewSearch/inventory/inventoryManage${query ? `?${query}` : \"\"}`\r\n    );\r\n    setShowMap(false);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <Row className={styles.formRow}>\r\n        <Col>\r\n          <Form.Group className={styles.formGroup}>\r\n            <Form.Label>Region</Form.Label>\r\n            <Form.Select\r\n              value={region} onChange={e=>setRegion(e.target.value)}\r\n            >\r\n              <option value=\"\">Select region</option>\r\n              {regionOptions.map(r=> <option key={r} value={r}>{r}</option>)}\r\n            </Form.Select>\r\n          </Form.Group>\r\n        </Col>\r\n        <Col>\r\n          <Form.Group className={styles.formGroup}>\r\n            <Form.Label>Section Letter</Form.Label>\r\n            <Form.Select\r\n              value={sectionLetter}\r\n              onChange={e=>setSectionLetter(e.target.value)}\r\n              // disabled={!region}\r\n            >\r\n              <option value=\"\">Letter</option>\r\n              {letters.map(l=> <option key={l} value={l}>{l}</option>)}\r\n            </Form.Select>\r\n          </Form.Group>\r\n        </Col>\r\n        <Col>\r\n          <Form.Group className={styles.formGroup}>\r\n            <Form.Label>Section Number</Form.Label>\r\n            <Form.Select\r\n              value={sectionNumber}\r\n              onChange={e=>setSectionNumber(e.target.value)}\r\n              // disabled={!region}\r\n            >\r\n              <option value=\"\">Number</option>\r\n              {numbers.map(n=> <option key={n} value={n}>{n}</option>)}\r\n            </Form.Select>\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n      <Row className=\"mt-3\">\r\n        <Col>\r\n          <Form.Group className={styles.formGroup}>\r\n            <Form.Label>Bin</Form.Label>\r\n            <Stack direction=\"horizontal\" gap={2}>\r\n              <Form.Select\r\n                value={binSelected}\r\n                onChange={e => setBinSelected(e.target.value)}\r\n                // disabled={!region}\r\n              >\r\n                <option value=\"\">Select bin</option>\r\n                {binOptions.map(b => <option key={b} value={b}>{b}</option>)}\r\n              </Form.Select>\r\n              <Button variant=\"outline-secondary\" onClick={handleAddBin} >\r\n                + Bin\r\n              </Button>\r\n            </Stack>\r\n          </Form.Group>\r\n        </Col>\r\n        <Col>\r\n          <Form.Group className={styles.formGroup}>\r\n          <Form.Label>Pallet</Form.Label>\r\n          <Stack direction=\"horizontal\" gap={2}>\r\n          <Form.Select\r\n            value={palletSelected}\r\n            onChange={e =>setPalletSelected(e.target.value)}\r\n              // disabled={!region}\r\n            >\r\n              <option value=\"\">Select pallet</option>\r\n                {palletOptions.map(p => <option key={p} value={p}>{p}</option>)}\r\n              </Form.Select>\r\n              <Button variant=\"outline-secondary\" onClick={handleAddPallet} >\r\n                + Pallet\r\n              </Button>\r\n            </Stack>\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n      {/* OK / Cancel footer */}\r\n      <div className={styles.actionRow}>\r\n        <Button variant=\"outline-primary\" onClick={openMap}>\r\n          Map\r\n        </Button>\r\n        <div className={styles.actionSpacer} />\r\n        <Button variant=\"secondary\" onClick={onCancel}>\r\n          Cancel\r\n        </Button>\r\n        <Button variant=\"primary\" onClick={handleOk}>\r\n          OK\r\n        </Button>\r\n      </div>\r\n      <WarehouseMapModal\r\n        show={showMap}\r\n        onHide={() => setShowMap(false)}\r\n        onView={handleViewInventory}\r\n        onSelectionChange={handleMapSelectionChange}\r\n        initialSelection={{\r\n          region,\r\n          sectionLetter,\r\n          sectionNumber,\r\n          pallet: palletSelected,\r\n          bin: binSelected,\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}