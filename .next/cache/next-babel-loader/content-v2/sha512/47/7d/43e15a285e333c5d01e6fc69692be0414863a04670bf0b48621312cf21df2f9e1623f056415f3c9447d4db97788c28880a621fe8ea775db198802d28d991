{"ast":null,"code":"import _toConsumableArray from \"C:/Users/mack2/Desktop/code/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\mack2\\\\Desktop\\\\code\\\\utils\\\\PartTable.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Table, Button, Form } from \"react-bootstrap\";\nimport { formatDate } from \"./fetchAssociations\";\nimport styles from \"../styles/PartTable.module.css\";\nexport default function PartTable(_ref) {\n  _s();\n\n  var _this = this;\n\n  var info = _ref.info,\n      labels = _ref.labels,\n      ids = _ref.ids,\n      hoverStyle = _ref.hoverStyle,\n      sortCheckAll = _ref.sortCheckAll,\n      checkDelete = _ref.checkDelete,\n      isDeleting = _ref.isDeleting,\n      rowSelect = _ref.rowSelect,\n      setHoverIndex = _ref.setHoverIndex,\n      hoverIndex = _ref.hoverIndex,\n      selectedItems = _ref.selectedItems,\n      setSelectedItems = _ref.setSelectedItems,\n      _ref$minRows = _ref.minRows,\n      minRows = _ref$minRows === void 0 ? 10 : _ref$minRows;\n\n  // const [selectedItems, setSelectedItems] = useState([]);\n  var _useState = useState(null),\n      longPressName = _useState[0],\n      setLongPressName = _useState[1];\n\n  var _useState2 = useState(false),\n      isMobile = _useState2[0],\n      setIsMobile = _useState2[1];\n\n  var pressTimerRef = useRef(null);\n  var longPressTriggeredRef = useRef(false);\n  useEffect(function () {\n    if (false) return undefined;\n    var media = window.matchMedia(\"(max-width: 640px)\");\n\n    var update = function update() {\n      return setIsMobile(media.matches);\n    };\n\n    update();\n\n    if (media.addEventListener) {\n      media.addEventListener(\"change\", update);\n      return function () {\n        return media.removeEventListener(\"change\", update);\n      };\n    }\n\n    media.addListener(update);\n    return function () {\n      return media.removeListener(update);\n    };\n  }, []); // Toggle selection of items\n\n  var handleSelectItem = function handleSelectItem(id) {\n    setSelectedItems(function (prevSelectedItems) {\n      return prevSelectedItems.includes(id) ? prevSelectedItems.filter(function (itemId) {\n        return itemId !== id;\n      }) : [].concat(_toConsumableArray(prevSelectedItems), [id]);\n    });\n  }; // Handle delete button click for selected items\n\n\n  var handleDeleteSelected = function handleDeleteSelected() {\n    if (selectedItems.length > 0) {\n      checkDelete(null, null, selectedItems, \"selected items\");\n    }\n  };\n\n  var startLongPress = function startLongPress(name) {\n    return function () {\n      if (!isMobile) return;\n\n      if (pressTimerRef.current) {\n        clearTimeout(pressTimerRef.current);\n      }\n\n      pressTimerRef.current = setTimeout(function () {\n        longPressTriggeredRef.current = true;\n        setLongPressName(name);\n      }, 450);\n    };\n  };\n\n  var cancelLongPress = function cancelLongPress() {\n    if (pressTimerRef.current) {\n      clearTimeout(pressTimerRef.current);\n      pressTimerRef.current = null;\n    }\n  };\n\n  var dismissLongPress = function dismissLongPress() {\n    longPressTriggeredRef.current = false;\n    setLongPressName(null);\n  };\n\n  var paddingCount = Math.max(0, minRows - info.length);\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: styles.scrollableTable,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, __jsx(Table, {\n    striped: true,\n    bordered: true,\n    hover: true,\n    size: \"sm\",\n    className: \"mb-0 \".concat(styles.fixedTable),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, __jsx(\"thead\", {\n    className: styles.stickyHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }, __jsx(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, labels.map(function (item, index) {\n    return __jsx(\"th\", {\n      style: hoverStyle(index),\n      onMouseOver: function onMouseOver() {\n        return setHoverIndex(index);\n      },\n      onMouseOut: function onMouseOut() {\n        return setHoverIndex(null);\n      },\n      onClick: function onClick() {\n        return sortCheckAll(index);\n      },\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    }, item);\n  }), __jsx(\"th\", {\n    className: styles.actionCol,\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 15\n    }\n  }, selectedItems.length > 0 ? __jsx(Button, {\n    variant: \"danger\",\n    onClick: handleDeleteSelected,\n    disabled: isDeleting,\n    size: \"sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 19\n    }\n  }, \"Delete Selected (\", selectedItems.length, \")\") : \"select\"))), __jsx(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, info.map(function (item, index) {\n    return __jsx(\"tr\", {\n      key: index,\n      onClick: function onClick(e) {\n        if (longPressTriggeredRef.current) {\n          longPressTriggeredRef.current = false;\n          return;\n        } // Only trigger rowSelect if the target is not a checkbox\n\n\n        if (e.target.type !== \"checkbox\") {\n          rowSelect(item);\n        }\n      },\n      onTouchStart: startLongPress(item.name),\n      onTouchEnd: cancelLongPress,\n      onTouchCancel: cancelLongPress,\n      onTouchMove: cancelLongPress,\n      className: \"clickable-row\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 15\n      }\n    }, __jsx(\"td\", {\n      style: {\n        textAlign: \"center\",\n        cursor: \"default\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      className: styles.cellClamp,\n      title: item.name,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 19\n      }\n    }, item.name)), __jsx(\"td\", {\n      style: {\n        textAlign: \"center\",\n        cursor: \"default\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      className: styles.cellClamp,\n      title: formatDate(item.date),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 19\n      }\n    }, formatDate(item.date))), __jsx(\"td\", {\n      style: {\n        textAlign: \"center\",\n        cursor: \"default\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      className: styles.cellClamp,\n      title: item.workOrders && item.workOrders.length > 0 ? item.workOrders[item.workOrders.length - 1].workOrder : \"N/A\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 19\n      }\n    }, item.workOrders && item.workOrders.length > 0 ? item.workOrders[item.workOrders.length - 1].workOrder : \"N/A\")), __jsx(\"td\", {\n      style: {\n        textAlign: \"center\",\n        cursor: \"default\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      className: styles.cellClamp,\n      title: item.pn,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 19\n      }\n    }, item.pn)), __jsx(\"td\", {\n      style: {\n        textAlign: \"center\",\n        cursor: \"default\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      className: styles.cellClamp,\n      title: item.sn,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 19\n      }\n    }, item.sn)), __jsx(\"td\", {\n      className: styles.actionCol,\n      style: {\n        textAlign: \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }\n    }, __jsx(Form.Check, {\n      type: \"checkbox\",\n      checked: selectedItems.includes(item.id),\n      onChange: function onChange(e) {\n        e.stopPropagation(); // Prevent row click when checkbox is clicked\n        // Toggle selection using item.id directly\n\n        setSelectedItems(function (prevSelectedItems) {\n          return prevSelectedItems.includes(item.id) ? prevSelectedItems.filter(function (id) {\n            return id !== item.id;\n          }) : [].concat(_toConsumableArray(prevSelectedItems), [item.id]);\n        });\n      },\n      \"aria-label\": \"Select \".concat(item.name),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 19\n      }\n    })));\n  }), paddingCount > 0 && Array.from({\n    length: paddingCount\n  }).map(function (_, index) {\n    return __jsx(\"tr\", {\n      key: \"empty-\".concat(index),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 17\n      }\n    }, __jsx(\"td\", {\n      colSpan: labels.length + 1,\n      style: {\n        textAlign: \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 19\n      }\n    }, \"\\xA0\"));\n  })))), isMobile && longPressName && __jsx(\"div\", {\n    className: styles.longPressOverlay,\n    onClick: dismissLongPress,\n    role: \"button\",\n    tabIndex: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: styles.longPressCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 11\n    }\n  }, longPressName)));\n}\n\n_s(PartTable, \"a+vWSw3igJMSLJhTBItRI5WOT5Q=\");\n\n_c = PartTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"PartTable\");","map":{"version":3,"sources":["C:/Users/mack2/Desktop/code/utils/PartTable.js"],"names":["React","useState","useEffect","useRef","Table","Button","Form","formatDate","styles","PartTable","info","labels","ids","hoverStyle","sortCheckAll","checkDelete","isDeleting","rowSelect","setHoverIndex","hoverIndex","selectedItems","setSelectedItems","minRows","longPressName","setLongPressName","isMobile","setIsMobile","pressTimerRef","longPressTriggeredRef","undefined","media","window","matchMedia","update","matches","addEventListener","removeEventListener","addListener","removeListener","handleSelectItem","id","prevSelectedItems","includes","filter","itemId","handleDeleteSelected","length","startLongPress","name","current","clearTimeout","setTimeout","cancelLongPress","dismissLongPress","paddingCount","Math","max","scrollableTable","fixedTable","stickyHeader","map","item","index","actionCol","textAlign","e","target","type","cursor","cellClamp","date","workOrders","workOrder","pn","sn","stopPropagation","Array","from","_","longPressOverlay","longPressCard"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { Table, Button, Form } from \"react-bootstrap\";\nimport { formatDate } from \"./fetchAssociations\";\nimport styles from \"../styles/PartTable.module.css\";\n\n\nexport default function PartTable({\n  info,\n  labels,\n  ids,\n  hoverStyle,\n  sortCheckAll,\n  checkDelete,\n  isDeleting,\n  rowSelect,\n  setHoverIndex,\n  hoverIndex,\n  selectedItems,\n  setSelectedItems,\n  minRows = 10,\n}) {\n  // const [selectedItems, setSelectedItems] = useState([]);\n  const [longPressName, setLongPressName] = useState(null);\n  const [isMobile, setIsMobile] = useState(false);\n  const pressTimerRef = useRef(null);\n  const longPressTriggeredRef = useRef(false);\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") return undefined;\n    const media = window.matchMedia(\"(max-width: 640px)\");\n    const update = () => setIsMobile(media.matches);\n    update();\n    if (media.addEventListener) {\n      media.addEventListener(\"change\", update);\n      return () => media.removeEventListener(\"change\", update);\n    }\n    media.addListener(update);\n    return () => media.removeListener(update);\n  }, []);\n\n  // Toggle selection of items\n  const handleSelectItem = (id) => {\n    setSelectedItems((prevSelectedItems) =>\n      prevSelectedItems.includes(id)\n        ? prevSelectedItems.filter((itemId) => itemId !== id)\n        : [...prevSelectedItems, id]\n    );\n  };\n\n  // Handle delete button click for selected items\n  const handleDeleteSelected = () => {\n    if (selectedItems.length > 0) {\n      checkDelete(null, null, selectedItems, \"selected items\");\n    }\n  };\n\n  const startLongPress = (name) => () => {\n    if (!isMobile) return;\n    if (pressTimerRef.current) {\n      clearTimeout(pressTimerRef.current);\n    }\n    pressTimerRef.current = setTimeout(() => {\n      longPressTriggeredRef.current = true;\n      setLongPressName(name);\n    }, 450);\n  };\n\n  const cancelLongPress = () => {\n    if (pressTimerRef.current) {\n      clearTimeout(pressTimerRef.current);\n      pressTimerRef.current = null;\n    }\n  };\n\n  const dismissLongPress = () => {\n    longPressTriggeredRef.current = false;\n    setLongPressName(null);\n  };\n\n  const paddingCount = Math.max(0, minRows - info.length);\n\n  return (\n    <>\n      <div className={styles.scrollableTable}>\n        <Table\n          striped\n          bordered\n          hover\n          size=\"sm\"\n          className={`mb-0 ${styles.fixedTable}`}\n        >\n          <thead className={styles.stickyHeader}>\n            <tr>\n              {labels.map((item, index) => (\n                <th\n                  style={hoverStyle(index)}\n                  onMouseOver={() => setHoverIndex(index)}\n                  onMouseOut={() => setHoverIndex(null)}\n                  onClick={() => sortCheckAll(index)}\n                  key={index}\n                >\n                  {item}\n                </th>\n              ))}\n              <th className={styles.actionCol} style={{ textAlign: \"center\" }}>\n                {selectedItems.length > 0 ? (\n                  <Button\n                    variant=\"danger\"\n                    onClick={handleDeleteSelected}\n                    disabled={isDeleting}\n                    size=\"sm\"\n                  >\n                    Delete Selected ({selectedItems.length})\n                  </Button>\n                ) : (\n                  \"select\"\n                )}\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {info.map((item, index) => (\n              <tr\n                key={index}\n                onClick={(e) => {\n                  if (longPressTriggeredRef.current) {\n                    longPressTriggeredRef.current = false;\n                    return;\n                  }\n                  // Only trigger rowSelect if the target is not a checkbox\n                  if (e.target.type !== \"checkbox\") {\n                    rowSelect(item);\n                  }\n                }}\n                onTouchStart={startLongPress(item.name)}\n                onTouchEnd={cancelLongPress}\n                onTouchCancel={cancelLongPress}\n                onTouchMove={cancelLongPress}\n                className=\"clickable-row\"\n              >\n                <td style={{ textAlign: \"center\", cursor: \"default\" }}>\n                  <div className={styles.cellClamp} title={item.name}>\n                    {item.name}\n                  </div>\n                </td>\n                <td style={{ textAlign: \"center\", cursor: \"default\" }}>\n                  <div className={styles.cellClamp} title={formatDate(item.date)}>\n                    {formatDate(item.date)}\n                  </div>\n                </td>\n                <td style={{ textAlign: \"center\", cursor: \"default\" }}>\n                  <div\n                    className={styles.cellClamp}\n                    title={\n                      item.workOrders && item.workOrders.length > 0\n                        ? item.workOrders[item.workOrders.length - 1].workOrder\n                        : \"N/A\"\n                    }\n                  >\n                    {item.workOrders && item.workOrders.length > 0\n                      ? item.workOrders[item.workOrders.length - 1].workOrder\n                      : \"N/A\"}\n                  </div>\n                </td>\n                <td style={{ textAlign: \"center\", cursor: \"default\" }}>\n                  <div className={styles.cellClamp} title={item.pn}>\n                    {item.pn}\n                  </div>\n                </td>\n                <td style={{ textAlign: \"center\", cursor: \"default\" }}>\n                  <div className={styles.cellClamp} title={item.sn}>\n                    {item.sn}\n                  </div>\n                </td>\n                <td className={styles.actionCol} style={{ textAlign: \"center\" }}>\n                  <Form.Check\n                    type=\"checkbox\"\n                    checked={selectedItems.includes(item.id)}\n                    onChange={(e) => {\n                      e.stopPropagation(); // Prevent row click when checkbox is clicked\n                      // Toggle selection using item.id directly\n                      setSelectedItems((prevSelectedItems) =>\n                        prevSelectedItems.includes(item.id)\n                          ? prevSelectedItems.filter((id) => id !== item.id)\n                          : [...prevSelectedItems, item.id]\n                      );\n                    }}\n                    aria-label={`Select ${item.name}`}\n                  />\n                </td>\n              </tr>\n            ))}\n            {paddingCount > 0 &&\n              Array.from({ length: paddingCount }).map((_, index) => (\n                <tr key={`empty-${index}`}>\n                  <td colSpan={labels.length + 1} style={{ textAlign: \"center\" }}>\n                    &nbsp;\n                  </td>\n                </tr>\n              ))}\n          </tbody>\n        </Table>\n      </div>\n      {isMobile && longPressName && (\n        <div\n          className={styles.longPressOverlay}\n          onClick={dismissLongPress}\n          role=\"button\"\n          tabIndex={0}\n        >\n          <div className={styles.longPressCard}>{longPressName}</div>\n        </div>\n      )}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}