{"ast":null,"code":"export function buildLocalLocObject(loc) {\n  var _loc$section, _loc$section2;\n\n  var o = {};\n  if (loc !== null && loc !== void 0 && loc.region) o.region = loc.region;\n  if (loc !== null && loc !== void 0 && (_loc$section = loc.section) !== null && _loc$section !== void 0 && _loc$section.letter && loc !== null && loc !== void 0 && (_loc$section2 = loc.section) !== null && _loc$section2 !== void 0 && _loc$section2.number) o.section = loc.section;\n  if ((loc === null || loc === void 0 ? void 0 : loc.bin) !== undefined && (loc === null || loc === void 0 ? void 0 : loc.bin) !== \"\") o.bin = loc.bin;\n  if ((loc === null || loc === void 0 ? void 0 : loc.pallet) !== undefined && (loc === null || loc === void 0 ? void 0 : loc.pallet) !== \"\") o.pallet = loc.pallet;\n  return o;\n}\nexport function formatLoc(loc) {\n  var _loc$section3, _loc$section4;\n\n  if (!loc) return \"\";\n  var parts = [];\n  if (loc.region) parts.push(loc.region);\n\n  if ((_loc$section3 = loc.section) !== null && _loc$section3 !== void 0 && _loc$section3.letter && (_loc$section4 = loc.section) !== null && _loc$section4 !== void 0 && _loc$section4.number) {\n    parts.push(\"\".concat(loc.section.letter).concat(loc.section.number));\n  }\n\n  if (loc.bin) parts.push(\"B\".concat(loc.bin));\n  if (loc.pallet) parts.push(\"P\".concat(loc.pallet));\n  return parts.join(\"–\");\n}\n\nfunction isValidField(value) {\n  if (Array.isArray(value)) {\n    return value.some(function (entry) {\n      var trimmed = String(entry || \"\").trim();\n      return trimmed !== \"\" && trimmed.toLowerCase() !== \"n/a\";\n    });\n  }\n\n  if (typeof value !== \"string\") return Boolean(value);\n  var trimmed = value.trim();\n  return trimmed !== \"\" && trimmed.toLowerCase() !== \"n/a\";\n}\n\nexport function getPriorityMachineField(field, theMachine, currentMachine, fromMachine) {\n  if (theMachine && isValidField(theMachine[field])) return theMachine[field];\n  if (currentMachine && isValidField(currentMachine[field])) return currentMachine[field];\n  if (fromMachine && isValidField(fromMachine[field])) return fromMachine[field];\n  return \"\";\n}\nexport function updateMachineFields(theMachine, currentMachine, fromMachine) {\n  var pick = function pick(primary, fallback) {\n    return getPriorityMachineField(primary, theMachine, currentMachine, fromMachine) || getPriorityMachineField(fallback, theMachine, currentMachine, fromMachine);\n  };\n\n  return {\n    oem: pick(\"OEM\", \"oem\"),\n    modality: pick(\"Modality\", \"modality\"),\n    model: pick(\"Model\", \"model\")\n  };\n}\nexport function buildNameTokens(name) {\n  if (!name || typeof name !== \"string\") return [];\n  var lower = name.toLowerCase().trim();\n  if (!lower) return [];\n  var tokens = lower.split(/[^a-z0-9]+/).filter(Boolean); // include the full phrase so exact multi-word searches can match\n\n  tokens.push(lower);\n  return Array.from(new Set(tokens));\n}","map":{"version":3,"sources":["C:/Users/isavc/OneDrive/Documents/AIS/Apps/magmo/utils/itemFormShared.js"],"names":["buildLocalLocObject","loc","o","region","section","letter","number","bin","undefined","pallet","formatLoc","parts","push","join","isValidField","value","Array","isArray","some","entry","trimmed","String","trim","toLowerCase","Boolean","getPriorityMachineField","field","theMachine","currentMachine","fromMachine","updateMachineFields","pick","primary","fallback","oem","modality","model","buildNameTokens","name","lower","tokens","split","filter","from","Set"],"mappings":"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","sourcesContent":["export function buildLocalLocObject(loc) {\r\n  const o = {};\r\n  if (loc?.region) o.region = loc.region;\r\n  if (loc?.section?.letter && loc?.section?.number) o.section = loc.section;\r\n  if (loc?.bin !== undefined && loc?.bin !== \"\") o.bin = loc.bin;\r\n  if (loc?.pallet !== undefined && loc?.pallet !== \"\") o.pallet = loc.pallet;\r\n  return o;\r\n}\r\n\r\nexport function formatLoc(loc) {\r\n  if (!loc) return \"\";\r\n  const parts = [];\r\n  if (loc.region) parts.push(loc.region);\r\n  if (loc.section?.letter && loc.section?.number) {\r\n    parts.push(`${loc.section.letter}${loc.section.number}`);\r\n  }\r\n  if (loc.bin) parts.push(`B${loc.bin}`);\r\n  if (loc.pallet) parts.push(`P${loc.pallet}`);\r\n  return parts.join(\"–\");\r\n}\r\n\r\nfunction isValidField(value) {\r\n  if (Array.isArray(value)) {\r\n    return value.some((entry) => {\r\n      const trimmed = String(entry || \"\").trim();\r\n      return trimmed !== \"\" && trimmed.toLowerCase() !== \"n/a\";\r\n    });\r\n  }\r\n  if (typeof value !== \"string\") return Boolean(value);\r\n  const trimmed = value.trim();\r\n  return trimmed !== \"\" && trimmed.toLowerCase() !== \"n/a\";\r\n}\r\n\r\nexport function getPriorityMachineField(\r\n  field,\r\n  theMachine,\r\n  currentMachine,\r\n  fromMachine\r\n) {\r\n  if (theMachine && isValidField(theMachine[field])) return theMachine[field];\r\n  if (currentMachine && isValidField(currentMachine[field]))\r\n    return currentMachine[field];\r\n  if (fromMachine && isValidField(fromMachine[field])) return fromMachine[field];\r\n  return \"\";\r\n}\r\n\r\nexport function updateMachineFields(theMachine, currentMachine, fromMachine) {\r\n  const pick = (primary, fallback) =>\r\n    getPriorityMachineField(primary, theMachine, currentMachine, fromMachine) ||\r\n    getPriorityMachineField(fallback, theMachine, currentMachine, fromMachine);\r\n\r\n  return {\r\n    oem: pick(\"OEM\", \"oem\"),\r\n    modality: pick(\"Modality\", \"modality\"),\r\n    model: pick(\"Model\", \"model\"),\r\n  };\r\n}\r\n\r\nexport function buildNameTokens(name) {\r\n  if (!name || typeof name !== \"string\") return [];\r\n  const lower = name.toLowerCase().trim();\r\n  if (!lower) return [];\r\n  const tokens = lower.split(/[^a-z0-9]+/).filter(Boolean);\r\n  // include the full phrase so exact multi-word searches can match\r\n  tokens.push(lower);\r\n  return Array.from(new Set(tokens));\r\n}\r\n"]},"metadata":{},"sourceType":"module"}