{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mack2\\\\Desktop\\\\code\\\\pages\\\\NewSearch\\\\AddItem\\\\NewItem.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { Form, Button, Card, Container, Row, Col, Modal, FormControl, Collapse, InputGroup, ButtonGroup, Spinner } from \"react-bootstrap\";\nimport Link from \"next/link\";\nimport dynamic from \"next/dynamic\";\nimport { useAuth } from \"../../../context/AuthUserContext\";\nimport firebase from \"../../../context/Firebase\";\nimport LoggedIn from \"../../LoggedIn\";\nimport { useRouter } from \"next/router\";\nimport { fetchClients } from \"../../../utils/fetchAssociations\";\nimport ClientTable from \"../../../utils/ClientTable\";\nimport ClientInfoModal from \"../ClientInfoModal\";\nimport ParentModal from \"./parentModal\";\nimport MachineSelectionModal from \"../item/[id]/MachineSelectionModal\";\nimport InfoModal from \"../InfoModal\";\nimport InflowAPI from \"../../../utils/inflowAPI\";\nimport NewLocal from \"../item/[id]/NewLocal\";\nimport { buildLocalLocObject, formatLoc, updateMachineFields } from \"../../../utils/itemFormShared\";\nimport styles from \"./NewItem.module.css\"; // Load BarcodeScannerComponent only on the client-side.\n\nconst BarcodeScannerComponent = dynamic(() => import(\"react-qr-barcode-scanner\"), {\n  ssr: false,\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak(\"react-qr-barcode-scanner\")],\n    modules: [\"NewSearch\\\\AddItem\\\\NewItem.js -> \" + \"react-qr-barcode-scanner\"]\n  }\n}); // Simulate network delay.\n\nfunction simulateNetworkRequest() {\n  return new Promise(resolve => setTimeout(resolve, 2000));\n} // Custom LoadingButton component.\n\n\nfunction LoadingButton({\n  type,\n  name,\n  route\n}) {\n  const {\n    0: isLoading,\n    1: setLoading\n  } = useState(false);\n  useEffect(() => {\n    if (isLoading) {\n      let cancelled = false;\n      simulateNetworkRequest().then(() => {\n        if (!cancelled) setLoading(false);\n      });\n      return () => {\n        cancelled = true;\n      };\n    }\n  }, [isLoading]);\n\n  const handleClick = () => setLoading(true);\n\n  return __jsx(Link, {\n    href: `/${route}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, __jsx(\"a\", {\n    className: `btn btn-${type}`,\n    disabled: isLoading,\n    onClick: !isLoading ? handleClick : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, isLoading ? \"Loading…\" : name));\n}\n\nexport default function NewItem() {\n  var _descriptions$selecte, _descriptions$selecte4, _descriptions$selecte5, _newLocalFrom$section, _newLocalFrom$section2, _newLocalCurrent$sect, _newLocalCurrent$sect2;\n\n  const router = useRouter();\n  const {\n    signOut\n  } = useAuth();\n  const SHOW_SLACK_BUTTONS = process.env.NEXT_PUBLIC_SHOW_SLACK_BUTTONS === \"true\"; // Initialize item state – for a new item, these start empty.\n  // We store PN and SN as arrays.\n\n  const {\n    0: items,\n    1: setItems\n  } = useState({\n    name: \"\",\n    pn: [\"\"],\n    sn: [\"\"],\n    // This will be overridden on submit.\n    localSN: \"\",\n    // NEW FIELD: holds user input for a local serial number.\n    date: new Date().toISOString().split(\"T\")[0],\n    // auto-fill current date\n    price: \"\",\n    status: \"\",\n    poNumber: \"\",\n    trackingNumber: \"\",\n    length: \"\",\n    width: \"\",\n    height: \"\",\n    arrival_date: \"\",\n    // NEW FIELD: Arrival Date\n    visible: true\n  });\n  const {\n    0: editingPn,\n    1: setEditingPn\n  } = useState(true); // const [newPn, setNewPn] = useState(\"\"); // for the input value when editing\n\n  const {\n    0: editingSn,\n    1: setEditingSn\n  } = useState(true); // const [newSn, setNewSn] = useState(\"\");\n  // DOM is the Date of Manufacture input (user provided).\n\n  const {\n    0: DOM,\n    1: setDOM\n  } = useState(\"\"); // OEM, Modality, Model fields.\n\n  const {\n    0: oem,\n    1: setOem\n  } = useState(\"\");\n  const {\n    0: modality,\n    1: setModality\n  } = useState(\"\");\n  const {\n    0: model,\n    1: setModel\n  } = useState(\"\"); // Local location states.\n\n  const {\n    0: newLocalFrom,\n    1: setNewLocalFrom\n  } = useState({\n    region: \"\",\n    section: {\n      letter: \"\",\n      number: \"\"\n    },\n    bin: \"\",\n    pallet: \"\"\n  });\n  const {\n    0: newLocalCurrent,\n    1: setNewLocalCurrent\n  } = useState({\n    region: \"\",\n    section: {\n      letter: \"\",\n      number: \"\"\n    },\n    bin: \"\",\n    pallet: \"\"\n  }); // Other states.\n\n  const {\n    0: pnOptions,\n    1: setPnOptions\n  } = useState([]);\n  const {\n    0: snOptions,\n    1: setSnOptions\n  } = useState([]);\n  const {\n    0: descriptions,\n    1: setDescriptions\n  } = useState([{\n    description: \"\",\n    date: \"\"\n  }]);\n  const {\n    0: workOrders,\n    1: setWorkOrders\n  } = useState([{\n    workOrder: \"\",\n    date: \"\"\n  }]);\n  const {\n    0: clients,\n    1: setClients\n  } = useState([]);\n  const {\n    0: photos,\n    1: setPhotos\n  } = useState([]);\n  const {\n    0: show,\n    1: setShow\n  } = useState(false); // error modal for missing required fields\n\n  const {\n    0: showErr,\n    1: setShowErr\n  } = useState(false);\n  const {\n    0: Err,\n    1: setErr\n  } = useState(\"Missing required field: Name and Description\");\n  const {\n    0: showDescModal,\n    1: setShowDescModal\n  } = useState(false);\n  const {\n    0: showWoModal,\n    1: setShowWoModal\n  } = useState(false);\n  const {\n    0: showClientModal,\n    1: setShowClientModal\n  } = useState(false);\n  const {\n    0: showMachineModal,\n    1: setShowMachineModal\n  } = useState(false);\n  const {\n    0: showParentModal,\n    1: setShowParentModal\n  } = useState(false);\n  const {\n    0: showCameraModal,\n    1: setShowCameraModal\n  } = useState(false);\n  const {\n    0: showSaveModal,\n    1: setShowSaveModal\n  } = useState(false);\n  const {\n    0: machineSelectionModal,\n    1: setMachineSelectionModal\n  } = useState(false);\n  const {\n    0: selectedDesc,\n    1: setSelectedDesc\n  } = useState(0);\n  const {\n    0: selectedClient,\n    1: setSelectedClient\n  } = useState(null);\n  const {\n    0: selectedMachine,\n    1: setSelectedMachine\n  } = useState(null);\n  const {\n    0: selectedCurrentMachine,\n    1: setSelectedCurrentMachine\n  } = useState(null);\n  const {\n    0: selectedParent,\n    1: setSelectedParent\n  } = useState(null);\n  const {\n    0: TheMachine,\n    1: setTheMachine\n  } = useState(null);\n  const {\n    0: machineOptions,\n    1: setMachineOptions\n  } = useState([]);\n  const {\n    0: search,\n    1: setSearch\n  } = useState(\"\");\n  const {\n    0: capturedPhoto,\n    1: setCapturedPhoto\n  } = useState(null);\n  const {\n    0: cameraFacing,\n    1: setCameraFacing\n  } = useState(\"environment\");\n  const {\n    0: addToWebsite,\n    1: setAddToWebsite\n  } = useState(false);\n  const {\n    0: machinePick,\n    1: setMachinePick\n  } = useState(false);\n  const {\n    0: freqItem,\n    1: setFreqItem\n  } = useState(0);\n  const {\n    0: usagePastYear,\n    1: setUsagePastYear\n  } = useState(0);\n  const {\n    0: machineFrequency,\n    1: setMachineFrequency\n  } = useState(0); // For extra (dimensions/price/DOM) section collapse.\n\n  const {\n    0: showExtra,\n    1: setShowExtra\n  } = useState(false); // For PN/SN \"add new\" functionality.\n\n  const {\n    0: addingNewPn,\n    1: setAddingNewPn\n  } = useState(false);\n  const {\n    0: newPn,\n    1: setNewPn\n  } = useState(\"\");\n  const {\n    0: addingNewSn,\n    1: setAddingNewSn\n  } = useState(false);\n  const {\n    0: newSn,\n    1: setNewSn\n  } = useState(\"\"); // For browsing photos.\n\n  const browseInputRef = useRef(null); // Inside your NewItem component:\n\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: savedDocId,\n    1: setSavedDocId\n  } = useState(null);\n  const isMountedRef = useRef(true);\n  useEffect(() => {\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, []);\n\n  const safeSetLoading = value => {\n    if (isMountedRef.current) setLoading(value);\n  };\n\n  const withTimeout = (promise, ms, label = \"Operation\") => new Promise((resolve, reject) => {\n    const timer = setTimeout(() => {\n      reject(new Error(`${label} timed out after ${Math.ceil(ms / 1000)}s`));\n    }, ms);\n    promise.then(result => {\n      clearTimeout(timer);\n      resolve(result);\n    }).catch(err => {\n      clearTimeout(timer);\n      reject(err);\n    });\n  });\n\n  if (!router.isReady) {\n    return null; // or a loading indicator\n  } // -------------------- Since this is \"add\" mode, we do not fetch an existing document.\n  // However, we still fetch global PN and SN options and clients for selection.\n\n\n  useEffect(() => {\n    async function fetchClientsData() {\n      try {\n        const clientsData = await fetchClients();\n        console.log(\"Clients:\", clientsData);\n        setClients(clientsData);\n      } catch (error) {\n        console.error(\"Error fetching clients: \", error);\n      }\n    }\n\n    fetchClientsData();\n  }, []);\n  useEffect(() => {\n    async function fetchPnSn() {\n      const db = firebase.firestore();\n      const snapshot = await db.collection(\"Test\").get();\n      let pnSet = new Set();\n      let snSet = new Set();\n      snapshot.forEach(doc => {\n        const data = doc.data();\n        if (data.pn) pnSet.add(data.pn);\n        if (data.sn) snSet.add(data.sn);\n      });\n      setPnOptions([...pnSet]);\n      setSnOptions([...snSet]);\n    }\n\n    fetchPnSn();\n  }, []);\n  const {\n    0: machineFieldsInitialized,\n    1: setMachineFieldsInitialized\n  } = useState(false);\n  useEffect(() => {\n    if (!machineFieldsInitialized && (TheMachine || selectedCurrentMachine || selectedMachine)) {\n      const updatedFields = updateMachineFields(TheMachine, selectedCurrentMachine, selectedMachine); // Only set fields if they are empty or \"N/A\"\n\n      if (!oem || oem === \"N/A\") setOem(updatedFields.oem);\n      if (!modality || modality === \"N/A\") setModality(updatedFields.modality);\n      if (!model || model === \"N/A\") setModel(updatedFields.model);\n      setMachineFieldsInitialized(true);\n    }\n  }, [TheMachine, selectedCurrentMachine, selectedMachine, machineFieldsInitialized]);\n  const {\n    0: signal,\n    1: setSignal\n  } = useState(null);\n  useEffect(() => {\n    if (router.isReady) {\n      setSignal(router.query.signal || null);\n    }\n  }, [router.isReady, router.query.signal]); // -------------------- Handlers for PN and SN dropdowns\n  // PN: when a user selects an existing PN value.\n\n  const handlePnSelect = e => {\n    const selected = e.target.value;\n    setItems(prev => {\n      let updatedPn = Array.isArray(prev.pn) ? [...prev.pn] : [];\n      updatedPn[0] = selected;\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        pn: updatedPn\n      });\n    });\n  };\n\n  const handlePnChange = (index, value) => {\n    setItems(prev => {\n      const newPn = [...prev.pn];\n      newPn[index] = value;\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        pn: newPn\n      });\n    });\n  };\n\n  const addPn = () => {\n    if (newPn.trim() !== \"\") {\n      setItems(prev => _objectSpread(_objectSpread({}, prev), {}, {\n        pn: [...prev.pn, newPn.trim()]\n      }));\n    }\n\n    setNewPn(\"\");\n    setAddingNewPn(false);\n  }; // SN: when a user selects an existing SN value.\n\n\n  const handleSnSelect = e => {\n    const selected = e.target.value;\n    setItems(prev => {\n      let updatedSn = Array.isArray(prev.sn) ? [...prev.sn] : [];\n      updatedSn[0] = selected;\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        sn: updatedSn\n      });\n    });\n  };\n\n  const handleSnChange = (index, value) => {\n    setItems(prev => {\n      const newSn = [...prev.sn];\n      newSn[index] = value;\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        sn: newSn\n      });\n    });\n  };\n\n  const addSn = () => {\n    if (newSn.trim() !== \"\") {\n      setItems(prev => _objectSpread(_objectSpread({}, prev), {}, {\n        sn: [...prev.sn, newSn.trim()]\n      }));\n    }\n\n    setNewSn(\"\");\n    setAddingNewSn(false);\n  }; // -------------------- Photo Browse Handlers\n\n\n  const handleBrowsePhotos = () => {\n    if (browseInputRef.current) {\n      browseInputRef.current.click();\n    }\n  };\n\n  const handleFilesSelected = e => {\n    const files = e.target.files;\n\n    if (files.length) {\n      const newPhotos = [];\n\n      for (let i = 0; i < files.length; i++) {\n        newPhotos.push({\n          file: files[i],\n          url: URL.createObjectURL(files[i])\n        });\n      }\n\n      setPhotos(prevPhotos => [...prevPhotos, ...newPhotos]);\n    }\n\n    e.target.value = \"\";\n  }; // -------------------- Photo Capture Handlers remain as in your index.js\n\n\n  const handleCapture = (err, result) => {\n    if (result) {\n      setCapturedPhoto(result);\n    }\n  };\n\n  const capturePhoto = () => {\n    const video = document.querySelector(\"video\");\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    const context = canvas.getContext(\"2d\");\n    context.drawImage(video, 0, 0, canvas.width, canvas.height);\n    canvas.toBlob(blob => {\n      setCapturedPhoto(blob);\n    }, \"image/png\");\n  };\n\n  const savePhoto = () => {\n    setPhotos(prevPhotos => [...prevPhotos, {\n      file: capturedPhoto,\n      url: URL.createObjectURL(capturedPhoto)\n    }]);\n    setCapturedPhoto(null);\n    setShowCameraModal(false);\n  };\n\n  const removePhoto = index => {\n    setPhotos(photos.filter((_, i) => i !== index));\n  }; // -------------------- Modal Handlers\n\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true);\n\n  const handleCloseErr = () => setShowErr(false);\n\n  const handleShowErr = () => setShowErr(true);\n\n  const handleCloseSaveModal = () => setShowSaveModal(false);\n\n  const handleShowSaveModal = () => setShowSaveModal(true);\n\n  const handleCloseDescModal = () => setShowDescModal(false);\n\n  const handleShowDescModal = () => setShowDescModal(true);\n\n  const handleCloseWoModal = () => setShowWoModal(false);\n\n  const handleShowWoModal = () => setShowWoModal(true);\n\n  const handleCloseClientModal = () => setShowClientModal(false);\n\n  const handleShowClientModal = () => setShowClientModal(true);\n\n  const handleCloseMachineModal = () => setShowMachineModal(false);\n\n  const handleShowMachineModal = () => {\n    setShowMachineModal(true);\n    setShowClientModal(false);\n  };\n\n  const handleCloseParentModal = () => setShowParentModal(false);\n\n  const handleShowParentModal = () => setShowParentModal(true); // -------------------- Work Orders / Descriptions Handlers (unchanged)\n\n\n  const addDescription = () => {\n    setDescriptions([...descriptions, {\n      description: \"\",\n      date: \"\"\n    }]);\n  };\n\n  const removeDescription = index => {\n    setDescriptions(descriptions.filter((_, i) => i !== index));\n  };\n\n  const handleDescriptionChange = (index, field, value) => {\n    const newDescriptions = descriptions.map((desc, i) => i === index ? _objectSpread(_objectSpread({}, desc), {}, {\n      [field]: value\n    }) : desc);\n    setDescriptions(newDescriptions);\n  };\n\n  const addWorkOrder = () => {\n    setWorkOrders([...workOrders, {\n      workOrder: \"\",\n      date: \"\"\n    }]);\n  };\n\n  const removeWorkOrder = index => {\n    setWorkOrders(workOrders.filter((_, i) => i !== index));\n  };\n\n  const handleWorkOrderChange = (index, field, value) => {\n    const newWorkOrders = workOrders.map((wo, i) => i === index ? _objectSpread(_objectSpread({}, wo), {}, {\n      [field]: value\n    }) : wo);\n    setWorkOrders(newWorkOrders);\n  };\n\n  const listDescriptions = () => {\n    setShowDescModal(true);\n  };\n\n  const selectDescription = index => {\n    setSelectedDesc(index);\n    setShowDescModal(false);\n  }; // -------------------- Machine Selection (unchanged)\n\n\n  const handleClientInfo = async clientId => {\n    // Clear any previously selected machine/local loc for the branch\n    if (machinePick) {\n      setSelectedMachine(null);\n      setShowLocalLocFrom(false);\n    } else {\n      setSelectedCurrentMachine(null);\n      setShowLocalLocCurrent(false);\n    }\n\n    const db = firebase.firestore();\n    const clientDoc = await db.collection(\"Client\").doc(clientId).get();\n\n    if (clientDoc.exists) {\n      const clientData = clientDoc.data();\n\n      if (machinePick) {\n        setSelectedClientFrom(_objectSpread({\n          id: clientDoc.id\n        }, clientData));\n      } else {\n        setSelectedClientCurrent(_objectSpread({\n          id: clientDoc.id\n        }, clientData));\n      }\n\n      if (clientData.name === \"SoCalWarehouse\") {\n        if (machinePick) setShowLocalLocFrom(true);else setShowLocalLocCurrent(true);\n      } // Fetch machines for this client:\n\n\n      const machinePromises = clientData.machines.map(machineRef => machineRef.get());\n      const machineDocs = await Promise.all(machinePromises);\n      const machines = machineDocs.map(machineDoc => _objectSpread({\n        id: machineDoc.id\n      }, machineDoc.data()));\n      setMachineOptions(machines);\n      handleCloseClientModal();\n    }\n  };\n\n  const fetchMachine = async machineId => {\n    const db = firebase.firestore();\n    const doc = await db.collection(\"Machine\").doc(machineId).get();\n\n    if (doc.exists) {\n      const machineData = doc.data();\n      setTheMachine(machineData); // Ensure OEM, Modality, and Model update properly only if necessary\n\n      if (!oem || oem === \"N/A\") setOem(machineData.oem || machineData.OEM || \"\");\n      if (!modality || modality === \"N/A\") setModality(machineData.modality || machineData.Modality || \"\");\n      if (!model || model === \"N/A\") setModel(machineData.model || machineData.Model || \"\"); // Set machine frequency count\n\n      const machinesSnapshot = await db.collection(\"Machine\").where(\"Model\", \"==\", machineData.Model || machineData.model).get();\n      setMachineFrequency(machinesSnapshot.size);\n    } else {\n      console.error(\"Machine not found\");\n    }\n  }; // -------------------- Frequency/Usage (unchanged)\n\n\n  const calculateItemFrequencyAndUsage = async pn => {\n    const db = firebase.firestore();\n    const currentDate = new Date();\n    const oneYearAgo = new Date();\n    oneYearAgo.setFullYear(currentDate.getFullYear() - 1);\n    const itemsSnapshot = await db.collection(\"Test\").where(\"pn\", \"==\", pn).get();\n    setFreqItem(itemsSnapshot.size);\n    let usagePastYear = 0;\n    itemsSnapshot.forEach(doc => {\n      const itemData = doc.data();\n      itemData.workOrders.forEach(workOrder => {\n        const workOrderDate = new Date(workOrder.date);\n\n        if (workOrderDate >= oneYearAgo && workOrderDate <= currentDate) {\n          usagePastYear++;\n        }\n      });\n    });\n    setUsagePastYear(usagePastYear);\n  }; // -------------------- Photo Upload (unchanged)\n\n\n  const uploadPhotos = async docID => {\n    const storageRef = firebase.storage().ref();\n\n    for (let i = 0; i < photos.length; i++) {\n      if (photos[i].file) {\n        const photoRef = storageRef.child(`Parts/${docID}/${docID}${i === 0 ? \".jpg\" : `.${i + 1}.jpg`}`);\n        const metadata = {\n          contentType: \"image/png\"\n        };\n        await photoRef.put(photos[i].file, metadata);\n        const url = await photoRef.getDownloadURL();\n        photos[i].url = url;\n      }\n    }\n  }; // -------------------- Submission Handler\n  // For NewItem, only require Name and Description.\n\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n\n    if (!isReadyForActions) {\n      handleShow();\n    } else {\n      safeSetLoading(true); // start loading before async work\n\n      try {\n        const docId = await withTimeout(toSend(), 20000, \"Save\");\n\n        if (!docId) {\n          setErr(\"Save failed. Please try again.\");\n          setShowErr(true);\n        }\n      } catch (error) {\n        console.error(error);\n        setErr((error === null || error === void 0 ? void 0 : error.message) || \"Save failed.\");\n        setShowErr(true);\n      } finally {\n        safeSetLoading(false); // end loading after async work completes\n      }\n    }\n  }\n\n  async function toSend(redirect = true) {\n    const {\n      id\n    } = router.query;\n    const db = firebase.firestore();\n    const existingId = savedDocId || id || null; // Get the current authenticated user\n\n    const currentUser = firebase.auth().currentUser;\n    const userEmail = currentUser ? currentUser.email : \"unknown\"; // Always use the current state values for OEM, modality, and model.\n\n    const machineData = _objectSpread(_objectSpread({}, TheMachine || {}), {}, {\n      oem: oem,\n      modality: modality,\n      model: model\n    });\n\n    const formattedItems = _objectSpread(_objectSpread({}, items), {}, {\n      descriptions,\n      workOrders\n    }); // Remove any unused fields.\n\n\n    formattedItems.status = items.status || \"\";\n    formattedItems.DOM = DOM; // Date of Manufacture\n\n    const fromDetails = buildLocalLocObject(newLocalFrom);\n    const currentDetails = buildLocalLocObject(newLocalCurrent);\n\n    if (Object.keys(fromDetails).length) {\n      formattedItems.newLocalFrom = fromDetails;\n      formattedItems.localLocFrom = formatLoc(newLocalFrom) || \"\";\n    } else {\n      formattedItems.localLocFrom = \"\";\n      formattedItems.newLocalFrom = {};\n    }\n\n    if (Object.keys(currentDetails).length) {\n      formattedItems.newLocalCurrent = currentDetails;\n      formattedItems.localLocCurrent = formatLoc(newLocalCurrent) || \"\";\n    } else {\n      formattedItems.localLocCurrent = \"\";\n      formattedItems.newLocalCurrent = {};\n    }\n\n    formattedItems.date = items.date || \"\";\n    formattedItems.arrival_date = items.arrival_date || \"\"; // NEW: Arrival Date\n\n    formattedItems.poNumber = items.poNumber || \"\";\n    formattedItems.trackingNumber = items.trackingNumber || \"\";\n    formattedItems.TheMachine = machineData || {};\n    formattedItems.addedToWebsite = addToWebsite;\n    formattedItems.visible = items.visible; // Add the current user's email under the \"user\" field\n\n    formattedItems.user = userEmail;\n    formattedItems.lastEdited = userEmail; // Clean pn and sn arrays to replace undefined values with an empty string.\n\n    formattedItems.pn = (items.pn || []).map(value => value === undefined ? \"\" : value);\n    formattedItems.sn = (items.sn || []).map(value => value === undefined ? \"\" : value); // Set machine references for each branch.\n\n    if (selectedMachine && selectedMachine.id) {\n      formattedItems.MachineFrom = db.collection(\"Machine\").doc(selectedMachine.id);\n    }\n\n    if (selectedCurrentMachine && selectedCurrentMachine.id) {\n      formattedItems.MachineCurrent = db.collection(\"Machine\").doc(selectedCurrentMachine.id);\n    } // ***** NEW: Set client references for each branch *****\n\n\n    if (selectedClientFrom && selectedClientFrom.id) {\n      formattedItems.ClientFrom = db.collection(\"Client\").doc(selectedClientFrom.id);\n    }\n\n    if (selectedClientCurrent && selectedClientCurrent.id) {\n      formattedItems.ClientCurrent = db.collection(\"Client\").doc(selectedClientCurrent.id);\n    } // ******************************************************\n\n\n    if (selectedParent && selectedParent.id) {\n      formattedItems.Parent = db.collection(\"Test\").doc(selectedParent.id);\n    } // Only add dateCreated if this is a new document\n\n\n    if (!existingId) {\n      formattedItems.dateCreated = new Date().toISOString().split(\"T\")[0]; // \"YYYY-MM-DD\"\n    } // --- LOCAL SN LOGIC ---\n\n\n    let docId = existingId;\n\n    try {\n      if (docId) {\n        // Check if a localSN is provided and if it differs from the current docId.\n        const newDocId = items.localSN && items.localSN.trim() !== \"\" ? items.localSN.trim() : docId;\n\n        if (docId !== newDocId) {\n          // Migrate: Create a new document with the newDocId.\n          await db.collection(\"Test\").doc(newDocId).set(formattedItems);\n\n          if (selectedMachine && selectedMachine.id) {\n            const machineRef = db.collection(\"Machine\").doc(selectedMachine.id);\n            const machineDoc = await machineRef.get();\n\n            if (machineDoc.exists) {\n              await machineRef.update({\n                associatedParts: firebase.firestore.FieldValue.arrayUnion(db.collection(\"Test\").doc(newDocId))\n              });\n            }\n          }\n\n          if (selectedCurrentMachine && selectedCurrentMachine.id) {\n            const currentMachineRef = db.collection(\"Machine\").doc(selectedCurrentMachine.id);\n            const currentMachineDoc = await currentMachineRef.get();\n\n            if (currentMachineDoc.exists) {\n              await currentMachineRef.update({\n                associatedParts: firebase.firestore.FieldValue.arrayUnion(db.collection(\"Test\").doc(newDocId))\n              });\n            }\n          } // Delete the old document.\n\n\n          await db.collection(\"Test\").doc(docId).delete(); // Set docId to the new document ID.\n\n          docId = newDocId;\n        } else {\n          // Deep-clean the formattedItems to remove any undefined nested values.\n          const cleanFormattedItems = shallowClean(formattedItems);\n          await db.collection(\"Test\").doc(docId).update(cleanFormattedItems);\n\n          if (selectedMachine && selectedMachine.id) {\n            const machineRef = db.collection(\"Machine\").doc(selectedMachine.id);\n            const machineDoc = await machineRef.get();\n\n            if (machineDoc.exists) {\n              await machineRef.update({\n                associatedParts: firebase.firestore.FieldValue.arrayUnion(db.collection(\"Test\").doc(docId))\n              });\n            }\n          }\n\n          if (selectedCurrentMachine && selectedCurrentMachine.id) {\n            const currentMachineRef = db.collection(\"Machine\").doc(selectedCurrentMachine.id);\n            const currentMachineDoc = await currentMachineRef.get();\n\n            if (currentMachineDoc.exists) {\n              await currentMachineRef.update({\n                associatedParts: firebase.firestore.FieldValue.arrayUnion(db.collection(\"Test\").doc(docId))\n              });\n            }\n          }\n        }\n      } else {\n        // For a new item, if localSN is provided, use it; otherwise, generate a custom ID.\n        docId = items.localSN && items.localSN.trim() !== \"\" ? items.localSN.trim() : generateCustomID();\n        await db.collection(\"Test\").doc(docId).set(formattedItems);\n\n        if (selectedMachine && selectedMachine.id) {\n          const machineRef = db.collection(\"Machine\").doc(selectedMachine.id);\n          const machineDoc = await machineRef.get();\n\n          if (machineDoc.exists) {\n            await machineRef.update({\n              associatedParts: firebase.firestore.FieldValue.arrayUnion(db.collection(\"Test\").doc(docId))\n            });\n          }\n        }\n\n        if (selectedCurrentMachine && selectedCurrentMachine.id) {\n          const currentMachineRef = db.collection(\"Machine\").doc(selectedCurrentMachine.id);\n          const currentMachineDoc = await currentMachineRef.get();\n\n          if (currentMachineDoc.exists) {\n            await currentMachineRef.update({\n              associatedParts: firebase.firestore.FieldValue.arrayUnion(db.collection(\"Test\").doc(docId))\n            });\n          }\n        }\n      } // Upload any new photos to Firebase Storage.\n\n\n      await uploadPhotos(docId);\n      console.log(\"Item saved and associatedParts updated!\");\n      setSavedDocId(docId); // Redirect to the new URL using the new document id.\n\n      if (redirect) {\n        router.push(`/NewSearch/item/${docId}`);\n      } // Optionally, show a save confirmation modal.\n\n\n      handleShowSaveModal();\n      return docId;\n    } catch (error) {\n      console.error(\"Error saving data:\", error);\n      return null;\n    }\n  }\n\n  const isReadyForActions = (items.name || \"\").trim() !== \"\" && (((_descriptions$selecte = descriptions[selectedDesc]) === null || _descriptions$selecte === void 0 ? void 0 : _descriptions$selecte.description) || \"\").trim() !== \"\";\n\n  const ensureSaved = async () => {\n    if (!isReadyForActions) {\n      handleShow();\n      return null;\n    }\n\n    if (savedDocId) return savedDocId;\n    const docId = await toSend(false);\n\n    if (!docId) {\n      setErr(\"Failed to save item before action.\");\n      setShowErr(true);\n    }\n\n    return docId;\n  }; // -------------------- Info Modal Handlers (unchanged)\n\n\n  const {\n    0: showInfoModal,\n    1: setShowInfoModal\n  } = useState(false);\n  const {\n    0: itemName,\n    1: setItemName\n  } = useState(\"\");\n\n  const handleShowInfoModal = async () => {\n    const db = firebase.firestore();\n\n    try {\n      const docId = savedDocId || router.query.id;\n\n      if (!docId) {\n        setErr(\"Save the item before viewing info.\");\n        setShowErr(true);\n        return;\n      }\n\n      const doc = await db.collection(\"Test\").doc(docId).get();\n\n      if (doc.exists) {\n        const data = doc.data();\n        setItemName(data.name || \"N/A\");\n        setShowInfoModal(true);\n      } else {\n        console.error(\"Item not found\");\n      }\n    } catch (error) {\n      console.error(\"Error fetching item info:\", error);\n    }\n  };\n\n  const handleCloseInfoModal = () => setShowInfoModal(false);\n\n  const handleCloseCameraModal = () => {\n    setShowCameraModal(false);\n    setCapturedPhoto(null);\n  };\n\n  const handleChange = field => event => {\n    const value = event.target ? event.target.value : event.value;\n    setItems(prevItems => _objectSpread(_objectSpread({}, prevItems), {}, {\n      [field]: value\n    }));\n  };\n\n  const mostRecentWorkOrder = workOrders && workOrders.length > 0 ? workOrders.reduce((latest, current) => {\n    const latestDate = new Date(latest.date);\n    const currentDate = new Date(current.date);\n    return currentDate > latestDate ? current : latest;\n  }, workOrders[0]) : {};\n\n  const handleShowCameraModal = () => {\n    setShowCameraModal(true);\n  };\n\n  const generateCustomID = () => {\n    const randomNum = Math.floor(10000 + Math.random() * 90000);\n    return `AIS${randomNum}`;\n  };\n\n  const handlePrint = async () => {\n    const docId = await ensureSaved();\n    if (!docId) return;\n    const payload = {\n      name: items.name,\n      pn: items.pn,\n      sn: items.sn,\n      wo: workOrders && workOrders.length > 0 ? workOrders[0].workOrder : \"\",\n      status: items.status,\n      local_sn: docId,\n      descriptions: descriptions,\n      date: items.date || new Date().toISOString().split(\"T\")[0],\n      DOM: DOM,\n      oem: oem,\n      modality: modality,\n      model: model,\n      poNumber: items.poNumber,\n      arrival_date: items.arrival_date,\n      trackingNumber: items.trackingNumber\n    };\n    console.log(\"Payload for printing:\", payload);\n\n    try {\n      const response = await fetch(\"https://9d70-174-76-22-138.ngrok-free.app/print-label\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(payload)\n      });\n      const result = await response.json();\n      console.log(\"Print result:\", result);\n    } catch (error) {\n      console.error(\"Error printing label:\", error);\n    }\n  };\n\n  const handleSendToInflow = async () => {\n    try {\n      var _descriptions$selecte2;\n\n      const docId = await ensureSaved();\n      if (!docId) return;\n      const name = (items.name || \"\").trim();\n\n      if (!name) {\n        alert(\"Item needs a name before sending to inFlow.\");\n        return;\n      }\n\n      const description = (((_descriptions$selecte2 = descriptions[selectedDesc]) === null || _descriptions$selecte2 === void 0 ? void 0 : _descriptions$selecte2.description) || \"\").trim();\n      const imageUrls = photos.map(p => p.url).filter(Boolean);\n      const sku = docId.toString();\n      const arrivalISO = items.arrival_date ? new Date(items.arrival_date).toISOString().slice(0, 10) : \"\";\n      const pnStr = Array.isArray(items.pn) ? items.pn.filter(Boolean).join(\", \") : items.pn || \"\";\n      const snStr = Array.isArray(items.sn) ? items.sn.filter(Boolean).join(\", \") : items.sn || \"\";\n      const mostRecentWO = workOrders !== null && workOrders !== void 0 && workOrders.length ? workOrders.reduce((latest, cur) => new Date(cur.date) > new Date(latest.date) ? cur : latest) : {\n        workOrder: \"\",\n        date: \"\"\n      };\n      const customFields = {\n        custom1: (oem || \"\").trim(),\n        custom2: (modality || \"\").trim(),\n        custom3: (model || \"\").trim(),\n        custom4: (description || \"\").trim(),\n        custom5: (mostRecentWO.workOrder || \"\").trim(),\n        custom6: ((selectedClientFrom === null || selectedClientFrom === void 0 ? void 0 : selectedClientFrom.name) || \"\").trim(),\n        custom7: pnStr,\n        custom8: snStr,\n        custom9: arrivalISO,\n        custom10: ((selectedClientCurrent === null || selectedClientCurrent === void 0 ? void 0 : selectedClientCurrent.name) || \"\").trim()\n      };\n      const created = await InflowAPI.upsertProduct({\n        name,\n        description,\n        sku,\n        imageUrls,\n        customFields\n      });\n      alert(`Sent to inFlow successfully. ID: ${(created === null || created === void 0 ? void 0 : created.productId) || (created === null || created === void 0 ? void 0 : created.id) || \"(unknown)\"}`);\n    } catch (err) {\n      console.error(err);\n      alert(\"Error sending to inFlow: \" + err.message);\n    }\n  };\n\n  const handleBluefolderButton = async () => {\n    var _descriptions$selecte3;\n\n    const docId = await ensureSaved();\n    if (!docId) return;\n    const currentWorkOrder = workOrders && workOrders.length > 0 ? workOrders[0].workOrder : \"\";\n\n    if (!currentWorkOrder) {\n      alert(\"Please fill out the work order field before adding to BlueFolder.\");\n      return;\n    }\n\n    const payload = {\n      name: items.name,\n      pn: items.pn[0] || \"\",\n      sn: items.sn[0] || \"\",\n      status: items.status,\n      description: ((_descriptions$selecte3 = descriptions[selectedDesc]) === null || _descriptions$selecte3 === void 0 ? void 0 : _descriptions$selecte3.description) || \"\",\n      workOrder: currentWorkOrder,\n      localsn: docId\n    };\n\n    try {\n      const response = await fetch(\"https://9d70-174-76-22-138.ngrok-free.app/bluefolder\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(payload)\n      });\n      const result = await response.json();\n      alert(\"BlueFolder service item added successfully!\");\n      console.log(\"BlueFolder result:\", result);\n    } catch (error) {\n      console.error(\"BlueFolder error:\", error);\n      alert(\"Error adding data to BlueFolder.\");\n    }\n  };\n\n  const handleAddToSlack = async (which = \"shipping\") => {\n    try {\n      var _sort$, _ref, _items$trackingNumber, _json$debug, _json$debug2;\n\n      const docId = await ensureSaved();\n      if (!docId) return;\n      const safeName = ((items === null || items === void 0 ? void 0 : items.name) || docId || \"Untitled\").trim();\n      const title = `${safeName}${docId ? ` (${docId})` : \"\"}`;\n      const pn0 = Array.isArray(items === null || items === void 0 ? void 0 : items.pn) ? items.pn[0] : items === null || items === void 0 ? void 0 : items.pn;\n      const sn0 = Array.isArray(items === null || items === void 0 ? void 0 : items.sn) ? items.sn[0] : items === null || items === void 0 ? void 0 : items.sn;\n      const pn_sn = [pn0 && `PN: ${pn0}`, sn0 && `SN: ${sn0}`].filter(Boolean).join(\"  \");\n      const mostRecentWO = workOrders && workOrders.length ? (_sort$ = [...workOrders].sort((a, b) => new Date((b === null || b === void 0 ? void 0 : b.date) || 0) - new Date((a === null || a === void 0 ? void 0 : a.date) || 0))[0]) === null || _sort$ === void 0 ? void 0 : _sort$.workOrder : \"\";\n      const description = selectedDesc != null && descriptions !== null && descriptions !== void 0 && descriptions[selectedDesc] ? descriptions[selectedDesc].description || \"\" : (items === null || items === void 0 ? void 0 : items.description) || \"\";\n      const tracking = (_ref = (_items$trackingNumber = items === null || items === void 0 ? void 0 : items.trackingNumber) !== null && _items$trackingNumber !== void 0 ? _items$trackingNumber : items === null || items === void 0 ? void 0 : items.tracking) !== null && _ref !== void 0 ? _ref : \"\";\n      const local_sn = docId || (items === null || items === void 0 ? void 0 : items.localSN) || \"\";\n      const photoUrls = Array.isArray(photos) ? photos.map(p => p === null || p === void 0 ? void 0 : p.url).filter(Boolean) : [];\n      const resp = await fetch(\"/api/slack/add-to-list\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          listKey: which,\n          title,\n          pn_sn,\n          work_order: mostRecentWO || \"\",\n          local_sn,\n          tracking,\n          description: (description || \"\").trim(),\n          photoUrls\n        })\n      });\n      const json = await resp.json();\n      console.log(\"[SLACK][handleAddToSlack] response:\", json);\n      if (json !== null && json !== void 0 && (_json$debug = json.debug) !== null && _json$debug !== void 0 && _json$debug.steps) console.table(json.debug.steps);\n      if (json !== null && json !== void 0 && (_json$debug2 = json.debug) !== null && _json$debug2 !== void 0 && _json$debug2.photos) console.table(json.debug.photos);\n\n      if (!resp.ok || !(json !== null && json !== void 0 && json.ok)) {\n        setErr(`Slack add failed: ${(json === null || json === void 0 ? void 0 : json.error) || \"unknown error\"}`);\n        setShowErr(true);\n        return;\n      }\n\n      alert(`Added to Slack ${which === \"shipping\" ? \"Shipping\" : which === \"receiving\" ? \"Receiving\" : \"Tasks\"} list.`);\n    } catch (e) {\n      console.error(e);\n      setErr(\"Error adding to Slack\");\n      setShowErr(true);\n    }\n  };\n\n  const handleToggleAddToWebsite = async () => {\n    const docId = await ensureSaved();\n    if (!docId) return;\n    const next = !addToWebsite;\n    setAddToWebsite(next);\n\n    try {\n      await firebase.firestore().collection(\"Test\").doc(docId).update({\n        addedToWebsite: next\n      });\n    } catch (error) {\n      console.error(\"Error updating addedToWebsite:\", error);\n    }\n  };\n\n  const handleAddNewPn = () => {\n    if (newPn.trim() !== \"\") {\n      setItems(prev => _objectSpread(_objectSpread({}, prev), {}, {\n        pn: [...prev.pn, newPn.trim()]\n      }));\n    }\n\n    setNewPn(\"\");\n    setAddingNewPn(false);\n  };\n\n  const handleAddNewSn = () => {\n    if (newSn.trim() !== \"\") {\n      setItems(prev => _objectSpread(_objectSpread({}, prev), {}, {\n        sn: [...prev.sn, newSn.trim()]\n      }));\n    }\n\n    setNewSn(\"\");\n    setAddingNewSn(false);\n  };\n\n  const {\n    0: showLocalLocFrom,\n    1: setShowLocalLocFrom\n  } = useState(false);\n  const {\n    0: showLocalLocCurrent,\n    1: setShowLocalLocCurrent\n  } = useState(false);\n  const {\n    0: showNewLocalModalFrom,\n    1: setShowNewLocalModalFrom\n  } = useState(false);\n  const {\n    0: showNewLocalModalCurrent,\n    1: setShowNewLocalModalCurrent\n  } = useState(false);\n\n  async function handleClone() {\n    event.preventDefault();\n\n    if (!isReadyForActions) {\n      handleShow(); // your existing error modal\n\n      return;\n    }\n\n    safeSetLoading(true);\n\n    try {\n      // save but don’t redirect\n      const docId = await withTimeout(toSend(false), 20000, \"Save\");\n\n      if (!docId) {\n        setErr(\"Save failed. Please try again.\");\n        setShowErr(true);\n      }\n    } catch (err) {\n      console.error(err);\n      setErr((err === null || err === void 0 ? void 0 : err.message) || \"Save failed.\");\n      setShowErr(true);\n    } finally {\n      safeSetLoading(false);\n    }\n  }\n\n  const condition = name => {\n    return name && name.toLowerCase() === \"interior socal\";\n  };\n\n  const handleSetSelectedMachine = machine => {\n    var _machine$name;\n\n    const isSocalInterior = ((_machine$name = machine.name) === null || _machine$name === void 0 ? void 0 : _machine$name.toLowerCase()) === \"interior socal\";\n\n    if (machinePick) {\n      var _selectedClientFrom$n;\n\n      setSelectedMachine({\n        id: machine.id,\n        name: machine.name\n      });\n      setShowLocalLocFrom(isSocalInterior || (selectedClientFrom === null || selectedClientFrom === void 0 ? void 0 : (_selectedClientFrom$n = selectedClientFrom.name) === null || _selectedClientFrom$n === void 0 ? void 0 : _selectedClientFrom$n.toLowerCase()) === \"socalwarehouse\");\n    } else {\n      var _selectedClientCurren;\n\n      setSelectedCurrentMachine({\n        id: machine.id,\n        name: machine.name\n      });\n      setShowLocalLocCurrent(isSocalInterior || (selectedClientCurrent === null || selectedClientCurrent === void 0 ? void 0 : (_selectedClientCurren = selectedClientCurrent.name) === null || _selectedClientCurren === void 0 ? void 0 : _selectedClientCurren.toLowerCase()) === \"socalwarehouse\");\n    }\n\n    fetchMachine(machine.id);\n    setShowMachineModal(false);\n  };\n\n  const {\n    0: currentPnIndex,\n    1: setCurrentPnIndex\n  } = useState(0);\n  const {\n    0: showDropdown,\n    1: setShowDropdown\n  } = useState(false);\n  const {\n    0: currentSnIndex,\n    1: setCurrentSnIndex\n  } = useState(0);\n  const {\n    0: showSnDropdown,\n    1: setShowSnDropdown\n  } = useState(false);\n\n  const handleAddNewClient = () => {\n    // Generate a random client number as part of the URL.\n    const randomNum = Math.floor(10000 + Math.random() * 90000); // When pushing, include a query parameter (from=item) and the current item id if available.\n\n    router.push(`/NewSearch/client/AIS${randomNum}/addClient?from=addItem`);\n  };\n\n  const {\n    0: showMachineSelect,\n    1: setShowMachineSelect\n  } = useState(false);\n  const {\n    0: selectedClientFrom,\n    1: setSelectedClientFrom\n  } = useState(null);\n  const {\n    0: selectedClientCurrent,\n    1: setSelectedClientCurrent\n  } = useState(null);\n  useEffect(() => {\n    var _selectedClientFrom$n2;\n\n    setShowLocalLocFrom((selectedClientFrom === null || selectedClientFrom === void 0 ? void 0 : (_selectedClientFrom$n2 = selectedClientFrom.name) === null || _selectedClientFrom$n2 === void 0 ? void 0 : _selectedClientFrom$n2.toLowerCase()) === \"socalwarehouse\");\n  }, [selectedClientFrom]);\n  useEffect(() => {\n    var _selectedClientCurren2;\n\n    setShowLocalLocCurrent((selectedClientCurrent === null || selectedClientCurrent === void 0 ? void 0 : (_selectedClientCurren2 = selectedClientCurrent.name) === null || _selectedClientCurren2 === void 0 ? void 0 : _selectedClientCurren2.toLowerCase()) === \"socalwarehouse\");\n  }, [selectedClientCurrent]);\n  return __jsx(LoggedIn, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1213,\n      columnNumber: 5\n    }\n  }, __jsx(MachineSelectionModal, {\n    show: machineSelectionModal,\n    handleClose: () => setMachineSelectionModal(false),\n    setMachine: handleSetSelectedMachine,\n    machineOptions: machineOptions // if your modal needs the list of machines\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1215,\n      columnNumber: 7\n    }\n  }), __jsx(Modal, {\n    show: show,\n    onHide: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1221,\n      columnNumber: 7\n    }\n  }, __jsx(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1222,\n      columnNumber: 9\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1223,\n      columnNumber: 11\n    }\n  }, \"Error\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1225,\n      columnNumber: 9\n    }\n  }, \"Missing required field: Name and Description\"), __jsx(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1226,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    variant: \"primary\",\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1227,\n      columnNumber: 11\n    }\n  }, \"Ok\"))), __jsx(Modal, {\n    show: showErr,\n    onHide: handleCloseErr,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1233,\n      columnNumber: 7\n    }\n  }, __jsx(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1234,\n      columnNumber: 9\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1235,\n      columnNumber: 11\n    }\n  }, \"Error\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1237,\n      columnNumber: 9\n    }\n  }, Err), __jsx(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1238,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    variant: \"primary\",\n    onClick: handleCloseErr,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1239,\n      columnNumber: 11\n    }\n  }, \"Ok\"))), __jsx(Modal, {\n    show: showSaveModal,\n    onHide: handleCloseSaveModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1244,\n      columnNumber: 7\n    }\n  }, __jsx(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1245,\n      columnNumber: 9\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1246,\n      columnNumber: 11\n    }\n  }, \"Save Confirmation\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1248,\n      columnNumber: 9\n    }\n  }, \"Data has been saved successfully.\"), __jsx(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1249,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    variant: \"primary\",\n    onClick: handleCloseSaveModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1250,\n      columnNumber: 11\n    }\n  }, \"Ok\"))), __jsx(Modal, {\n    show: showDescModal,\n    onHide: handleCloseDescModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1255,\n      columnNumber: 7\n    }\n  }, __jsx(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1256,\n      columnNumber: 9\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1257,\n      columnNumber: 11\n    }\n  }, \"Descriptions\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1259,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    variant: \"primary\",\n    className: \"mb-3\",\n    onClick: addDescription,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1260,\n      columnNumber: 11\n    }\n  }, \"Add Description\"), descriptions.map((desc, index) => __jsx(Row, {\n    key: index,\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1264,\n      columnNumber: 13\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    className: \"w-100\",\n    onClick: () => selectDescription(index),\n    style: {\n      cursor: \"pointer\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1265,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"d-flex justify-content-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1271,\n      columnNumber: 17\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1272,\n      columnNumber: 19\n    }\n  }, desc.description || \"Description\"), __jsx(\"span\", {\n    style: {\n      borderLeft: \"1px solid #ccc\",\n      paddingLeft: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1273,\n      columnNumber: 19\n    }\n  }, desc.date || \"Date\"))))), __jsx(Button, {\n    variant: \"primary\",\n    onClick: handleCloseDescModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1285,\n      columnNumber: 11\n    }\n  }, \"OK\"))), __jsx(Modal, {\n    show: showWoModal,\n    onHide: handleCloseWoModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1290,\n      columnNumber: 7\n    }\n  }, __jsx(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1291,\n      columnNumber: 9\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1292,\n      columnNumber: 11\n    }\n  }, \"Work Orders\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1294,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    variant: \"primary\",\n    className: \"mb-3\",\n    onClick: addWorkOrder,\n    style: {\n      marginBottom: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1295,\n      columnNumber: 11\n    }\n  }, \"Add Work Order\"), workOrders.map((wo, index) => __jsx(Row, {\n    key: index,\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1304,\n      columnNumber: 13\n    }\n  }, __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1305,\n      columnNumber: 15\n    }\n  }, __jsx(Form.Control, {\n    type: \"text\",\n    placeholder: \"Work Order\",\n    value: wo.workOrder,\n    onChange: e => handleWorkOrderChange(index, \"workOrder\", e.target.value),\n    style: {\n      marginBottom: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1306,\n      columnNumber: 17\n    }\n  })), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1316,\n      columnNumber: 15\n    }\n  }, __jsx(Form.Control, {\n    type: \"date\",\n    placeholder: \"Date\",\n    value: wo.date,\n    onChange: e => handleWorkOrderChange(index, \"date\", e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1317,\n      columnNumber: 17\n    }\n  })), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1326,\n      columnNumber: 15\n    }\n  }, __jsx(Button, {\n    variant: \"danger\",\n    onClick: () => removeWorkOrder(index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1327,\n      columnNumber: 17\n    }\n  }, \"Remove\")))), __jsx(Button, {\n    variant: \"primary\",\n    onClick: handleCloseWoModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1333,\n      columnNumber: 11\n    }\n  }, \"OK\"))), __jsx(ClientInfoModal, {\n    show: showMachineModal,\n    handleClose: handleCloseMachineModal,\n    selectedClient: selectedClient,\n    machineOptions: machineOptions,\n    setSelectedMachine: handleSetSelectedMachine,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1339,\n      columnNumber: 7\n    }\n  }), __jsx(Modal, {\n    show: showClientModal,\n    onHide: handleCloseClientModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1346,\n      columnNumber: 7\n    }\n  }, __jsx(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1347,\n      columnNumber: 9\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1348,\n      columnNumber: 11\n    }\n  }, \"Select Client\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1350,\n      columnNumber: 9\n    }\n  }, __jsx(FormControl, {\n    type: \"text\",\n    placeholder: \"Search by name\",\n    className: \"mb-3\",\n    value: search,\n    onChange: e => setSearch(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1351,\n      columnNumber: 11\n    }\n  }), __jsx(ClientTable, {\n    clients: clients.filter(client => client.name.toLowerCase().includes(search.toLowerCase())),\n    onSelectClient: handleClientInfo,\n    onInfoClick: handleClientInfo,\n    clearSelection: () => handleClientInfo(null),\n    onAddClient: handleAddNewClient // new prop\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1358,\n      columnNumber: 11\n    }\n  }))), __jsx(ParentModal, {\n    show: showParentModal,\n    handleClose: handleCloseParentModal,\n    setSelectedParent: setSelectedParent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1370,\n      columnNumber: 7\n    }\n  }), __jsx(MachineSelectionModal, {\n    show: machineSelectionModal,\n    handleClose: () => setMachineSelectionModal(false),\n    setMachine: setTheMachine,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1375,\n      columnNumber: 7\n    }\n  }), __jsx(Modal, {\n    show: showCameraModal,\n    onHide: handleCloseCameraModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1381,\n      columnNumber: 7\n    }\n  }, __jsx(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1382,\n      columnNumber: 9\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1383,\n      columnNumber: 11\n    }\n  }, \"Take a Photo\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1385,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"camera\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1386,\n      columnNumber: 11\n    }\n  }, !capturedPhoto ? __jsx(BarcodeScannerComponent, {\n    width: \"100%\",\n    height: 300,\n    onUpdate: handleCapture,\n    facingMode: cameraFacing,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1388,\n      columnNumber: 15\n    }\n  }) : __jsx(\"div\", {\n    className: \"photo-preview\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1395,\n      columnNumber: 15\n    }\n  }, __jsx(\"img\", {\n    src: URL.createObjectURL(capturedPhoto),\n    alt: \"captured\",\n    style: {\n      width: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1396,\n      columnNumber: 17\n    }\n  })))), __jsx(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1405,\n      columnNumber: 9\n    }\n  }, !capturedPhoto ? __jsx(React.Fragment, null, __jsx(Button, {\n    onClick: capturePhoto,\n    style: {\n      borderRadius: \"50%\",\n      width: \"60px\",\n      height: \"60px\",\n      position: \"absolute\",\n      left: \"50%\",\n      transform: \"translateX(-50%)\",\n      bottom: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1408,\n      columnNumber: 15\n    }\n  }, \"\\uD83D\\uDCF7\"), __jsx(Button, {\n    onClick: () => setCameraFacing(prev => prev === \"environment\" ? \"user\" : \"environment\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1422,\n      columnNumber: 15\n    }\n  }, \"Flip Camera\"), __jsx(Button, {\n    variant: \"secondary\",\n    onClick: handleCloseCameraModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1431,\n      columnNumber: 15\n    }\n  }, \"Cancel\")) : __jsx(React.Fragment, null, __jsx(Button, {\n    variant: \"secondary\",\n    onClick: () => setCapturedPhoto(null),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1437,\n      columnNumber: 15\n    }\n  }, \"Retake\"), __jsx(Button, {\n    variant: \"primary\",\n    onClick: savePhoto,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1443,\n      columnNumber: 15\n    }\n  }, \"OK\")))), __jsx(Modal, {\n    show: showDescModal,\n    onHide: handleCloseDescModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1451,\n      columnNumber: 7\n    }\n  }, __jsx(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1452,\n      columnNumber: 9\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1453,\n      columnNumber: 11\n    }\n  }, \"Descriptions\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1455,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    variant: \"primary\",\n    className: \"mb-3\",\n    onClick: addDescription,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1456,\n      columnNumber: 11\n    }\n  }, \"Add Description\"), descriptions.map((desc, index) => __jsx(Row, {\n    key: index,\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1460,\n      columnNumber: 13\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    className: \"w-100\",\n    onClick: () => selectDescription(index),\n    style: {\n      cursor: \"pointer\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1461,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"d-flex justify-content-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1467,\n      columnNumber: 17\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1468,\n      columnNumber: 19\n    }\n  }, desc.description || \"Description\"), __jsx(\"span\", {\n    style: {\n      borderLeft: \"1px solid #ccc\",\n      paddingLeft: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1469,\n      columnNumber: 19\n    }\n  }, desc.date || \"Date\"))))), __jsx(Button, {\n    variant: \"primary\",\n    onClick: handleCloseDescModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1481,\n      columnNumber: 11\n    }\n  }, \"OK\"))), __jsx(InfoModal, {\n    show: showInfoModal,\n    handleClose: handleCloseInfoModal,\n    itemName: items.name,\n    dimensions: `${items.length},${items.width},${items.height}`,\n    price: items.price,\n    freqI: freqItem,\n    freqM: machineFrequency,\n    usage: usagePastYear,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1488,\n      columnNumber: 7\n    }\n  }), loading && __jsx(\"div\", {\n    style: {\n      position: \"fixed\",\n      top: 0,\n      left: 0,\n      width: \"100%\",\n      height: \"100%\",\n      backgroundColor: \"rgba(255, 255, 255, 0.7)\",\n      backdropFilter: \"blur(5px)\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      zIndex: 9999 // Make sure it's above everything else\n\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1499,\n      columnNumber: 9\n    }\n  }, __jsx(Spinner, {\n    animation: \"border\",\n    variant: \"primary\",\n    role: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1514,\n      columnNumber: 11\n    }\n  }, __jsx(\"span\", {\n    className: \"visually-hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1515,\n      columnNumber: 13\n    }\n  }, \"Loading...\"))), __jsx(Container, {\n    fluid: true,\n    className: styles.page,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1520,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: styles.shell,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1521,\n      columnNumber: 9\n    }\n  }, __jsx(Card, {\n    className: styles.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1522,\n      columnNumber: 11\n    }\n  }, __jsx(Card.Body, {\n    className: styles.cardBody,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1523,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: styles.header,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1524,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: styles.kicker,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1525,\n      columnNumber: 17\n    }\n  }, \"New Item\"), __jsx(\"h2\", {\n    className: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1526,\n      columnNumber: 17\n    }\n  }, \"Add New Item\"), __jsx(\"div\", {\n    className: styles.subtitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1527,\n      columnNumber: 17\n    }\n  }, \"Capture details, photos, and routing before saving.\")), __jsx(Form, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1531,\n      columnNumber: 15\n    }\n  }, __jsx(Row, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1533,\n      columnNumber: 17\n    }\n  }, __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1534,\n      columnNumber: 19\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1535,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1536,\n      columnNumber: 23\n    }\n  }, \"Name\"), __jsx(Form.Control, {\n    type: \"text\",\n    value: items.name,\n    onChange: handleChange(\"name\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1537,\n      columnNumber: 23\n    }\n  }))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1544,\n      columnNumber: 19\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"pn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1545,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1546,\n      columnNumber: 23\n    }\n  }, \"Product Number\"), __jsx(\"div\", {\n    style: {\n      position: \"relative\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1547,\n      columnNumber: 23\n    }\n  }, __jsx(InputGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1548,\n      columnNumber: 25\n    }\n  }, __jsx(Form.Control, {\n    type: \"text\",\n    value: items.pn[currentPnIndex] || \"\",\n    onChange: e => handlePnChange(currentPnIndex, e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1550,\n      columnNumber: 27\n    }\n  }), __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: () => setShowDropdown(!showDropdown),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1558,\n      columnNumber: 27\n    }\n  }, \"\\u25BE\"), __jsx(InputGroup.Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1565,\n      columnNumber: 27\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: () => setAddingNewPn(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1566,\n      columnNumber: 29\n    }\n  }, \"+\"))), showDropdown && __jsx(\"div\", {\n    style: {\n      position: \"absolute\",\n      top: \"100%\",\n      left: 0,\n      right: 0,\n      backgroundColor: \"white\",\n      border: \"1px solid #ccc\",\n      zIndex: 1000,\n      maxHeight: \"150px\",\n      overflowY: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1576,\n      columnNumber: 27\n    }\n  }, items.pn.map((pnOption, idx) => __jsx(\"div\", {\n    key: idx,\n    style: {\n      padding: \"8px\",\n      cursor: \"pointer\"\n    },\n    onClick: () => {\n      setCurrentPnIndex(idx);\n      setShowDropdown(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1590,\n      columnNumber: 31\n    }\n  }, pnOption)))), addingNewPn && __jsx(Form.Control, {\n    type: \"text\",\n    placeholder: \"Enter new PN\",\n    value: newPn,\n    onChange: e => setNewPn(e.target.value),\n    onBlur: handleAddNewPn,\n    onKeyDown: e => {\n      if (e.key === \"Enter\") {\n        handleAddNewPn();\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1606,\n      columnNumber: 25\n    }\n  })))), __jsx(Row, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1623,\n      columnNumber: 17\n    }\n  }, __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1624,\n      columnNumber: 19\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"sn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1625,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1626,\n      columnNumber: 23\n    }\n  }, \"Serial Number\"), __jsx(\"div\", {\n    style: {\n      position: \"relative\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1627,\n      columnNumber: 23\n    }\n  }, __jsx(InputGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1628,\n      columnNumber: 25\n    }\n  }, __jsx(Form.Control, {\n    type: \"text\",\n    value: items.sn[currentSnIndex] || \"\",\n    onChange: e => handleSnChange(currentSnIndex, e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1630,\n      columnNumber: 27\n    }\n  }), __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: () => setShowSnDropdown(!showSnDropdown),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1638,\n      columnNumber: 27\n    }\n  }, \"\\u25BE\"), __jsx(InputGroup.Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1645,\n      columnNumber: 27\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: () => setAddingNewSn(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1646,\n      columnNumber: 29\n    }\n  }, \"+\"))), showSnDropdown && __jsx(\"div\", {\n    style: {\n      position: \"absolute\",\n      top: \"100%\",\n      left: 0,\n      right: 0,\n      backgroundColor: \"white\",\n      border: \"1px solid #ccc\",\n      zIndex: 1000,\n      maxHeight: \"150px\",\n      overflowY: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1656,\n      columnNumber: 27\n    }\n  }, items.sn.map((snOption, idx) => __jsx(\"div\", {\n    key: idx,\n    style: {\n      padding: \"8px\",\n      cursor: \"pointer\"\n    },\n    onClick: () => {\n      setCurrentSnIndex(idx);\n      setShowSnDropdown(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1670,\n      columnNumber: 31\n    }\n  }, snOption)))), addingNewSn && __jsx(Form.Control, {\n    type: \"text\",\n    placeholder: \"Enter new SN\",\n    value: newSn,\n    onChange: e => setNewSn(e.target.value),\n    onBlur: handleAddNewSn,\n    onKeyDown: e => {\n      if (e.key === \"Enter\") {\n        handleAddNewSn();\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1686,\n      columnNumber: 25\n    }\n  }))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1701,\n      columnNumber: 19\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1702,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1703,\n      columnNumber: 23\n    }\n  }, \"Status\"), __jsx(Form.Select, {\n    value: items.status || \"\",\n    onChange: handleChange(\"status\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1704,\n      columnNumber: 23\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1708,\n      columnNumber: 25\n    }\n  }, \"Select status\"), __jsx(\"option\", {\n    value: \"Good\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1709,\n      columnNumber: 25\n    }\n  }, \"Good\"), __jsx(\"option\", {\n    value: \"Bad\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1710,\n      columnNumber: 25\n    }\n  }, \"Bad\"), __jsx(\"option\", {\n    value: \"Unknown\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1711,\n      columnNumber: 25\n    }\n  }, \"Unknown\"))))), __jsx(Row, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1717,\n      columnNumber: 17\n    }\n  }, __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1718,\n      columnNumber: 19\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"localSN\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1719,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1720,\n      columnNumber: 23\n    }\n  }, \"Local SN\"), __jsx(Form.Control, {\n    type: \"text\",\n    placeholder: \"Enter Local SN\",\n    value: items.localSN || \"\",\n    onChange: handleChange(\"localSN\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1721,\n      columnNumber: 23\n    }\n  }))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1729,\n      columnNumber: 19\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"arrivalDate\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1730,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1731,\n      columnNumber: 23\n    }\n  }, \"Arrival Date\"), __jsx(Form.Control, {\n    placeholder: \"Enter Arrival Date\",\n    type: \"date\",\n    value: items.arrival_date,\n    onChange: e => {\n      const value = e.target.value;\n      setItems(prev => _objectSpread(_objectSpread({}, prev), {}, {\n        arrival_date: value\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1732,\n      columnNumber: 23\n    }\n  }))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1746,\n      columnNumber: 19\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"trackingNumber\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1747,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1748,\n      columnNumber: 23\n    }\n  }, \"Tracking Number\"), __jsx(Form.Control, {\n    placeholder: \"Tracking Number\",\n    type: \"text\",\n    value: items.trackingNumber,\n    onChange: handleChange(\"trackingNumber\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1749,\n      columnNumber: 23\n    }\n  })))), __jsx(Row, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1759,\n      columnNumber: 17\n    }\n  }, __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1760,\n      columnNumber: 19\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"oem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1761,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1762,\n      columnNumber: 23\n    }\n  }, \"OEM\"), __jsx(Form.Control, {\n    type: \"text\",\n    placeholder: \"OEM\",\n    value: oem,\n    onChange: e => setOem(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1763,\n      columnNumber: 23\n    }\n  }))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1771,\n      columnNumber: 19\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"modality\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1772,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1773,\n      columnNumber: 23\n    }\n  }, \"Modality\"), __jsx(Form.Control, {\n    type: \"text\",\n    placeholder: \"Modality\",\n    value: modality,\n    onChange: e => setModality(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1774,\n      columnNumber: 23\n    }\n  }))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1782,\n      columnNumber: 19\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"model\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1783,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1784,\n      columnNumber: 23\n    }\n  }, \"Model\"), __jsx(Form.Control, {\n    type: \"text\",\n    placeholder: \"Model\",\n    value: model,\n    onChange: e => setModel(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1785,\n      columnNumber: 23\n    }\n  })))), __jsx(\"div\", {\n    style: {\n      marginBottom: \"1rem\",\n      marginTop: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1795,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"d-flex align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1796,\n      columnNumber: 19\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: handleShowWoModal,\n    className: \"me-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1797,\n      columnNumber: 21\n    }\n  }, \"Manage Work Orders\"), workOrders.length > 0 && __jsx(\"div\", {\n    className: \"d-flex flex-column align-items-start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1805,\n      columnNumber: 23\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1806,\n      columnNumber: 25\n    }\n  }, \"Work Order\"), __jsx(Form.Control, {\n    type: \"text\",\n    placeholder: \"Most Recent Work Order\",\n    value: (mostRecentWorkOrder === null || mostRecentWorkOrder === void 0 ? void 0 : mostRecentWorkOrder.workOrder) || \"\",\n    onChange: e => handleWorkOrderChange(workOrders.indexOf(mostRecentWorkOrder), \"workOrder\", e.target.value),\n    style: {\n      marginBottom: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1807,\n      columnNumber: 25\n    }\n  }), __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1820,\n      columnNumber: 25\n    }\n  }, \"Date\"), __jsx(Form.Control, {\n    type: \"date\",\n    placeholder: \"Work Order Date\",\n    value: (mostRecentWorkOrder === null || mostRecentWorkOrder === void 0 ? void 0 : mostRecentWorkOrder.date) || \"\",\n    onChange: e => handleWorkOrderChange(workOrders.indexOf(mostRecentWorkOrder), \"date\", e.target.value),\n    style: {\n      marginBottom: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1821,\n      columnNumber: 25\n    }\n  })))), __jsx(\"div\", {\n    style: {\n      marginBottom: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1839,\n      columnNumber: 17\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"desc\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1840,\n      columnNumber: 19\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: listDescriptions,\n    className: \"mb-2 me-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1841,\n      columnNumber: 21\n    }\n  }, \"List Descriptions\"), __jsx(Form.Control, {\n    as: \"textarea\",\n    rows: 3,\n    placeholder: \"Enter description\",\n    value: ((_descriptions$selecte4 = descriptions[selectedDesc]) === null || _descriptions$selecte4 === void 0 ? void 0 : _descriptions$selecte4.description) || \"\",\n    onChange: e => handleDescriptionChange(selectedDesc, \"description\", e.target.value),\n    style: {\n      marginBottom: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1848,\n      columnNumber: 21\n    }\n  }), __jsx(Form.Control, {\n    type: \"date\",\n    value: ((_descriptions$selecte5 = descriptions[selectedDesc]) === null || _descriptions$selecte5 === void 0 ? void 0 : _descriptions$selecte5.date) || \"\",\n    onChange: e => handleDescriptionChange(selectedDesc, \"date\", e.target.value),\n    style: {\n      marginTop: \"0.5rem\",\n      marginBottom: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1862,\n      columnNumber: 21\n    }\n  }))), __jsx(\"div\", {\n    style: {\n      marginBottom: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1877,\n      columnNumber: 17\n    }\n  }, __jsx(Row, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1878,\n      columnNumber: 19\n    }\n  }, __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1879,\n      columnNumber: 21\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: () => {\n      setMachinePick(true);\n      handleShowClientModal();\n    },\n    className: \"me-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1880,\n      columnNumber: 23\n    }\n  }, \"Select From\"), selectedClientFrom && __jsx(\"div\", {\n    style: {\n      border: \"1px solid #ccc\",\n      padding: \"0.75rem\",\n      borderRadius: \"4px\",\n      marginBottom: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1891,\n      columnNumber: 25\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1899,\n      columnNumber: 27\n    }\n  }, __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1900,\n      columnNumber: 29\n    }\n  }, \"Selected Client (From):\"), \" \", selectedClientFrom.name), __jsx(\"div\", {\n    style: {\n      marginTop: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1903,\n      columnNumber: 27\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: () => setShowMachineModal(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1904,\n      columnNumber: 29\n    }\n  }, \"Select Machine for \", selectedClientFrom.name), selectedMachine && __jsx(React.Fragment, null, __jsx(\"p\", {\n    style: {\n      marginTop: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1912,\n      columnNumber: 33\n    }\n  }, __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1913,\n      columnNumber: 35\n    }\n  }, \"Selected Machine (From):\"), \" \", selectedMachine.name), showLocalLocFrom && __jsx(React.Fragment, null, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: () => setShowNewLocalModalFrom(true),\n    className: \"w-100 mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1918,\n      columnNumber: 37\n    }\n  }, [newLocalFrom.region, ((_newLocalFrom$section = newLocalFrom.section) === null || _newLocalFrom$section === void 0 ? void 0 : _newLocalFrom$section.letter) + ((_newLocalFrom$section2 = newLocalFrom.section) === null || _newLocalFrom$section2 === void 0 ? void 0 : _newLocalFrom$section2.number), newLocalFrom.bin && `B${newLocalFrom.bin}`, newLocalFrom.pallet && `P${newLocalFrom.pallet}`].filter(Boolean).join(\"-\") || \"Set Local Location\"), __jsx(Modal, {\n    show: showNewLocalModalFrom,\n    onHide: () => setShowNewLocalModalFrom(false),\n    centered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1937,\n      columnNumber: 37\n    }\n  }, __jsx(Modal.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1944,\n      columnNumber: 39\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1945,\n      columnNumber: 41\n    }\n  }, \"Edit Local Loc (From)\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1949,\n      columnNumber: 39\n    }\n  }, __jsx(NewLocal, {\n    selectedClient: selectedClientFrom,\n    showLocalLoc: showNewLocalModalFrom,\n    value: newLocalFrom,\n    onChange: setNewLocalFrom,\n    onSave: p => {\n      setNewLocalFrom(p);\n      setShowNewLocalModalFrom(false);\n    },\n    onCancel: () => setShowNewLocalModalFrom(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1950,\n      columnNumber: 41\n    }\n  })))))))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1973,\n      columnNumber: 21\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: () => {\n      setMachinePick(false);\n      handleShowClientModal();\n    },\n    className: \"me-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1974,\n      columnNumber: 23\n    }\n  }, \"Select Current\"), selectedClientCurrent && __jsx(\"div\", {\n    style: {\n      border: \"1px solid #ccc\",\n      padding: \"0.75rem\",\n      borderRadius: \"4px\",\n      marginBottom: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1985,\n      columnNumber: 25\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1993,\n      columnNumber: 27\n    }\n  }, __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1994,\n      columnNumber: 29\n    }\n  }, \"Selected Client (Current):\"), \" \", selectedClientCurrent.name), __jsx(\"div\", {\n    style: {\n      marginTop: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1997,\n      columnNumber: 27\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: () => setShowMachineModal(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1998,\n      columnNumber: 29\n    }\n  }, \"Select Machine for \", selectedClientCurrent.name), selectedCurrentMachine && __jsx(React.Fragment, null, __jsx(\"p\", {\n    style: {\n      marginTop: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2006,\n      columnNumber: 33\n    }\n  }, __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2007,\n      columnNumber: 35\n    }\n  }, \"Selected Machine (Current):\"), \" \", selectedCurrentMachine.name), showLocalLocCurrent && __jsx(React.Fragment, null, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: () => setShowNewLocalModalCurrent(true),\n    className: \"w-100 mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2012,\n      columnNumber: 37\n    }\n  }, [newLocalCurrent.region, ((_newLocalCurrent$sect = newLocalCurrent.section) === null || _newLocalCurrent$sect === void 0 ? void 0 : _newLocalCurrent$sect.letter) + ((_newLocalCurrent$sect2 = newLocalCurrent.section) === null || _newLocalCurrent$sect2 === void 0 ? void 0 : _newLocalCurrent$sect2.number), newLocalCurrent.bin && `B${newLocalCurrent.bin}`, newLocalCurrent.pallet && `P${newLocalCurrent.pallet}`].filter(Boolean).join(\"-\") || \"Set Local Location\"), __jsx(Modal, {\n    show: showNewLocalModalCurrent,\n    onHide: () => setShowNewLocalModalCurrent(false),\n    centered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2031,\n      columnNumber: 37\n    }\n  }, __jsx(Modal.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2038,\n      columnNumber: 39\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2039,\n      columnNumber: 41\n    }\n  }, \"Edit Local Loc (Current)\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2043,\n      columnNumber: 39\n    }\n  }, __jsx(NewLocal, {\n    selectedClient: selectedClientCurrent,\n    showLocalLoc: showNewLocalModalCurrent,\n    value: newLocalCurrent,\n    onChange: setNewLocalCurrent,\n    onSave: p => {\n      setNewLocalCurrent(p);\n      setShowNewLocalModalCurrent(false);\n    },\n    onCancel: () => setShowNewLocalModalCurrent(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2044,\n      columnNumber: 41\n    }\n  })))))))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2069,\n      columnNumber: 21\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: handleShowParentModal,\n    className: \"me-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2070,\n      columnNumber: 23\n    }\n  }, \"Select Parent\"), selectedParent && __jsx(Form.Control, {\n    type: \"text\",\n    placeholder: \"Selected Parent\",\n    value: selectedParent.name,\n    readOnly: true,\n    style: {\n      cursor: \"default\",\n      marginTop: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2078,\n      columnNumber: 25\n    }\n  })))), __jsx(\"div\", {\n    style: {\n      marginBottom: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2090,\n      columnNumber: 17\n    }\n  }, __jsx(Row, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2091,\n      columnNumber: 19\n    }\n  }, __jsx(Col, {\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2092,\n      columnNumber: 21\n    }\n  }, __jsx(ButtonGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2093,\n      columnNumber: 23\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: handleShowCameraModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2094,\n      columnNumber: 25\n    }\n  }, \"Take Photo\"), __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: handleBrowsePhotos,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2100,\n      columnNumber: 25\n    }\n  }, \"Browse\"))), __jsx(Col, {\n    xs: 6,\n    className: \"d-flex align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2108,\n      columnNumber: 21\n    }\n  }, __jsx(Button, {\n    variant: \"success\",\n    onClick: handleSendToInflow,\n    disabled: !isReadyForActions,\n    style: {\n      marginLeft: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2109,\n      columnNumber: 23\n    }\n  }, \"Send to inFlow\"), __jsx(Button, {\n    variant: \"secondary\",\n    onClick: handleBluefolderButton,\n    disabled: !isReadyForActions,\n    style: {\n      marginLeft: \"0.5rem\",\n      marginRight: \".5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2117,\n      columnNumber: 23\n    }\n  }, \"BlueFolder\"), __jsx(Button, {\n    variant: addToWebsite ? \"primary\" : \"outline-primary\",\n    onClick: handleToggleAddToWebsite,\n    disabled: !isReadyForActions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2125,\n      columnNumber: 23\n    }\n  }, addToWebsite ? \"Added to Website\" : \"Add to Website\"), __jsx(Form.Check, {\n    type: \"checkbox\",\n    id: \"hide-checkbox\",\n    label: \"Hide\",\n    checked: !items.visible,\n    onChange: e => {\n      const isHidden = e.currentTarget.checked;\n      setItems(prev => _objectSpread(_objectSpread({}, prev), {}, {\n        visible: !isHidden\n      }));\n    },\n    className: \"ms-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2132,\n      columnNumber: 23\n    }\n  }))), __jsx(\"input\", {\n    type: \"file\",\n    accept: \"image/*\",\n    multiple: true,\n    ref: browseInputRef,\n    style: {\n      display: \"none\"\n    },\n    onChange: handleFilesSelected,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2148,\n      columnNumber: 19\n    }\n  })), __jsx(\"div\", {\n    className: \"mt-3 d-flex flex-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2158,\n      columnNumber: 17\n    }\n  }, photos.map((photo, index) => __jsx(\"div\", {\n    key: index,\n    className: \"d-flex flex-column align-items-center mb-2 me-2\",\n    style: {\n      width: \"100px\",\n      height: \"100px\",\n      position: \"relative\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2160,\n      columnNumber: 21\n    }\n  }, __jsx(\"img\", {\n    src: photo.url,\n    alt: `Photo ${index + 1}`,\n    style: {\n      width: \"100%\",\n      height: \"100%\",\n      objectFit: \"cover\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2169,\n      columnNumber: 23\n    }\n  }), photo.file && __jsx(Button, {\n    variant: \"danger\",\n    size: \"sm\",\n    style: {\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n      padding: \"0 5px\"\n    },\n    onClick: () => removePhoto(index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2179,\n      columnNumber: 25\n    }\n  }, \"X\")))), __jsx(\"div\", {\n    className: \"mt-3 d-flex flex-wrap align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2199,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    variant: \"primary\",\n    type: \"submit\",\n    style: {\n      marginRight: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2200,\n      columnNumber: 19\n    }\n  }, \"Save\"), __jsx(Button, {\n    variant: \"info\",\n    onClick: handleClone,\n    style: {\n      marginRight: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2207,\n      columnNumber: 19\n    }\n  }, \"Clone\"), __jsx(LoadingButton, {\n    type: \"secondary\",\n    name: \"Back\",\n    route: \"NewSearch/mainSearch\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2214,\n      columnNumber: 19\n    }\n  }), SHOW_SLACK_BUTTONS && __jsx(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      marginLeft: \".5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2220,\n      columnNumber: 21\n    }\n  }, __jsx(\"span\", {\n    style: {\n      fontSize: 12,\n      lineHeight: \"12px\",\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2227,\n      columnNumber: 23\n    }\n  }, \"Slack\"), __jsx(\"div\", {\n    style: {\n      display: \"flex\",\n      border: \"1px solid #ced4da\",\n      borderRadius: 6,\n      overflow: \"hidden\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2236,\n      columnNumber: 23\n    }\n  }, __jsx(Button, {\n    variant: \"outline-primary\",\n    onClick: () => handleAddToSlack(\"receiving\"),\n    disabled: !isReadyForActions,\n    style: {\n      border: \"none\",\n      borderRight: \"1px solid #ced4da\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2244,\n      columnNumber: 25\n    }\n  }, \"Receiving\"), __jsx(Button, {\n    variant: \"outline-primary\",\n    onClick: () => handleAddToSlack(\"shipping\"),\n    disabled: !isReadyForActions,\n    style: {\n      border: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2255,\n      columnNumber: 25\n    }\n  }, \"Shipping\"))), __jsx(Button, {\n    variant: \"info\",\n    onClick: handlePrint,\n    disabled: !isReadyForActions,\n    style: {\n      marginLeft: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2266,\n      columnNumber: 19\n    }\n  }, \"Print Label\")), __jsx(\"div\", {\n    style: {\n      textAlign: \"center\",\n      margin: \"1rem 0\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2275,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    variant: \"link\",\n    style: {\n      textDecoration: \"none\",\n      color: \"black\",\n      fontSize: \"24px\"\n    },\n    onClick: () => setShowExtra(!showExtra),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2276,\n      columnNumber: 19\n    }\n  }, \"\\u25BC\")), __jsx(Collapse, {\n    in: showExtra,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2288,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    id: \"extra-collapse\",\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2289,\n      columnNumber: 19\n    }\n  }, __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2290,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Group, {\n    as: Col,\n    controlId: \"dimensions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2291,\n      columnNumber: 23\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2292,\n      columnNumber: 25\n    }\n  }, \"Dimensions (L x W x H)\"), __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2293,\n      columnNumber: 25\n    }\n  }, __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2294,\n      columnNumber: 27\n    }\n  }, __jsx(Form.Control, {\n    placeholder: \"Length\",\n    type: \"text\",\n    value: items.length,\n    onChange: handleChange(\"length\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2295,\n      columnNumber: 29\n    }\n  })), \"x\", __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2303,\n      columnNumber: 27\n    }\n  }, __jsx(Form.Control, {\n    placeholder: \"Width\",\n    type: \"text\",\n    value: items.width,\n    onChange: handleChange(\"width\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2304,\n      columnNumber: 29\n    }\n  })), \"x\", __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2312,\n      columnNumber: 27\n    }\n  }, __jsx(Form.Control, {\n    placeholder: \"Height\",\n    type: \"text\",\n    value: items.height,\n    onChange: handleChange(\"height\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2313,\n      columnNumber: 29\n    }\n  })))), __jsx(Form.Group, {\n    as: Col,\n    controlId: \"price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2322,\n      columnNumber: 23\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2323,\n      columnNumber: 25\n    }\n  }, \"Price\"), __jsx(Form.Control, {\n    placeholder: \"Price\",\n    type: \"text\",\n    value: items.price,\n    onChange: handleChange(\"price\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2324,\n      columnNumber: 25\n    }\n  }))), __jsx(Row, {\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2332,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Group, {\n    as: Col,\n    controlId: \"DOM\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2333,\n      columnNumber: 23\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2334,\n      columnNumber: 25\n    }\n  }, \"DOM (Date of Manufacture)\"), __jsx(Form.Control, {\n    placeholder: \"Enter DOM\",\n    type: \"date\",\n    value: DOM,\n    onChange: e => setDOM(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2335,\n      columnNumber: 25\n    }\n  }))), __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2343,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Group, {\n    as: Col,\n    controlId: \"poNumber\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2344,\n      columnNumber: 23\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2345,\n      columnNumber: 25\n    }\n  }, \"PO Number\"), __jsx(Form.Control, {\n    type: \"text\",\n    placeholder: \"PO Number\",\n    value: items.poNumber || \"\",\n    onChange: handleChange(\"poNumber\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2346,\n      columnNumber: 25\n    }\n  })))))))))));\n}","map":{"version":3,"sources":["C:/Users/mack2/Desktop/code/pages/NewSearch/AddItem/NewItem.js"],"names":["React","useEffect","useState","useRef","Form","Button","Card","Container","Row","Col","Modal","FormControl","Collapse","InputGroup","ButtonGroup","Spinner","Link","dynamic","useAuth","firebase","LoggedIn","useRouter","fetchClients","ClientTable","ClientInfoModal","ParentModal","MachineSelectionModal","InfoModal","InflowAPI","NewLocal","buildLocalLocObject","formatLoc","updateMachineFields","styles","BarcodeScannerComponent","ssr","simulateNetworkRequest","Promise","resolve","setTimeout","LoadingButton","type","name","route","isLoading","setLoading","cancelled","then","handleClick","NewItem","router","signOut","SHOW_SLACK_BUTTONS","process","env","NEXT_PUBLIC_SHOW_SLACK_BUTTONS","items","setItems","pn","sn","localSN","date","Date","toISOString","split","price","status","poNumber","trackingNumber","length","width","height","arrival_date","visible","editingPn","setEditingPn","editingSn","setEditingSn","DOM","setDOM","oem","setOem","modality","setModality","model","setModel","newLocalFrom","setNewLocalFrom","region","section","letter","number","bin","pallet","newLocalCurrent","setNewLocalCurrent","pnOptions","setPnOptions","snOptions","setSnOptions","descriptions","setDescriptions","description","workOrders","setWorkOrders","workOrder","clients","setClients","photos","setPhotos","show","setShow","showErr","setShowErr","Err","setErr","showDescModal","setShowDescModal","showWoModal","setShowWoModal","showClientModal","setShowClientModal","showMachineModal","setShowMachineModal","showParentModal","setShowParentModal","showCameraModal","setShowCameraModal","showSaveModal","setShowSaveModal","machineSelectionModal","setMachineSelectionModal","selectedDesc","setSelectedDesc","selectedClient","setSelectedClient","selectedMachine","setSelectedMachine","selectedCurrentMachine","setSelectedCurrentMachine","selectedParent","setSelectedParent","TheMachine","setTheMachine","machineOptions","setMachineOptions","search","setSearch","capturedPhoto","setCapturedPhoto","cameraFacing","setCameraFacing","addToWebsite","setAddToWebsite","machinePick","setMachinePick","freqItem","setFreqItem","usagePastYear","setUsagePastYear","machineFrequency","setMachineFrequency","showExtra","setShowExtra","addingNewPn","setAddingNewPn","newPn","setNewPn","addingNewSn","setAddingNewSn","newSn","setNewSn","browseInputRef","loading","savedDocId","setSavedDocId","isMountedRef","current","safeSetLoading","value","withTimeout","promise","ms","label","reject","timer","Error","Math","ceil","result","clearTimeout","catch","err","isReady","fetchClientsData","clientsData","console","log","error","fetchPnSn","db","firestore","snapshot","collection","get","pnSet","Set","snSet","forEach","doc","data","add","machineFieldsInitialized","setMachineFieldsInitialized","updatedFields","signal","setSignal","query","handlePnSelect","e","selected","target","prev","updatedPn","Array","isArray","handlePnChange","index","addPn","trim","handleSnSelect","updatedSn","handleSnChange","addSn","handleBrowsePhotos","click","handleFilesSelected","files","newPhotos","i","push","file","url","URL","createObjectURL","prevPhotos","handleCapture","capturePhoto","video","document","querySelector","canvas","createElement","videoWidth","videoHeight","context","getContext","drawImage","toBlob","blob","savePhoto","removePhoto","filter","_","handleClose","handleShow","handleCloseErr","handleShowErr","handleCloseSaveModal","handleShowSaveModal","handleCloseDescModal","handleShowDescModal","handleCloseWoModal","handleShowWoModal","handleCloseClientModal","handleShowClientModal","handleCloseMachineModal","handleShowMachineModal","handleCloseParentModal","handleShowParentModal","addDescription","removeDescription","handleDescriptionChange","field","newDescriptions","map","desc","addWorkOrder","removeWorkOrder","handleWorkOrderChange","newWorkOrders","wo","listDescriptions","selectDescription","handleClientInfo","clientId","setShowLocalLocFrom","setShowLocalLocCurrent","clientDoc","exists","clientData","setSelectedClientFrom","id","setSelectedClientCurrent","machinePromises","machines","machineRef","machineDocs","all","machineDoc","fetchMachine","machineId","machineData","OEM","Modality","Model","machinesSnapshot","where","size","calculateItemFrequencyAndUsage","currentDate","oneYearAgo","setFullYear","getFullYear","itemsSnapshot","itemData","workOrderDate","uploadPhotos","docID","storageRef","storage","ref","photoRef","child","metadata","contentType","put","getDownloadURL","handleSubmit","event","preventDefault","isReadyForActions","docId","toSend","message","redirect","existingId","currentUser","auth","userEmail","email","formattedItems","fromDetails","currentDetails","Object","keys","localLocFrom","localLocCurrent","addedToWebsite","user","lastEdited","undefined","MachineFrom","MachineCurrent","selectedClientFrom","ClientFrom","selectedClientCurrent","ClientCurrent","Parent","dateCreated","newDocId","set","update","associatedParts","FieldValue","arrayUnion","currentMachineRef","currentMachineDoc","delete","cleanFormattedItems","shallowClean","generateCustomID","ensureSaved","showInfoModal","setShowInfoModal","itemName","setItemName","handleShowInfoModal","handleCloseInfoModal","handleCloseCameraModal","handleChange","prevItems","mostRecentWorkOrder","reduce","latest","latestDate","handleShowCameraModal","randomNum","floor","random","handlePrint","payload","local_sn","response","fetch","method","headers","body","JSON","stringify","json","handleSendToInflow","alert","imageUrls","p","Boolean","sku","toString","arrivalISO","slice","pnStr","join","snStr","mostRecentWO","cur","customFields","custom1","custom2","custom3","custom4","custom5","custom6","custom7","custom8","custom9","custom10","created","upsertProduct","productId","handleBluefolderButton","currentWorkOrder","localsn","handleAddToSlack","which","safeName","title","pn0","sn0","pn_sn","sort","a","b","tracking","photoUrls","resp","listKey","work_order","debug","steps","table","ok","handleToggleAddToWebsite","next","handleAddNewPn","handleAddNewSn","showLocalLocFrom","showLocalLocCurrent","showNewLocalModalFrom","setShowNewLocalModalFrom","showNewLocalModalCurrent","setShowNewLocalModalCurrent","handleClone","condition","toLowerCase","handleSetSelectedMachine","machine","isSocalInterior","currentPnIndex","setCurrentPnIndex","showDropdown","setShowDropdown","currentSnIndex","setCurrentSnIndex","showSnDropdown","setShowSnDropdown","handleAddNewClient","showMachineSelect","setShowMachineSelect","cursor","borderLeft","paddingLeft","marginBottom","client","includes","borderRadius","position","left","transform","bottom","top","backgroundColor","backdropFilter","display","alignItems","justifyContent","zIndex","page","shell","card","cardBody","header","kicker","subtitle","right","border","maxHeight","overflowY","pnOption","idx","padding","key","snOption","marginTop","indexOf","marginLeft","marginRight","isHidden","currentTarget","checked","photo","objectFit","flexDirection","fontSize","lineHeight","textAlign","overflow","borderRight","margin","textDecoration","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport {\n  Form,\n  Button,\n  Card,\n  Container,\n  Row,\n  Col,\n  Modal,\n  FormControl,\n  Collapse,\n  InputGroup,\n  ButtonGroup,\n  Spinner,\n} from \"react-bootstrap\";\nimport Link from \"next/link\";\nimport dynamic from \"next/dynamic\";\nimport { useAuth } from \"../../../context/AuthUserContext\";\nimport firebase from \"../../../context/Firebase\";\nimport LoggedIn from \"../../LoggedIn\";\nimport { useRouter } from \"next/router\";\nimport { fetchClients } from \"../../../utils/fetchAssociations\";\nimport ClientTable from \"../../../utils/ClientTable\";\nimport ClientInfoModal from \"../ClientInfoModal\";\nimport ParentModal from \"./parentModal\";\nimport MachineSelectionModal from \"../item/[id]/MachineSelectionModal\";\nimport InfoModal from \"../InfoModal\";\nimport InflowAPI from \"../../../utils/inflowAPI\";\nimport NewLocal from \"../item/[id]/NewLocal\";\nimport {\n  buildLocalLocObject,\n  formatLoc,\n  updateMachineFields,\n} from \"../../../utils/itemFormShared\";\nimport styles from \"./NewItem.module.css\";\n\n// Load BarcodeScannerComponent only on the client-side.\nconst BarcodeScannerComponent = dynamic(\n  () => import(\"react-qr-barcode-scanner\"),\n  { ssr: false }\n);\n\n// Simulate network delay.\nfunction simulateNetworkRequest() {\n  return new Promise((resolve) => setTimeout(resolve, 2000));\n}\n\n// Custom LoadingButton component.\nfunction LoadingButton({ type, name, route }) {\n  const [isLoading, setLoading] = useState(false);\n  useEffect(() => {\n    if (isLoading) {\n      let cancelled = false;\n      simulateNetworkRequest().then(() => {\n        if (!cancelled) setLoading(false);\n      });\n      return () => {\n        cancelled = true;\n      };\n    }\n  }, [isLoading]);\n  const handleClick = () => setLoading(true);\n  return (\n    <Link href={`/${route}`}>\n      <a\n        className={`btn btn-${type}`}\n        disabled={isLoading}\n        onClick={!isLoading ? handleClick : null}\n      >\n        {isLoading ? \"Loading…\" : name}\n      </a>\n    </Link>\n  );\n}\n\nexport default function NewItem() {\n  const router = useRouter();\n  const { signOut } = useAuth();\n  const SHOW_SLACK_BUTTONS =\n    process.env.NEXT_PUBLIC_SHOW_SLACK_BUTTONS === \"true\";\n  // Initialize item state – for a new item, these start empty.\n  // We store PN and SN as arrays.\n  const [items, setItems] = useState({\n    name: \"\",\n    pn: [\"\"],\n    sn: [\"\"], // This will be overridden on submit.\n    localSN: \"\", // NEW FIELD: holds user input for a local serial number.\n    date: new Date().toISOString().split(\"T\")[0], // auto-fill current date\n    price: \"\",\n    status: \"\",\n    poNumber: \"\",\n    trackingNumber: \"\",\n    length: \"\",\n    width: \"\",\n    height: \"\",\n    arrival_date: \"\", // NEW FIELD: Arrival Date\n    visible: true,\n  });\n\n  const [editingPn, setEditingPn] = useState(true);\n  // const [newPn, setNewPn] = useState(\"\"); // for the input value when editing\n\n  const [editingSn, setEditingSn] = useState(true);\n  // const [newSn, setNewSn] = useState(\"\");\n\n  // DOM is the Date of Manufacture input (user provided).\n  const [DOM, setDOM] = useState(\"\");\n  // OEM, Modality, Model fields.\n  const [oem, setOem] = useState(\"\");\n  const [modality, setModality] = useState(\"\");\n  const [model, setModel] = useState(\"\");\n\n  // Local location states.\n  const [newLocalFrom, setNewLocalFrom] = useState({\n    region: \"\",\n    section: { letter: \"\", number: \"\" },\n    bin: \"\",\n    pallet: \"\",\n  });\n  const [newLocalCurrent, setNewLocalCurrent] = useState({\n    region: \"\",\n    section: { letter: \"\", number: \"\" },\n    bin: \"\",\n    pallet: \"\",\n  });\n\n  // Other states.\n  const [pnOptions, setPnOptions] = useState([]);\n  const [snOptions, setSnOptions] = useState([]);\n  const [descriptions, setDescriptions] = useState([\n    { description: \"\", date: \"\" },\n  ]);\n  const [workOrders, setWorkOrders] = useState([{ workOrder: \"\", date: \"\" }]);\n  const [clients, setClients] = useState([]);\n  const [photos, setPhotos] = useState([]);\n  const [show, setShow] = useState(false); // error modal for missing required fields\n  const [showErr, setShowErr] = useState(false);\n  const [Err, setErr] = useState(\n    \"Missing required field: Name and Description\"\n  );\n  const [showDescModal, setShowDescModal] = useState(false);\n  const [showWoModal, setShowWoModal] = useState(false);\n  const [showClientModal, setShowClientModal] = useState(false);\n  const [showMachineModal, setShowMachineModal] = useState(false);\n  const [showParentModal, setShowParentModal] = useState(false);\n  const [showCameraModal, setShowCameraModal] = useState(false);\n  const [showSaveModal, setShowSaveModal] = useState(false);\n  const [machineSelectionModal, setMachineSelectionModal] = useState(false);\n  const [selectedDesc, setSelectedDesc] = useState(0);\n  const [selectedClient, setSelectedClient] = useState(null);\n  const [selectedMachine, setSelectedMachine] = useState(null);\n  const [selectedCurrentMachine, setSelectedCurrentMachine] = useState(null);\n  const [selectedParent, setSelectedParent] = useState(null);\n  const [TheMachine, setTheMachine] = useState(null);\n  const [machineOptions, setMachineOptions] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  const [capturedPhoto, setCapturedPhoto] = useState(null);\n  const [cameraFacing, setCameraFacing] = useState(\"environment\");\n  const [addToWebsite, setAddToWebsite] = useState(false);\n  const [machinePick, setMachinePick] = useState(false);\n  const [freqItem, setFreqItem] = useState(0);\n  const [usagePastYear, setUsagePastYear] = useState(0);\n  const [machineFrequency, setMachineFrequency] = useState(0);\n  // For extra (dimensions/price/DOM) section collapse.\n  const [showExtra, setShowExtra] = useState(false);\n\n  // For PN/SN \"add new\" functionality.\n  const [addingNewPn, setAddingNewPn] = useState(false);\n  const [newPn, setNewPn] = useState(\"\");\n  const [addingNewSn, setAddingNewSn] = useState(false);\n  const [newSn, setNewSn] = useState(\"\");\n\n  // For browsing photos.\n  const browseInputRef = useRef(null);\n\n  // Inside your NewItem component:\n  const [loading, setLoading] = useState(false);\n  const [savedDocId, setSavedDocId] = useState(null);\n  const isMountedRef = useRef(true);\n\n  useEffect(() => {\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, []);\n\n  const safeSetLoading = (value) => {\n    if (isMountedRef.current) setLoading(value);\n  };\n\n  const withTimeout = (promise, ms, label = \"Operation\") =>\n    new Promise((resolve, reject) => {\n      const timer = setTimeout(() => {\n        reject(new Error(`${label} timed out after ${Math.ceil(ms / 1000)}s`));\n      }, ms);\n      promise\n        .then((result) => {\n          clearTimeout(timer);\n          resolve(result);\n        })\n        .catch((err) => {\n          clearTimeout(timer);\n          reject(err);\n        });\n    });\n\n  if (!router.isReady) {\n    return null; // or a loading indicator\n  }\n\n  // -------------------- Since this is \"add\" mode, we do not fetch an existing document.\n  // However, we still fetch global PN and SN options and clients for selection.\n  useEffect(() => {\n    async function fetchClientsData() {\n      try {\n        const clientsData = await fetchClients();\n        console.log(\"Clients:\", clientsData);\n        setClients(clientsData);\n      } catch (error) {\n        console.error(\"Error fetching clients: \", error);\n      }\n    }\n    fetchClientsData();\n  }, []);\n\n  useEffect(() => {\n    async function fetchPnSn() {\n      const db = firebase.firestore();\n      const snapshot = await db.collection(\"Test\").get();\n      let pnSet = new Set();\n      let snSet = new Set();\n      snapshot.forEach((doc) => {\n        const data = doc.data();\n        if (data.pn) pnSet.add(data.pn);\n        if (data.sn) snSet.add(data.sn);\n      });\n      setPnOptions([...pnSet]);\n      setSnOptions([...snSet]);\n    }\n    fetchPnSn();\n  }, []);\n\n  const [machineFieldsInitialized, setMachineFieldsInitialized] =\n    useState(false);\n\n  useEffect(() => {\n    if (\n      !machineFieldsInitialized &&\n      (TheMachine || selectedCurrentMachine || selectedMachine)\n    ) {\n      const updatedFields = updateMachineFields(\n        TheMachine,\n        selectedCurrentMachine,\n        selectedMachine\n      );\n\n      // Only set fields if they are empty or \"N/A\"\n      if (!oem || oem === \"N/A\") setOem(updatedFields.oem);\n      if (!modality || modality === \"N/A\") setModality(updatedFields.modality);\n      if (!model || model === \"N/A\") setModel(updatedFields.model);\n\n      setMachineFieldsInitialized(true);\n    }\n  }, [\n    TheMachine,\n    selectedCurrentMachine,\n    selectedMachine,\n    machineFieldsInitialized,\n  ]);\n\n  const [signal, setSignal] = useState(null);\n\n  useEffect(() => {\n    if (router.isReady) {\n      setSignal(router.query.signal || null);\n    }\n  }, [router.isReady, router.query.signal]);\n\n  // -------------------- Handlers for PN and SN dropdowns\n\n  // PN: when a user selects an existing PN value.\n  const handlePnSelect = (e) => {\n    const selected = e.target.value;\n    setItems((prev) => {\n      let updatedPn = Array.isArray(prev.pn) ? [...prev.pn] : [];\n      updatedPn[0] = selected;\n      return { ...prev, pn: updatedPn };\n    });\n  };\n\n  const handlePnChange = (index, value) => {\n    setItems((prev) => {\n      const newPn = [...prev.pn];\n      newPn[index] = value;\n      return { ...prev, pn: newPn };\n    });\n  };\n\n  const addPn = () => {\n    if (newPn.trim() !== \"\") {\n      setItems((prev) => ({\n        ...prev,\n        pn: [...prev.pn, newPn.trim()],\n      }));\n    }\n    setNewPn(\"\");\n    setAddingNewPn(false);\n  };\n\n  // SN: when a user selects an existing SN value.\n  const handleSnSelect = (e) => {\n    const selected = e.target.value;\n    setItems((prev) => {\n      let updatedSn = Array.isArray(prev.sn) ? [...prev.sn] : [];\n      updatedSn[0] = selected;\n      return { ...prev, sn: updatedSn };\n    });\n  };\n\n  const handleSnChange = (index, value) => {\n    setItems((prev) => {\n      const newSn = [...prev.sn];\n      newSn[index] = value;\n      return { ...prev, sn: newSn };\n    });\n  };\n\n  const addSn = () => {\n    if (newSn.trim() !== \"\") {\n      setItems((prev) => ({\n        ...prev,\n        sn: [...prev.sn, newSn.trim()],\n      }));\n    }\n    setNewSn(\"\");\n    setAddingNewSn(false);\n  };\n\n  // -------------------- Photo Browse Handlers\n  const handleBrowsePhotos = () => {\n    if (browseInputRef.current) {\n      browseInputRef.current.click();\n    }\n  };\n\n  const handleFilesSelected = (e) => {\n    const files = e.target.files;\n    if (files.length) {\n      const newPhotos = [];\n      for (let i = 0; i < files.length; i++) {\n        newPhotos.push({\n          file: files[i],\n          url: URL.createObjectURL(files[i]),\n        });\n      }\n      setPhotos((prevPhotos) => [...prevPhotos, ...newPhotos]);\n    }\n    e.target.value = \"\";\n  };\n\n  // -------------------- Photo Capture Handlers remain as in your index.js\n  const handleCapture = (err, result) => {\n    if (result) {\n      setCapturedPhoto(result);\n    }\n  };\n\n  const capturePhoto = () => {\n    const video = document.querySelector(\"video\");\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    const context = canvas.getContext(\"2d\");\n    context.drawImage(video, 0, 0, canvas.width, canvas.height);\n    canvas.toBlob((blob) => {\n      setCapturedPhoto(blob);\n    }, \"image/png\");\n  };\n\n  const savePhoto = () => {\n    setPhotos((prevPhotos) => [\n      ...prevPhotos,\n      { file: capturedPhoto, url: URL.createObjectURL(capturedPhoto) },\n    ]);\n    setCapturedPhoto(null);\n    setShowCameraModal(false);\n  };\n\n  const removePhoto = (index) => {\n    setPhotos(photos.filter((_, i) => i !== index));\n  };\n\n  // -------------------- Modal Handlers\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n  const handleCloseErr = () => setShowErr(false);\n  const handleShowErr = () => setShowErr(true);\n  const handleCloseSaveModal = () => setShowSaveModal(false);\n  const handleShowSaveModal = () => setShowSaveModal(true);\n  const handleCloseDescModal = () => setShowDescModal(false);\n  const handleShowDescModal = () => setShowDescModal(true);\n  const handleCloseWoModal = () => setShowWoModal(false);\n  const handleShowWoModal = () => setShowWoModal(true);\n  const handleCloseClientModal = () => setShowClientModal(false);\n  const handleShowClientModal = () => setShowClientModal(true);\n  const handleCloseMachineModal = () => setShowMachineModal(false);\n  const handleShowMachineModal = () => {\n    setShowMachineModal(true);\n    setShowClientModal(false);\n  };\n  const handleCloseParentModal = () => setShowParentModal(false);\n  const handleShowParentModal = () => setShowParentModal(true);\n\n  // -------------------- Work Orders / Descriptions Handlers (unchanged)\n  const addDescription = () => {\n    setDescriptions([...descriptions, { description: \"\", date: \"\" }]);\n  };\n\n  const removeDescription = (index) => {\n    setDescriptions(descriptions.filter((_, i) => i !== index));\n  };\n\n  const handleDescriptionChange = (index, field, value) => {\n    const newDescriptions = descriptions.map((desc, i) =>\n      i === index ? { ...desc, [field]: value } : desc\n    );\n    setDescriptions(newDescriptions);\n  };\n\n  const addWorkOrder = () => {\n    setWorkOrders([...workOrders, { workOrder: \"\", date: \"\" }]);\n  };\n\n  const removeWorkOrder = (index) => {\n    setWorkOrders(workOrders.filter((_, i) => i !== index));\n  };\n\n  const handleWorkOrderChange = (index, field, value) => {\n    const newWorkOrders = workOrders.map((wo, i) =>\n      i === index ? { ...wo, [field]: value } : wo\n    );\n    setWorkOrders(newWorkOrders);\n  };\n\n  const listDescriptions = () => {\n    setShowDescModal(true);\n  };\n\n  const selectDescription = (index) => {\n    setSelectedDesc(index);\n    setShowDescModal(false);\n  };\n\n  // -------------------- Machine Selection (unchanged)\n  const handleClientInfo = async (clientId) => {\n    // Clear any previously selected machine/local loc for the branch\n    if (machinePick) {\n      setSelectedMachine(null);\n      setShowLocalLocFrom(false);\n    } else {\n      setSelectedCurrentMachine(null);\n      setShowLocalLocCurrent(false);\n    }\n\n    const db = firebase.firestore();\n    const clientDoc = await db.collection(\"Client\").doc(clientId).get();\n    if (clientDoc.exists) {\n      const clientData = clientDoc.data();\n      if (machinePick) {\n        setSelectedClientFrom({ id: clientDoc.id, ...clientData });\n      } else {\n        setSelectedClientCurrent({ id: clientDoc.id, ...clientData });\n      }\n      if (clientData.name === \"SoCalWarehouse\") {\n        if (machinePick) setShowLocalLocFrom(true);\n        else setShowLocalLocCurrent(true);\n      }\n      // Fetch machines for this client:\n      const machinePromises = clientData.machines.map((machineRef) =>\n        machineRef.get()\n      );\n      const machineDocs = await Promise.all(machinePromises);\n      const machines = machineDocs.map((machineDoc) => ({\n        id: machineDoc.id,\n        ...machineDoc.data(),\n      }));\n      setMachineOptions(machines);\n      handleCloseClientModal();\n    }\n  };\n\n  const fetchMachine = async (machineId) => {\n    const db = firebase.firestore();\n    const doc = await db.collection(\"Machine\").doc(machineId).get();\n    if (doc.exists) {\n      const machineData = doc.data();\n      setTheMachine(machineData);\n\n      // Ensure OEM, Modality, and Model update properly only if necessary\n      if (!oem || oem === \"N/A\")\n        setOem(machineData.oem || machineData.OEM || \"\");\n      if (!modality || modality === \"N/A\")\n        setModality(machineData.modality || machineData.Modality || \"\");\n      if (!model || model === \"N/A\")\n        setModel(machineData.model || machineData.Model || \"\");\n\n      // Set machine frequency count\n      const machinesSnapshot = await db\n        .collection(\"Machine\")\n        .where(\"Model\", \"==\", machineData.Model || machineData.model)\n        .get();\n      setMachineFrequency(machinesSnapshot.size);\n    } else {\n      console.error(\"Machine not found\");\n    }\n  };\n\n  // -------------------- Frequency/Usage (unchanged)\n  const calculateItemFrequencyAndUsage = async (pn) => {\n    const db = firebase.firestore();\n    const currentDate = new Date();\n    const oneYearAgo = new Date();\n    oneYearAgo.setFullYear(currentDate.getFullYear() - 1);\n    const itemsSnapshot = await db\n      .collection(\"Test\")\n      .where(\"pn\", \"==\", pn)\n      .get();\n    setFreqItem(itemsSnapshot.size);\n    let usagePastYear = 0;\n    itemsSnapshot.forEach((doc) => {\n      const itemData = doc.data();\n      itemData.workOrders.forEach((workOrder) => {\n        const workOrderDate = new Date(workOrder.date);\n        if (workOrderDate >= oneYearAgo && workOrderDate <= currentDate) {\n          usagePastYear++;\n        }\n      });\n    });\n    setUsagePastYear(usagePastYear);\n  };\n\n  // -------------------- Photo Upload (unchanged)\n  const uploadPhotos = async (docID) => {\n    const storageRef = firebase.storage().ref();\n    for (let i = 0; i < photos.length; i++) {\n      if (photos[i].file) {\n        const photoRef = storageRef.child(\n          `Parts/${docID}/${docID}${i === 0 ? \".jpg\" : `.${i + 1}.jpg`}`\n        );\n        const metadata = { contentType: \"image/png\" };\n        await photoRef.put(photos[i].file, metadata);\n        const url = await photoRef.getDownloadURL();\n        photos[i].url = url;\n      }\n    }\n  };\n\n  // -------------------- Submission Handler\n  // For NewItem, only require Name and Description.\n  async function handleSubmit(event) {\n    event.preventDefault();\n    if (!isReadyForActions) {\n      handleShow();\n    } else {\n      safeSetLoading(true); // start loading before async work\n      try {\n        const docId = await withTimeout(toSend(), 20000, \"Save\");\n        if (!docId) {\n          setErr(\"Save failed. Please try again.\");\n          setShowErr(true);\n        }\n      } catch (error) {\n        console.error(error);\n        setErr(error?.message || \"Save failed.\");\n        setShowErr(true);\n      } finally {\n        safeSetLoading(false); // end loading after async work completes\n      }\n    }\n  }\n\n  async function toSend(redirect = true) {\n    const { id } = router.query;\n    const db = firebase.firestore();\n    const existingId = savedDocId || id || null;\n\n    // Get the current authenticated user\n    const currentUser = firebase.auth().currentUser;\n    const userEmail = currentUser ? currentUser.email : \"unknown\";\n\n    // Always use the current state values for OEM, modality, and model.\n    const machineData = {\n      ...(TheMachine || {}),\n      oem: oem,\n      modality: modality,\n      model: model,\n    };\n\n    const formattedItems = { ...items, descriptions, workOrders };\n    // Remove any unused fields.\n    formattedItems.status = items.status || \"\";\n    formattedItems.DOM = DOM; // Date of Manufacture\n    const fromDetails = buildLocalLocObject(newLocalFrom);\n    const currentDetails = buildLocalLocObject(newLocalCurrent);\n\n    if (Object.keys(fromDetails).length) {\n      formattedItems.newLocalFrom = fromDetails;\n      formattedItems.localLocFrom = formatLoc(newLocalFrom) || \"\";\n    } else {\n      formattedItems.localLocFrom = \"\";\n      formattedItems.newLocalFrom = {};\n    }\n\n    if (Object.keys(currentDetails).length) {\n      formattedItems.newLocalCurrent = currentDetails;\n      formattedItems.localLocCurrent = formatLoc(newLocalCurrent) || \"\";\n    } else {\n      formattedItems.localLocCurrent = \"\";\n      formattedItems.newLocalCurrent = {};\n    }\n    formattedItems.date = items.date || \"\";\n    formattedItems.arrival_date = items.arrival_date || \"\"; // NEW: Arrival Date\n    formattedItems.poNumber = items.poNumber || \"\";\n    formattedItems.trackingNumber = items.trackingNumber || \"\";\n    formattedItems.TheMachine = machineData || {};\n    formattedItems.addedToWebsite = addToWebsite;\n    formattedItems.visible = items.visible;\n\n    // Add the current user's email under the \"user\" field\n    formattedItems.user = userEmail;\n    formattedItems.lastEdited = userEmail;\n    // Clean pn and sn arrays to replace undefined values with an empty string.\n    formattedItems.pn = (items.pn || []).map((value) =>\n      value === undefined ? \"\" : value\n    );\n    formattedItems.sn = (items.sn || []).map((value) =>\n      value === undefined ? \"\" : value\n    );\n\n    // Set machine references for each branch.\n    if (selectedMachine && selectedMachine.id) {\n      formattedItems.MachineFrom = db\n        .collection(\"Machine\")\n        .doc(selectedMachine.id);\n    }\n    if (selectedCurrentMachine && selectedCurrentMachine.id) {\n      formattedItems.MachineCurrent = db\n        .collection(\"Machine\")\n        .doc(selectedCurrentMachine.id);\n    }\n\n    // ***** NEW: Set client references for each branch *****\n    if (selectedClientFrom && selectedClientFrom.id) {\n      formattedItems.ClientFrom = db\n        .collection(\"Client\")\n        .doc(selectedClientFrom.id);\n    }\n    if (selectedClientCurrent && selectedClientCurrent.id) {\n      formattedItems.ClientCurrent = db\n        .collection(\"Client\")\n        .doc(selectedClientCurrent.id);\n    }\n    // ******************************************************\n\n    if (selectedParent && selectedParent.id) {\n      formattedItems.Parent = db.collection(\"Test\").doc(selectedParent.id);\n    }\n\n    // Only add dateCreated if this is a new document\n    if (!existingId) {\n      formattedItems.dateCreated = new Date().toISOString().split(\"T\")[0]; // \"YYYY-MM-DD\"\n    }\n\n    // --- LOCAL SN LOGIC ---\n    let docId = existingId;\n    try {\n      if (docId) {\n        // Check if a localSN is provided and if it differs from the current docId.\n        const newDocId =\n          items.localSN && items.localSN.trim() !== \"\"\n            ? items.localSN.trim()\n            : docId;\n        if (docId !== newDocId) {\n          // Migrate: Create a new document with the newDocId.\n          await db.collection(\"Test\").doc(newDocId).set(formattedItems);\n\n          if (selectedMachine && selectedMachine.id) {\n            const machineRef = db.collection(\"Machine\").doc(selectedMachine.id);\n            const machineDoc = await machineRef.get();\n            if (machineDoc.exists) {\n              await machineRef.update({\n                associatedParts: firebase.firestore.FieldValue.arrayUnion(\n                  db.collection(\"Test\").doc(newDocId)\n                ),\n              });\n            }\n          }\n\n          if (selectedCurrentMachine && selectedCurrentMachine.id) {\n            const currentMachineRef = db\n              .collection(\"Machine\")\n              .doc(selectedCurrentMachine.id);\n            const currentMachineDoc = await currentMachineRef.get();\n            if (currentMachineDoc.exists) {\n              await currentMachineRef.update({\n                associatedParts: firebase.firestore.FieldValue.arrayUnion(\n                  db.collection(\"Test\").doc(newDocId)\n                ),\n              });\n            }\n          }\n          // Delete the old document.\n          await db.collection(\"Test\").doc(docId).delete();\n          // Set docId to the new document ID.\n          docId = newDocId;\n        } else {\n          // Deep-clean the formattedItems to remove any undefined nested values.\n          const cleanFormattedItems = shallowClean(formattedItems);\n          await db.collection(\"Test\").doc(docId).update(cleanFormattedItems);\n\n          if (selectedMachine && selectedMachine.id) {\n            const machineRef = db.collection(\"Machine\").doc(selectedMachine.id);\n            const machineDoc = await machineRef.get();\n            if (machineDoc.exists) {\n              await machineRef.update({\n                associatedParts: firebase.firestore.FieldValue.arrayUnion(\n                  db.collection(\"Test\").doc(docId)\n                ),\n              });\n            }\n          }\n\n          if (selectedCurrentMachine && selectedCurrentMachine.id) {\n            const currentMachineRef = db\n              .collection(\"Machine\")\n              .doc(selectedCurrentMachine.id);\n            const currentMachineDoc = await currentMachineRef.get();\n            if (currentMachineDoc.exists) {\n              await currentMachineRef.update({\n                associatedParts: firebase.firestore.FieldValue.arrayUnion(\n                  db.collection(\"Test\").doc(docId)\n                ),\n              });\n            }\n          }\n        }\n      } else {\n        // For a new item, if localSN is provided, use it; otherwise, generate a custom ID.\n        docId =\n          items.localSN && items.localSN.trim() !== \"\"\n            ? items.localSN.trim()\n            : generateCustomID();\n        await db.collection(\"Test\").doc(docId).set(formattedItems);\n\n        if (selectedMachine && selectedMachine.id) {\n          const machineRef = db.collection(\"Machine\").doc(selectedMachine.id);\n          const machineDoc = await machineRef.get();\n          if (machineDoc.exists) {\n            await machineRef.update({\n              associatedParts: firebase.firestore.FieldValue.arrayUnion(\n                db.collection(\"Test\").doc(docId)\n              ),\n            });\n          }\n        }\n\n        if (selectedCurrentMachine && selectedCurrentMachine.id) {\n          const currentMachineRef = db\n            .collection(\"Machine\")\n            .doc(selectedCurrentMachine.id);\n          const currentMachineDoc = await currentMachineRef.get();\n          if (currentMachineDoc.exists) {\n            await currentMachineRef.update({\n              associatedParts: firebase.firestore.FieldValue.arrayUnion(\n                db.collection(\"Test\").doc(docId)\n              ),\n            });\n          }\n        }\n      }\n      // Upload any new photos to Firebase Storage.\n      await uploadPhotos(docId);\n      console.log(\"Item saved and associatedParts updated!\");\n\n      setSavedDocId(docId);\n\n      // Redirect to the new URL using the new document id.\n      if (redirect) {\n        router.push(`/NewSearch/item/${docId}`);\n      }\n\n      // Optionally, show a save confirmation modal.\n      handleShowSaveModal();\n      return docId;\n    } catch (error) {\n      console.error(\"Error saving data:\", error);\n      return null;\n    }\n  }\n\n  const isReadyForActions =\n    (items.name || \"\").trim() !== \"\" &&\n    (descriptions[selectedDesc]?.description || \"\").trim() !== \"\";\n\n  const ensureSaved = async () => {\n    if (!isReadyForActions) {\n      handleShow();\n      return null;\n    }\n    if (savedDocId) return savedDocId;\n    const docId = await toSend(false);\n    if (!docId) {\n      setErr(\"Failed to save item before action.\");\n      setShowErr(true);\n    }\n    return docId;\n  };\n\n  // -------------------- Info Modal Handlers (unchanged)\n  const [showInfoModal, setShowInfoModal] = useState(false);\n  const [itemName, setItemName] = useState(\"\");\n  const handleShowInfoModal = async () => {\n    const db = firebase.firestore();\n    try {\n      const docId = savedDocId || router.query.id;\n      if (!docId) {\n        setErr(\"Save the item before viewing info.\");\n        setShowErr(true);\n        return;\n      }\n      const doc = await db.collection(\"Test\").doc(docId).get();\n      if (doc.exists) {\n        const data = doc.data();\n        setItemName(data.name || \"N/A\");\n        setShowInfoModal(true);\n      } else {\n        console.error(\"Item not found\");\n      }\n    } catch (error) {\n      console.error(\"Error fetching item info:\", error);\n    }\n  };\n  const handleCloseInfoModal = () => setShowInfoModal(false);\n\n  const handleCloseCameraModal = () => {\n    setShowCameraModal(false);\n    setCapturedPhoto(null);\n  };\n\n  const handleChange = (field) => (event) => {\n    const value = event.target ? event.target.value : event.value;\n    setItems((prevItems) => ({ ...prevItems, [field]: value }));\n  };\n\n  const mostRecentWorkOrder =\n    workOrders && workOrders.length > 0\n      ? workOrders.reduce((latest, current) => {\n          const latestDate = new Date(latest.date);\n          const currentDate = new Date(current.date);\n          return currentDate > latestDate ? current : latest;\n        }, workOrders[0])\n      : {};\n\n  const handleShowCameraModal = () => {\n    setShowCameraModal(true);\n  };\n\n  const generateCustomID = () => {\n    const randomNum = Math.floor(10000 + Math.random() * 90000);\n    return `AIS${randomNum}`;\n  };\n\n  const handlePrint = async () => {\n    const docId = await ensureSaved();\n    if (!docId) return;\n\n    const payload = {\n      name: items.name,\n      pn: items.pn,\n      sn: items.sn,\n      wo: workOrders && workOrders.length > 0 ? workOrders[0].workOrder : \"\",\n      status: items.status,\n      local_sn: docId,\n      descriptions: descriptions,\n      date: items.date || new Date().toISOString().split(\"T\")[0],\n      DOM: DOM,\n      oem: oem,\n      modality: modality,\n      model: model,\n      poNumber: items.poNumber,\n      arrival_date: items.arrival_date,\n      trackingNumber: items.trackingNumber,\n    };\n\n    console.log(\"Payload for printing:\", payload);\n    try {\n      const response = await fetch(\n        \"https://9d70-174-76-22-138.ngrok-free.app/print-label\",\n        {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(payload),\n        }\n      );\n      const result = await response.json();\n      console.log(\"Print result:\", result);\n    } catch (error) {\n      console.error(\"Error printing label:\", error);\n    }\n  };\n\n  const handleSendToInflow = async () => {\n    try {\n      const docId = await ensureSaved();\n      if (!docId) return;\n\n      const name = (items.name || \"\").trim();\n      if (!name) {\n        alert(\"Item needs a name before sending to inFlow.\");\n        return;\n      }\n\n      const description = (descriptions[selectedDesc]?.description || \"\").trim();\n      const imageUrls = photos.map((p) => p.url).filter(Boolean);\n      const sku = docId.toString();\n\n      const arrivalISO = items.arrival_date\n        ? new Date(items.arrival_date).toISOString().slice(0, 10)\n        : \"\";\n\n      const pnStr = Array.isArray(items.pn)\n        ? items.pn.filter(Boolean).join(\", \")\n        : items.pn || \"\";\n      const snStr = Array.isArray(items.sn)\n        ? items.sn.filter(Boolean).join(\", \")\n        : items.sn || \"\";\n\n      const mostRecentWO =\n        workOrders?.length\n          ? workOrders.reduce((latest, cur) =>\n              new Date(cur.date) > new Date(latest.date) ? cur : latest\n            )\n          : { workOrder: \"\", date: \"\" };\n\n      const customFields = {\n        custom1: (oem || \"\").trim(),\n        custom2: (modality || \"\").trim(),\n        custom3: (model || \"\").trim(),\n        custom4: (description || \"\").trim(),\n        custom5: (mostRecentWO.workOrder || \"\").trim(),\n        custom6: (selectedClientFrom?.name || \"\").trim(),\n        custom7: pnStr,\n        custom8: snStr,\n        custom9: arrivalISO,\n        custom10: (selectedClientCurrent?.name || \"\").trim(),\n      };\n\n      const created = await InflowAPI.upsertProduct({\n        name,\n        description,\n        sku,\n        imageUrls,\n        customFields,\n      });\n\n      alert(\n        `Sent to inFlow successfully. ID: ${\n          created?.productId || created?.id || \"(unknown)\"\n        }`\n      );\n    } catch (err) {\n      console.error(err);\n      alert(\"Error sending to inFlow: \" + err.message);\n    }\n  };\n\n  const handleBluefolderButton = async () => {\n    const docId = await ensureSaved();\n    if (!docId) return;\n\n    const currentWorkOrder =\n      workOrders && workOrders.length > 0 ? workOrders[0].workOrder : \"\";\n    if (!currentWorkOrder) {\n      alert(\"Please fill out the work order field before adding to BlueFolder.\");\n      return;\n    }\n\n    const payload = {\n      name: items.name,\n      pn: items.pn[0] || \"\",\n      sn: items.sn[0] || \"\",\n      status: items.status,\n      description: descriptions[selectedDesc]?.description || \"\",\n      workOrder: currentWorkOrder,\n      localsn: docId,\n    };\n\n    try {\n      const response = await fetch(\n        \"https://9d70-174-76-22-138.ngrok-free.app/bluefolder\",\n        {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(payload),\n        }\n      );\n      const result = await response.json();\n      alert(\"BlueFolder service item added successfully!\");\n      console.log(\"BlueFolder result:\", result);\n    } catch (error) {\n      console.error(\"BlueFolder error:\", error);\n      alert(\"Error adding data to BlueFolder.\");\n    }\n  };\n\n  const handleAddToSlack = async (which = \"shipping\") => {\n    try {\n      const docId = await ensureSaved();\n      if (!docId) return;\n\n      const safeName = (items?.name || docId || \"Untitled\").trim();\n      const title = `${safeName}${docId ? ` (${docId})` : \"\"}`;\n\n      const pn0 = Array.isArray(items?.pn) ? items.pn[0] : items?.pn;\n      const sn0 = Array.isArray(items?.sn) ? items.sn[0] : items?.sn;\n      const pn_sn = [pn0 && `PN: ${pn0}`, sn0 && `SN: ${sn0}`]\n        .filter(Boolean)\n        .join(\"  \");\n\n      const mostRecentWO =\n        workOrders && workOrders.length\n          ? [...workOrders].sort(\n              (a, b) => new Date(b?.date || 0) - new Date(a?.date || 0)\n            )[0]?.workOrder\n          : \"\";\n\n      const description =\n        selectedDesc != null && descriptions?.[selectedDesc]\n          ? descriptions[selectedDesc].description || \"\"\n          : items?.description || \"\";\n\n      const tracking = items?.trackingNumber ?? items?.tracking ?? \"\";\n      const local_sn = docId || items?.localSN || \"\";\n\n      const photoUrls = Array.isArray(photos)\n        ? photos.map((p) => p?.url).filter(Boolean)\n        : [];\n\n      const resp = await fetch(\"/api/slack/add-to-list\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          listKey: which,\n          title,\n          pn_sn,\n          work_order: mostRecentWO || \"\",\n          local_sn,\n          tracking,\n          description: (description || \"\").trim(),\n          photoUrls,\n        }),\n      });\n\n      const json = await resp.json();\n      console.log(\"[SLACK][handleAddToSlack] response:\", json);\n      if (json?.debug?.steps) console.table(json.debug.steps);\n      if (json?.debug?.photos) console.table(json.debug.photos);\n\n      if (!resp.ok || !json?.ok) {\n        setErr(`Slack add failed: ${json?.error || \"unknown error\"}`);\n        setShowErr(true);\n        return;\n      }\n\n      alert(\n        `Added to Slack ${\n          which === \"shipping\"\n            ? \"Shipping\"\n            : which === \"receiving\"\n            ? \"Receiving\"\n            : \"Tasks\"\n        } list.`\n      );\n    } catch (e) {\n      console.error(e);\n      setErr(\"Error adding to Slack\");\n      setShowErr(true);\n    }\n  };\n\n  const handleToggleAddToWebsite = async () => {\n    const docId = await ensureSaved();\n    if (!docId) return;\n\n    const next = !addToWebsite;\n    setAddToWebsite(next);\n    try {\n      await firebase\n        .firestore()\n        .collection(\"Test\")\n        .doc(docId)\n        .update({ addedToWebsite: next });\n    } catch (error) {\n      console.error(\"Error updating addedToWebsite:\", error);\n    }\n  };\n\n  const handleAddNewPn = () => {\n    if (newPn.trim() !== \"\") {\n      setItems((prev) => ({\n        ...prev,\n        pn: [...prev.pn, newPn.trim()],\n      }));\n    }\n    setNewPn(\"\");\n    setAddingNewPn(false);\n  };\n\n  const handleAddNewSn = () => {\n    if (newSn.trim() !== \"\") {\n      setItems((prev) => ({\n        ...prev,\n        sn: [...prev.sn, newSn.trim()],\n      }));\n    }\n    setNewSn(\"\");\n    setAddingNewSn(false);\n  };\n\n  const [showLocalLocFrom, setShowLocalLocFrom] = useState(false);\n  const [showLocalLocCurrent, setShowLocalLocCurrent] = useState(false);\n  const [showNewLocalModalFrom, setShowNewLocalModalFrom] = useState(false);\n  const [showNewLocalModalCurrent, setShowNewLocalModalCurrent] =\n    useState(false);\n\n  async function handleClone() {\n    event.preventDefault();\n    if (!isReadyForActions) {\n      handleShow(); // your existing error modal\n      return;\n    }\n    safeSetLoading(true);\n    try {\n      // save but don’t redirect\n      const docId = await withTimeout(toSend(false), 20000, \"Save\");\n      if (!docId) {\n        setErr(\"Save failed. Please try again.\");\n        setShowErr(true);\n      }\n    } catch (err) {\n      console.error(err);\n      setErr(err?.message || \"Save failed.\");\n      setShowErr(true);\n    } finally {\n      safeSetLoading(false);\n    }\n  }\n\n  const condition = (name) => {\n    return name && name.toLowerCase() === \"interior socal\";\n  };\n\n  const handleSetSelectedMachine = (machine) => {\n    const isSocalInterior = machine.name?.toLowerCase() === \"interior socal\";\n    if (machinePick) {\n      setSelectedMachine({ id: machine.id, name: machine.name });\n      setShowLocalLocFrom(\n        isSocalInterior ||\n          selectedClientFrom?.name?.toLowerCase() === \"socalwarehouse\"\n      );\n    } else {\n      setSelectedCurrentMachine({ id: machine.id, name: machine.name });\n      setShowLocalLocCurrent(\n        isSocalInterior ||\n          selectedClientCurrent?.name?.toLowerCase() === \"socalwarehouse\"\n      );\n    }\n    fetchMachine(machine.id);\n    setShowMachineModal(false);\n  };\n\n  const [currentPnIndex, setCurrentPnIndex] = useState(0);\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [currentSnIndex, setCurrentSnIndex] = useState(0);\n  const [showSnDropdown, setShowSnDropdown] = useState(false);\n\n  const handleAddNewClient = () => {\n    // Generate a random client number as part of the URL.\n    const randomNum = Math.floor(10000 + Math.random() * 90000);\n    // When pushing, include a query parameter (from=item) and the current item id if available.\n    router.push(`/NewSearch/client/AIS${randomNum}/addClient?from=addItem`);\n  };\n\n  const [showMachineSelect, setShowMachineSelect] = useState(false);\n\n  const [selectedClientFrom, setSelectedClientFrom] = useState(null);\n  const [selectedClientCurrent, setSelectedClientCurrent] = useState(null);\n\n  useEffect(() => {\n    setShowLocalLocFrom(\n      selectedClientFrom?.name?.toLowerCase() === \"socalwarehouse\"\n    );\n  }, [selectedClientFrom]);\n\n  useEffect(() => {\n    setShowLocalLocCurrent(\n      selectedClientCurrent?.name?.toLowerCase() === \"socalwarehouse\"\n    );\n  }, [selectedClientCurrent]);\n\n  return (\n    <LoggedIn>\n      {/* Error Modal */}\n      <MachineSelectionModal\n        show={machineSelectionModal}\n        handleClose={() => setMachineSelectionModal(false)}\n        setMachine={handleSetSelectedMachine}\n        machineOptions={machineOptions} // if your modal needs the list of machines\n      />\n      <Modal show={show} onHide={handleClose}>\n        <Modal.Header closeButton>\n          <Modal.Title>Error</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>Missing required field: Name and Description</Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"primary\" onClick={handleClose}>\n            Ok\n          </Button>\n        </Modal.Footer>\n      </Modal>\n      {/* Other Modals: showErr, showSaveModal, Descriptions, Work Orders, etc. */}\n      <Modal show={showErr} onHide={handleCloseErr}>\n        <Modal.Header closeButton>\n          <Modal.Title>Error</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>{Err}</Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"primary\" onClick={handleCloseErr}>\n            Ok\n          </Button>\n        </Modal.Footer>\n      </Modal>\n      <Modal show={showSaveModal} onHide={handleCloseSaveModal}>\n        <Modal.Header closeButton>\n          <Modal.Title>Save Confirmation</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>Data has been saved successfully.</Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"primary\" onClick={handleCloseSaveModal}>\n            Ok\n          </Button>\n        </Modal.Footer>\n      </Modal>\n      <Modal show={showDescModal} onHide={handleCloseDescModal}>\n        <Modal.Header closeButton>\n          <Modal.Title>Descriptions</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Button variant=\"primary\" className=\"mb-3\" onClick={addDescription}>\n            Add Description\n          </Button>\n          {descriptions.map((desc, index) => (\n            <Row key={index} className=\"mb-3\">\n              <Button\n                variant=\"outline-secondary\"\n                className=\"w-100\"\n                onClick={() => selectDescription(index)}\n                style={{ cursor: \"pointer\" }}\n              >\n                <div className=\"d-flex justify-content-between\">\n                  <span>{desc.description || \"Description\"}</span>\n                  <span\n                    style={{\n                      borderLeft: \"1px solid #ccc\",\n                      paddingLeft: \"10px\",\n                    }}\n                  >\n                    {desc.date || \"Date\"}\n                  </span>\n                </div>\n              </Button>\n            </Row>\n          ))}\n          <Button variant=\"primary\" onClick={handleCloseDescModal}>\n            OK\n          </Button>\n        </Modal.Body>\n      </Modal>\n      <Modal show={showWoModal} onHide={handleCloseWoModal}>\n        <Modal.Header closeButton>\n          <Modal.Title>Work Orders</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Button\n            variant=\"primary\"\n            className=\"mb-3\"\n            onClick={addWorkOrder}\n            style={{ marginBottom: \"1rem\" }}\n          >\n            Add Work Order\n          </Button>\n          {workOrders.map((wo, index) => (\n            <Row key={index} className=\"mb-3\">\n              <Col>\n                <Form.Control\n                  type=\"text\"\n                  placeholder=\"Work Order\"\n                  value={wo.workOrder}\n                  onChange={(e) =>\n                    handleWorkOrderChange(index, \"workOrder\", e.target.value)\n                  }\n                  style={{ marginBottom: \"0.5rem\" }}\n                />\n              </Col>\n              <Col>\n                <Form.Control\n                  type=\"date\"\n                  placeholder=\"Date\"\n                  value={wo.date}\n                  onChange={(e) =>\n                    handleWorkOrderChange(index, \"date\", e.target.value)\n                  }\n                />\n              </Col>\n              <Col>\n                <Button variant=\"danger\" onClick={() => removeWorkOrder(index)}>\n                  Remove\n                </Button>\n              </Col>\n            </Row>\n          ))}\n          <Button variant=\"primary\" onClick={handleCloseWoModal}>\n            OK\n          </Button>\n        </Modal.Body>\n      </Modal>\n      {/* Machine Selection Modal */}\n      <ClientInfoModal\n        show={showMachineModal}\n        handleClose={handleCloseMachineModal}\n        selectedClient={selectedClient}\n        machineOptions={machineOptions}\n        setSelectedMachine={handleSetSelectedMachine}\n      />\n      <Modal show={showClientModal} onHide={handleCloseClientModal}>\n        <Modal.Header closeButton>\n          <Modal.Title>Select Client</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <FormControl\n            type=\"text\"\n            placeholder=\"Search by name\"\n            className=\"mb-3\"\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n          />\n          <ClientTable\n            clients={clients.filter((client) =>\n              client.name.toLowerCase().includes(search.toLowerCase())\n            )}\n            onSelectClient={handleClientInfo}\n            onInfoClick={handleClientInfo}\n            clearSelection={() => handleClientInfo(null)}\n            onAddClient={handleAddNewClient} // new prop\n          />\n        </Modal.Body>\n      </Modal>\n\n      <ParentModal\n        show={showParentModal}\n        handleClose={handleCloseParentModal}\n        setSelectedParent={setSelectedParent}\n      />\n      <MachineSelectionModal\n        show={machineSelectionModal}\n        handleClose={() => setMachineSelectionModal(false)}\n        setMachine={setTheMachine}\n      />\n      {/* Camera Modal */}\n      <Modal show={showCameraModal} onHide={handleCloseCameraModal}>\n        <Modal.Header closeButton>\n          <Modal.Title>Take a Photo</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <div className=\"camera\">\n            {!capturedPhoto ? (\n              <BarcodeScannerComponent\n                width=\"100%\"\n                height={300}\n                onUpdate={handleCapture}\n                facingMode={cameraFacing}\n              />\n            ) : (\n              <div className=\"photo-preview\">\n                <img\n                  src={URL.createObjectURL(capturedPhoto)}\n                  alt=\"captured\"\n                  style={{ width: \"100%\" }}\n                />\n              </div>\n            )}\n          </div>\n        </Modal.Body>\n        <Modal.Footer>\n          {!capturedPhoto ? (\n            <>\n              <Button\n                onClick={capturePhoto}\n                style={{\n                  borderRadius: \"50%\",\n                  width: \"60px\",\n                  height: \"60px\",\n                  position: \"absolute\",\n                  left: \"50%\",\n                  transform: \"translateX(-50%)\",\n                  bottom: \"10px\",\n                }}\n              >\n                📷\n              </Button>\n              <Button\n                onClick={() =>\n                  setCameraFacing((prev) =>\n                    prev === \"environment\" ? \"user\" : \"environment\"\n                  )\n                }\n              >\n                Flip Camera\n              </Button>\n              <Button variant=\"secondary\" onClick={handleCloseCameraModal}>\n                Cancel\n              </Button>\n            </>\n          ) : (\n            <>\n              <Button\n                variant=\"secondary\"\n                onClick={() => setCapturedPhoto(null)}\n              >\n                Retake\n              </Button>\n              <Button variant=\"primary\" onClick={savePhoto}>\n                OK\n              </Button>\n            </>\n          )}\n        </Modal.Footer>\n      </Modal>\n      {/* Descriptions Modal */}\n      <Modal show={showDescModal} onHide={handleCloseDescModal}>\n        <Modal.Header closeButton>\n          <Modal.Title>Descriptions</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Button variant=\"primary\" className=\"mb-3\" onClick={addDescription}>\n            Add Description\n          </Button>\n          {descriptions.map((desc, index) => (\n            <Row key={index} className=\"mb-3\">\n              <Button\n                variant=\"outline-secondary\"\n                className=\"w-100\"\n                onClick={() => selectDescription(index)}\n                style={{ cursor: \"pointer\" }}\n              >\n                <div className=\"d-flex justify-content-between\">\n                  <span>{desc.description || \"Description\"}</span>\n                  <span\n                    style={{\n                      borderLeft: \"1px solid #ccc\",\n                      paddingLeft: \"10px\",\n                    }}\n                  >\n                    {desc.date || \"Date\"}\n                  </span>\n                </div>\n              </Button>\n            </Row>\n          ))}\n          <Button variant=\"primary\" onClick={handleCloseDescModal}>\n            OK\n          </Button>\n        </Modal.Body>\n      </Modal>\n\n      {/* Info Modal */}\n      <InfoModal\n        show={showInfoModal}\n        handleClose={handleCloseInfoModal}\n        itemName={items.name}\n        dimensions={`${items.length},${items.width},${items.height}`}\n        price={items.price}\n        freqI={freqItem}\n        freqM={machineFrequency}\n        usage={usagePastYear}\n      />\n      {loading && (\n        <div\n          style={{\n            position: \"fixed\",\n            top: 0,\n            left: 0,\n            width: \"100%\",\n            height: \"100%\",\n            backgroundColor: \"rgba(255, 255, 255, 0.7)\",\n            backdropFilter: \"blur(5px)\",\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            zIndex: 9999, // Make sure it's above everything else\n          }}\n        >\n          <Spinner animation=\"border\" variant=\"primary\" role=\"status\">\n            <span className=\"visually-hidden\">Loading...</span>\n          </Spinner>\n        </div>\n      )}\n      {/* Main Form */}\n      <Container fluid className={styles.page}>\n        <div className={styles.shell}>\n          <Card className={styles.card}>\n            <Card.Body className={styles.cardBody}>\n              <div className={styles.header}>\n                <div className={styles.kicker}>New Item</div>\n                <h2 className={styles.title}>Add New Item</h2>\n                <div className={styles.subtitle}>\n                  Capture details, photos, and routing before saving.\n                </div>\n              </div>\n              <Form onSubmit={handleSubmit}>\n                {/* Row for Name and PN */}\n                <Row className=\"mb-3\">\n                  <Col>\n                    <Form.Group controlId=\"name\">\n                      <Form.Label>Name</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        value={items.name}\n                        onChange={handleChange(\"name\")}\n                      />\n                    </Form.Group>\n                  </Col>\n                  <Col>\n                    <Form.Group controlId=\"pn\">\n                      <Form.Label>Product Number</Form.Label>\n                      <div style={{ position: \"relative\" }}>\n                        <InputGroup>\n                          {/* Editable input field displaying the current PN */}\n                          <Form.Control\n                            type=\"text\"\n                            value={items.pn[currentPnIndex] || \"\"}\n                            onChange={(e) =>\n                              handlePnChange(currentPnIndex, e.target.value)\n                            }\n                          />\n                          {/* Arrow button to toggle dropdown */}\n                          <Button\n                            variant=\"outline-secondary\"\n                            onClick={() => setShowDropdown(!showDropdown)}\n                          >\n                            &#9662;\n                          </Button>\n                          {/* Plus button to add a new PN */}\n                          <InputGroup.Text>\n                            <Button\n                              variant=\"outline-secondary\"\n                              onClick={() => setAddingNewPn(true)}\n                            >\n                              +\n                            </Button>\n                          </InputGroup.Text>\n                        </InputGroup>\n                        {/* Dropdown list showing only the current item's PN options */}\n                        {showDropdown && (\n                          <div\n                            style={{\n                              position: \"absolute\",\n                              top: \"100%\",\n                              left: 0,\n                              right: 0,\n                              backgroundColor: \"white\",\n                              border: \"1px solid #ccc\",\n                              zIndex: 1000,\n                              maxHeight: \"150px\",\n                              overflowY: \"auto\",\n                            }}\n                          >\n                            {items.pn.map((pnOption, idx) => (\n                              <div\n                                key={idx}\n                                style={{ padding: \"8px\", cursor: \"pointer\" }}\n                                onClick={() => {\n                                  setCurrentPnIndex(idx);\n                                  setShowDropdown(false);\n                                }}\n                              >\n                                {pnOption}\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                      {/* Input for adding a new PN, if triggered */}\n                      {addingNewPn && (\n                        <Form.Control\n                          type=\"text\"\n                          placeholder=\"Enter new PN\"\n                          value={newPn}\n                          onChange={(e) => setNewPn(e.target.value)}\n                          onBlur={handleAddNewPn}\n                          onKeyDown={(e) => {\n                            if (e.key === \"Enter\") {\n                              handleAddNewPn();\n                            }\n                          }}\n                        />\n                      )}\n                    </Form.Group>\n                  </Col>\n                </Row>\n                {/* Row for SN */}\n                <Row className=\"mb-3\">\n                  <Col>\n                    <Form.Group controlId=\"sn\">\n                      <Form.Label>Serial Number</Form.Label>\n                      <div style={{ position: \"relative\" }}>\n                        <InputGroup>\n                          {/* Inline editable input showing the currently selected SN */}\n                          <Form.Control\n                            type=\"text\"\n                            value={items.sn[currentSnIndex] || \"\"}\n                            onChange={(e) =>\n                              handleSnChange(currentSnIndex, e.target.value)\n                            }\n                          />\n                          {/* Arrow button to toggle SN dropdown */}\n                          <Button\n                            variant=\"outline-secondary\"\n                            onClick={() => setShowSnDropdown(!showSnDropdown)}\n                          >\n                            &#9662;\n                          </Button>\n                          {/* Plus button to add a new SN */}\n                          <InputGroup.Text>\n                            <Button\n                              variant=\"outline-secondary\"\n                              onClick={() => setAddingNewSn(true)}\n                            >\n                              +\n                            </Button>\n                          </InputGroup.Text>\n                        </InputGroup>\n                        {/* Dropdown list for SN options */}\n                        {showSnDropdown && (\n                          <div\n                            style={{\n                              position: \"absolute\",\n                              top: \"100%\",\n                              left: 0,\n                              right: 0,\n                              backgroundColor: \"white\",\n                              border: \"1px solid #ccc\",\n                              zIndex: 1000,\n                              maxHeight: \"150px\",\n                              overflowY: \"auto\",\n                            }}\n                          >\n                            {items.sn.map((snOption, idx) => (\n                              <div\n                                key={idx}\n                                style={{ padding: \"8px\", cursor: \"pointer\" }}\n                                onClick={() => {\n                                  setCurrentSnIndex(idx);\n                                  setShowSnDropdown(false);\n                                }}\n                              >\n                                {snOption}\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                      {/* Input for adding a completely new SN */}\n                      {addingNewSn && (\n                        <Form.Control\n                          type=\"text\"\n                          placeholder=\"Enter new SN\"\n                          value={newSn}\n                          onChange={(e) => setNewSn(e.target.value)}\n                          onBlur={handleAddNewSn}\n                          onKeyDown={(e) => {\n                            if (e.key === \"Enter\") {\n                              handleAddNewSn();\n                            }\n                          }}\n                        />\n                      )}\n                    </Form.Group>\n                  </Col>\n                  <Col>\n                    <Form.Group controlId=\"status\">\n                      <Form.Label>Status</Form.Label>\n                      <Form.Select\n                        value={items.status || \"\"}\n                        onChange={handleChange(\"status\")}\n                      >\n                        <option value=\"\">Select status</option>\n                        <option value=\"Good\">Good</option>\n                        <option value=\"Bad\">Bad</option>\n                        <option value=\"Unknown\">Unknown</option>\n                      </Form.Select>\n                    </Form.Group>\n                  </Col>\n                </Row>\n                {/* Row for Local SN, Arrival Date, Tracking */}\n                <Row className=\"mb-3\">\n                  <Col>\n                    <Form.Group controlId=\"localSN\">\n                      <Form.Label>Local SN</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        placeholder=\"Enter Local SN\"\n                        value={items.localSN || \"\"}\n                        onChange={handleChange(\"localSN\")}\n                      />\n                    </Form.Group>\n                  </Col>\n                  <Col>\n                    <Form.Group controlId=\"arrivalDate\">\n                      <Form.Label>Arrival Date</Form.Label>\n                      <Form.Control\n                        placeholder=\"Enter Arrival Date\"\n                        type=\"date\"\n                        value={items.arrival_date}\n                        onChange={(e) => {\n                          const value = e.target.value;\n                          setItems((prev) => ({\n                            ...prev,\n                            arrival_date: value,\n                          }));\n                        }}\n                      />\n                    </Form.Group>\n                  </Col>\n                  <Col>\n                    <Form.Group controlId=\"trackingNumber\">\n                      <Form.Label>Tracking Number</Form.Label>\n                      <Form.Control\n                        placeholder=\"Tracking Number\"\n                        type=\"text\"\n                        value={items.trackingNumber}\n                        onChange={handleChange(\"trackingNumber\")}\n                      />\n                    </Form.Group>\n                  </Col>\n                </Row>\n                {/* Row for OEM, Modality, Model */}\n                <Row className=\"mb-3\">\n                  <Col>\n                    <Form.Group controlId=\"oem\">\n                      <Form.Label>OEM</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        placeholder=\"OEM\"\n                        value={oem}\n                        onChange={(e) => setOem(e.target.value)}\n                      />\n                    </Form.Group>\n                  </Col>\n                  <Col>\n                    <Form.Group controlId=\"modality\">\n                      <Form.Label>Modality</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        placeholder=\"Modality\"\n                        value={modality}\n                        onChange={(e) => setModality(e.target.value)}\n                      />\n                    </Form.Group>\n                  </Col>\n                  <Col>\n                    <Form.Group controlId=\"model\">\n                      <Form.Label>Model</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        placeholder=\"Model\"\n                        value={model}\n                        onChange={(e) => setModel(e.target.value)}\n                      />\n                    </Form.Group>\n                  </Col>\n                </Row>\n                {/* Work Orders and Descriptions Section */}\n                <div style={{ marginBottom: \"1rem\", marginTop: \"1rem\" }}>\n                  <div className=\"d-flex align-items-center\">\n                    <Button\n                      variant=\"outline-secondary\"\n                      onClick={handleShowWoModal}\n                      className=\"me-2\"\n                    >\n                      Manage Work Orders\n                    </Button>\n                    {workOrders.length > 0 && (\n                      <div className=\"d-flex flex-column align-items-start\">\n                        <Form.Label>Work Order</Form.Label>\n                        <Form.Control\n                          type=\"text\"\n                          placeholder=\"Most Recent Work Order\"\n                          value={mostRecentWorkOrder?.workOrder || \"\"}\n                          onChange={(e) =>\n                            handleWorkOrderChange(\n                              workOrders.indexOf(mostRecentWorkOrder),\n                              \"workOrder\",\n                              e.target.value\n                            )\n                          }\n                          style={{ marginBottom: \"0.5rem\" }}\n                        />\n                        <Form.Label>Date</Form.Label>\n                        <Form.Control\n                          type=\"date\"\n                          placeholder=\"Work Order Date\"\n                          value={mostRecentWorkOrder?.date || \"\"}\n                          onChange={(e) =>\n                            handleWorkOrderChange(\n                              workOrders.indexOf(mostRecentWorkOrder),\n                              \"date\",\n                              e.target.value\n                            )\n                          }\n                          style={{ marginBottom: \"0.5rem\" }}\n                        />\n                      </div>\n                    )}\n                  </div>\n                </div>\n                {/* Description Editing */}\n                <div style={{ marginBottom: \"1rem\" }}>\n                  <Form.Group controlId=\"desc\">\n                    <Button\n                      variant=\"outline-secondary\"\n                      onClick={listDescriptions}\n                      className=\"mb-2 me-2\"\n                    >\n                      List Descriptions\n                    </Button>\n                    <Form.Control\n                      as=\"textarea\"\n                      rows={3}\n                      placeholder=\"Enter description\"\n                      value={descriptions[selectedDesc]?.description || \"\"}\n                      onChange={(e) =>\n                        handleDescriptionChange(\n                          selectedDesc,\n                          \"description\",\n                          e.target.value\n                        )\n                      }\n                      style={{ marginBottom: \"0.5rem\" }}\n                    />\n                    <Form.Control\n                      type=\"date\"\n                      value={descriptions[selectedDesc]?.date || \"\"}\n                      onChange={(e) =>\n                        handleDescriptionChange(\n                          selectedDesc,\n                          \"date\",\n                          e.target.value\n                        )\n                      }\n                      style={{ marginTop: \"0.5rem\", marginBottom: \"0.5rem\" }}\n                    />\n                  </Form.Group>\n                </div>\n                {/* Machine Selection Row with Local Loc Inputs */}\n                <div style={{ marginBottom: \"1rem\" }}>\n                  <Row className=\"mb-3\">\n                    <Col>\n                      <Button\n                        variant=\"outline-secondary\"\n                        onClick={() => {\n                          setMachinePick(true);\n                          handleShowClientModal();\n                        }}\n                        className=\"me-2\"\n                      >\n                        Select From\n                      </Button>\n                      {selectedClientFrom && (\n                        <div\n                          style={{\n                            border: \"1px solid #ccc\",\n                            padding: \"0.75rem\",\n                            borderRadius: \"4px\",\n                            marginBottom: \"1rem\",\n                          }}\n                        >\n                          <p>\n                            <strong>Selected Client (From):</strong>{\" \"}\n                            {selectedClientFrom.name}\n                          </p>\n                          <div style={{ marginTop: \"0.5rem\" }}>\n                            <Button\n                              variant=\"outline-secondary\"\n                              onClick={() => setShowMachineModal(true)}\n                            >\n                              Select Machine for {selectedClientFrom.name}\n                            </Button>\n                            {selectedMachine && (\n                              <>\n                                <p style={{ marginTop: \"0.5rem\" }}>\n                                  <strong>Selected Machine (From):</strong>{\" \"}\n                                  {selectedMachine.name}\n                                </p>\n                                {showLocalLocFrom && (\n                                  <>\n                                    <Button\n                                      variant=\"outline-secondary\"\n                                      onClick={() =>\n                                        setShowNewLocalModalFrom(true)\n                                      }\n                                      className=\"w-100 mb-2\"\n                                    >\n                                      {[\n                                        newLocalFrom.region,\n                                        newLocalFrom.section?.letter +\n                                          newLocalFrom.section?.number,\n                                        newLocalFrom.bin &&\n                                          `B${newLocalFrom.bin}`,\n                                        newLocalFrom.pallet &&\n                                          `P${newLocalFrom.pallet}`,\n                                      ]\n                                        .filter(Boolean)\n                                        .join(\"-\") || \"Set Local Location\"}\n                                    </Button>\n                                    <Modal\n                                      show={showNewLocalModalFrom}\n                                      onHide={() =>\n                                        setShowNewLocalModalFrom(false)\n                                      }\n                                      centered\n                                    >\n                                      <Modal.Header>\n                                        <Modal.Title>\n                                          Edit Local Loc (From)\n                                        </Modal.Title>\n                                      </Modal.Header>\n                                      <Modal.Body>\n                                        <NewLocal\n                                          selectedClient={selectedClientFrom}\n                                          showLocalLoc={showNewLocalModalFrom}\n                                          value={newLocalFrom}\n                                          onChange={setNewLocalFrom}\n                                          onSave={(p) => {\n                                            setNewLocalFrom(p);\n                                            setShowNewLocalModalFrom(false);\n                                          }}\n                                          onCancel={() =>\n                                            setShowNewLocalModalFrom(false)\n                                          }\n                                        />\n                                      </Modal.Body>\n                                    </Modal>\n                                  </>\n                                )}\n                              </>\n                            )}\n                          </div>\n                        </div>\n                      )}\n                    </Col>\n                    <Col>\n                      <Button\n                        variant=\"outline-secondary\"\n                        onClick={() => {\n                          setMachinePick(false);\n                          handleShowClientModal();\n                        }}\n                        className=\"me-2\"\n                      >\n                        Select Current\n                      </Button>\n                      {selectedClientCurrent && (\n                        <div\n                          style={{\n                            border: \"1px solid #ccc\",\n                            padding: \"0.75rem\",\n                            borderRadius: \"4px\",\n                            marginBottom: \"1rem\",\n                          }}\n                        >\n                          <p>\n                            <strong>Selected Client (Current):</strong>{\" \"}\n                            {selectedClientCurrent.name}\n                          </p>\n                          <div style={{ marginTop: \"0.5rem\" }}>\n                            <Button\n                              variant=\"outline-secondary\"\n                              onClick={() => setShowMachineModal(true)}\n                            >\n                              Select Machine for {selectedClientCurrent.name}\n                            </Button>\n                            {selectedCurrentMachine && (\n                              <>\n                                <p style={{ marginTop: \"0.5rem\" }}>\n                                  <strong>Selected Machine (Current):</strong>{\" \"}\n                                  {selectedCurrentMachine.name}\n                                </p>\n                                {showLocalLocCurrent && (\n                                  <>\n                                    <Button\n                                      variant=\"outline-secondary\"\n                                      onClick={() =>\n                                        setShowNewLocalModalCurrent(true)\n                                      }\n                                      className=\"w-100 mb-2\"\n                                    >\n                                      {[\n                                        newLocalCurrent.region,\n                                        newLocalCurrent.section?.letter +\n                                          newLocalCurrent.section?.number,\n                                        newLocalCurrent.bin &&\n                                          `B${newLocalCurrent.bin}`,\n                                        newLocalCurrent.pallet &&\n                                          `P${newLocalCurrent.pallet}`,\n                                      ]\n                                        .filter(Boolean)\n                                        .join(\"-\") || \"Set Local Location\"}\n                                    </Button>\n                                    <Modal\n                                      show={showNewLocalModalCurrent}\n                                      onHide={() =>\n                                        setShowNewLocalModalCurrent(false)\n                                      }\n                                      centered\n                                    >\n                                      <Modal.Header>\n                                        <Modal.Title>\n                                          Edit Local Loc (Current)\n                                        </Modal.Title>\n                                      </Modal.Header>\n                                      <Modal.Body>\n                                        <NewLocal\n                                          selectedClient={selectedClientCurrent}\n                                          showLocalLoc={\n                                            showNewLocalModalCurrent\n                                          }\n                                          value={newLocalCurrent}\n                                          onChange={setNewLocalCurrent}\n                                          onSave={(p) => {\n                                            setNewLocalCurrent(p);\n                                            setShowNewLocalModalCurrent(false);\n                                          }}\n                                          onCancel={() =>\n                                            setShowNewLocalModalCurrent(false)\n                                          }\n                                        />\n                                      </Modal.Body>\n                                    </Modal>\n                                  </>\n                                )}\n                              </>\n                            )}\n                          </div>\n                        </div>\n                      )}\n                    </Col>\n                    <Col>\n                      <Button\n                        variant=\"outline-secondary\"\n                        onClick={handleShowParentModal}\n                        className=\"me-2\"\n                      >\n                        Select Parent\n                      </Button>\n                      {selectedParent && (\n                        <Form.Control\n                          type=\"text\"\n                          placeholder=\"Selected Parent\"\n                          value={selectedParent.name}\n                          readOnly\n                          style={{ cursor: \"default\", marginTop: \"0.5rem\" }}\n                        />\n                      )}\n                    </Col>\n                  </Row>\n                </div>\n                {/* Photo Action Row */}\n                <div style={{ marginBottom: \"1rem\" }}>\n                  <Row className=\"mb-3\">\n                    <Col xs={6}>\n                      <ButtonGroup>\n                        <Button\n                          variant=\"outline-secondary\"\n                          onClick={handleShowCameraModal}\n                        >\n                          Take Photo\n                        </Button>\n                        <Button\n                          variant=\"outline-secondary\"\n                          onClick={handleBrowsePhotos}\n                        >\n                          Browse\n                        </Button>\n                      </ButtonGroup>\n                    </Col>\n                    <Col xs={6} className=\"d-flex align-items-center\">\n                      <Button\n                        variant=\"success\"\n                        onClick={handleSendToInflow}\n                        disabled={!isReadyForActions}\n                        style={{ marginLeft: \"auto\" }}\n                      >\n                        Send to inFlow\n                      </Button>\n                      <Button\n                        variant=\"secondary\"\n                        onClick={handleBluefolderButton}\n                        disabled={!isReadyForActions}\n                        style={{ marginLeft: \"0.5rem\", marginRight: \".5rem\" }}\n                      >\n                        BlueFolder\n                      </Button>\n                      <Button\n                        variant={addToWebsite ? \"primary\" : \"outline-primary\"}\n                        onClick={handleToggleAddToWebsite}\n                        disabled={!isReadyForActions}\n                      >\n                        {addToWebsite ? \"Added to Website\" : \"Add to Website\"}\n                      </Button>\n                      <Form.Check\n                        type=\"checkbox\"\n                        id=\"hide-checkbox\"\n                        label=\"Hide\"\n                        checked={!items.visible}\n                        onChange={(e) => {\n                          const isHidden = e.currentTarget.checked;\n                          setItems((prev) => ({\n                            ...prev,\n                            visible: !isHidden,\n                          }));\n                        }}\n                        className=\"ms-3\"\n                      />\n                    </Col>\n                  </Row>\n                  <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    multiple\n                    ref={browseInputRef}\n                    style={{ display: \"none\" }}\n                    onChange={handleFilesSelected}\n                  />\n                </div>\n                {/* Photo Gallery */}\n                <div className=\"mt-3 d-flex flex-wrap\">\n                  {photos.map((photo, index) => (\n                    <div\n                      key={index}\n                      className=\"d-flex flex-column align-items-center mb-2 me-2\"\n                      style={{\n                        width: \"100px\",\n                        height: \"100px\",\n                        position: \"relative\",\n                      }}\n                    >\n                      <img\n                        src={photo.url}\n                        alt={`Photo ${index + 1}`}\n                        style={{\n                          width: \"100%\",\n                          height: \"100%\",\n                          objectFit: \"cover\",\n                        }}\n                      />\n                      {photo.file && (\n                        <Button\n                          variant=\"danger\"\n                          size=\"sm\"\n                          style={{\n                            position: \"absolute\",\n                            top: 0,\n                            right: 0,\n                            padding: \"0 5px\",\n                          }}\n                          onClick={() => removePhoto(index)}\n                        >\n                          X\n                        </Button>\n                      )}\n                    </div>\n                  ))}\n                </div>\n                {/* Extra Section: Dimensions, Price, and DOM */}\n\n                {/* Submit Row */}\n                <div className=\"mt-3 d-flex flex-wrap align-items-center\">\n                  <Button\n                    variant=\"primary\"\n                    type=\"submit\"\n                    style={{ marginRight: \"1rem\" }}\n                  >\n                    Save\n                  </Button>\n                  <Button\n                    variant=\"info\"\n                    onClick={handleClone}\n                    style={{ marginRight: \"1rem\" }}\n                  >\n                    Clone\n                  </Button>\n                  <LoadingButton\n                    type=\"secondary\"\n                    name=\"Back\"\n                    route=\"NewSearch/mainSearch\"\n                  />\n                  {SHOW_SLACK_BUTTONS && (\n                    <div\n                      style={{\n                        display: \"flex\",\n                        flexDirection: \"column\",\n                        marginLeft: \".5rem\",\n                      }}\n                    >\n                      <span\n                        style={{\n                          fontSize: 12,\n                          lineHeight: \"12px\",\n                          textAlign: \"center\",\n                        }}\n                      >\n                        Slack\n                      </span>\n                      <div\n                        style={{\n                          display: \"flex\",\n                          border: \"1px solid #ced4da\",\n                          borderRadius: 6,\n                          overflow: \"hidden\",\n                        }}\n                      >\n                        <Button\n                          variant=\"outline-primary\"\n                          onClick={() => handleAddToSlack(\"receiving\")}\n                          disabled={!isReadyForActions}\n                          style={{\n                            border: \"none\",\n                            borderRight: \"1px solid #ced4da\",\n                          }}\n                        >\n                          Receiving\n                        </Button>\n                        <Button\n                          variant=\"outline-primary\"\n                          onClick={() => handleAddToSlack(\"shipping\")}\n                          disabled={!isReadyForActions}\n                          style={{ border: \"none\" }}\n                        >\n                          Shipping\n                        </Button>\n                      </div>\n                    </div>\n                  )}\n                  <Button\n                    variant=\"info\"\n                    onClick={handlePrint}\n                    disabled={!isReadyForActions}\n                    style={{ marginLeft: \"auto\" }}\n                  >\n                    Print Label\n                  </Button>\n                </div>\n                <div style={{ textAlign: \"center\", margin: \"1rem 0\" }}>\n                  <Button\n                    variant=\"link\"\n                    style={{\n                      textDecoration: \"none\",\n                      color: \"black\",\n                      fontSize: \"24px\",\n                    }}\n                    onClick={() => setShowExtra(!showExtra)}\n                  >\n                    ▼\n                  </Button>\n                </div>\n                <Collapse in={showExtra}>\n                  <div id=\"extra-collapse\" className=\"mt-3\">\n                    <Row>\n                      <Form.Group as={Col} controlId=\"dimensions\">\n                        <Form.Label>Dimensions (L x W x H)</Form.Label>\n                        <Row>\n                          <Col>\n                            <Form.Control\n                              placeholder=\"Length\"\n                              type=\"text\"\n                              value={items.length}\n                              onChange={handleChange(\"length\")}\n                            />\n                          </Col>\n                          x\n                          <Col>\n                            <Form.Control\n                              placeholder=\"Width\"\n                              type=\"text\"\n                              value={items.width}\n                              onChange={handleChange(\"width\")}\n                            />\n                          </Col>\n                          x\n                          <Col>\n                            <Form.Control\n                              placeholder=\"Height\"\n                              type=\"text\"\n                              value={items.height}\n                              onChange={handleChange(\"height\")}\n                            />\n                          </Col>\n                        </Row>\n                      </Form.Group>\n                      <Form.Group as={Col} controlId=\"price\">\n                        <Form.Label>Price</Form.Label>\n                        <Form.Control\n                          placeholder=\"Price\"\n                          type=\"text\"\n                          value={items.price}\n                          onChange={handleChange(\"price\")}\n                        />\n                      </Form.Group>\n                    </Row>\n                    <Row className=\"mt-3\">\n                      <Form.Group as={Col} controlId=\"DOM\">\n                        <Form.Label>DOM (Date of Manufacture)</Form.Label>\n                        <Form.Control\n                          placeholder=\"Enter DOM\"\n                          type=\"date\"\n                          value={DOM}\n                          onChange={(e) => setDOM(e.target.value)}\n                        />\n                      </Form.Group>\n                    </Row>\n                    <Row>\n                      <Form.Group as={Col} controlId=\"poNumber\">\n                        <Form.Label>PO Number</Form.Label>\n                        <Form.Control\n                          type=\"text\"\n                          placeholder=\"PO Number\"\n                          value={items.poNumber || \"\"}\n                          onChange={handleChange(\"poNumber\")}\n                        />\n                      </Form.Group>\n                    </Row>\n                  </div>\n                </Collapse>\n              </Form>\n            </Card.Body>\n          </Card>\n        </div>\n      </Container>\n    </LoggedIn>\n  );\n}\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}