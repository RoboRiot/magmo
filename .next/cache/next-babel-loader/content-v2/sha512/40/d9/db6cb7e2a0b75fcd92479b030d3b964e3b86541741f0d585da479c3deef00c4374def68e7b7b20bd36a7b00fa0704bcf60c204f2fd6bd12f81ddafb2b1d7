{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport styles from \"./MultiSelectDropdown.module.css\";\n\nfunction normalizeValue(value) {\n  if (value == null) return \"\";\n  return String(value).trim();\n}\n\nexport default function MultiSelectDropdown(_ref) {\n  var label = _ref.label,\n      _ref$placeholder = _ref.placeholder,\n      placeholder = _ref$placeholder === void 0 ? \"Select Option\" : _ref$placeholder,\n      _ref$options = _ref.options,\n      options = _ref$options === void 0 ? [] : _ref$options,\n      _ref$selected = _ref.selected,\n      selected = _ref$selected === void 0 ? [] : _ref$selected,\n      onChange = _ref.onChange,\n      _ref$searchable = _ref.searchable,\n      searchable = _ref$searchable === void 0 ? true : _ref$searchable,\n      _ref$disabled = _ref.disabled,\n      disabled = _ref$disabled === void 0 ? false : _ref$disabled,\n      _ref$enableDelete = _ref.enableDelete,\n      enableDelete = _ref$enableDelete === void 0 ? false : _ref$enableDelete,\n      onDeleteOption = _ref.onDeleteOption;\n\n  var _useState = useState(false),\n      open = _useState[0],\n      setOpen = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      query = _useState2[0],\n      setQuery = _useState2[1];\n\n  var menuRef = useRef(null);\n  var holdTimerRef = useRef(null);\n  var holdTriggeredRef = useRef(false);\n  var selectedSet = useMemo(function () {\n    return new Set((selected || []).map(normalizeValue).filter(Boolean));\n  }, [selected]);\n  var filteredOptions = useMemo(function () {\n    var search = query.trim().toLowerCase();\n    var normalized = (options || []).map(normalizeValue).filter(Boolean);\n    if (!search) return normalized;\n    return normalized.filter(function (option) {\n      return option.toLowerCase().includes(search);\n    });\n  }, [options, query]);\n\n  var toggleOption = function toggleOption(value) {\n    var normalized = normalizeValue(value);\n    if (!normalized || typeof onChange !== \"function\") return;\n    var next = new Set(selectedSet);\n\n    if (next.has(normalized)) {\n      next[\"delete\"](normalized);\n    } else {\n      next.add(normalized);\n    }\n\n    onChange(Array.from(next));\n  };\n\n  var startHold = function startHold(value) {\n    if (!enableDelete || typeof onDeleteOption !== \"function\") return;\n    holdTriggeredRef.current = false;\n    clearTimeout(holdTimerRef.current);\n    holdTimerRef.current = setTimeout(function () {\n      holdTriggeredRef.current = true;\n      var confirmed = window.confirm(\"Delete \\\"\".concat(value, \"\\\" from the list?\"));\n\n      if (confirmed) {\n        onDeleteOption(value);\n      }\n    }, 650);\n  };\n\n  var cancelHold = function cancelHold() {\n    clearTimeout(holdTimerRef.current);\n  };\n\n  var handleOptionClick = function handleOptionClick(value) {\n    if (holdTriggeredRef.current) {\n      holdTriggeredRef.current = false;\n      return;\n    }\n\n    toggleOption(value);\n  };\n\n  var displayText = useMemo(function () {\n    if (!selectedSet.size) return placeholder;\n    var values = Array.from(selectedSet);\n    if (values.length === 1) return values[0];\n    return \"Multi (\".concat(values.length, \")\");\n  }, [placeholder, selectedSet]);\n  useEffect(function () {\n    var handleOutside = function handleOutside(event) {\n      if (!menuRef.current) return;\n\n      if (!menuRef.current.contains(event.target)) {\n        setOpen(false);\n      }\n    };\n\n    if (open) {\n      document.addEventListener(\"mousedown\", handleOutside);\n      document.addEventListener(\"touchstart\", handleOutside);\n    }\n\n    return function () {\n      document.removeEventListener(\"mousedown\", handleOutside);\n      document.removeEventListener(\"touchstart\", handleOutside);\n    };\n  }, [open]);\n  useEffect(function () {\n    if (!open) setQuery(\"\");\n  }, [open]);\n  return __jsx(\"div\", {\n    className: styles.wrapper,\n    ref: menuRef\n  }, label ? __jsx(\"div\", {\n    className: styles.label\n  }, label) : null, __jsx(\"button\", {\n    type: \"button\",\n    className: styles.toggle,\n    onClick: function onClick() {\n      return setOpen(function (prev) {\n        return !prev;\n      });\n    },\n    disabled: disabled\n  }, __jsx(\"span\", {\n    className: styles.toggleText\n  }, displayText), __jsx(\"span\", null, open ? \"▲\" : \"▼\")), open && __jsx(\"div\", {\n    className: styles.menu\n  }, searchable && __jsx(\"input\", {\n    className: styles.search,\n    placeholder: \"Search...\",\n    value: query,\n    onChange: function onChange(event) {\n      return setQuery(event.target.value);\n    }\n  }), __jsx(\"div\", {\n    className: styles.list\n  }, !filteredOptions.length && __jsx(\"div\", {\n    className: styles.emptyState\n  }, \"No results\"), filteredOptions.map(function (option) {\n    var checked = selectedSet.has(option);\n    return __jsx(\"div\", {\n      key: option,\n      className: styles.option,\n      onMouseDown: function onMouseDown() {\n        return startHold(option);\n      },\n      onMouseUp: cancelHold,\n      onMouseLeave: cancelHold,\n      onTouchStart: function onTouchStart() {\n        return startHold(option);\n      },\n      onTouchEnd: cancelHold,\n      onClick: function onClick() {\n        return handleOptionClick(option);\n      }\n    }, __jsx(\"input\", {\n      type: \"checkbox\",\n      className: styles.optionCheckbox,\n      checked: checked,\n      readOnly: true\n    }), __jsx(\"span\", {\n      className: styles.optionLabel\n    }, option));\n  }))));\n}","map":null,"metadata":{},"sourceType":"module"}