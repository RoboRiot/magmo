{"ast":null,"code":"import _toConsumableArray from \"C:/Users/mack2/Desktop/code/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"C:/Users/mack2/Desktop/code/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"C:/Users/mack2/Desktop/code/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"C:/Users/mack2/Desktop/code/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\mack2\\\\Desktop\\\\code\\\\pages\\\\NewSearch\\\\AddItem\\\\NewItem.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { Form, Button, Card, Container, Row, Col, Modal, FormControl, Collapse, InputGroup, ButtonGroup, Spinner } from \"react-bootstrap\";\nimport Link from \"next/link\";\nimport dynamic from \"next/dynamic\";\nimport { useAuth } from \"../../../context/AuthUserContext\";\nimport firebase from \"../../../context/Firebase\";\nimport LoggedIn from \"../../LoggedIn\";\nimport { useRouter } from \"next/router\";\nimport { fetchClients } from \"../../../utils/fetchAssociations\";\nimport ClientTable from \"../../../utils/ClientTable\";\nimport ClientInfoModal from \"../ClientInfoModal\";\nimport ParentModal from \"./parentModal\";\nimport MachineSelectionModal from \"../item/[id]/MachineSelectionModal\";\nimport InfoModal from \"../InfoModal\";\nimport InflowAPI from \"../../../utils/inflowAPI\";\nimport NewLocal from \"../item/[id]/NewLocal\";\nimport { buildLocalLocObject, formatLoc, updateMachineFields, buildNameTokens } from \"../../../utils/itemFormShared\";\nimport styles from \"./NewItem.module.css\"; // Load BarcodeScannerComponent only on the client-side.\n\nvar BarcodeScannerComponent = dynamic(_c = function _c() {\n  return import(\"react-qr-barcode-scanner\");\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak(\"react-qr-barcode-scanner\")];\n    },\n    modules: [\"NewSearch\\\\AddItem\\\\NewItem.js -> \" + \"react-qr-barcode-scanner\"]\n  }\n}); // Simulate network delay.\n\n_c2 = BarcodeScannerComponent;\n\nfunction simulateNetworkRequest() {\n  return new Promise(function (resolve) {\n    return setTimeout(resolve, 2000);\n  });\n} // Custom LoadingButton component.\n\n\nfunction LoadingButton(_ref) {\n  _s();\n\n  var type = _ref.type,\n      name = _ref.name,\n      route = _ref.route;\n\n  var _useState = useState(false),\n      isLoading = _useState[0],\n      setLoading = _useState[1];\n\n  useEffect(function () {\n    if (isLoading) {\n      var cancelled = false;\n      simulateNetworkRequest().then(function () {\n        if (!cancelled) setLoading(false);\n      });\n      return function () {\n        cancelled = true;\n      };\n    }\n  }, [isLoading]);\n\n  var handleClick = function handleClick() {\n    return setLoading(true);\n  };\n\n  return __jsx(Link, {\n    href: \"/\".concat(route),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, __jsx(\"a\", {\n    className: \"btn btn-\".concat(type),\n    disabled: isLoading,\n    onClick: !isLoading ? handleClick : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, isLoading ? \"Loading…\" : name));\n}\n\n_s(LoadingButton, \"LHJkidtbt8bk0SOCXf2Y2viet6g=\");\n\n_c3 = LoadingButton;\nexport default function NewItem() {\n  _s2();\n\n  var _descriptions$selecte,\n      _this = this,\n      _descriptions$selecte4,\n      _descriptions$selecte5,\n      _newLocalFrom$section,\n      _newLocalFrom$section2,\n      _newLocalCurrent$sect,\n      _newLocalCurrent$sect2;\n\n  var router = useRouter();\n\n  var _useAuth = useAuth(),\n      signOut = _useAuth.signOut;\n\n  var SHOW_SLACK_BUTTONS = process.env.NEXT_PUBLIC_SHOW_SLACK_BUTTONS === \"true\"; // Initialize item state – for a new item, these start empty.\n  // We store PN and SN as arrays.\n\n  var _useState2 = useState({\n    name: \"\",\n    pn: [\"\"],\n    sn: [\"\"],\n    // This will be overridden on submit.\n    localSN: \"\",\n    // NEW FIELD: holds user input for a local serial number.\n    date: new Date().toISOString().split(\"T\")[0],\n    // auto-fill current date\n    price: \"\",\n    status: \"\",\n    poNumber: \"\",\n    trackingNumber: \"\",\n    length: \"\",\n    width: \"\",\n    height: \"\",\n    arrival_date: \"\",\n    // NEW FIELD: Arrival Date\n    visible: true\n  }),\n      items = _useState2[0],\n      setItems = _useState2[1];\n\n  var _useState3 = useState(true),\n      editingPn = _useState3[0],\n      setEditingPn = _useState3[1]; // const [newPn, setNewPn] = useState(\"\"); // for the input value when editing\n\n\n  var _useState4 = useState(true),\n      editingSn = _useState4[0],\n      setEditingSn = _useState4[1]; // const [newSn, setNewSn] = useState(\"\");\n  // DOM is the Date of Manufacture input (user provided).\n\n\n  var _useState5 = useState(\"\"),\n      DOM = _useState5[0],\n      setDOM = _useState5[1]; // OEM, Modality, Model fields.\n\n\n  var _useState6 = useState(\"\"),\n      oem = _useState6[0],\n      setOem = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      modality = _useState7[0],\n      setModality = _useState7[1];\n\n  var _useState8 = useState(\"\"),\n      model = _useState8[0],\n      setModel = _useState8[1]; // Local location states.\n\n\n  var _useState9 = useState({\n    region: \"\",\n    section: {\n      letter: \"\",\n      number: \"\"\n    },\n    bin: \"\",\n    pallet: \"\"\n  }),\n      newLocalFrom = _useState9[0],\n      setNewLocalFrom = _useState9[1];\n\n  var _useState10 = useState({\n    region: \"\",\n    section: {\n      letter: \"\",\n      number: \"\"\n    },\n    bin: \"\",\n    pallet: \"\"\n  }),\n      newLocalCurrent = _useState10[0],\n      setNewLocalCurrent = _useState10[1]; // Other states.\n\n\n  var _useState11 = useState([]),\n      pnOptions = _useState11[0],\n      setPnOptions = _useState11[1];\n\n  var _useState12 = useState([]),\n      snOptions = _useState12[0],\n      setSnOptions = _useState12[1];\n\n  var _useState13 = useState([{\n    description: \"\",\n    date: \"\"\n  }]),\n      descriptions = _useState13[0],\n      setDescriptions = _useState13[1];\n\n  var _useState14 = useState([{\n    workOrder: \"\",\n    date: \"\"\n  }]),\n      workOrders = _useState14[0],\n      setWorkOrders = _useState14[1];\n\n  var _useState15 = useState([]),\n      clients = _useState15[0],\n      setClients = _useState15[1];\n\n  var _useState16 = useState([]),\n      photos = _useState16[0],\n      setPhotos = _useState16[1];\n\n  var _useState17 = useState(false),\n      show = _useState17[0],\n      setShow = _useState17[1]; // error modal for missing required fields\n\n\n  var _useState18 = useState(false),\n      showErr = _useState18[0],\n      setShowErr = _useState18[1];\n\n  var _useState19 = useState(\"Missing required field: Name and Description\"),\n      Err = _useState19[0],\n      setErr = _useState19[1];\n\n  var _useState20 = useState(false),\n      showDescModal = _useState20[0],\n      setShowDescModal = _useState20[1];\n\n  var _useState21 = useState(false),\n      showWoModal = _useState21[0],\n      setShowWoModal = _useState21[1];\n\n  var _useState22 = useState(false),\n      showClientModal = _useState22[0],\n      setShowClientModal = _useState22[1];\n\n  var _useState23 = useState(false),\n      showMachineModal = _useState23[0],\n      setShowMachineModal = _useState23[1];\n\n  var _useState24 = useState(false),\n      showParentModal = _useState24[0],\n      setShowParentModal = _useState24[1];\n\n  var _useState25 = useState(false),\n      showCameraModal = _useState25[0],\n      setShowCameraModal = _useState25[1];\n\n  var _useState26 = useState(false),\n      showSaveModal = _useState26[0],\n      setShowSaveModal = _useState26[1];\n\n  var _useState27 = useState(false),\n      machineSelectionModal = _useState27[0],\n      setMachineSelectionModal = _useState27[1];\n\n  var _useState28 = useState(0),\n      selectedDesc = _useState28[0],\n      setSelectedDesc = _useState28[1];\n\n  var _useState29 = useState(null),\n      selectedClient = _useState29[0],\n      setSelectedClient = _useState29[1];\n\n  var _useState30 = useState(null),\n      selectedMachine = _useState30[0],\n      setSelectedMachine = _useState30[1];\n\n  var _useState31 = useState(null),\n      selectedCurrentMachine = _useState31[0],\n      setSelectedCurrentMachine = _useState31[1];\n\n  var _useState32 = useState(null),\n      selectedParent = _useState32[0],\n      setSelectedParent = _useState32[1];\n\n  var _useState33 = useState(null),\n      TheMachine = _useState33[0],\n      setTheMachine = _useState33[1];\n\n  var _useState34 = useState([]),\n      machineOptions = _useState34[0],\n      setMachineOptions = _useState34[1];\n\n  var _useState35 = useState(\"\"),\n      search = _useState35[0],\n      setSearch = _useState35[1];\n\n  var _useState36 = useState(null),\n      capturedPhoto = _useState36[0],\n      setCapturedPhoto = _useState36[1];\n\n  var _useState37 = useState(\"environment\"),\n      cameraFacing = _useState37[0],\n      setCameraFacing = _useState37[1];\n\n  var _useState38 = useState(false),\n      addToWebsite = _useState38[0],\n      setAddToWebsite = _useState38[1];\n\n  var _useState39 = useState(false),\n      machinePick = _useState39[0],\n      setMachinePick = _useState39[1];\n\n  var _useState40 = useState(0),\n      freqItem = _useState40[0],\n      setFreqItem = _useState40[1];\n\n  var _useState41 = useState(0),\n      usagePastYear = _useState41[0],\n      setUsagePastYear = _useState41[1];\n\n  var _useState42 = useState(0),\n      machineFrequency = _useState42[0],\n      setMachineFrequency = _useState42[1]; // For extra (dimensions/price/DOM) section collapse.\n\n\n  var _useState43 = useState(false),\n      showExtra = _useState43[0],\n      setShowExtra = _useState43[1]; // For PN/SN \"add new\" functionality.\n\n\n  var _useState44 = useState(false),\n      addingNewPn = _useState44[0],\n      setAddingNewPn = _useState44[1];\n\n  var _useState45 = useState(\"\"),\n      newPn = _useState45[0],\n      setNewPn = _useState45[1];\n\n  var _useState46 = useState(false),\n      addingNewSn = _useState46[0],\n      setAddingNewSn = _useState46[1];\n\n  var _useState47 = useState(\"\"),\n      newSn = _useState47[0],\n      setNewSn = _useState47[1]; // For browsing photos.\n\n\n  var browseInputRef = useRef(null);\n  var cloneSeedRef = useRef(null); // Inside your NewItem component:\n\n  var _useState48 = useState(false),\n      loading = _useState48[0],\n      setLoading = _useState48[1];\n\n  var _useState49 = useState(null),\n      savedDocId = _useState49[0],\n      setSavedDocId = _useState49[1];\n\n  var isMountedRef = useRef(true);\n  useEffect(function () {\n    return function () {\n      isMountedRef.current = false;\n    };\n  }, []);\n\n  var safeSetLoading = function safeSetLoading(value) {\n    if (isMountedRef.current) setLoading(value);\n  };\n\n  var withTimeout = function withTimeout(promise, ms) {\n    var label = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"Operation\";\n    return new Promise(function (resolve, reject) {\n      var timer = setTimeout(function () {\n        reject(new Error(\"\".concat(label, \" timed out after \").concat(Math.ceil(ms / 1000), \"s\")));\n      }, ms);\n      promise.then(function (result) {\n        clearTimeout(timer);\n        resolve(result);\n      })[\"catch\"](function (err) {\n        clearTimeout(timer);\n        reject(err);\n      });\n    });\n  };\n\n  var shallowClean = function shallowClean(obj) {\n    var newObj = {};\n    Object.keys(obj || {}).forEach(function (key) {\n      newObj[key] = obj[key] === undefined ? \"\" : obj[key];\n    });\n    return newObj;\n  };\n\n  useEffect(function () {\n    if (!router.isReady) return;\n    var cloneFrom = router.query.cloneFrom;\n    if (!cloneFrom || cloneSeedRef.current === cloneFrom) return;\n    cloneSeedRef.current = cloneFrom;\n    var cancelled = false;\n    var db = firebase.firestore();\n\n    var toArray = function toArray(value) {\n      if (Array.isArray(value)) return value;\n      if (value === null || value === undefined || value === \"\") return [\"\"];\n      return [value];\n    };\n\n    var toDateString = function toDateString(value) {\n      if (!value) return \"\";\n\n      if (value !== null && value !== void 0 && value.toDate) {\n        var d = value.toDate();\n        return isNaN(d.getTime()) ? \"\" : d.toISOString().slice(0, 10);\n      }\n\n      if (value instanceof Date) {\n        return isNaN(value.getTime()) ? \"\" : value.toISOString().slice(0, 10);\n      }\n\n      if (typeof value === \"string\") {\n        if (/^\\d{4}-\\d{2}-\\d{2}/.test(value)) return value.slice(0, 10);\n        var parsed = Date.parse(value);\n        if (!isNaN(parsed)) return new Date(parsed).toISOString().slice(0, 10);\n      }\n\n      return \"\";\n    };\n\n    var resolveDoc = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ref, collection) {\n        var doc, _doc, _doc2, _doc3;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (ref) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", null);\n\n              case 2:\n                _context.prev = 2;\n\n                if (!(typeof ref.get === \"function\")) {\n                  _context.next = 8;\n                  break;\n                }\n\n                _context.next = 6;\n                return ref.get();\n\n              case 6:\n                doc = _context.sent;\n                return _context.abrupt(\"return\", doc.exists ? _objectSpread({\n                  id: doc.id\n                }, doc.data()) : null);\n\n              case 8:\n                if (!(typeof ref === \"string\")) {\n                  _context.next = 13;\n                  break;\n                }\n\n                _context.next = 11;\n                return db.collection(collection).doc(ref).get();\n\n              case 11:\n                _doc = _context.sent;\n                return _context.abrupt(\"return\", _doc.exists ? _objectSpread({\n                  id: _doc.id\n                }, _doc.data()) : null);\n\n              case 13:\n                if (!(ref !== null && ref !== void 0 && ref.id)) {\n                  _context.next = 18;\n                  break;\n                }\n\n                _context.next = 16;\n                return db.collection(collection).doc(ref.id).get();\n\n              case 16:\n                _doc2 = _context.sent;\n                return _context.abrupt(\"return\", _doc2.exists ? _objectSpread({\n                  id: _doc2.id\n                }, _doc2.data()) : null);\n\n              case 18:\n                if (!(ref !== null && ref !== void 0 && ref.path)) {\n                  _context.next = 23;\n                  break;\n                }\n\n                _context.next = 21;\n                return db.doc(ref.path).get();\n\n              case 21:\n                _doc3 = _context.sent;\n                return _context.abrupt(\"return\", _doc3.exists ? _objectSpread({\n                  id: _doc3.id\n                }, _doc3.data()) : null);\n\n              case 23:\n                _context.next = 28;\n                break;\n\n              case 25:\n                _context.prev = 25;\n                _context.t0 = _context[\"catch\"](2);\n                console.error(\"Clone ref lookup failed (\".concat(collection, \")\"), _context.t0);\n\n              case 28:\n                return _context.abrupt(\"return\", null);\n\n              case 29:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 25]]);\n      }));\n\n      return function resolveDoc(_x, _x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var doc, data, dateValue, arrivalValue, parentDoc, clientFromDoc, clientCurrentDoc, machineFromDoc, machineCurrentDoc;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return db.collection(\"Test\").doc(cloneFrom).get();\n\n            case 3:\n              doc = _context2.sent;\n\n              if (doc.exists) {\n                _context2.next = 7;\n                break;\n              }\n\n              if (!cancelled) {\n                setErr(\"Clone source not found.\");\n                setShowErr(true);\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 7:\n              data = doc.data() || {};\n              dateValue = toDateString(data.date);\n              arrivalValue = toDateString(data.arrival_date) || (typeof data.arrival_date === \"string\" ? data.arrival_date : \"\");\n\n              if (!cancelled) {\n                setItems(function (prev) {\n                  var _data$price, _data$status, _data$poNumber, _data$trackingNumber, _data$length, _data$width, _data$height;\n\n                  return _objectSpread(_objectSpread({}, prev), {}, {\n                    name: data.name || \"\",\n                    pn: toArray(data.pn),\n                    sn: toArray(data.sn),\n                    localSN: \"\",\n                    date: dateValue || prev.date || \"\",\n                    price: (_data$price = data.price) !== null && _data$price !== void 0 ? _data$price : \"\",\n                    status: (_data$status = data.status) !== null && _data$status !== void 0 ? _data$status : \"\",\n                    poNumber: (_data$poNumber = data.poNumber) !== null && _data$poNumber !== void 0 ? _data$poNumber : \"\",\n                    trackingNumber: (_data$trackingNumber = data.trackingNumber) !== null && _data$trackingNumber !== void 0 ? _data$trackingNumber : \"\",\n                    length: (_data$length = data.length) !== null && _data$length !== void 0 ? _data$length : \"\",\n                    width: (_data$width = data.width) !== null && _data$width !== void 0 ? _data$width : \"\",\n                    height: (_data$height = data.height) !== null && _data$height !== void 0 ? _data$height : \"\",\n                    arrival_date: arrivalValue || \"\",\n                    visible: data.visible !== undefined ? data.visible : true\n                  });\n                });\n                setDescriptions(Array.isArray(data.descriptions) && data.descriptions.length ? data.descriptions : [{\n                  description: \"\",\n                  date: \"\"\n                }]);\n                setWorkOrders(Array.isArray(data.workOrders) && data.workOrders.length ? data.workOrders : [{\n                  workOrder: \"\",\n                  date: \"\"\n                }]);\n                setDOM(data.DOM || \"\");\n                setNewLocalFrom(data.newLocalFrom || {\n                  region: \"\",\n                  section: {\n                    letter: \"\",\n                    number: \"\"\n                  },\n                  bin: \"\",\n                  pallet: \"\"\n                });\n                setNewLocalCurrent(data.newLocalCurrent || {\n                  region: \"\",\n                  section: {\n                    letter: \"\",\n                    number: \"\"\n                  },\n                  bin: \"\",\n                  pallet: \"\"\n                });\n                setAddToWebsite(Boolean(data.addedToWebsite));\n                setSavedDocId(null);\n                setSelectedDesc(0);\n              }\n\n              if (data.TheMachine && !cancelled) {\n                setTheMachine(data.TheMachine);\n                setMachineFieldsInitialized(false);\n                if (!oem || oem === \"N/A\") setOem(data.TheMachine.oem || data.TheMachine.OEM || \"\");\n                if (!modality || modality === \"N/A\") setModality(data.TheMachine.modality || data.TheMachine.Modality || \"\");\n                if (!model || model === \"N/A\") setModel(data.TheMachine.model || data.TheMachine.Model || \"\");\n              }\n\n              _context2.next = 14;\n              return resolveDoc(data.Parent, \"Test\");\n\n            case 14:\n              parentDoc = _context2.sent;\n\n              if (parentDoc && !cancelled) {\n                setSelectedParent({\n                  id: parentDoc.id,\n                  name: parentDoc.name || \"\"\n                });\n              }\n\n              _context2.next = 18;\n              return resolveDoc(data.ClientFrom, \"Client\");\n\n            case 18:\n              clientFromDoc = _context2.sent;\n\n              if (clientFromDoc && !cancelled) {\n                setSelectedClientFrom(_objectSpread({\n                  id: clientFromDoc.id\n                }, clientFromDoc));\n              }\n\n              _context2.next = 22;\n              return resolveDoc(data.ClientCurrent, \"Client\");\n\n            case 22:\n              clientCurrentDoc = _context2.sent;\n\n              if (clientCurrentDoc && !cancelled) {\n                setSelectedClientCurrent(_objectSpread({\n                  id: clientCurrentDoc.id\n                }, clientCurrentDoc));\n              }\n\n              _context2.next = 26;\n              return resolveDoc(data.MachineFrom || data.Machine, \"Machine\");\n\n            case 26:\n              machineFromDoc = _context2.sent;\n\n              if (machineFromDoc && !cancelled) {\n                setSelectedMachine({\n                  id: machineFromDoc.id,\n                  name: machineFromDoc.name || machineFromDoc.Model || \"\"\n                });\n\n                if (!data.TheMachine) {\n                  setTheMachine(machineFromDoc);\n                  setMachineFieldsInitialized(false);\n                }\n              }\n\n              _context2.next = 30;\n              return resolveDoc(data.MachineCurrent || data.CurrentMachine, \"Machine\");\n\n            case 30:\n              machineCurrentDoc = _context2.sent;\n\n              if (machineCurrentDoc && !cancelled) {\n                setSelectedCurrentMachine({\n                  id: machineCurrentDoc.id,\n                  name: machineCurrentDoc.name || machineCurrentDoc.Model || \"\"\n                });\n\n                if (!data.TheMachine && !machineFromDoc) {\n                  setTheMachine(machineCurrentDoc);\n                  setMachineFieldsInitialized(false);\n                }\n              }\n\n              _context2.next = 38;\n              break;\n\n            case 34:\n              _context2.prev = 34;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error(\"Clone load failed:\", _context2.t0);\n\n              if (!cancelled) {\n                setErr(\"Failed to load clone data.\");\n                setShowErr(true);\n              }\n\n            case 38:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 34]]);\n    }))();\n\n    return function () {\n      cancelled = true;\n    };\n  }, [router.isReady, router.query.cloneFrom, oem, modality, model]); // -------------------- Since this is \"add\" mode, we do not fetch an existing document.\n  // However, we still fetch global PN and SN options and clients for selection.\n\n  useEffect(function () {\n    function fetchClientsData() {\n      return _fetchClientsData.apply(this, arguments);\n    }\n\n    function _fetchClientsData() {\n      _fetchClientsData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var clientsData;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return fetchClients();\n\n              case 3:\n                clientsData = _context3.sent;\n                console.log(\"Clients:\", clientsData);\n                setClients(clientsData);\n                _context3.next = 11;\n                break;\n\n              case 8:\n                _context3.prev = 8;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.error(\"Error fetching clients: \", _context3.t0);\n\n              case 11:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 8]]);\n      }));\n      return _fetchClientsData.apply(this, arguments);\n    }\n\n    fetchClientsData();\n  }, []);\n  useEffect(function () {\n    function fetchPnSn() {\n      return _fetchPnSn.apply(this, arguments);\n    }\n\n    function _fetchPnSn() {\n      _fetchPnSn = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var db, snapshot, pnSet, snSet;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                db = firebase.firestore();\n                _context4.next = 3;\n                return db.collection(\"Test\").get();\n\n              case 3:\n                snapshot = _context4.sent;\n                pnSet = new Set();\n                snSet = new Set();\n                snapshot.forEach(function (doc) {\n                  var data = doc.data();\n                  if (data.pn) pnSet.add(data.pn);\n                  if (data.sn) snSet.add(data.sn);\n                });\n                setPnOptions(_toConsumableArray(pnSet));\n                setSnOptions(_toConsumableArray(snSet));\n\n              case 9:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n      return _fetchPnSn.apply(this, arguments);\n    }\n\n    fetchPnSn();\n  }, []);\n\n  var _useState50 = useState(false),\n      machineFieldsInitialized = _useState50[0],\n      setMachineFieldsInitialized = _useState50[1];\n\n  useEffect(function () {\n    if (!machineFieldsInitialized && (TheMachine || selectedCurrentMachine || selectedMachine)) {\n      var updatedFields = updateMachineFields(TheMachine, selectedCurrentMachine, selectedMachine); // Only set fields if they are empty or \"N/A\"\n\n      if (!oem || oem === \"N/A\") setOem(updatedFields.oem);\n      if (!modality || modality === \"N/A\") setModality(updatedFields.modality);\n      if (!model || model === \"N/A\") setModel(updatedFields.model);\n      setMachineFieldsInitialized(true);\n    }\n  }, [TheMachine, selectedCurrentMachine, selectedMachine, machineFieldsInitialized]);\n\n  var _useState51 = useState(null),\n      signal = _useState51[0],\n      setSignal = _useState51[1];\n\n  useEffect(function () {\n    if (router.isReady) {\n      setSignal(router.query.signal || null);\n    }\n  }, [router.isReady, router.query.signal]); // -------------------- Handlers for PN and SN dropdowns\n  // PN: when a user selects an existing PN value.\n\n  var handlePnSelect = function handlePnSelect(e) {\n    var selected = e.target.value;\n    setItems(function (prev) {\n      var updatedPn = Array.isArray(prev.pn) ? _toConsumableArray(prev.pn) : [];\n      updatedPn[0] = selected;\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        pn: updatedPn\n      });\n    });\n  };\n\n  var handlePnChange = function handlePnChange(index, value) {\n    setItems(function (prev) {\n      var newPn = _toConsumableArray(prev.pn);\n\n      newPn[index] = value;\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        pn: newPn\n      });\n    });\n  };\n\n  var addPn = function addPn() {\n    if (newPn.trim() !== \"\") {\n      setItems(function (prev) {\n        return _objectSpread(_objectSpread({}, prev), {}, {\n          pn: [].concat(_toConsumableArray(prev.pn), [newPn.trim()])\n        });\n      });\n    }\n\n    setNewPn(\"\");\n    setAddingNewPn(false);\n  }; // SN: when a user selects an existing SN value.\n\n\n  var handleSnSelect = function handleSnSelect(e) {\n    var selected = e.target.value;\n    setItems(function (prev) {\n      var updatedSn = Array.isArray(prev.sn) ? _toConsumableArray(prev.sn) : [];\n      updatedSn[0] = selected;\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        sn: updatedSn\n      });\n    });\n  };\n\n  var handleSnChange = function handleSnChange(index, value) {\n    setItems(function (prev) {\n      var newSn = _toConsumableArray(prev.sn);\n\n      newSn[index] = value;\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        sn: newSn\n      });\n    });\n  };\n\n  var addSn = function addSn() {\n    if (newSn.trim() !== \"\") {\n      setItems(function (prev) {\n        return _objectSpread(_objectSpread({}, prev), {}, {\n          sn: [].concat(_toConsumableArray(prev.sn), [newSn.trim()])\n        });\n      });\n    }\n\n    setNewSn(\"\");\n    setAddingNewSn(false);\n  }; // -------------------- Photo Browse Handlers\n\n\n  var handleBrowsePhotos = function handleBrowsePhotos() {\n    if (browseInputRef.current) {\n      browseInputRef.current.click();\n    }\n  };\n\n  var handleFilesSelected = function handleFilesSelected(e) {\n    var files = e.target.files;\n\n    if (files.length) {\n      var newPhotos = [];\n\n      for (var i = 0; i < files.length; i++) {\n        newPhotos.push({\n          file: files[i],\n          url: URL.createObjectURL(files[i])\n        });\n      }\n\n      setPhotos(function (prevPhotos) {\n        return [].concat(_toConsumableArray(prevPhotos), newPhotos);\n      });\n    }\n\n    e.target.value = \"\";\n  }; // -------------------- Photo Capture Handlers remain as in your index.js\n\n\n  var handleCapture = function handleCapture(err, result) {\n    if (result) {\n      setCapturedPhoto(result);\n    }\n  };\n\n  var capturePhoto = function capturePhoto() {\n    var video = document.querySelector(\"video\");\n    var canvas = document.createElement(\"canvas\");\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    var context = canvas.getContext(\"2d\");\n    context.drawImage(video, 0, 0, canvas.width, canvas.height);\n    canvas.toBlob(function (blob) {\n      setCapturedPhoto(blob);\n    }, \"image/png\");\n  };\n\n  var savePhoto = function savePhoto() {\n    setPhotos(function (prevPhotos) {\n      return [].concat(_toConsumableArray(prevPhotos), [{\n        file: capturedPhoto,\n        url: URL.createObjectURL(capturedPhoto)\n      }]);\n    });\n    setCapturedPhoto(null);\n    setShowCameraModal(false);\n  };\n\n  var removePhoto = function removePhoto(index) {\n    setPhotos(photos.filter(function (_, i) {\n      return i !== index;\n    }));\n  }; // -------------------- Modal Handlers\n\n\n  var handleClose = function handleClose() {\n    return setShow(false);\n  };\n\n  var handleShow = function handleShow() {\n    return setShow(true);\n  };\n\n  var handleCloseErr = function handleCloseErr() {\n    return setShowErr(false);\n  };\n\n  var handleShowErr = function handleShowErr() {\n    return setShowErr(true);\n  };\n\n  var handleCloseSaveModal = function handleCloseSaveModal() {\n    return setShowSaveModal(false);\n  };\n\n  var handleShowSaveModal = function handleShowSaveModal() {\n    return setShowSaveModal(true);\n  };\n\n  var handleCloseDescModal = function handleCloseDescModal() {\n    return setShowDescModal(false);\n  };\n\n  var handleShowDescModal = function handleShowDescModal() {\n    return setShowDescModal(true);\n  };\n\n  var handleCloseWoModal = function handleCloseWoModal() {\n    return setShowWoModal(false);\n  };\n\n  var handleShowWoModal = function handleShowWoModal() {\n    return setShowWoModal(true);\n  };\n\n  var handleCloseClientModal = function handleCloseClientModal() {\n    return setShowClientModal(false);\n  };\n\n  var handleShowClientModal = function handleShowClientModal() {\n    return setShowClientModal(true);\n  };\n\n  var handleCloseMachineModal = function handleCloseMachineModal() {\n    return setShowMachineModal(false);\n  };\n\n  var handleShowMachineModal = function handleShowMachineModal() {\n    setShowMachineModal(true);\n    setShowClientModal(false);\n  };\n\n  var handleCloseParentModal = function handleCloseParentModal() {\n    return setShowParentModal(false);\n  };\n\n  var handleShowParentModal = function handleShowParentModal() {\n    return setShowParentModal(true);\n  }; // -------------------- Work Orders / Descriptions Handlers (unchanged)\n\n\n  var addDescription = function addDescription() {\n    setDescriptions([].concat(_toConsumableArray(descriptions), [{\n      description: \"\",\n      date: \"\"\n    }]));\n  };\n\n  var removeDescription = function removeDescription(index) {\n    setDescriptions(descriptions.filter(function (_, i) {\n      return i !== index;\n    }));\n  };\n\n  var handleDescriptionChange = function handleDescriptionChange(index, field, value) {\n    var newDescriptions = descriptions.map(function (desc, i) {\n      return i === index ? _objectSpread(_objectSpread({}, desc), {}, _defineProperty({}, field, value)) : desc;\n    });\n    setDescriptions(newDescriptions);\n  };\n\n  var addWorkOrder = function addWorkOrder() {\n    setWorkOrders([].concat(_toConsumableArray(workOrders), [{\n      workOrder: \"\",\n      date: \"\"\n    }]));\n  };\n\n  var removeWorkOrder = function removeWorkOrder(index) {\n    setWorkOrders(workOrders.filter(function (_, i) {\n      return i !== index;\n    }));\n  };\n\n  var handleWorkOrderChange = function handleWorkOrderChange(index, field, value) {\n    var newWorkOrders = workOrders.map(function (wo, i) {\n      return i === index ? _objectSpread(_objectSpread({}, wo), {}, _defineProperty({}, field, value)) : wo;\n    });\n    setWorkOrders(newWorkOrders);\n  };\n\n  var listDescriptions = function listDescriptions() {\n    setShowDescModal(true);\n  };\n\n  var selectDescription = function selectDescription(index) {\n    setSelectedDesc(index);\n    setShowDescModal(false);\n  }; // -------------------- Machine Selection (unchanged)\n\n\n  var handleClientInfo = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(clientId) {\n      var db, clientDoc, clientData, machinePromises, machineDocs, machines;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              // Clear any previously selected machine/local loc for the branch\n              if (machinePick) {\n                setSelectedMachine(null);\n                setShowLocalLocFrom(false);\n              } else {\n                setSelectedCurrentMachine(null);\n                setShowLocalLocCurrent(false);\n              }\n\n              db = firebase.firestore();\n              _context5.next = 4;\n              return db.collection(\"Client\").doc(clientId).get();\n\n            case 4:\n              clientDoc = _context5.sent;\n\n              if (!clientDoc.exists) {\n                _context5.next = 16;\n                break;\n              }\n\n              clientData = clientDoc.data();\n\n              if (machinePick) {\n                setSelectedClientFrom(_objectSpread({\n                  id: clientDoc.id\n                }, clientData));\n              } else {\n                setSelectedClientCurrent(_objectSpread({\n                  id: clientDoc.id\n                }, clientData));\n              }\n\n              if (clientData.name === \"SoCalWarehouse\") {\n                if (machinePick) setShowLocalLocFrom(true);else setShowLocalLocCurrent(true);\n              } // Fetch machines for this client:\n\n\n              machinePromises = clientData.machines.map(function (machineRef) {\n                return machineRef.get();\n              });\n              _context5.next = 12;\n              return Promise.all(machinePromises);\n\n            case 12:\n              machineDocs = _context5.sent;\n              machines = machineDocs.map(function (machineDoc) {\n                return _objectSpread({\n                  id: machineDoc.id\n                }, machineDoc.data());\n              });\n              setMachineOptions(machines);\n              handleCloseClientModal();\n\n            case 16:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function handleClientInfo(_x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var fetchMachine = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(machineId) {\n      var db, doc, machineData, machinesSnapshot;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              db = firebase.firestore();\n              _context6.next = 3;\n              return db.collection(\"Machine\").doc(machineId).get();\n\n            case 3:\n              doc = _context6.sent;\n\n              if (!doc.exists) {\n                _context6.next = 16;\n                break;\n              }\n\n              machineData = doc.data();\n              setTheMachine(machineData); // Ensure OEM, Modality, and Model update properly only if necessary\n\n              if (!oem || oem === \"N/A\") setOem(machineData.oem || machineData.OEM || \"\");\n              if (!modality || modality === \"N/A\") setModality(machineData.modality || machineData.Modality || \"\");\n              if (!model || model === \"N/A\") setModel(machineData.model || machineData.Model || \"\"); // Set machine frequency count\n\n              _context6.next = 12;\n              return db.collection(\"Machine\").where(\"Model\", \"==\", machineData.Model || machineData.model).get();\n\n            case 12:\n              machinesSnapshot = _context6.sent;\n              setMachineFrequency(machinesSnapshot.size);\n              _context6.next = 17;\n              break;\n\n            case 16:\n              console.error(\"Machine not found\");\n\n            case 17:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function fetchMachine(_x4) {\n      return _ref5.apply(this, arguments);\n    };\n  }(); // -------------------- Frequency/Usage (unchanged)\n\n\n  var calculateItemFrequencyAndUsage = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(pn) {\n      var db, currentDate, oneYearAgo, itemsSnapshot, usagePastYear;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              db = firebase.firestore();\n              currentDate = new Date();\n              oneYearAgo = new Date();\n              oneYearAgo.setFullYear(currentDate.getFullYear() - 1);\n              _context7.next = 6;\n              return db.collection(\"Test\").where(\"pn\", \"==\", pn).get();\n\n            case 6:\n              itemsSnapshot = _context7.sent;\n              setFreqItem(itemsSnapshot.size);\n              usagePastYear = 0;\n              itemsSnapshot.forEach(function (doc) {\n                var itemData = doc.data();\n                itemData.workOrders.forEach(function (workOrder) {\n                  var workOrderDate = new Date(workOrder.date);\n\n                  if (workOrderDate >= oneYearAgo && workOrderDate <= currentDate) {\n                    usagePastYear++;\n                  }\n                });\n              });\n              setUsagePastYear(usagePastYear);\n\n            case 11:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n\n    return function calculateItemFrequencyAndUsage(_x5) {\n      return _ref6.apply(this, arguments);\n    };\n  }(); // -------------------- Photo Upload (unchanged)\n\n\n  var uploadPhotos = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(docID) {\n      var storageRef, i, photoRef, metadata, url;\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              storageRef = firebase.storage().ref();\n              i = 0;\n\n            case 2:\n              if (!(i < photos.length)) {\n                _context8.next = 15;\n                break;\n              }\n\n              if (!photos[i].file) {\n                _context8.next = 12;\n                break;\n              }\n\n              photoRef = storageRef.child(\"Parts/\".concat(docID, \"/\").concat(docID).concat(i === 0 ? \".jpg\" : \".\".concat(i + 1, \".jpg\")));\n              metadata = {\n                contentType: \"image/png\"\n              };\n              _context8.next = 8;\n              return photoRef.put(photos[i].file, metadata);\n\n            case 8:\n              _context8.next = 10;\n              return photoRef.getDownloadURL();\n\n            case 10:\n              url = _context8.sent;\n              photos[i].url = url;\n\n            case 12:\n              i++;\n              _context8.next = 2;\n              break;\n\n            case 15:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n\n    return function uploadPhotos(_x6) {\n      return _ref7.apply(this, arguments);\n    };\n  }(); // -------------------- Submission Handler\n  // For NewItem, only require Name and Description.\n\n\n  function handleSubmit(_x7) {\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  function _handleSubmit() {\n    _handleSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee16(event) {\n      var docId;\n      return _regeneratorRuntime.wrap(function _callee16$(_context16) {\n        while (1) {\n          switch (_context16.prev = _context16.next) {\n            case 0:\n              event.preventDefault();\n\n              if (isReadyForActions) {\n                _context16.next = 5;\n                break;\n              }\n\n              handleShow();\n              _context16.next = 21;\n              break;\n\n            case 5:\n              safeSetLoading(true); // start loading before async work\n\n              _context16.prev = 6;\n              _context16.next = 9;\n              return toSend();\n\n            case 9:\n              docId = _context16.sent;\n\n              if (!docId) {\n                setErr(\"Save failed. Please try again.\");\n                setShowErr(true);\n              }\n\n              _context16.next = 18;\n              break;\n\n            case 13:\n              _context16.prev = 13;\n              _context16.t0 = _context16[\"catch\"](6);\n              console.error(_context16.t0);\n              setErr((_context16.t0 === null || _context16.t0 === void 0 ? void 0 : _context16.t0.message) || \"Save failed.\");\n              setShowErr(true);\n\n            case 18:\n              _context16.prev = 18;\n              safeSetLoading(false); // end loading after async work completes\n\n              return _context16.finish(18);\n\n            case 21:\n            case \"end\":\n              return _context16.stop();\n          }\n        }\n      }, _callee16, null, [[6, 13, 18, 21]]);\n    }));\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  function toSend() {\n    return _toSend.apply(this, arguments);\n  }\n\n  function _toSend() {\n    _toSend = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee17() {\n      var redirect,\n          options,\n          id,\n          db,\n          _options$forceNew,\n          forceNew,\n          existingId,\n          currentUser,\n          userEmail,\n          machineData,\n          formattedItems,\n          fromDetails,\n          currentDetails,\n          docId,\n          queueAssociationUpdates,\n          queuePhotoUpload,\n          newDocId,\n          cleanFormattedItems,\n          _args17 = arguments;\n\n      return _regeneratorRuntime.wrap(function _callee17$(_context17) {\n        while (1) {\n          switch (_context17.prev = _context17.next) {\n            case 0:\n              redirect = _args17.length > 0 && _args17[0] !== undefined ? _args17[0] : true;\n              options = _args17.length > 1 && _args17[1] !== undefined ? _args17[1] : {};\n              id = router.query.id;\n              db = firebase.firestore();\n              _options$forceNew = options.forceNew, forceNew = _options$forceNew === void 0 ? false : _options$forceNew;\n              existingId = forceNew ? null : savedDocId || id || null; // Get the current authenticated user\n\n              currentUser = firebase.auth().currentUser;\n              userEmail = currentUser ? currentUser.email : \"unknown\"; // Always use the current state values for OEM, modality, and model.\n\n              machineData = _objectSpread(_objectSpread({}, TheMachine || {}), {}, {\n                oem: oem,\n                modality: modality,\n                model: model\n              });\n              formattedItems = _objectSpread(_objectSpread({}, items), {}, {\n                descriptions: descriptions,\n                workOrders: workOrders\n              }); // Remove any unused fields.\n\n              formattedItems.status = items.status || \"\";\n              formattedItems.nameLower = (items.name || \"\").toLowerCase();\n              formattedItems.nameTokens = buildNameTokens(items.name);\n              formattedItems.DOM = DOM; // Date of Manufacture\n\n              fromDetails = buildLocalLocObject(newLocalFrom);\n              currentDetails = buildLocalLocObject(newLocalCurrent);\n\n              if (Object.keys(fromDetails).length) {\n                formattedItems.newLocalFrom = fromDetails;\n                formattedItems.localLocFrom = formatLoc(newLocalFrom) || \"\";\n              } else {\n                formattedItems.localLocFrom = \"\";\n                formattedItems.newLocalFrom = {};\n              }\n\n              if (Object.keys(currentDetails).length) {\n                formattedItems.newLocalCurrent = currentDetails;\n                formattedItems.localLocCurrent = formatLoc(newLocalCurrent) || \"\";\n              } else {\n                formattedItems.localLocCurrent = \"\";\n                formattedItems.newLocalCurrent = {};\n              }\n\n              formattedItems.date = items.date || \"\";\n              formattedItems.arrival_date = items.arrival_date || \"\"; // NEW: Arrival Date\n\n              formattedItems.poNumber = items.poNumber || \"\";\n              formattedItems.trackingNumber = items.trackingNumber || \"\";\n              formattedItems.TheMachine = machineData || {};\n              formattedItems.addedToWebsite = addToWebsite;\n              formattedItems.visible = items.visible; // Add the current user's email under the \"user\" field\n\n              formattedItems.user = userEmail;\n              formattedItems.lastEdited = userEmail; // Clean pn and sn arrays to replace undefined values with an empty string.\n\n              formattedItems.pn = (items.pn || []).map(function (value) {\n                return value === undefined ? \"\" : value;\n              });\n              formattedItems.sn = (items.sn || []).map(function (value) {\n                return value === undefined ? \"\" : value;\n              }); // Set machine references for each branch.\n\n              if (selectedMachine && selectedMachine.id) {\n                formattedItems.MachineFrom = db.collection(\"Machine\").doc(selectedMachine.id);\n              }\n\n              if (selectedCurrentMachine && selectedCurrentMachine.id) {\n                formattedItems.MachineCurrent = db.collection(\"Machine\").doc(selectedCurrentMachine.id);\n              } // ***** NEW: Set client references for each branch *****\n\n\n              if (selectedClientFrom && selectedClientFrom.id) {\n                formattedItems.ClientFrom = db.collection(\"Client\").doc(selectedClientFrom.id);\n              }\n\n              if (selectedClientCurrent && selectedClientCurrent.id) {\n                formattedItems.ClientCurrent = db.collection(\"Client\").doc(selectedClientCurrent.id);\n              } // ******************************************************\n\n\n              if (selectedParent && selectedParent.id) {\n                formattedItems.Parent = db.collection(\"Test\").doc(selectedParent.id);\n              } // Only add dateCreated if this is a new document\n\n\n              if (!existingId) {\n                formattedItems.dateCreated = new Date().toISOString().split(\"T\")[0]; // \"YYYY-MM-DD\"\n              } // --- LOCAL SN LOGIC ---\n\n\n              docId = existingId;\n\n              queueAssociationUpdates = function queueAssociationUpdates(targetDocId) {\n                var updates = [];\n\n                if (selectedMachine && selectedMachine.id) {\n                  updates.push(db.collection(\"Machine\").doc(selectedMachine.id).update({\n                    associatedParts: firebase.firestore.FieldValue.arrayUnion(db.collection(\"Test\").doc(targetDocId))\n                  }));\n                }\n\n                if (selectedCurrentMachine && selectedCurrentMachine.id) {\n                  updates.push(db.collection(\"Machine\").doc(selectedCurrentMachine.id).update({\n                    associatedParts: firebase.firestore.FieldValue.arrayUnion(db.collection(\"Test\").doc(targetDocId))\n                  }));\n                }\n\n                if (updates.length) {\n                  Promise.allSettled(updates).then(function (results) {\n                    results.forEach(function (result) {\n                      if (result.status === \"rejected\") {\n                        console.error(\"Error updating associatedParts:\", result.reason);\n                      }\n                    });\n                  });\n                }\n              };\n\n              queuePhotoUpload = function queuePhotoUpload(targetDocId) {\n                var hasNewPhotos = photos.some(function (photo) {\n                  return photo && photo.file;\n                });\n                if (!hasNewPhotos) return;\n                uploadPhotos(targetDocId)[\"catch\"](function (error) {\n                  console.error(\"Error uploading photos:\", error);\n                });\n              };\n\n              _context17.prev = 38;\n\n              if (!docId) {\n                _context17.next = 64;\n                break;\n              }\n\n              // Check if a localSN is provided and if it differs from the current docId.\n              newDocId = items.localSN && items.localSN.trim() !== \"\" ? items.localSN.trim() : docId;\n\n              if (!(docId !== newDocId)) {\n                _context17.next = 57;\n                break;\n              }\n\n              _context17.next = 44;\n              return withTimeout(db.collection(\"Test\").doc(newDocId).set(formattedItems), 45000, \"Firestore save\");\n\n            case 44:\n              queueAssociationUpdates(newDocId);\n              queuePhotoUpload(newDocId); // Delete the old document.\n\n              _context17.prev = 46;\n              _context17.next = 49;\n              return withTimeout(db.collection(\"Test\").doc(docId)[\"delete\"](), 20000, \"Delete old item\");\n\n            case 49:\n              _context17.next = 54;\n              break;\n\n            case 51:\n              _context17.prev = 51;\n              _context17.t0 = _context17[\"catch\"](46);\n              console.error(\"Error deleting old item:\", _context17.t0);\n\n            case 54:\n              // Set docId to the new document ID.\n              docId = newDocId;\n              _context17.next = 62;\n              break;\n\n            case 57:\n              // Deep-clean the formattedItems to remove any undefined nested values.\n              cleanFormattedItems = shallowClean(formattedItems);\n              _context17.next = 60;\n              return withTimeout(db.collection(\"Test\").doc(docId).update(cleanFormattedItems), 45000, \"Firestore save\");\n\n            case 60:\n              queueAssociationUpdates(docId);\n              queuePhotoUpload(docId);\n\n            case 62:\n              _context17.next = 69;\n              break;\n\n            case 64:\n              // For a new item, if localSN is provided, use it; otherwise, generate a custom ID.\n              docId = items.localSN && items.localSN.trim() !== \"\" ? items.localSN.trim() : generateCustomID();\n              _context17.next = 67;\n              return withTimeout(db.collection(\"Test\").doc(docId).set(formattedItems), 45000, \"Firestore save\");\n\n            case 67:\n              queueAssociationUpdates(docId);\n              queuePhotoUpload(docId);\n\n            case 69:\n              console.log(\"Item saved!\");\n\n              if (!forceNew) {\n                setSavedDocId(docId);\n              } // Redirect to the new URL using the new document id.\n\n\n              if (redirect) {\n                router.push(\"/NewSearch/item/\".concat(docId));\n              } else {\n                // Optionally, show a save confirmation modal.\n                handleShowSaveModal();\n              }\n\n              return _context17.abrupt(\"return\", docId);\n\n            case 75:\n              _context17.prev = 75;\n              _context17.t1 = _context17[\"catch\"](38);\n              console.error(\"Error saving data:\", _context17.t1);\n              return _context17.abrupt(\"return\", null);\n\n            case 79:\n            case \"end\":\n              return _context17.stop();\n          }\n        }\n      }, _callee17, null, [[38, 75], [46, 51]]);\n    }));\n    return _toSend.apply(this, arguments);\n  }\n\n  var isReadyForActions = (items.name || \"\").trim() !== \"\" && (((_descriptions$selecte = descriptions[selectedDesc]) === null || _descriptions$selecte === void 0 ? void 0 : _descriptions$selecte.description) || \"\").trim() !== \"\";\n\n  var ensureSaved = /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9() {\n      var docId;\n      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              if (isReadyForActions) {\n                _context9.next = 3;\n                break;\n              }\n\n              handleShow();\n              return _context9.abrupt(\"return\", null);\n\n            case 3:\n              if (!savedDocId) {\n                _context9.next = 5;\n                break;\n              }\n\n              return _context9.abrupt(\"return\", savedDocId);\n\n            case 5:\n              _context9.next = 7;\n              return toSend(false);\n\n            case 7:\n              docId = _context9.sent;\n\n              if (!docId) {\n                setErr(\"Failed to save item before action.\");\n                setShowErr(true);\n              }\n\n              return _context9.abrupt(\"return\", docId);\n\n            case 10:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9);\n    }));\n\n    return function ensureSaved() {\n      return _ref8.apply(this, arguments);\n    };\n  }(); // -------------------- Info Modal Handlers (unchanged)\n\n\n  var _useState52 = useState(false),\n      showInfoModal = _useState52[0],\n      setShowInfoModal = _useState52[1];\n\n  var _useState53 = useState(\"\"),\n      itemName = _useState53[0],\n      setItemName = _useState53[1];\n\n  var handleShowInfoModal = /*#__PURE__*/function () {\n    var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {\n      var db, docId, doc, data;\n      return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              db = firebase.firestore();\n              _context10.prev = 1;\n              docId = savedDocId || router.query.id;\n\n              if (docId) {\n                _context10.next = 7;\n                break;\n              }\n\n              setErr(\"Save the item before viewing info.\");\n              setShowErr(true);\n              return _context10.abrupt(\"return\");\n\n            case 7:\n              _context10.next = 9;\n              return db.collection(\"Test\").doc(docId).get();\n\n            case 9:\n              doc = _context10.sent;\n\n              if (doc.exists) {\n                data = doc.data();\n                setItemName(data.name || \"N/A\");\n                setShowInfoModal(true);\n              } else {\n                console.error(\"Item not found\");\n              }\n\n              _context10.next = 16;\n              break;\n\n            case 13:\n              _context10.prev = 13;\n              _context10.t0 = _context10[\"catch\"](1);\n              console.error(\"Error fetching item info:\", _context10.t0);\n\n            case 16:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10, null, [[1, 13]]);\n    }));\n\n    return function handleShowInfoModal() {\n      return _ref9.apply(this, arguments);\n    };\n  }();\n\n  var handleCloseInfoModal = function handleCloseInfoModal() {\n    return setShowInfoModal(false);\n  };\n\n  var handleCloseCameraModal = function handleCloseCameraModal() {\n    setShowCameraModal(false);\n    setCapturedPhoto(null);\n  };\n\n  var handleChange = function handleChange(field) {\n    return function (event) {\n      var value = event.target ? event.target.value : event.value;\n      setItems(function (prevItems) {\n        return _objectSpread(_objectSpread({}, prevItems), {}, _defineProperty({}, field, value));\n      });\n    };\n  };\n\n  var mostRecentWorkOrder = workOrders && workOrders.length > 0 ? workOrders.reduce(function (latest, current) {\n    var latestDate = new Date(latest.date);\n    var currentDate = new Date(current.date);\n    return currentDate > latestDate ? current : latest;\n  }, workOrders[0]) : {};\n\n  var handleShowCameraModal = function handleShowCameraModal() {\n    setShowCameraModal(true);\n  };\n\n  var generateCustomID = function generateCustomID() {\n    var randomNum = Math.floor(10000 + Math.random() * 90000);\n    return \"AIS\".concat(randomNum);\n  };\n\n  var handlePrint = /*#__PURE__*/function () {\n    var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11() {\n      var docId, payload, response, result;\n      return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n        while (1) {\n          switch (_context11.prev = _context11.next) {\n            case 0:\n              _context11.next = 2;\n              return ensureSaved();\n\n            case 2:\n              docId = _context11.sent;\n\n              if (docId) {\n                _context11.next = 5;\n                break;\n              }\n\n              return _context11.abrupt(\"return\");\n\n            case 5:\n              payload = {\n                name: items.name,\n                pn: items.pn,\n                sn: items.sn,\n                wo: workOrders && workOrders.length > 0 ? workOrders[0].workOrder : \"\",\n                status: items.status,\n                local_sn: docId,\n                descriptions: descriptions,\n                date: items.date || new Date().toISOString().split(\"T\")[0],\n                DOM: DOM,\n                oem: oem,\n                modality: modality,\n                model: model,\n                poNumber: items.poNumber,\n                arrival_date: items.arrival_date,\n                trackingNumber: items.trackingNumber\n              };\n              console.log(\"Payload for printing:\", payload);\n              _context11.prev = 7;\n              _context11.next = 10;\n              return fetch(\"https://9d70-174-76-22-138.ngrok-free.app/print-label\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(payload)\n              });\n\n            case 10:\n              response = _context11.sent;\n              _context11.next = 13;\n              return response.json();\n\n            case 13:\n              result = _context11.sent;\n              console.log(\"Print result:\", result);\n              _context11.next = 20;\n              break;\n\n            case 17:\n              _context11.prev = 17;\n              _context11.t0 = _context11[\"catch\"](7);\n              console.error(\"Error printing label:\", _context11.t0);\n\n            case 20:\n            case \"end\":\n              return _context11.stop();\n          }\n        }\n      }, _callee11, null, [[7, 17]]);\n    }));\n\n    return function handlePrint() {\n      return _ref10.apply(this, arguments);\n    };\n  }();\n\n  var handleSendToInflow = /*#__PURE__*/function () {\n    var _ref11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12() {\n      var _descriptions$selecte2, docId, name, description, imageUrls, sku, arrivalISO, pnStr, snStr, mostRecentWO, customFields, created;\n\n      return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n        while (1) {\n          switch (_context12.prev = _context12.next) {\n            case 0:\n              _context12.prev = 0;\n              _context12.next = 3;\n              return ensureSaved();\n\n            case 3:\n              docId = _context12.sent;\n\n              if (docId) {\n                _context12.next = 6;\n                break;\n              }\n\n              return _context12.abrupt(\"return\");\n\n            case 6:\n              name = (items.name || \"\").trim();\n\n              if (name) {\n                _context12.next = 10;\n                break;\n              }\n\n              alert(\"Item needs a name before sending to inFlow.\");\n              return _context12.abrupt(\"return\");\n\n            case 10:\n              description = (((_descriptions$selecte2 = descriptions[selectedDesc]) === null || _descriptions$selecte2 === void 0 ? void 0 : _descriptions$selecte2.description) || \"\").trim();\n              imageUrls = photos.map(function (p) {\n                return p.url;\n              }).filter(Boolean);\n              sku = docId.toString();\n              arrivalISO = items.arrival_date ? new Date(items.arrival_date).toISOString().slice(0, 10) : \"\";\n              pnStr = Array.isArray(items.pn) ? items.pn.filter(Boolean).join(\", \") : items.pn || \"\";\n              snStr = Array.isArray(items.sn) ? items.sn.filter(Boolean).join(\", \") : items.sn || \"\";\n              mostRecentWO = workOrders !== null && workOrders !== void 0 && workOrders.length ? workOrders.reduce(function (latest, cur) {\n                return new Date(cur.date) > new Date(latest.date) ? cur : latest;\n              }) : {\n                workOrder: \"\",\n                date: \"\"\n              };\n              customFields = {\n                custom1: (oem || \"\").trim(),\n                custom2: (modality || \"\").trim(),\n                custom3: (model || \"\").trim(),\n                custom4: (description || \"\").trim(),\n                custom5: (mostRecentWO.workOrder || \"\").trim(),\n                custom6: ((selectedClientFrom === null || selectedClientFrom === void 0 ? void 0 : selectedClientFrom.name) || \"\").trim(),\n                custom7: pnStr,\n                custom8: snStr,\n                custom9: arrivalISO,\n                custom10: ((selectedClientCurrent === null || selectedClientCurrent === void 0 ? void 0 : selectedClientCurrent.name) || \"\").trim()\n              };\n              _context12.next = 20;\n              return InflowAPI.upsertProduct({\n                name: name,\n                description: description,\n                sku: sku,\n                imageUrls: imageUrls,\n                customFields: customFields\n              });\n\n            case 20:\n              created = _context12.sent;\n              alert(\"Sent to inFlow successfully. ID: \".concat((created === null || created === void 0 ? void 0 : created.productId) || (created === null || created === void 0 ? void 0 : created.id) || \"(unknown)\"));\n              _context12.next = 28;\n              break;\n\n            case 24:\n              _context12.prev = 24;\n              _context12.t0 = _context12[\"catch\"](0);\n              console.error(_context12.t0);\n              alert(\"Error sending to inFlow: \" + _context12.t0.message);\n\n            case 28:\n            case \"end\":\n              return _context12.stop();\n          }\n        }\n      }, _callee12, null, [[0, 24]]);\n    }));\n\n    return function handleSendToInflow() {\n      return _ref11.apply(this, arguments);\n    };\n  }();\n\n  var handleBluefolderButton = /*#__PURE__*/function () {\n    var _ref12 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13() {\n      var _descriptions$selecte3;\n\n      var docId, currentWorkOrder, payload, response, result;\n      return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n        while (1) {\n          switch (_context13.prev = _context13.next) {\n            case 0:\n              _context13.next = 2;\n              return ensureSaved();\n\n            case 2:\n              docId = _context13.sent;\n\n              if (docId) {\n                _context13.next = 5;\n                break;\n              }\n\n              return _context13.abrupt(\"return\");\n\n            case 5:\n              currentWorkOrder = workOrders && workOrders.length > 0 ? workOrders[0].workOrder : \"\";\n\n              if (currentWorkOrder) {\n                _context13.next = 9;\n                break;\n              }\n\n              alert(\"Please fill out the work order field before adding to BlueFolder.\");\n              return _context13.abrupt(\"return\");\n\n            case 9:\n              payload = {\n                name: items.name,\n                pn: items.pn[0] || \"\",\n                sn: items.sn[0] || \"\",\n                status: items.status,\n                description: ((_descriptions$selecte3 = descriptions[selectedDesc]) === null || _descriptions$selecte3 === void 0 ? void 0 : _descriptions$selecte3.description) || \"\",\n                workOrder: currentWorkOrder,\n                localsn: docId\n              };\n              _context13.prev = 10;\n              _context13.next = 13;\n              return fetch(\"https://9d70-174-76-22-138.ngrok-free.app/bluefolder\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(payload)\n              });\n\n            case 13:\n              response = _context13.sent;\n              _context13.next = 16;\n              return response.json();\n\n            case 16:\n              result = _context13.sent;\n              alert(\"BlueFolder service item added successfully!\");\n              console.log(\"BlueFolder result:\", result);\n              _context13.next = 25;\n              break;\n\n            case 21:\n              _context13.prev = 21;\n              _context13.t0 = _context13[\"catch\"](10);\n              console.error(\"BlueFolder error:\", _context13.t0);\n              alert(\"Error adding data to BlueFolder.\");\n\n            case 25:\n            case \"end\":\n              return _context13.stop();\n          }\n        }\n      }, _callee13, null, [[10, 21]]);\n    }));\n\n    return function handleBluefolderButton() {\n      return _ref12.apply(this, arguments);\n    };\n  }();\n\n  var handleAddToSlack = /*#__PURE__*/function () {\n    var _ref13 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee14() {\n      var which,\n          _sort$,\n          _ref14,\n          _items$trackingNumber,\n          _json$debug,\n          _json$debug2,\n          docId,\n          safeName,\n          title,\n          pn0,\n          sn0,\n          pn_sn,\n          mostRecentWO,\n          description,\n          tracking,\n          local_sn,\n          photoUrls,\n          resp,\n          json,\n          _args14 = arguments;\n\n      return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n        while (1) {\n          switch (_context14.prev = _context14.next) {\n            case 0:\n              which = _args14.length > 0 && _args14[0] !== undefined ? _args14[0] : \"shipping\";\n              _context14.prev = 1;\n              _context14.next = 4;\n              return ensureSaved();\n\n            case 4:\n              docId = _context14.sent;\n\n              if (docId) {\n                _context14.next = 7;\n                break;\n              }\n\n              return _context14.abrupt(\"return\");\n\n            case 7:\n              safeName = ((items === null || items === void 0 ? void 0 : items.name) || docId || \"Untitled\").trim();\n              title = \"\".concat(safeName).concat(docId ? \" (\".concat(docId, \")\") : \"\");\n              pn0 = Array.isArray(items === null || items === void 0 ? void 0 : items.pn) ? items.pn[0] : items === null || items === void 0 ? void 0 : items.pn;\n              sn0 = Array.isArray(items === null || items === void 0 ? void 0 : items.sn) ? items.sn[0] : items === null || items === void 0 ? void 0 : items.sn;\n              pn_sn = [pn0 && \"PN: \".concat(pn0), sn0 && \"SN: \".concat(sn0)].filter(Boolean).join(\"  \");\n              mostRecentWO = workOrders && workOrders.length ? (_sort$ = _toConsumableArray(workOrders).sort(function (a, b) {\n                return new Date((b === null || b === void 0 ? void 0 : b.date) || 0) - new Date((a === null || a === void 0 ? void 0 : a.date) || 0);\n              })[0]) === null || _sort$ === void 0 ? void 0 : _sort$.workOrder : \"\";\n              description = selectedDesc != null && descriptions !== null && descriptions !== void 0 && descriptions[selectedDesc] ? descriptions[selectedDesc].description || \"\" : (items === null || items === void 0 ? void 0 : items.description) || \"\";\n              tracking = (_ref14 = (_items$trackingNumber = items === null || items === void 0 ? void 0 : items.trackingNumber) !== null && _items$trackingNumber !== void 0 ? _items$trackingNumber : items === null || items === void 0 ? void 0 : items.tracking) !== null && _ref14 !== void 0 ? _ref14 : \"\";\n              local_sn = docId || (items === null || items === void 0 ? void 0 : items.localSN) || \"\";\n              photoUrls = Array.isArray(photos) ? photos.map(function (p) {\n                return p === null || p === void 0 ? void 0 : p.url;\n              }).filter(Boolean) : [];\n              _context14.next = 19;\n              return fetch(\"/api/slack/add-to-list\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  listKey: which,\n                  title: title,\n                  pn_sn: pn_sn,\n                  work_order: mostRecentWO || \"\",\n                  local_sn: local_sn,\n                  tracking: tracking,\n                  description: (description || \"\").trim(),\n                  photoUrls: photoUrls\n                })\n              });\n\n            case 19:\n              resp = _context14.sent;\n              _context14.next = 22;\n              return resp.json();\n\n            case 22:\n              json = _context14.sent;\n              console.log(\"[SLACK][handleAddToSlack] response:\", json);\n              if (json !== null && json !== void 0 && (_json$debug = json.debug) !== null && _json$debug !== void 0 && _json$debug.steps) console.table(json.debug.steps);\n              if (json !== null && json !== void 0 && (_json$debug2 = json.debug) !== null && _json$debug2 !== void 0 && _json$debug2.photos) console.table(json.debug.photos);\n\n              if (!(!resp.ok || !(json !== null && json !== void 0 && json.ok))) {\n                _context14.next = 30;\n                break;\n              }\n\n              setErr(\"Slack add failed: \".concat((json === null || json === void 0 ? void 0 : json.error) || \"unknown error\"));\n              setShowErr(true);\n              return _context14.abrupt(\"return\");\n\n            case 30:\n              alert(\"Added to Slack \".concat(which === \"shipping\" ? \"Shipping\" : which === \"receiving\" ? \"Receiving\" : \"Tasks\", \" list.\"));\n              _context14.next = 38;\n              break;\n\n            case 33:\n              _context14.prev = 33;\n              _context14.t0 = _context14[\"catch\"](1);\n              console.error(_context14.t0);\n              setErr(\"Error adding to Slack\");\n              setShowErr(true);\n\n            case 38:\n            case \"end\":\n              return _context14.stop();\n          }\n        }\n      }, _callee14, null, [[1, 33]]);\n    }));\n\n    return function handleAddToSlack() {\n      return _ref13.apply(this, arguments);\n    };\n  }();\n\n  var handleToggleAddToWebsite = /*#__PURE__*/function () {\n    var _ref15 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee15() {\n      var docId, next;\n      return _regeneratorRuntime.wrap(function _callee15$(_context15) {\n        while (1) {\n          switch (_context15.prev = _context15.next) {\n            case 0:\n              _context15.next = 2;\n              return ensureSaved();\n\n            case 2:\n              docId = _context15.sent;\n\n              if (docId) {\n                _context15.next = 5;\n                break;\n              }\n\n              return _context15.abrupt(\"return\");\n\n            case 5:\n              next = !addToWebsite;\n              setAddToWebsite(next);\n              _context15.prev = 7;\n              _context15.next = 10;\n              return firebase.firestore().collection(\"Test\").doc(docId).update({\n                addedToWebsite: next\n              });\n\n            case 10:\n              _context15.next = 15;\n              break;\n\n            case 12:\n              _context15.prev = 12;\n              _context15.t0 = _context15[\"catch\"](7);\n              console.error(\"Error updating addedToWebsite:\", _context15.t0);\n\n            case 15:\n            case \"end\":\n              return _context15.stop();\n          }\n        }\n      }, _callee15, null, [[7, 12]]);\n    }));\n\n    return function handleToggleAddToWebsite() {\n      return _ref15.apply(this, arguments);\n    };\n  }();\n\n  var handleAddNewPn = function handleAddNewPn() {\n    if (newPn.trim() !== \"\") {\n      setItems(function (prev) {\n        return _objectSpread(_objectSpread({}, prev), {}, {\n          pn: [].concat(_toConsumableArray(prev.pn), [newPn.trim()])\n        });\n      });\n    }\n\n    setNewPn(\"\");\n    setAddingNewPn(false);\n  };\n\n  var handleAddNewSn = function handleAddNewSn() {\n    if (newSn.trim() !== \"\") {\n      setItems(function (prev) {\n        return _objectSpread(_objectSpread({}, prev), {}, {\n          sn: [].concat(_toConsumableArray(prev.sn), [newSn.trim()])\n        });\n      });\n    }\n\n    setNewSn(\"\");\n    setAddingNewSn(false);\n  };\n\n  var _useState54 = useState(false),\n      showLocalLocFrom = _useState54[0],\n      setShowLocalLocFrom = _useState54[1];\n\n  var _useState55 = useState(false),\n      showLocalLocCurrent = _useState55[0],\n      setShowLocalLocCurrent = _useState55[1];\n\n  var _useState56 = useState(false),\n      showNewLocalModalFrom = _useState56[0],\n      setShowNewLocalModalFrom = _useState56[1];\n\n  var _useState57 = useState(false),\n      showNewLocalModalCurrent = _useState57[0],\n      setShowNewLocalModalCurrent = _useState57[1];\n\n  function handleClone(_x8) {\n    return _handleClone.apply(this, arguments);\n  }\n\n  function _handleClone() {\n    _handleClone = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee18(event) {\n      var docId;\n      return _regeneratorRuntime.wrap(function _callee18$(_context18) {\n        while (1) {\n          switch (_context18.prev = _context18.next) {\n            case 0:\n              event.preventDefault();\n\n              if (isReadyForActions) {\n                _context18.next = 4;\n                break;\n              }\n\n              handleShow(); // your existing error modal\n\n              return _context18.abrupt(\"return\");\n\n            case 4:\n              safeSetLoading(true);\n              _context18.prev = 5;\n              _context18.next = 8;\n              return toSend(false, {\n                forceNew: true\n              });\n\n            case 8:\n              docId = _context18.sent;\n\n              if (!docId) {\n                setErr(\"Save failed. Please try again.\");\n                setShowErr(true);\n              } else {\n                // Prepare for the next clone without overwriting the last one.\n                setSavedDocId(null);\n                setItems(function (prev) {\n                  return _objectSpread(_objectSpread({}, prev), {}, {\n                    localSN: \"\"\n                  });\n                });\n              }\n\n              _context18.next = 17;\n              break;\n\n            case 12:\n              _context18.prev = 12;\n              _context18.t0 = _context18[\"catch\"](5);\n              console.error(_context18.t0);\n              setErr((_context18.t0 === null || _context18.t0 === void 0 ? void 0 : _context18.t0.message) || \"Save failed.\");\n              setShowErr(true);\n\n            case 17:\n              _context18.prev = 17;\n              safeSetLoading(false);\n              return _context18.finish(17);\n\n            case 20:\n            case \"end\":\n              return _context18.stop();\n          }\n        }\n      }, _callee18, null, [[5, 12, 17, 20]]);\n    }));\n    return _handleClone.apply(this, arguments);\n  }\n\n  var condition = function condition(name) {\n    return name && name.toLowerCase() === \"interior socal\";\n  };\n\n  var handleSetSelectedMachine = function handleSetSelectedMachine(machine) {\n    var _machine$name;\n\n    var isSocalInterior = ((_machine$name = machine.name) === null || _machine$name === void 0 ? void 0 : _machine$name.toLowerCase()) === \"interior socal\";\n\n    if (machinePick) {\n      var _selectedClientFrom$n;\n\n      setSelectedMachine({\n        id: machine.id,\n        name: machine.name\n      });\n      setShowLocalLocFrom(isSocalInterior || (selectedClientFrom === null || selectedClientFrom === void 0 ? void 0 : (_selectedClientFrom$n = selectedClientFrom.name) === null || _selectedClientFrom$n === void 0 ? void 0 : _selectedClientFrom$n.toLowerCase()) === \"socalwarehouse\");\n    } else {\n      var _selectedClientCurren;\n\n      setSelectedCurrentMachine({\n        id: machine.id,\n        name: machine.name\n      });\n      setShowLocalLocCurrent(isSocalInterior || (selectedClientCurrent === null || selectedClientCurrent === void 0 ? void 0 : (_selectedClientCurren = selectedClientCurrent.name) === null || _selectedClientCurren === void 0 ? void 0 : _selectedClientCurren.toLowerCase()) === \"socalwarehouse\");\n    }\n\n    fetchMachine(machine.id);\n    setShowMachineModal(false);\n  };\n\n  var _useState58 = useState(0),\n      currentPnIndex = _useState58[0],\n      setCurrentPnIndex = _useState58[1];\n\n  var _useState59 = useState(false),\n      showDropdown = _useState59[0],\n      setShowDropdown = _useState59[1];\n\n  var _useState60 = useState(0),\n      currentSnIndex = _useState60[0],\n      setCurrentSnIndex = _useState60[1];\n\n  var _useState61 = useState(false),\n      showSnDropdown = _useState61[0],\n      setShowSnDropdown = _useState61[1];\n\n  var handleAddNewClient = function handleAddNewClient() {\n    // Generate a random client number as part of the URL.\n    var randomNum = Math.floor(10000 + Math.random() * 90000); // When pushing, include a query parameter (from=item) and the current item id if available.\n\n    router.push(\"/NewSearch/client/AIS\".concat(randomNum, \"/addClient?from=addItem\"));\n  };\n\n  var _useState62 = useState(false),\n      showMachineSelect = _useState62[0],\n      setShowMachineSelect = _useState62[1];\n\n  var _useState63 = useState(null),\n      selectedClientFrom = _useState63[0],\n      setSelectedClientFrom = _useState63[1];\n\n  var _useState64 = useState(null),\n      selectedClientCurrent = _useState64[0],\n      setSelectedClientCurrent = _useState64[1];\n\n  useEffect(function () {\n    var _selectedClientFrom$n2;\n\n    setShowLocalLocFrom((selectedClientFrom === null || selectedClientFrom === void 0 ? void 0 : (_selectedClientFrom$n2 = selectedClientFrom.name) === null || _selectedClientFrom$n2 === void 0 ? void 0 : _selectedClientFrom$n2.toLowerCase()) === \"socalwarehouse\");\n  }, [selectedClientFrom]);\n  useEffect(function () {\n    var _selectedClientCurren2;\n\n    setShowLocalLocCurrent((selectedClientCurrent === null || selectedClientCurrent === void 0 ? void 0 : (_selectedClientCurren2 = selectedClientCurrent.name) === null || _selectedClientCurren2 === void 0 ? void 0 : _selectedClientCurren2.toLowerCase()) === \"socalwarehouse\");\n  }, [selectedClientCurrent]);\n  return __jsx(LoggedIn, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1419,\n      columnNumber: 5\n    }\n  }, __jsx(MachineSelectionModal, {\n    show: machineSelectionModal,\n    handleClose: function handleClose() {\n      return setMachineSelectionModal(false);\n    },\n    setMachine: handleSetSelectedMachine,\n    machineOptions: machineOptions // if your modal needs the list of machines\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1421,\n      columnNumber: 7\n    }\n  }), __jsx(Modal, {\n    show: show,\n    onHide: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1427,\n      columnNumber: 7\n    }\n  }, __jsx(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1428,\n      columnNumber: 9\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1429,\n      columnNumber: 11\n    }\n  }, \"Error\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1431,\n      columnNumber: 9\n    }\n  }, \"Missing required field: Name and Description\"), __jsx(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1432,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    variant: \"primary\",\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1433,\n      columnNumber: 11\n    }\n  }, \"Ok\"))), __jsx(Modal, {\n    show: showErr,\n    onHide: handleCloseErr,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1439,\n      columnNumber: 7\n    }\n  }, __jsx(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1440,\n      columnNumber: 9\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1441,\n      columnNumber: 11\n    }\n  }, \"Error\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1443,\n      columnNumber: 9\n    }\n  }, Err), __jsx(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1444,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    variant: \"primary\",\n    onClick: handleCloseErr,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1445,\n      columnNumber: 11\n    }\n  }, \"Ok\"))), __jsx(Modal, {\n    show: showSaveModal,\n    onHide: handleCloseSaveModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1450,\n      columnNumber: 7\n    }\n  }, __jsx(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1451,\n      columnNumber: 9\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1452,\n      columnNumber: 11\n    }\n  }, \"Save Confirmation\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1454,\n      columnNumber: 9\n    }\n  }, \"Data has been saved successfully.\"), __jsx(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1455,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    variant: \"primary\",\n    onClick: handleCloseSaveModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1456,\n      columnNumber: 11\n    }\n  }, \"Ok\"))), __jsx(Modal, {\n    show: showDescModal,\n    onHide: handleCloseDescModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1461,\n      columnNumber: 7\n    }\n  }, __jsx(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1462,\n      columnNumber: 9\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1463,\n      columnNumber: 11\n    }\n  }, \"Descriptions\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1465,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    variant: \"primary\",\n    className: \"mb-3\",\n    onClick: addDescription,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1466,\n      columnNumber: 11\n    }\n  }, \"Add Description\"), descriptions.map(function (desc, index) {\n    return __jsx(Row, {\n      key: index,\n      className: \"mb-3\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1470,\n        columnNumber: 13\n      }\n    }, __jsx(Button, {\n      variant: \"outline-secondary\",\n      className: \"w-100\",\n      onClick: function onClick() {\n        return selectDescription(index);\n      },\n      style: {\n        cursor: \"pointer\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1471,\n        columnNumber: 15\n      }\n    }, __jsx(\"div\", {\n      className: \"d-flex justify-content-between\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1477,\n        columnNumber: 17\n      }\n    }, __jsx(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1478,\n        columnNumber: 19\n      }\n    }, desc.description || \"Description\"), __jsx(\"span\", {\n      style: {\n        borderLeft: \"1px solid #ccc\",\n        paddingLeft: \"10px\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1479,\n        columnNumber: 19\n      }\n    }, desc.date || \"Date\"))));\n  }), __jsx(Button, {\n    variant: \"primary\",\n    onClick: handleCloseDescModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1491,\n      columnNumber: 11\n    }\n  }, \"OK\"))), __jsx(Modal, {\n    show: showWoModal,\n    onHide: handleCloseWoModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1496,\n      columnNumber: 7\n    }\n  }, __jsx(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1497,\n      columnNumber: 9\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1498,\n      columnNumber: 11\n    }\n  }, \"Work Orders\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1500,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    variant: \"primary\",\n    className: \"mb-3\",\n    onClick: addWorkOrder,\n    style: {\n      marginBottom: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1501,\n      columnNumber: 11\n    }\n  }, \"Add Work Order\"), workOrders.map(function (wo, index) {\n    return __jsx(Row, {\n      key: index,\n      className: \"mb-3\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1510,\n        columnNumber: 13\n      }\n    }, __jsx(Col, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1511,\n        columnNumber: 15\n      }\n    }, __jsx(Form.Control, {\n      type: \"text\",\n      placeholder: \"Work Order\",\n      value: wo.workOrder,\n      onChange: function onChange(e) {\n        return handleWorkOrderChange(index, \"workOrder\", e.target.value);\n      },\n      style: {\n        marginBottom: \"0.5rem\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1512,\n        columnNumber: 17\n      }\n    })), __jsx(Col, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1522,\n        columnNumber: 15\n      }\n    }, __jsx(Form.Control, {\n      type: \"date\",\n      placeholder: \"Date\",\n      value: wo.date,\n      onChange: function onChange(e) {\n        return handleWorkOrderChange(index, \"date\", e.target.value);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1523,\n        columnNumber: 17\n      }\n    })), __jsx(Col, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1532,\n        columnNumber: 15\n      }\n    }, __jsx(Button, {\n      variant: \"danger\",\n      onClick: function onClick() {\n        return removeWorkOrder(index);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1533,\n        columnNumber: 17\n      }\n    }, \"Remove\")));\n  }), __jsx(Button, {\n    variant: \"primary\",\n    onClick: handleCloseWoModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1539,\n      columnNumber: 11\n    }\n  }, \"OK\"))), __jsx(ClientInfoModal, {\n    show: showMachineModal,\n    handleClose: handleCloseMachineModal,\n    selectedClient: selectedClient,\n    machineOptions: machineOptions,\n    setSelectedMachine: handleSetSelectedMachine,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1545,\n      columnNumber: 7\n    }\n  }), __jsx(Modal, {\n    show: showClientModal,\n    onHide: handleCloseClientModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1552,\n      columnNumber: 7\n    }\n  }, __jsx(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1553,\n      columnNumber: 9\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1554,\n      columnNumber: 11\n    }\n  }, \"Select Client\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1556,\n      columnNumber: 9\n    }\n  }, __jsx(FormControl, {\n    type: \"text\",\n    placeholder: \"Search by name\",\n    className: \"mb-3\",\n    value: search,\n    onChange: function onChange(e) {\n      return setSearch(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1557,\n      columnNumber: 11\n    }\n  }), __jsx(ClientTable, {\n    clients: clients.filter(function (client) {\n      return client.name.toLowerCase().includes(search.toLowerCase());\n    }),\n    onSelectClient: handleClientInfo,\n    onInfoClick: handleClientInfo,\n    clearSelection: function clearSelection() {\n      return handleClientInfo(null);\n    },\n    onAddClient: handleAddNewClient // new prop\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1564,\n      columnNumber: 11\n    }\n  }))), __jsx(ParentModal, {\n    show: showParentModal,\n    handleClose: handleCloseParentModal,\n    setSelectedParent: setSelectedParent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1576,\n      columnNumber: 7\n    }\n  }), __jsx(MachineSelectionModal, {\n    show: machineSelectionModal,\n    handleClose: function handleClose() {\n      return setMachineSelectionModal(false);\n    },\n    setMachine: setTheMachine,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1581,\n      columnNumber: 7\n    }\n  }), __jsx(Modal, {\n    show: showCameraModal,\n    onHide: handleCloseCameraModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1587,\n      columnNumber: 7\n    }\n  }, __jsx(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1588,\n      columnNumber: 9\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1589,\n      columnNumber: 11\n    }\n  }, \"Take a Photo\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1591,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"camera\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1592,\n      columnNumber: 11\n    }\n  }, !capturedPhoto ? __jsx(BarcodeScannerComponent, {\n    width: \"100%\",\n    height: 300,\n    onUpdate: handleCapture,\n    facingMode: cameraFacing,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1594,\n      columnNumber: 15\n    }\n  }) : __jsx(\"div\", {\n    className: \"photo-preview\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1601,\n      columnNumber: 15\n    }\n  }, __jsx(\"img\", {\n    src: URL.createObjectURL(capturedPhoto),\n    alt: \"captured\",\n    style: {\n      width: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1602,\n      columnNumber: 17\n    }\n  })))), __jsx(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1611,\n      columnNumber: 9\n    }\n  }, !capturedPhoto ? __jsx(React.Fragment, null, __jsx(Button, {\n    onClick: capturePhoto,\n    style: {\n      borderRadius: \"50%\",\n      width: \"60px\",\n      height: \"60px\",\n      position: \"absolute\",\n      left: \"50%\",\n      transform: \"translateX(-50%)\",\n      bottom: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1614,\n      columnNumber: 15\n    }\n  }, \"\\uD83D\\uDCF7\"), __jsx(Button, {\n    onClick: function onClick() {\n      return setCameraFacing(function (prev) {\n        return prev === \"environment\" ? \"user\" : \"environment\";\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1628,\n      columnNumber: 15\n    }\n  }, \"Flip Camera\"), __jsx(Button, {\n    variant: \"secondary\",\n    onClick: handleCloseCameraModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1637,\n      columnNumber: 15\n    }\n  }, \"Cancel\")) : __jsx(React.Fragment, null, __jsx(Button, {\n    variant: \"secondary\",\n    onClick: function onClick() {\n      return setCapturedPhoto(null);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1643,\n      columnNumber: 15\n    }\n  }, \"Retake\"), __jsx(Button, {\n    variant: \"primary\",\n    onClick: savePhoto,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1649,\n      columnNumber: 15\n    }\n  }, \"OK\")))), __jsx(Modal, {\n    show: showDescModal,\n    onHide: handleCloseDescModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1657,\n      columnNumber: 7\n    }\n  }, __jsx(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1658,\n      columnNumber: 9\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1659,\n      columnNumber: 11\n    }\n  }, \"Descriptions\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1661,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    variant: \"primary\",\n    className: \"mb-3\",\n    onClick: addDescription,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1662,\n      columnNumber: 11\n    }\n  }, \"Add Description\"), descriptions.map(function (desc, index) {\n    return __jsx(Row, {\n      key: index,\n      className: \"mb-3\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1666,\n        columnNumber: 13\n      }\n    }, __jsx(Button, {\n      variant: \"outline-secondary\",\n      className: \"w-100\",\n      onClick: function onClick() {\n        return selectDescription(index);\n      },\n      style: {\n        cursor: \"pointer\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1667,\n        columnNumber: 15\n      }\n    }, __jsx(\"div\", {\n      className: \"d-flex justify-content-between\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1673,\n        columnNumber: 17\n      }\n    }, __jsx(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1674,\n        columnNumber: 19\n      }\n    }, desc.description || \"Description\"), __jsx(\"span\", {\n      style: {\n        borderLeft: \"1px solid #ccc\",\n        paddingLeft: \"10px\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1675,\n        columnNumber: 19\n      }\n    }, desc.date || \"Date\"))));\n  }), __jsx(Button, {\n    variant: \"primary\",\n    onClick: handleCloseDescModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1687,\n      columnNumber: 11\n    }\n  }, \"OK\"))), __jsx(InfoModal, {\n    show: showInfoModal,\n    handleClose: handleCloseInfoModal,\n    itemName: items.name,\n    dimensions: \"\".concat(items.length, \",\").concat(items.width, \",\").concat(items.height),\n    price: items.price,\n    freqI: freqItem,\n    freqM: machineFrequency,\n    usage: usagePastYear,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1694,\n      columnNumber: 7\n    }\n  }), loading && __jsx(\"div\", {\n    style: {\n      position: \"fixed\",\n      top: 0,\n      left: 0,\n      width: \"100%\",\n      height: \"100%\",\n      backgroundColor: \"rgba(255, 255, 255, 0.7)\",\n      backdropFilter: \"blur(5px)\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      zIndex: 9999 // Make sure it's above everything else\n\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1705,\n      columnNumber: 9\n    }\n  }, __jsx(Spinner, {\n    animation: \"border\",\n    variant: \"primary\",\n    role: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1720,\n      columnNumber: 11\n    }\n  }, __jsx(\"span\", {\n    className: \"visually-hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1721,\n      columnNumber: 13\n    }\n  }, \"Loading...\"))), __jsx(Container, {\n    fluid: true,\n    className: styles.page,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1726,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: styles.shell,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1727,\n      columnNumber: 9\n    }\n  }, __jsx(Card, {\n    className: styles.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1728,\n      columnNumber: 11\n    }\n  }, __jsx(Card.Body, {\n    className: styles.cardBody,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1729,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: styles.header,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1730,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: styles.kicker,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1731,\n      columnNumber: 17\n    }\n  }, \"New Item\"), __jsx(\"h2\", {\n    className: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1732,\n      columnNumber: 17\n    }\n  }, \"Add New Item\"), __jsx(\"div\", {\n    className: styles.subtitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1733,\n      columnNumber: 17\n    }\n  }, \"Capture details, photos, and routing before saving.\")), __jsx(Form, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1737,\n      columnNumber: 15\n    }\n  }, __jsx(Row, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1739,\n      columnNumber: 17\n    }\n  }, __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1740,\n      columnNumber: 19\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1741,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1742,\n      columnNumber: 23\n    }\n  }, \"Name\"), __jsx(Form.Control, {\n    type: \"text\",\n    value: items.name,\n    onChange: handleChange(\"name\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1743,\n      columnNumber: 23\n    }\n  }))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1750,\n      columnNumber: 19\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"pn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1751,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1752,\n      columnNumber: 23\n    }\n  }, \"Product Number\"), __jsx(\"div\", {\n    style: {\n      position: \"relative\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1753,\n      columnNumber: 23\n    }\n  }, __jsx(InputGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1754,\n      columnNumber: 25\n    }\n  }, __jsx(Form.Control, {\n    type: \"text\",\n    value: items.pn[currentPnIndex] || \"\",\n    onChange: function onChange(e) {\n      return handlePnChange(currentPnIndex, e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1756,\n      columnNumber: 27\n    }\n  }), __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: function onClick() {\n      return setShowDropdown(!showDropdown);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1764,\n      columnNumber: 27\n    }\n  }, \"\\u25BE\"), __jsx(InputGroup.Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1771,\n      columnNumber: 27\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: function onClick() {\n      return setAddingNewPn(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1772,\n      columnNumber: 29\n    }\n  }, \"+\"))), showDropdown && __jsx(\"div\", {\n    style: {\n      position: \"absolute\",\n      top: \"100%\",\n      left: 0,\n      right: 0,\n      backgroundColor: \"white\",\n      border: \"1px solid #ccc\",\n      zIndex: 1000,\n      maxHeight: \"150px\",\n      overflowY: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1782,\n      columnNumber: 27\n    }\n  }, items.pn.map(function (pnOption, idx) {\n    return __jsx(\"div\", {\n      key: idx,\n      style: {\n        padding: \"8px\",\n        cursor: \"pointer\"\n      },\n      onClick: function onClick() {\n        setCurrentPnIndex(idx);\n        setShowDropdown(false);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1796,\n        columnNumber: 31\n      }\n    }, pnOption);\n  }))), addingNewPn && __jsx(Form.Control, {\n    type: \"text\",\n    placeholder: \"Enter new PN\",\n    value: newPn,\n    onChange: function onChange(e) {\n      return setNewPn(e.target.value);\n    },\n    onBlur: handleAddNewPn,\n    onKeyDown: function onKeyDown(e) {\n      if (e.key === \"Enter\") {\n        handleAddNewPn();\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1812,\n      columnNumber: 25\n    }\n  })))), __jsx(Row, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1829,\n      columnNumber: 17\n    }\n  }, __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1830,\n      columnNumber: 19\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"sn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1831,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1832,\n      columnNumber: 23\n    }\n  }, \"Serial Number\"), __jsx(\"div\", {\n    style: {\n      position: \"relative\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1833,\n      columnNumber: 23\n    }\n  }, __jsx(InputGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1834,\n      columnNumber: 25\n    }\n  }, __jsx(Form.Control, {\n    type: \"text\",\n    value: items.sn[currentSnIndex] || \"\",\n    onChange: function onChange(e) {\n      return handleSnChange(currentSnIndex, e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1836,\n      columnNumber: 27\n    }\n  }), __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: function onClick() {\n      return setShowSnDropdown(!showSnDropdown);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1844,\n      columnNumber: 27\n    }\n  }, \"\\u25BE\"), __jsx(InputGroup.Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1851,\n      columnNumber: 27\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: function onClick() {\n      return setAddingNewSn(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1852,\n      columnNumber: 29\n    }\n  }, \"+\"))), showSnDropdown && __jsx(\"div\", {\n    style: {\n      position: \"absolute\",\n      top: \"100%\",\n      left: 0,\n      right: 0,\n      backgroundColor: \"white\",\n      border: \"1px solid #ccc\",\n      zIndex: 1000,\n      maxHeight: \"150px\",\n      overflowY: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1862,\n      columnNumber: 27\n    }\n  }, items.sn.map(function (snOption, idx) {\n    return __jsx(\"div\", {\n      key: idx,\n      style: {\n        padding: \"8px\",\n        cursor: \"pointer\"\n      },\n      onClick: function onClick() {\n        setCurrentSnIndex(idx);\n        setShowSnDropdown(false);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1876,\n        columnNumber: 31\n      }\n    }, snOption);\n  }))), addingNewSn && __jsx(Form.Control, {\n    type: \"text\",\n    placeholder: \"Enter new SN\",\n    value: newSn,\n    onChange: function onChange(e) {\n      return setNewSn(e.target.value);\n    },\n    onBlur: handleAddNewSn,\n    onKeyDown: function onKeyDown(e) {\n      if (e.key === \"Enter\") {\n        handleAddNewSn();\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1892,\n      columnNumber: 25\n    }\n  }))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1907,\n      columnNumber: 19\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1908,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1909,\n      columnNumber: 23\n    }\n  }, \"Status\"), __jsx(Form.Select, {\n    value: items.status || \"\",\n    onChange: handleChange(\"status\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1910,\n      columnNumber: 23\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1914,\n      columnNumber: 25\n    }\n  }, \"Select status\"), __jsx(\"option\", {\n    value: \"Good\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1915,\n      columnNumber: 25\n    }\n  }, \"Good\"), __jsx(\"option\", {\n    value: \"Bad\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1916,\n      columnNumber: 25\n    }\n  }, \"Bad\"), __jsx(\"option\", {\n    value: \"Unknown\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1917,\n      columnNumber: 25\n    }\n  }, \"Unknown\"))))), __jsx(Row, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1923,\n      columnNumber: 17\n    }\n  }, __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1924,\n      columnNumber: 19\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"localSN\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1925,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1926,\n      columnNumber: 23\n    }\n  }, \"Local SN\"), __jsx(Form.Control, {\n    type: \"text\",\n    placeholder: \"Enter Local SN\",\n    value: items.localSN || \"\",\n    onChange: handleChange(\"localSN\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1927,\n      columnNumber: 23\n    }\n  }))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1935,\n      columnNumber: 19\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"arrivalDate\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1936,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1937,\n      columnNumber: 23\n    }\n  }, \"Arrival Date\"), __jsx(Form.Control, {\n    placeholder: \"Enter Arrival Date\",\n    type: \"date\",\n    value: items.arrival_date,\n    onChange: function onChange(e) {\n      var value = e.target.value;\n      setItems(function (prev) {\n        return _objectSpread(_objectSpread({}, prev), {}, {\n          arrival_date: value\n        });\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1938,\n      columnNumber: 23\n    }\n  }))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1952,\n      columnNumber: 19\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"trackingNumber\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1953,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1954,\n      columnNumber: 23\n    }\n  }, \"Tracking Number\"), __jsx(Form.Control, {\n    placeholder: \"Tracking Number\",\n    type: \"text\",\n    value: items.trackingNumber,\n    onChange: handleChange(\"trackingNumber\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1955,\n      columnNumber: 23\n    }\n  })))), __jsx(Row, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1965,\n      columnNumber: 17\n    }\n  }, __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1966,\n      columnNumber: 19\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"oem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1967,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1968,\n      columnNumber: 23\n    }\n  }, \"OEM\"), __jsx(Form.Control, {\n    type: \"text\",\n    placeholder: \"OEM\",\n    value: oem,\n    onChange: function onChange(e) {\n      return setOem(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1969,\n      columnNumber: 23\n    }\n  }))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1977,\n      columnNumber: 19\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"modality\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1978,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1979,\n      columnNumber: 23\n    }\n  }, \"Modality\"), __jsx(Form.Control, {\n    type: \"text\",\n    placeholder: \"Modality\",\n    value: modality,\n    onChange: function onChange(e) {\n      return setModality(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1980,\n      columnNumber: 23\n    }\n  }))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1988,\n      columnNumber: 19\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"model\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1989,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1990,\n      columnNumber: 23\n    }\n  }, \"Model\"), __jsx(Form.Control, {\n    type: \"text\",\n    placeholder: \"Model\",\n    value: model,\n    onChange: function onChange(e) {\n      return setModel(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1991,\n      columnNumber: 23\n    }\n  })))), __jsx(\"div\", {\n    style: {\n      marginBottom: \"1rem\",\n      marginTop: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2001,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"d-flex align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2002,\n      columnNumber: 19\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: handleShowWoModal,\n    className: \"me-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2003,\n      columnNumber: 21\n    }\n  }, \"Manage Work Orders\"), workOrders.length > 0 && __jsx(\"div\", {\n    className: \"d-flex flex-column align-items-start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2011,\n      columnNumber: 23\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2012,\n      columnNumber: 25\n    }\n  }, \"Work Order\"), __jsx(Form.Control, {\n    type: \"text\",\n    placeholder: \"Most Recent Work Order\",\n    value: (mostRecentWorkOrder === null || mostRecentWorkOrder === void 0 ? void 0 : mostRecentWorkOrder.workOrder) || \"\",\n    onChange: function onChange(e) {\n      return handleWorkOrderChange(workOrders.indexOf(mostRecentWorkOrder), \"workOrder\", e.target.value);\n    },\n    style: {\n      marginBottom: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2013,\n      columnNumber: 25\n    }\n  }), __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2026,\n      columnNumber: 25\n    }\n  }, \"Date\"), __jsx(Form.Control, {\n    type: \"date\",\n    placeholder: \"Work Order Date\",\n    value: (mostRecentWorkOrder === null || mostRecentWorkOrder === void 0 ? void 0 : mostRecentWorkOrder.date) || \"\",\n    onChange: function onChange(e) {\n      return handleWorkOrderChange(workOrders.indexOf(mostRecentWorkOrder), \"date\", e.target.value);\n    },\n    style: {\n      marginBottom: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2027,\n      columnNumber: 25\n    }\n  })))), __jsx(\"div\", {\n    style: {\n      marginBottom: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2045,\n      columnNumber: 17\n    }\n  }, __jsx(Form.Group, {\n    controlId: \"desc\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2046,\n      columnNumber: 19\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: listDescriptions,\n    className: \"mb-2 me-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2047,\n      columnNumber: 21\n    }\n  }, \"List Descriptions\"), __jsx(Form.Control, {\n    as: \"textarea\",\n    rows: 3,\n    placeholder: \"Enter description\",\n    value: ((_descriptions$selecte4 = descriptions[selectedDesc]) === null || _descriptions$selecte4 === void 0 ? void 0 : _descriptions$selecte4.description) || \"\",\n    onChange: function onChange(e) {\n      return handleDescriptionChange(selectedDesc, \"description\", e.target.value);\n    },\n    style: {\n      marginBottom: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2054,\n      columnNumber: 21\n    }\n  }), __jsx(Form.Control, {\n    type: \"date\",\n    value: ((_descriptions$selecte5 = descriptions[selectedDesc]) === null || _descriptions$selecte5 === void 0 ? void 0 : _descriptions$selecte5.date) || \"\",\n    onChange: function onChange(e) {\n      return handleDescriptionChange(selectedDesc, \"date\", e.target.value);\n    },\n    style: {\n      marginTop: \"0.5rem\",\n      marginBottom: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2068,\n      columnNumber: 21\n    }\n  }))), __jsx(\"div\", {\n    style: {\n      marginBottom: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2083,\n      columnNumber: 17\n    }\n  }, __jsx(Row, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2084,\n      columnNumber: 19\n    }\n  }, __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2085,\n      columnNumber: 21\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: function onClick() {\n      setMachinePick(true);\n      handleShowClientModal();\n    },\n    className: \"me-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2086,\n      columnNumber: 23\n    }\n  }, \"Select From\"), selectedClientFrom && __jsx(\"div\", {\n    style: {\n      border: \"1px solid #ccc\",\n      padding: \"0.75rem\",\n      borderRadius: \"4px\",\n      marginBottom: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2097,\n      columnNumber: 25\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2105,\n      columnNumber: 27\n    }\n  }, __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2106,\n      columnNumber: 29\n    }\n  }, \"Selected Client (From):\"), \" \", selectedClientFrom.name), __jsx(\"div\", {\n    style: {\n      marginTop: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2109,\n      columnNumber: 27\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: function onClick() {\n      return setShowMachineModal(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2110,\n      columnNumber: 29\n    }\n  }, \"Select Machine for \", selectedClientFrom.name), selectedMachine && __jsx(React.Fragment, null, __jsx(\"p\", {\n    style: {\n      marginTop: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2118,\n      columnNumber: 33\n    }\n  }, __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2119,\n      columnNumber: 35\n    }\n  }, \"Selected Machine (From):\"), \" \", selectedMachine.name), showLocalLocFrom && __jsx(React.Fragment, null, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: function onClick() {\n      return setShowNewLocalModalFrom(true);\n    },\n    className: \"w-100 mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2124,\n      columnNumber: 37\n    }\n  }, [newLocalFrom.region, ((_newLocalFrom$section = newLocalFrom.section) === null || _newLocalFrom$section === void 0 ? void 0 : _newLocalFrom$section.letter) + ((_newLocalFrom$section2 = newLocalFrom.section) === null || _newLocalFrom$section2 === void 0 ? void 0 : _newLocalFrom$section2.number), newLocalFrom.bin && \"B\".concat(newLocalFrom.bin), newLocalFrom.pallet && \"P\".concat(newLocalFrom.pallet)].filter(Boolean).join(\"-\") || \"Set Local Location\"), __jsx(Modal, {\n    show: showNewLocalModalFrom,\n    onHide: function onHide() {\n      return setShowNewLocalModalFrom(false);\n    },\n    centered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2143,\n      columnNumber: 37\n    }\n  }, __jsx(Modal.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2150,\n      columnNumber: 39\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2151,\n      columnNumber: 41\n    }\n  }, \"Edit Local Loc (From)\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2155,\n      columnNumber: 39\n    }\n  }, __jsx(NewLocal, {\n    selectedClient: selectedClientFrom,\n    showLocalLoc: showNewLocalModalFrom,\n    value: newLocalFrom,\n    onChange: setNewLocalFrom,\n    onSave: function onSave(p) {\n      setNewLocalFrom(p);\n      setShowNewLocalModalFrom(false);\n    },\n    onCancel: function onCancel() {\n      return setShowNewLocalModalFrom(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2156,\n      columnNumber: 41\n    }\n  })))))))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2179,\n      columnNumber: 21\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: function onClick() {\n      setMachinePick(false);\n      handleShowClientModal();\n    },\n    className: \"me-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2180,\n      columnNumber: 23\n    }\n  }, \"Select Current\"), selectedClientCurrent && __jsx(\"div\", {\n    style: {\n      border: \"1px solid #ccc\",\n      padding: \"0.75rem\",\n      borderRadius: \"4px\",\n      marginBottom: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2191,\n      columnNumber: 25\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2199,\n      columnNumber: 27\n    }\n  }, __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2200,\n      columnNumber: 29\n    }\n  }, \"Selected Client (Current):\"), \" \", selectedClientCurrent.name), __jsx(\"div\", {\n    style: {\n      marginTop: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2203,\n      columnNumber: 27\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: function onClick() {\n      return setShowMachineModal(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2204,\n      columnNumber: 29\n    }\n  }, \"Select Machine for \", selectedClientCurrent.name), selectedCurrentMachine && __jsx(React.Fragment, null, __jsx(\"p\", {\n    style: {\n      marginTop: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2212,\n      columnNumber: 33\n    }\n  }, __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2213,\n      columnNumber: 35\n    }\n  }, \"Selected Machine (Current):\"), \" \", selectedCurrentMachine.name), showLocalLocCurrent && __jsx(React.Fragment, null, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: function onClick() {\n      return setShowNewLocalModalCurrent(true);\n    },\n    className: \"w-100 mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2218,\n      columnNumber: 37\n    }\n  }, [newLocalCurrent.region, ((_newLocalCurrent$sect = newLocalCurrent.section) === null || _newLocalCurrent$sect === void 0 ? void 0 : _newLocalCurrent$sect.letter) + ((_newLocalCurrent$sect2 = newLocalCurrent.section) === null || _newLocalCurrent$sect2 === void 0 ? void 0 : _newLocalCurrent$sect2.number), newLocalCurrent.bin && \"B\".concat(newLocalCurrent.bin), newLocalCurrent.pallet && \"P\".concat(newLocalCurrent.pallet)].filter(Boolean).join(\"-\") || \"Set Local Location\"), __jsx(Modal, {\n    show: showNewLocalModalCurrent,\n    onHide: function onHide() {\n      return setShowNewLocalModalCurrent(false);\n    },\n    centered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2237,\n      columnNumber: 37\n    }\n  }, __jsx(Modal.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2244,\n      columnNumber: 39\n    }\n  }, __jsx(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2245,\n      columnNumber: 41\n    }\n  }, \"Edit Local Loc (Current)\")), __jsx(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2249,\n      columnNumber: 39\n    }\n  }, __jsx(NewLocal, {\n    selectedClient: selectedClientCurrent,\n    showLocalLoc: showNewLocalModalCurrent,\n    value: newLocalCurrent,\n    onChange: setNewLocalCurrent,\n    onSave: function onSave(p) {\n      setNewLocalCurrent(p);\n      setShowNewLocalModalCurrent(false);\n    },\n    onCancel: function onCancel() {\n      return setShowNewLocalModalCurrent(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2250,\n      columnNumber: 41\n    }\n  })))))))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2275,\n      columnNumber: 21\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: handleShowParentModal,\n    className: \"me-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2276,\n      columnNumber: 23\n    }\n  }, \"Select Parent\"), selectedParent && __jsx(Form.Control, {\n    type: \"text\",\n    placeholder: \"Selected Parent\",\n    value: selectedParent.name,\n    readOnly: true,\n    style: {\n      cursor: \"default\",\n      marginTop: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2284,\n      columnNumber: 25\n    }\n  })))), __jsx(\"div\", {\n    style: {\n      marginBottom: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2296,\n      columnNumber: 17\n    }\n  }, __jsx(Row, {\n    className: \"mb-3 \".concat(styles.photoActionsRow),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2297,\n      columnNumber: 19\n    }\n  }, __jsx(Col, {\n    xs: 12,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2298,\n      columnNumber: 21\n    }\n  }, __jsx(ButtonGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2299,\n      columnNumber: 23\n    }\n  }, __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: handleShowCameraModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2300,\n      columnNumber: 25\n    }\n  }, \"Take Photo\"), __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: handleBrowsePhotos,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2306,\n      columnNumber: 25\n    }\n  }, \"Browse\"))), __jsx(Col, {\n    xs: 12,\n    md: 6,\n    className: styles.photoActionsRight,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2314,\n      columnNumber: 21\n    }\n  }, __jsx(Button, {\n    variant: \"success\",\n    onClick: handleSendToInflow,\n    disabled: !isReadyForActions,\n    style: {\n      marginLeft: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2315,\n      columnNumber: 23\n    }\n  }, \"Send to inFlow\"), __jsx(Button, {\n    variant: \"secondary\",\n    onClick: handleBluefolderButton,\n    disabled: !isReadyForActions,\n    style: {\n      marginLeft: \"0.5rem\",\n      marginRight: \".5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2323,\n      columnNumber: 23\n    }\n  }, \"BlueFolder\"), __jsx(Button, {\n    variant: addToWebsite ? \"primary\" : \"outline-primary\",\n    onClick: handleToggleAddToWebsite,\n    disabled: !isReadyForActions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2331,\n      columnNumber: 23\n    }\n  }, addToWebsite ? \"Added to Website\" : \"Add to Website\"), __jsx(Form.Check, {\n    type: \"checkbox\",\n    id: \"hide-checkbox\",\n    label: \"Hide\",\n    checked: !items.visible,\n    onChange: function onChange(e) {\n      var isHidden = e.currentTarget.checked;\n      setItems(function (prev) {\n        return _objectSpread(_objectSpread({}, prev), {}, {\n          visible: !isHidden\n        });\n      });\n    },\n    className: \"ms-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2338,\n      columnNumber: 23\n    }\n  }))), __jsx(\"input\", {\n    type: \"file\",\n    accept: \"image/*\",\n    multiple: true,\n    ref: browseInputRef,\n    style: {\n      display: \"none\"\n    },\n    onChange: handleFilesSelected,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2354,\n      columnNumber: 19\n    }\n  })), __jsx(\"div\", {\n    className: \"mt-3 d-flex flex-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2364,\n      columnNumber: 17\n    }\n  }, photos.map(function (photo, index) {\n    return __jsx(\"div\", {\n      key: index,\n      className: \"d-flex flex-column align-items-center mb-2 me-2\",\n      style: {\n        width: \"100px\",\n        height: \"100px\",\n        position: \"relative\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2366,\n        columnNumber: 21\n      }\n    }, __jsx(\"img\", {\n      src: photo.url,\n      alt: \"Photo \".concat(index + 1),\n      style: {\n        width: \"100%\",\n        height: \"100%\",\n        objectFit: \"cover\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2375,\n        columnNumber: 23\n      }\n    }), photo.file && __jsx(Button, {\n      variant: \"danger\",\n      size: \"sm\",\n      style: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        padding: \"0 5px\"\n      },\n      onClick: function onClick() {\n        return removePhoto(index);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2385,\n        columnNumber: 25\n      }\n    }, \"X\"));\n  })), __jsx(\"div\", {\n    className: \"mt-3 d-flex flex-wrap align-items-center \".concat(styles.actionRow),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2405,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    variant: \"primary\",\n    type: \"submit\",\n    style: {\n      marginRight: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2406,\n      columnNumber: 19\n    }\n  }, \"Save\"), __jsx(Button, {\n    variant: \"info\",\n    onClick: handleClone,\n    style: {\n      marginRight: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2413,\n      columnNumber: 19\n    }\n  }, \"Clone\"), __jsx(LoadingButton, {\n    type: \"secondary\",\n    name: \"Back\",\n    route: \"NewSearch/mainSearch\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2420,\n      columnNumber: 19\n    }\n  }), SHOW_SLACK_BUTTONS && __jsx(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      marginLeft: \".5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2426,\n      columnNumber: 21\n    }\n  }, __jsx(\"span\", {\n    style: {\n      fontSize: 12,\n      lineHeight: \"12px\",\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2433,\n      columnNumber: 23\n    }\n  }, \"Slack\"), __jsx(\"div\", {\n    style: {\n      display: \"flex\",\n      border: \"1px solid #ced4da\",\n      borderRadius: 6,\n      overflow: \"hidden\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2442,\n      columnNumber: 23\n    }\n  }, __jsx(Button, {\n    variant: \"outline-primary\",\n    onClick: function onClick() {\n      return handleAddToSlack(\"receiving\");\n    },\n    disabled: !isReadyForActions,\n    style: {\n      border: \"none\",\n      borderRight: \"1px solid #ced4da\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2450,\n      columnNumber: 25\n    }\n  }, \"Receiving\"), __jsx(Button, {\n    variant: \"outline-primary\",\n    onClick: function onClick() {\n      return handleAddToSlack(\"shipping\");\n    },\n    disabled: !isReadyForActions,\n    style: {\n      border: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2461,\n      columnNumber: 25\n    }\n  }, \"Shipping\"))), __jsx(Button, {\n    variant: \"info\",\n    onClick: handlePrint,\n    disabled: !isReadyForActions,\n    style: {\n      marginLeft: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2472,\n      columnNumber: 19\n    }\n  }, \"Print Label\")), __jsx(\"div\", {\n    style: {\n      textAlign: \"center\",\n      margin: \"1rem 0\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2481,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    variant: \"link\",\n    style: {\n      textDecoration: \"none\",\n      color: \"black\",\n      fontSize: \"24px\"\n    },\n    onClick: function onClick() {\n      return setShowExtra(!showExtra);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2482,\n      columnNumber: 19\n    }\n  }, \"\\u25BC\")), __jsx(Collapse, {\n    \"in\": showExtra,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2494,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    id: \"extra-collapse\",\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2495,\n      columnNumber: 19\n    }\n  }, __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2496,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Group, {\n    as: Col,\n    controlId: \"dimensions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2497,\n      columnNumber: 23\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2498,\n      columnNumber: 25\n    }\n  }, \"Dimensions (L x W x H)\"), __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2499,\n      columnNumber: 25\n    }\n  }, __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2500,\n      columnNumber: 27\n    }\n  }, __jsx(Form.Control, {\n    placeholder: \"Length\",\n    type: \"text\",\n    value: items.length,\n    onChange: handleChange(\"length\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2501,\n      columnNumber: 29\n    }\n  })), \"x\", __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2509,\n      columnNumber: 27\n    }\n  }, __jsx(Form.Control, {\n    placeholder: \"Width\",\n    type: \"text\",\n    value: items.width,\n    onChange: handleChange(\"width\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2510,\n      columnNumber: 29\n    }\n  })), \"x\", __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2518,\n      columnNumber: 27\n    }\n  }, __jsx(Form.Control, {\n    placeholder: \"Height\",\n    type: \"text\",\n    value: items.height,\n    onChange: handleChange(\"height\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2519,\n      columnNumber: 29\n    }\n  })))), __jsx(Form.Group, {\n    as: Col,\n    controlId: \"price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2528,\n      columnNumber: 23\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2529,\n      columnNumber: 25\n    }\n  }, \"Price\"), __jsx(Form.Control, {\n    placeholder: \"Price\",\n    type: \"text\",\n    value: items.price,\n    onChange: handleChange(\"price\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2530,\n      columnNumber: 25\n    }\n  }))), __jsx(Row, {\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2538,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Group, {\n    as: Col,\n    controlId: \"DOM\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2539,\n      columnNumber: 23\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2540,\n      columnNumber: 25\n    }\n  }, \"DOM (Date of Manufacture)\"), __jsx(Form.Control, {\n    placeholder: \"Enter DOM\",\n    type: \"date\",\n    value: DOM,\n    onChange: function onChange(e) {\n      return setDOM(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2541,\n      columnNumber: 25\n    }\n  }))), __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2549,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Group, {\n    as: Col,\n    controlId: \"poNumber\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2550,\n      columnNumber: 23\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2551,\n      columnNumber: 25\n    }\n  }, \"PO Number\"), __jsx(Form.Control, {\n    type: \"text\",\n    placeholder: \"PO Number\",\n    value: items.poNumber || \"\",\n    onChange: handleChange(\"poNumber\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 2552,\n      columnNumber: 25\n    }\n  })))))))))));\n}\n\n_s2(NewItem, \"R1ACc8JUK18ZCJs/6J/JvaYvWoQ=\", false, function () {\n  return [useRouter, useAuth];\n});\n\n_c4 = NewItem;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"BarcodeScannerComponent$dynamic\");\n$RefreshReg$(_c2, \"BarcodeScannerComponent\");\n$RefreshReg$(_c3, \"LoadingButton\");\n$RefreshReg$(_c4, \"NewItem\");","map":{"version":3,"sources":["C:/Users/mack2/Desktop/code/pages/NewSearch/AddItem/NewItem.js"],"names":["React","useEffect","useState","useRef","Form","Button","Card","Container","Row","Col","Modal","FormControl","Collapse","InputGroup","ButtonGroup","Spinner","Link","dynamic","useAuth","firebase","LoggedIn","useRouter","fetchClients","ClientTable","ClientInfoModal","ParentModal","MachineSelectionModal","InfoModal","InflowAPI","NewLocal","buildLocalLocObject","formatLoc","updateMachineFields","buildNameTokens","styles","BarcodeScannerComponent","ssr","simulateNetworkRequest","Promise","resolve","setTimeout","LoadingButton","type","name","route","isLoading","setLoading","cancelled","then","handleClick","NewItem","router","signOut","SHOW_SLACK_BUTTONS","process","env","NEXT_PUBLIC_SHOW_SLACK_BUTTONS","pn","sn","localSN","date","Date","toISOString","split","price","status","poNumber","trackingNumber","length","width","height","arrival_date","visible","items","setItems","editingPn","setEditingPn","editingSn","setEditingSn","DOM","setDOM","oem","setOem","modality","setModality","model","setModel","region","section","letter","number","bin","pallet","newLocalFrom","setNewLocalFrom","newLocalCurrent","setNewLocalCurrent","pnOptions","setPnOptions","snOptions","setSnOptions","description","descriptions","setDescriptions","workOrder","workOrders","setWorkOrders","clients","setClients","photos","setPhotos","show","setShow","showErr","setShowErr","Err","setErr","showDescModal","setShowDescModal","showWoModal","setShowWoModal","showClientModal","setShowClientModal","showMachineModal","setShowMachineModal","showParentModal","setShowParentModal","showCameraModal","setShowCameraModal","showSaveModal","setShowSaveModal","machineSelectionModal","setMachineSelectionModal","selectedDesc","setSelectedDesc","selectedClient","setSelectedClient","selectedMachine","setSelectedMachine","selectedCurrentMachine","setSelectedCurrentMachine","selectedParent","setSelectedParent","TheMachine","setTheMachine","machineOptions","setMachineOptions","search","setSearch","capturedPhoto","setCapturedPhoto","cameraFacing","setCameraFacing","addToWebsite","setAddToWebsite","machinePick","setMachinePick","freqItem","setFreqItem","usagePastYear","setUsagePastYear","machineFrequency","setMachineFrequency","showExtra","setShowExtra","addingNewPn","setAddingNewPn","newPn","setNewPn","addingNewSn","setAddingNewSn","newSn","setNewSn","browseInputRef","cloneSeedRef","loading","savedDocId","setSavedDocId","isMountedRef","current","safeSetLoading","value","withTimeout","promise","ms","label","reject","timer","Error","Math","ceil","result","clearTimeout","err","shallowClean","obj","newObj","Object","keys","forEach","key","undefined","isReady","cloneFrom","query","db","firestore","toArray","Array","isArray","toDateString","toDate","d","isNaN","getTime","slice","test","parsed","parse","resolveDoc","ref","collection","get","doc","exists","id","data","path","console","error","dateValue","arrivalValue","prev","Boolean","addedToWebsite","setMachineFieldsInitialized","OEM","Modality","Model","Parent","parentDoc","ClientFrom","clientFromDoc","setSelectedClientFrom","ClientCurrent","clientCurrentDoc","setSelectedClientCurrent","MachineFrom","Machine","machineFromDoc","MachineCurrent","CurrentMachine","machineCurrentDoc","fetchClientsData","clientsData","log","fetchPnSn","snapshot","pnSet","Set","snSet","add","machineFieldsInitialized","updatedFields","signal","setSignal","handlePnSelect","e","selected","target","updatedPn","handlePnChange","index","addPn","trim","handleSnSelect","updatedSn","handleSnChange","addSn","handleBrowsePhotos","click","handleFilesSelected","files","newPhotos","i","push","file","url","URL","createObjectURL","prevPhotos","handleCapture","capturePhoto","video","document","querySelector","canvas","createElement","videoWidth","videoHeight","context","getContext","drawImage","toBlob","blob","savePhoto","removePhoto","filter","_","handleClose","handleShow","handleCloseErr","handleShowErr","handleCloseSaveModal","handleShowSaveModal","handleCloseDescModal","handleShowDescModal","handleCloseWoModal","handleShowWoModal","handleCloseClientModal","handleShowClientModal","handleCloseMachineModal","handleShowMachineModal","handleCloseParentModal","handleShowParentModal","addDescription","removeDescription","handleDescriptionChange","field","newDescriptions","map","desc","addWorkOrder","removeWorkOrder","handleWorkOrderChange","newWorkOrders","wo","listDescriptions","selectDescription","handleClientInfo","clientId","setShowLocalLocFrom","setShowLocalLocCurrent","clientDoc","clientData","machinePromises","machines","machineRef","all","machineDocs","machineDoc","fetchMachine","machineId","machineData","where","machinesSnapshot","size","calculateItemFrequencyAndUsage","currentDate","oneYearAgo","setFullYear","getFullYear","itemsSnapshot","itemData","workOrderDate","uploadPhotos","docID","storageRef","storage","photoRef","child","metadata","contentType","put","getDownloadURL","handleSubmit","event","preventDefault","isReadyForActions","toSend","docId","message","redirect","options","forceNew","existingId","currentUser","auth","userEmail","email","formattedItems","nameLower","toLowerCase","nameTokens","fromDetails","currentDetails","localLocFrom","localLocCurrent","user","lastEdited","selectedClientFrom","selectedClientCurrent","dateCreated","queueAssociationUpdates","targetDocId","updates","update","associatedParts","FieldValue","arrayUnion","allSettled","results","reason","queuePhotoUpload","hasNewPhotos","some","photo","newDocId","set","cleanFormattedItems","generateCustomID","ensureSaved","showInfoModal","setShowInfoModal","itemName","setItemName","handleShowInfoModal","handleCloseInfoModal","handleCloseCameraModal","handleChange","prevItems","mostRecentWorkOrder","reduce","latest","latestDate","handleShowCameraModal","randomNum","floor","random","handlePrint","payload","local_sn","fetch","method","headers","body","JSON","stringify","response","json","handleSendToInflow","alert","imageUrls","p","sku","toString","arrivalISO","pnStr","join","snStr","mostRecentWO","cur","customFields","custom1","custom2","custom3","custom4","custom5","custom6","custom7","custom8","custom9","custom10","upsertProduct","created","productId","handleBluefolderButton","currentWorkOrder","localsn","handleAddToSlack","which","safeName","title","pn0","sn0","pn_sn","sort","a","b","tracking","photoUrls","listKey","work_order","resp","debug","steps","table","ok","handleToggleAddToWebsite","next","handleAddNewPn","handleAddNewSn","showLocalLocFrom","showLocalLocCurrent","showNewLocalModalFrom","setShowNewLocalModalFrom","showNewLocalModalCurrent","setShowNewLocalModalCurrent","handleClone","condition","handleSetSelectedMachine","machine","isSocalInterior","currentPnIndex","setCurrentPnIndex","showDropdown","setShowDropdown","currentSnIndex","setCurrentSnIndex","showSnDropdown","setShowSnDropdown","handleAddNewClient","showMachineSelect","setShowMachineSelect","cursor","borderLeft","paddingLeft","marginBottom","client","includes","borderRadius","position","left","transform","bottom","top","backgroundColor","backdropFilter","display","alignItems","justifyContent","zIndex","page","shell","card","cardBody","header","kicker","subtitle","right","border","maxHeight","overflowY","pnOption","idx","padding","snOption","marginTop","indexOf","photoActionsRow","photoActionsRight","marginLeft","marginRight","isHidden","currentTarget","checked","objectFit","actionRow","flexDirection","fontSize","lineHeight","textAlign","overflow","borderRight","margin","textDecoration","color"],"mappings":";;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,MAArC,QAAmD,OAAnD;AACA,OAAO,sCAAP;AACA,SACEC,IADF,EAEEC,MAFF,EAGEC,IAHF,EAIEC,SAJF,EAKEC,GALF,EAMEC,GANF,EAOEC,KAPF,EAQEC,WARF,EASEC,QATF,EAUEC,UAVF,EAWEC,WAXF,EAYEC,OAZF,QAaO,iBAbP;AAcA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,OAAP,MAAoB,cAApB;AACA,SAASC,OAAT,QAAwB,kCAAxB;AACA,OAAOC,QAAP,MAAqB,2BAArB;AACA,OAAOC,QAAP,MAAqB,gBAArB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,SAASC,YAAT,QAA6B,kCAA7B;AACA,OAAOC,WAAP,MAAwB,4BAAxB;AACA,OAAOC,eAAP,MAA4B,oBAA5B;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,qBAAP,MAAkC,oCAAlC;AACA,OAAOC,SAAP,MAAsB,cAAtB;AACA,OAAOC,SAAP,MAAsB,0BAAtB;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,SACEC,mBADF,EAEEC,SAFF,EAGEC,mBAHF,EAIEC,eAJF,QAKO,+BALP;AAMA,OAAOC,MAAP,MAAmB,sBAAnB,C,CAEA;;AACA,IAAMC,uBAAuB,GAAGlB,OAAO,MACrC;AAAA,SAAM,OAAO,0BAAP,CAAN;AAAA,CADqC,EAErC;AAAEmB,EAAAA,GAAG,EAAE,KAAP;AAAA;AAAA;AAAA,kCADa,0BACb;AAAA;AAAA,qDADa,0BACb;AAAA;AAAA,CAFqC,CAAvC,C,CAKA;;MALMD,uB;;AAMN,SAASE,sBAAT,GAAkC;AAChC,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD;AAAA,WAAaC,UAAU,CAACD,OAAD,EAAU,IAAV,CAAvB;AAAA,GAAZ,CAAP;AACD,C,CAED;;;AACA,SAASE,aAAT,OAA8C;AAAA;;AAAA,MAArBC,IAAqB,QAArBA,IAAqB;AAAA,MAAfC,IAAe,QAAfA,IAAe;AAAA,MAATC,KAAS,QAATA,KAAS;;AAAA,kBACZ1C,QAAQ,CAAC,KAAD,CADI;AAAA,MACrC2C,SADqC;AAAA,MAC1BC,UAD0B;;AAE5C7C,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI4C,SAAJ,EAAe;AACb,UAAIE,SAAS,GAAG,KAAhB;AACAV,MAAAA,sBAAsB,GAAGW,IAAzB,CAA8B,YAAM;AAClC,YAAI,CAACD,SAAL,EAAgBD,UAAU,CAAC,KAAD,CAAV;AACjB,OAFD;AAGA,aAAO,YAAM;AACXC,QAAAA,SAAS,GAAG,IAAZ;AACD,OAFD;AAGD;AACF,GAVQ,EAUN,CAACF,SAAD,CAVM,CAAT;;AAWA,MAAMI,WAAW,GAAG,SAAdA,WAAc;AAAA,WAAMH,UAAU,CAAC,IAAD,CAAhB;AAAA,GAApB;;AACA,SACE,MAAC,IAAD;AAAM,IAAA,IAAI,aAAMF,KAAN,CAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,SAAS,oBAAaF,IAAb,CADX;AAEE,IAAA,QAAQ,EAAEG,SAFZ;AAGE,IAAA,OAAO,EAAE,CAACA,SAAD,GAAaI,WAAb,GAA2B,IAHtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKGJ,SAAS,GAAG,UAAH,GAAgBF,IAL5B,CADF,CADF;AAWD;;GAzBQF,a;;MAAAA,a;AA2BT,eAAe,SAASS,OAAT,GAAmB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAChC,MAAMC,MAAM,GAAG9B,SAAS,EAAxB;;AADgC,iBAEZH,OAAO,EAFK;AAAA,MAExBkC,OAFwB,YAExBA,OAFwB;;AAGhC,MAAMC,kBAAkB,GACtBC,OAAO,CAACC,GAAR,CAAYC,8BAAZ,KAA+C,MADjD,CAHgC,CAKhC;AACA;;AANgC,mBAONtD,QAAQ,CAAC;AACjCyC,IAAAA,IAAI,EAAE,EAD2B;AAEjCc,IAAAA,EAAE,EAAE,CAAC,EAAD,CAF6B;AAGjCC,IAAAA,EAAE,EAAE,CAAC,EAAD,CAH6B;AAGvB;AACVC,IAAAA,OAAO,EAAE,EAJwB;AAIpB;AACbC,IAAAA,IAAI,EAAE,IAAIC,IAAJ,GAAWC,WAAX,GAAyBC,KAAzB,CAA+B,GAA/B,EAAoC,CAApC,CAL2B;AAKa;AAC9CC,IAAAA,KAAK,EAAE,EAN0B;AAOjCC,IAAAA,MAAM,EAAE,EAPyB;AAQjCC,IAAAA,QAAQ,EAAE,EARuB;AASjCC,IAAAA,cAAc,EAAE,EATiB;AAUjCC,IAAAA,MAAM,EAAE,EAVyB;AAWjCC,IAAAA,KAAK,EAAE,EAX0B;AAYjCC,IAAAA,MAAM,EAAE,EAZyB;AAajCC,IAAAA,YAAY,EAAE,EAbmB;AAaf;AAClBC,IAAAA,OAAO,EAAE;AAdwB,GAAD,CAPF;AAAA,MAOzBC,KAPyB;AAAA,MAOlBC,QAPkB;;AAAA,mBAwBExE,QAAQ,CAAC,IAAD,CAxBV;AAAA,MAwBzByE,SAxByB;AAAA,MAwBdC,YAxBc,kBAyBhC;;;AAzBgC,mBA2BE1E,QAAQ,CAAC,IAAD,CA3BV;AAAA,MA2BzB2E,SA3ByB;AAAA,MA2BdC,YA3Bc,kBA4BhC;AAEA;;;AA9BgC,mBA+BV5E,QAAQ,CAAC,EAAD,CA/BE;AAAA,MA+BzB6E,GA/ByB;AAAA,MA+BpBC,MA/BoB,kBAgChC;;;AAhCgC,mBAiCV9E,QAAQ,CAAC,EAAD,CAjCE;AAAA,MAiCzB+E,GAjCyB;AAAA,MAiCpBC,MAjCoB;;AAAA,mBAkCAhF,QAAQ,CAAC,EAAD,CAlCR;AAAA,MAkCzBiF,QAlCyB;AAAA,MAkCfC,WAlCe;;AAAA,mBAmCNlF,QAAQ,CAAC,EAAD,CAnCF;AAAA,MAmCzBmF,KAnCyB;AAAA,MAmClBC,QAnCkB,kBAqChC;;;AArCgC,mBAsCQpF,QAAQ,CAAC;AAC/CqF,IAAAA,MAAM,EAAE,EADuC;AAE/CC,IAAAA,OAAO,EAAE;AAAEC,MAAAA,MAAM,EAAE,EAAV;AAAcC,MAAAA,MAAM,EAAE;AAAtB,KAFsC;AAG/CC,IAAAA,GAAG,EAAE,EAH0C;AAI/CC,IAAAA,MAAM,EAAE;AAJuC,GAAD,CAtChB;AAAA,MAsCzBC,YAtCyB;AAAA,MAsCXC,eAtCW;;AAAA,oBA4Cc5F,QAAQ,CAAC;AACrDqF,IAAAA,MAAM,EAAE,EAD6C;AAErDC,IAAAA,OAAO,EAAE;AAAEC,MAAAA,MAAM,EAAE,EAAV;AAAcC,MAAAA,MAAM,EAAE;AAAtB,KAF4C;AAGrDC,IAAAA,GAAG,EAAE,EAHgD;AAIrDC,IAAAA,MAAM,EAAE;AAJ6C,GAAD,CA5CtB;AAAA,MA4CzBG,eA5CyB;AAAA,MA4CRC,kBA5CQ,mBAmDhC;;;AAnDgC,oBAoDE9F,QAAQ,CAAC,EAAD,CApDV;AAAA,MAoDzB+F,SApDyB;AAAA,MAoDdC,YApDc;;AAAA,oBAqDEhG,QAAQ,CAAC,EAAD,CArDV;AAAA,MAqDzBiG,SArDyB;AAAA,MAqDdC,YArDc;;AAAA,oBAsDQlG,QAAQ,CAAC,CAC/C;AAAEmG,IAAAA,WAAW,EAAE,EAAf;AAAmBzC,IAAAA,IAAI,EAAE;AAAzB,GAD+C,CAAD,CAtDhB;AAAA,MAsDzB0C,YAtDyB;AAAA,MAsDXC,eAtDW;;AAAA,oBAyDIrG,QAAQ,CAAC,CAAC;AAAEsG,IAAAA,SAAS,EAAE,EAAb;AAAiB5C,IAAAA,IAAI,EAAE;AAAvB,GAAD,CAAD,CAzDZ;AAAA,MAyDzB6C,UAzDyB;AAAA,MAyDbC,aAzDa;;AAAA,oBA0DFxG,QAAQ,CAAC,EAAD,CA1DN;AAAA,MA0DzByG,OA1DyB;AAAA,MA0DhBC,UA1DgB;;AAAA,oBA2DJ1G,QAAQ,CAAC,EAAD,CA3DJ;AAAA,MA2DzB2G,MA3DyB;AAAA,MA2DjBC,SA3DiB;;AAAA,oBA4DR5G,QAAQ,CAAC,KAAD,CA5DA;AAAA,MA4DzB6G,IA5DyB;AAAA,MA4DnBC,OA5DmB,mBA4DS;;;AA5DT,oBA6DF9G,QAAQ,CAAC,KAAD,CA7DN;AAAA,MA6DzB+G,OA7DyB;AAAA,MA6DhBC,UA7DgB;;AAAA,oBA8DVhH,QAAQ,CAC5B,8CAD4B,CA9DE;AAAA,MA8DzBiH,GA9DyB;AAAA,MA8DpBC,MA9DoB;;AAAA,oBAiEUlH,QAAQ,CAAC,KAAD,CAjElB;AAAA,MAiEzBmH,aAjEyB;AAAA,MAiEVC,gBAjEU;;AAAA,oBAkEMpH,QAAQ,CAAC,KAAD,CAlEd;AAAA,MAkEzBqH,WAlEyB;AAAA,MAkEZC,cAlEY;;AAAA,oBAmEctH,QAAQ,CAAC,KAAD,CAnEtB;AAAA,MAmEzBuH,eAnEyB;AAAA,MAmERC,kBAnEQ;;AAAA,oBAoEgBxH,QAAQ,CAAC,KAAD,CApExB;AAAA,MAoEzByH,gBApEyB;AAAA,MAoEPC,mBApEO;;AAAA,oBAqEc1H,QAAQ,CAAC,KAAD,CArEtB;AAAA,MAqEzB2H,eArEyB;AAAA,MAqERC,kBArEQ;;AAAA,oBAsEc5H,QAAQ,CAAC,KAAD,CAtEtB;AAAA,MAsEzB6H,eAtEyB;AAAA,MAsERC,kBAtEQ;;AAAA,oBAuEU9H,QAAQ,CAAC,KAAD,CAvElB;AAAA,MAuEzB+H,aAvEyB;AAAA,MAuEVC,gBAvEU;;AAAA,oBAwE0BhI,QAAQ,CAAC,KAAD,CAxElC;AAAA,MAwEzBiI,qBAxEyB;AAAA,MAwEFC,wBAxEE;;AAAA,oBAyEQlI,QAAQ,CAAC,CAAD,CAzEhB;AAAA,MAyEzBmI,YAzEyB;AAAA,MAyEXC,eAzEW;;AAAA,oBA0EYpI,QAAQ,CAAC,IAAD,CA1EpB;AAAA,MA0EzBqI,cA1EyB;AAAA,MA0ETC,iBA1ES;;AAAA,oBA2EctI,QAAQ,CAAC,IAAD,CA3EtB;AAAA,MA2EzBuI,eA3EyB;AAAA,MA2ERC,kBA3EQ;;AAAA,oBA4E4BxI,QAAQ,CAAC,IAAD,CA5EpC;AAAA,MA4EzByI,sBA5EyB;AAAA,MA4EDC,yBA5EC;;AAAA,oBA6EY1I,QAAQ,CAAC,IAAD,CA7EpB;AAAA,MA6EzB2I,cA7EyB;AAAA,MA6ETC,iBA7ES;;AAAA,oBA8EI5I,QAAQ,CAAC,IAAD,CA9EZ;AAAA,MA8EzB6I,UA9EyB;AAAA,MA8EbC,aA9Ea;;AAAA,oBA+EY9I,QAAQ,CAAC,EAAD,CA/EpB;AAAA,MA+EzB+I,cA/EyB;AAAA,MA+ETC,iBA/ES;;AAAA,oBAgFJhJ,QAAQ,CAAC,EAAD,CAhFJ;AAAA,MAgFzBiJ,MAhFyB;AAAA,MAgFjBC,SAhFiB;;AAAA,oBAiFUlJ,QAAQ,CAAC,IAAD,CAjFlB;AAAA,MAiFzBmJ,aAjFyB;AAAA,MAiFVC,gBAjFU;;AAAA,oBAkFQpJ,QAAQ,CAAC,aAAD,CAlFhB;AAAA,MAkFzBqJ,YAlFyB;AAAA,MAkFXC,eAlFW;;AAAA,oBAmFQtJ,QAAQ,CAAC,KAAD,CAnFhB;AAAA,MAmFzBuJ,YAnFyB;AAAA,MAmFXC,eAnFW;;AAAA,oBAoFMxJ,QAAQ,CAAC,KAAD,CApFd;AAAA,MAoFzByJ,WApFyB;AAAA,MAoFZC,cApFY;;AAAA,oBAqFA1J,QAAQ,CAAC,CAAD,CArFR;AAAA,MAqFzB2J,QArFyB;AAAA,MAqFfC,WArFe;;AAAA,oBAsFU5J,QAAQ,CAAC,CAAD,CAtFlB;AAAA,MAsFzB6J,aAtFyB;AAAA,MAsFVC,gBAtFU;;AAAA,oBAuFgB9J,QAAQ,CAAC,CAAD,CAvFxB;AAAA,MAuFzB+J,gBAvFyB;AAAA,MAuFPC,mBAvFO,mBAwFhC;;;AAxFgC,oBAyFEhK,QAAQ,CAAC,KAAD,CAzFV;AAAA,MAyFzBiK,SAzFyB;AAAA,MAyFdC,YAzFc,mBA2FhC;;;AA3FgC,oBA4FMlK,QAAQ,CAAC,KAAD,CA5Fd;AAAA,MA4FzBmK,WA5FyB;AAAA,MA4FZC,cA5FY;;AAAA,oBA6FNpK,QAAQ,CAAC,EAAD,CA7FF;AAAA,MA6FzBqK,KA7FyB;AAAA,MA6FlBC,QA7FkB;;AAAA,oBA8FMtK,QAAQ,CAAC,KAAD,CA9Fd;AAAA,MA8FzBuK,WA9FyB;AAAA,MA8FZC,cA9FY;;AAAA,oBA+FNxK,QAAQ,CAAC,EAAD,CA/FF;AAAA,MA+FzByK,KA/FyB;AAAA,MA+FlBC,QA/FkB,mBAiGhC;;;AACA,MAAMC,cAAc,GAAG1K,MAAM,CAAC,IAAD,CAA7B;AACA,MAAM2K,YAAY,GAAG3K,MAAM,CAAC,IAAD,CAA3B,CAnGgC,CAqGhC;;AArGgC,oBAsGFD,QAAQ,CAAC,KAAD,CAtGN;AAAA,MAsGzB6K,OAtGyB;AAAA,MAsGhBjI,UAtGgB;;AAAA,oBAuGI5C,QAAQ,CAAC,IAAD,CAvGZ;AAAA,MAuGzB8K,UAvGyB;AAAA,MAuGbC,aAvGa;;AAwGhC,MAAMC,YAAY,GAAG/K,MAAM,CAAC,IAAD,CAA3B;AAEAF,EAAAA,SAAS,CAAC,YAAM;AACd,WAAO,YAAM;AACXiL,MAAAA,YAAY,CAACC,OAAb,GAAuB,KAAvB;AACD,KAFD;AAGD,GAJQ,EAIN,EAJM,CAAT;;AAMA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,KAAD,EAAW;AAChC,QAAIH,YAAY,CAACC,OAAjB,EAA0BrI,UAAU,CAACuI,KAAD,CAAV;AAC3B,GAFD;;AAIA,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,OAAD,EAAUC,EAAV;AAAA,QAAcC,KAAd,uEAAsB,WAAtB;AAAA,WAClB,IAAInJ,OAAJ,CAAY,UAACC,OAAD,EAAUmJ,MAAV,EAAqB;AAC/B,UAAMC,KAAK,GAAGnJ,UAAU,CAAC,YAAM;AAC7BkJ,QAAAA,MAAM,CAAC,IAAIE,KAAJ,WAAaH,KAAb,8BAAsCI,IAAI,CAACC,IAAL,CAAUN,EAAE,GAAG,IAAf,CAAtC,OAAD,CAAN;AACD,OAFuB,EAErBA,EAFqB,CAAxB;AAGAD,MAAAA,OAAO,CACJvI,IADH,CACQ,UAAC+I,MAAD,EAAY;AAChBC,QAAAA,YAAY,CAACL,KAAD,CAAZ;AACApJ,QAAAA,OAAO,CAACwJ,MAAD,CAAP;AACD,OAJH,WAKS,UAACE,GAAD,EAAS;AACdD,QAAAA,YAAY,CAACL,KAAD,CAAZ;AACAD,QAAAA,MAAM,CAACO,GAAD,CAAN;AACD,OARH;AASD,KAbD,CADkB;AAAA,GAApB;;AAgBA,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,GAAD,EAAS;AAC5B,QAAMC,MAAM,GAAG,EAAf;AACAC,IAAAA,MAAM,CAACC,IAAP,CAAYH,GAAG,IAAI,EAAnB,EAAuBI,OAAvB,CAA+B,UAACC,GAAD,EAAS;AACtCJ,MAAAA,MAAM,CAACI,GAAD,CAAN,GAAcL,GAAG,CAACK,GAAD,CAAH,KAAaC,SAAb,GAAyB,EAAzB,GAA8BN,GAAG,CAACK,GAAD,CAA/C;AACD,KAFD;AAGA,WAAOJ,MAAP;AACD,GAND;;AAQAnM,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI,CAACkD,MAAM,CAACuJ,OAAZ,EAAqB;AACrB,QAAMC,SAAS,GAAGxJ,MAAM,CAACyJ,KAAP,CAAaD,SAA/B;AACA,QAAI,CAACA,SAAD,IAAc7B,YAAY,CAACK,OAAb,KAAyBwB,SAA3C,EAAsD;AACtD7B,IAAAA,YAAY,CAACK,OAAb,GAAuBwB,SAAvB;AAEA,QAAI5J,SAAS,GAAG,KAAhB;AACA,QAAM8J,EAAE,GAAG1L,QAAQ,CAAC2L,SAAT,EAAX;;AAEA,QAAMC,OAAO,GAAG,SAAVA,OAAU,CAAC1B,KAAD,EAAW;AACzB,UAAI2B,KAAK,CAACC,OAAN,CAAc5B,KAAd,CAAJ,EAA0B,OAAOA,KAAP;AAC1B,UAAIA,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAKoB,SAA5B,IAAyCpB,KAAK,KAAK,EAAvD,EAA2D,OAAO,CAAC,EAAD,CAAP;AAC3D,aAAO,CAACA,KAAD,CAAP;AACD,KAJD;;AAMA,QAAM6B,YAAY,GAAG,SAAfA,YAAe,CAAC7B,KAAD,EAAW;AAC9B,UAAI,CAACA,KAAL,EAAY,OAAO,EAAP;;AACZ,UAAIA,KAAJ,aAAIA,KAAJ,eAAIA,KAAK,CAAE8B,MAAX,EAAmB;AACjB,YAAMC,CAAC,GAAG/B,KAAK,CAAC8B,MAAN,EAAV;AACA,eAAOE,KAAK,CAACD,CAAC,CAACE,OAAF,EAAD,CAAL,GAAqB,EAArB,GAA0BF,CAAC,CAACtJ,WAAF,GAAgByJ,KAAhB,CAAsB,CAAtB,EAAyB,EAAzB,CAAjC;AACD;;AACD,UAAIlC,KAAK,YAAYxH,IAArB,EAA2B;AACzB,eAAOwJ,KAAK,CAAChC,KAAK,CAACiC,OAAN,EAAD,CAAL,GAAyB,EAAzB,GAA8BjC,KAAK,CAACvH,WAAN,GAAoByJ,KAApB,CAA0B,CAA1B,EAA6B,EAA7B,CAArC;AACD;;AACD,UAAI,OAAOlC,KAAP,KAAiB,QAArB,EAA+B;AAC7B,YAAI,qBAAqBmC,IAArB,CAA0BnC,KAA1B,CAAJ,EAAsC,OAAOA,KAAK,CAACkC,KAAN,CAAY,CAAZ,EAAe,EAAf,CAAP;AACtC,YAAME,MAAM,GAAG5J,IAAI,CAAC6J,KAAL,CAAWrC,KAAX,CAAf;AACA,YAAI,CAACgC,KAAK,CAACI,MAAD,CAAV,EAAoB,OAAO,IAAI5J,IAAJ,CAAS4J,MAAT,EAAiB3J,WAAjB,GAA+ByJ,KAA/B,CAAqC,CAArC,EAAwC,EAAxC,CAAP;AACrB;;AACD,aAAO,EAAP;AACD,KAfD;;AAiBA,QAAMI,UAAU;AAAA,2EAAG,iBAAOC,GAAP,EAAYC,UAAZ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,oBACZD,GADY;AAAA;AAAA;AAAA;;AAAA,iDACA,IADA;;AAAA;AAAA;;AAAA,sBAGX,OAAOA,GAAG,CAACE,GAAX,KAAmB,UAHR;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAIKF,GAAG,CAACE,GAAJ,EAJL;;AAAA;AAIPC,gBAAAA,GAJO;AAAA,iDAKNA,GAAG,CAACC,MAAJ;AAAeC,kBAAAA,EAAE,EAAEF,GAAG,CAACE;AAAvB,mBAA8BF,GAAG,CAACG,IAAJ,EAA9B,IAA6C,IALvC;;AAAA;AAAA,sBAOX,OAAON,GAAP,KAAe,QAPJ;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAQKf,EAAE,CAACgB,UAAH,CAAcA,UAAd,EAA0BE,GAA1B,CAA8BH,GAA9B,EAAmCE,GAAnC,EARL;;AAAA;AAQPC,gBAAAA,IARO;AAAA,iDASNA,IAAG,CAACC,MAAJ;AAAeC,kBAAAA,EAAE,EAAEF,IAAG,CAACE;AAAvB,mBAA8BF,IAAG,CAACG,IAAJ,EAA9B,IAA6C,IATvC;;AAAA;AAAA,sBAWXN,GAXW,aAWXA,GAXW,eAWXA,GAAG,CAAEK,EAXM;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAYKpB,EAAE,CAACgB,UAAH,CAAcA,UAAd,EAA0BE,GAA1B,CAA8BH,GAAG,CAACK,EAAlC,EAAsCH,GAAtC,EAZL;;AAAA;AAYPC,gBAAAA,KAZO;AAAA,iDAaNA,KAAG,CAACC,MAAJ;AAAeC,kBAAAA,EAAE,EAAEF,KAAG,CAACE;AAAvB,mBAA8BF,KAAG,CAACG,IAAJ,EAA9B,IAA6C,IAbvC;;AAAA;AAAA,sBAeXN,GAfW,aAeXA,GAfW,eAeXA,GAAG,CAAEO,IAfM;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAgBKtB,EAAE,CAACkB,GAAH,CAAOH,GAAG,CAACO,IAAX,EAAiBL,GAAjB,EAhBL;;AAAA;AAgBPC,gBAAAA,KAhBO;AAAA,iDAiBNA,KAAG,CAACC,MAAJ;AAAeC,kBAAAA,EAAE,EAAEF,KAAG,CAACE;AAAvB,mBAA8BF,KAAG,CAACG,IAAJ,EAA9B,IAA6C,IAjBvC;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAoBfE,gBAAAA,OAAO,CAACC,KAAR,oCAA0CR,UAA1C;;AApBe;AAAA,iDAsBV,IAtBU;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA,sBAAVF,UAAU;AAAA;AAAA;AAAA,OAAhB;;AAyBA,6DAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEqBd,EAAE,CAACgB,UAAH,CAAc,MAAd,EAAsBE,GAAtB,CAA0BpB,SAA1B,EAAqCmB,GAArC,EAFrB;;AAAA;AAESC,cAAAA,GAFT;;AAAA,kBAGQA,GAAG,CAACC,MAHZ;AAAA;AAAA;AAAA;;AAIK,kBAAI,CAACjL,SAAL,EAAgB;AACdqE,gBAAAA,MAAM,CAAC,yBAAD,CAAN;AACAF,gBAAAA,UAAU,CAAC,IAAD,CAAV;AACD;;AAPN;;AAAA;AAWSgH,cAAAA,IAXT,GAWgBH,GAAG,CAACG,IAAJ,MAAc,EAX9B;AAYSI,cAAAA,SAZT,GAYqBpB,YAAY,CAACgB,IAAI,CAACtK,IAAN,CAZjC;AAaS2K,cAAAA,YAbT,GAcKrB,YAAY,CAACgB,IAAI,CAAC3J,YAAN,CAAZ,KACC,OAAO2J,IAAI,CAAC3J,YAAZ,KAA6B,QAA7B,GAAwC2J,IAAI,CAAC3J,YAA7C,GAA4D,EAD7D,CAdL;;AAiBG,kBAAI,CAACxB,SAAL,EAAgB;AACd2B,gBAAAA,QAAQ,CAAC,UAAC8J,IAAD;AAAA;;AAAA,yDACJA,IADI;AAEP7L,oBAAAA,IAAI,EAAEuL,IAAI,CAACvL,IAAL,IAAa,EAFZ;AAGPc,oBAAAA,EAAE,EAAEsJ,OAAO,CAACmB,IAAI,CAACzK,EAAN,CAHJ;AAIPC,oBAAAA,EAAE,EAAEqJ,OAAO,CAACmB,IAAI,CAACxK,EAAN,CAJJ;AAKPC,oBAAAA,OAAO,EAAE,EALF;AAMPC,oBAAAA,IAAI,EAAE0K,SAAS,IAAIE,IAAI,CAAC5K,IAAlB,IAA0B,EANzB;AAOPI,oBAAAA,KAAK,iBAAEkK,IAAI,CAAClK,KAAP,qDAAgB,EAPd;AAQPC,oBAAAA,MAAM,kBAAEiK,IAAI,CAACjK,MAAP,uDAAiB,EARhB;AASPC,oBAAAA,QAAQ,oBAAEgK,IAAI,CAAChK,QAAP,2DAAmB,EATpB;AAUPC,oBAAAA,cAAc,0BAAE+J,IAAI,CAAC/J,cAAP,uEAAyB,EAVhC;AAWPC,oBAAAA,MAAM,kBAAE8J,IAAI,CAAC9J,MAAP,uDAAiB,EAXhB;AAYPC,oBAAAA,KAAK,iBAAE6J,IAAI,CAAC7J,KAAP,qDAAgB,EAZd;AAaPC,oBAAAA,MAAM,kBAAE4J,IAAI,CAAC5J,MAAP,uDAAiB,EAbhB;AAcPC,oBAAAA,YAAY,EAAEgK,YAAY,IAAI,EAdvB;AAeP/J,oBAAAA,OAAO,EAAE0J,IAAI,CAAC1J,OAAL,KAAiBiI,SAAjB,GAA6ByB,IAAI,CAAC1J,OAAlC,GAA4C;AAf9C;AAAA,iBAAD,CAAR;AAiBA+B,gBAAAA,eAAe,CACbyG,KAAK,CAACC,OAAN,CAAciB,IAAI,CAAC5H,YAAnB,KAAoC4H,IAAI,CAAC5H,YAAL,CAAkBlC,MAAtD,GACI8J,IAAI,CAAC5H,YADT,GAEI,CAAC;AAAED,kBAAAA,WAAW,EAAE,EAAf;AAAmBzC,kBAAAA,IAAI,EAAE;AAAzB,iBAAD,CAHS,CAAf;AAKA8C,gBAAAA,aAAa,CACXsG,KAAK,CAACC,OAAN,CAAciB,IAAI,CAACzH,UAAnB,KAAkCyH,IAAI,CAACzH,UAAL,CAAgBrC,MAAlD,GACI8J,IAAI,CAACzH,UADT,GAEI,CAAC;AAAED,kBAAAA,SAAS,EAAE,EAAb;AAAiB5C,kBAAAA,IAAI,EAAE;AAAvB,iBAAD,CAHO,CAAb;AAKAoB,gBAAAA,MAAM,CAACkJ,IAAI,CAACnJ,GAAL,IAAY,EAAb,CAAN;AACAe,gBAAAA,eAAe,CACboI,IAAI,CAACrI,YAAL,IAAqB;AACnBN,kBAAAA,MAAM,EAAE,EADW;AAEnBC,kBAAAA,OAAO,EAAE;AAAEC,oBAAAA,MAAM,EAAE,EAAV;AAAcC,oBAAAA,MAAM,EAAE;AAAtB,mBAFU;AAGnBC,kBAAAA,GAAG,EAAE,EAHc;AAInBC,kBAAAA,MAAM,EAAE;AAJW,iBADR,CAAf;AAQAI,gBAAAA,kBAAkB,CAChBkI,IAAI,CAACnI,eAAL,IAAwB;AACtBR,kBAAAA,MAAM,EAAE,EADc;AAEtBC,kBAAAA,OAAO,EAAE;AAAEC,oBAAAA,MAAM,EAAE,EAAV;AAAcC,oBAAAA,MAAM,EAAE;AAAtB,mBAFa;AAGtBC,kBAAAA,GAAG,EAAE,EAHiB;AAItBC,kBAAAA,MAAM,EAAE;AAJc,iBADR,CAAlB;AAQA8D,gBAAAA,eAAe,CAAC+E,OAAO,CAACP,IAAI,CAACQ,cAAN,CAAR,CAAf;AACAzD,gBAAAA,aAAa,CAAC,IAAD,CAAb;AACA3C,gBAAAA,eAAe,CAAC,CAAD,CAAf;AACD;;AAED,kBAAI4F,IAAI,CAACnF,UAAL,IAAmB,CAAChG,SAAxB,EAAmC;AACjCiG,gBAAAA,aAAa,CAACkF,IAAI,CAACnF,UAAN,CAAb;AACA4F,gBAAAA,2BAA2B,CAAC,KAAD,CAA3B;AACA,oBAAI,CAAC1J,GAAD,IAAQA,GAAG,KAAK,KAApB,EACEC,MAAM,CAACgJ,IAAI,CAACnF,UAAL,CAAgB9D,GAAhB,IAAuBiJ,IAAI,CAACnF,UAAL,CAAgB6F,GAAvC,IAA8C,EAA/C,CAAN;AACF,oBAAI,CAACzJ,QAAD,IAAaA,QAAQ,KAAK,KAA9B,EACEC,WAAW,CAAC8I,IAAI,CAACnF,UAAL,CAAgB5D,QAAhB,IAA4B+I,IAAI,CAACnF,UAAL,CAAgB8F,QAA5C,IAAwD,EAAzD,CAAX;AACF,oBAAI,CAACxJ,KAAD,IAAUA,KAAK,KAAK,KAAxB,EACEC,QAAQ,CAAC4I,IAAI,CAACnF,UAAL,CAAgB1D,KAAhB,IAAyB6I,IAAI,CAACnF,UAAL,CAAgB+F,KAAzC,IAAkD,EAAnD,CAAR;AACH;;AA5EJ;AAAA,qBA8E2BnB,UAAU,CAACO,IAAI,CAACa,MAAN,EAAc,MAAd,CA9ErC;;AAAA;AA8ESC,cAAAA,SA9ET;;AA+EG,kBAAIA,SAAS,IAAI,CAACjM,SAAlB,EAA6B;AAC3B+F,gBAAAA,iBAAiB,CAAC;AAAEmF,kBAAAA,EAAE,EAAEe,SAAS,CAACf,EAAhB;AAAoBtL,kBAAAA,IAAI,EAAEqM,SAAS,CAACrM,IAAV,IAAkB;AAA5C,iBAAD,CAAjB;AACD;;AAjFJ;AAAA,qBAmF+BgL,UAAU,CAACO,IAAI,CAACe,UAAN,EAAkB,QAAlB,CAnFzC;;AAAA;AAmFSC,cAAAA,aAnFT;;AAoFG,kBAAIA,aAAa,IAAI,CAACnM,SAAtB,EAAiC;AAC/BoM,gBAAAA,qBAAqB;AAAGlB,kBAAAA,EAAE,EAAEiB,aAAa,CAACjB;AAArB,mBAA4BiB,aAA5B,EAArB;AACD;;AAtFJ;AAAA,qBAwFkCvB,UAAU,CAACO,IAAI,CAACkB,aAAN,EAAqB,QAArB,CAxF5C;;AAAA;AAwFSC,cAAAA,gBAxFT;;AAyFG,kBAAIA,gBAAgB,IAAI,CAACtM,SAAzB,EAAoC;AAClCuM,gBAAAA,wBAAwB;AAAGrB,kBAAAA,EAAE,EAAEoB,gBAAgB,CAACpB;AAAxB,mBAA+BoB,gBAA/B,EAAxB;AACD;;AA3FJ;AAAA,qBA6FgC1B,UAAU,CACrCO,IAAI,CAACqB,WAAL,IAAoBrB,IAAI,CAACsB,OADY,EAErC,SAFqC,CA7F1C;;AAAA;AA6FSC,cAAAA,cA7FT;;AAiGG,kBAAIA,cAAc,IAAI,CAAC1M,SAAvB,EAAkC;AAChC2F,gBAAAA,kBAAkB,CAAC;AACjBuF,kBAAAA,EAAE,EAAEwB,cAAc,CAACxB,EADF;AAEjBtL,kBAAAA,IAAI,EAAE8M,cAAc,CAAC9M,IAAf,IAAuB8M,cAAc,CAACX,KAAtC,IAA+C;AAFpC,iBAAD,CAAlB;;AAIA,oBAAI,CAACZ,IAAI,CAACnF,UAAV,EAAsB;AACpBC,kBAAAA,aAAa,CAACyG,cAAD,CAAb;AACAd,kBAAAA,2BAA2B,CAAC,KAAD,CAA3B;AACD;AACF;;AA1GJ;AAAA,qBA4GmChB,UAAU,CACxCO,IAAI,CAACwB,cAAL,IAAuBxB,IAAI,CAACyB,cADY,EAExC,SAFwC,CA5G7C;;AAAA;AA4GSC,cAAAA,iBA5GT;;AAgHG,kBAAIA,iBAAiB,IAAI,CAAC7M,SAA1B,EAAqC;AACnC6F,gBAAAA,yBAAyB,CAAC;AACxBqF,kBAAAA,EAAE,EAAE2B,iBAAiB,CAAC3B,EADE;AAExBtL,kBAAAA,IAAI,EAAEiN,iBAAiB,CAACjN,IAAlB,IAA0BiN,iBAAiB,CAACd,KAA5C,IAAqD;AAFnC,iBAAD,CAAzB;;AAIA,oBAAI,CAACZ,IAAI,CAACnF,UAAN,IAAoB,CAAC0G,cAAzB,EAAyC;AACvCzG,kBAAAA,aAAa,CAAC4G,iBAAD,CAAb;AACAjB,kBAAAA,2BAA2B,CAAC,KAAD,CAA3B;AACD;AACF;;AAzHJ;AAAA;;AAAA;AAAA;AAAA;AA2HGP,cAAAA,OAAO,CAACC,KAAR,CAAc,oBAAd;;AACA,kBAAI,CAACtL,SAAL,EAAgB;AACdqE,gBAAAA,MAAM,CAAC,4BAAD,CAAN;AACAF,gBAAAA,UAAU,CAAC,IAAD,CAAV;AACD;;AA/HJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;;AAmIA,WAAO,YAAM;AACXnE,MAAAA,SAAS,GAAG,IAAZ;AACD,KAFD;AAGD,GA/LQ,EA+LN,CAACI,MAAM,CAACuJ,OAAR,EAAiBvJ,MAAM,CAACyJ,KAAP,CAAaD,SAA9B,EAAyC1H,GAAzC,EAA8CE,QAA9C,EAAwDE,KAAxD,CA/LM,CAAT,CA5IgC,CA6UhC;AACA;;AACApF,EAAAA,SAAS,CAAC,YAAM;AAAA,aACC4P,gBADD;AAAA;AAAA;;AAAA;AAAA,mFACd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAE8BvO,YAAY,EAF1C;;AAAA;AAEUwO,gBAAAA,WAFV;AAGI1B,gBAAAA,OAAO,CAAC2B,GAAR,CAAY,UAAZ,EAAwBD,WAAxB;AACAlJ,gBAAAA,UAAU,CAACkJ,WAAD,CAAV;AAJJ;AAAA;;AAAA;AAAA;AAAA;AAMI1B,gBAAAA,OAAO,CAACC,KAAR,CAAc,0BAAd;;AANJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADc;AAAA;AAAA;;AAUdwB,IAAAA,gBAAgB;AACjB,GAXQ,EAWN,EAXM,CAAT;AAaA5P,EAAAA,SAAS,CAAC,YAAM;AAAA,aACC+P,SADD;AAAA;AAAA;;AAAA;AAAA,4EACd;AAAA;AAAA;AAAA;AAAA;AAAA;AACQnD,gBAAAA,EADR,GACa1L,QAAQ,CAAC2L,SAAT,EADb;AAAA;AAAA,uBAEyBD,EAAE,CAACgB,UAAH,CAAc,MAAd,EAAsBC,GAAtB,EAFzB;;AAAA;AAEQmC,gBAAAA,QAFR;AAGMC,gBAAAA,KAHN,GAGc,IAAIC,GAAJ,EAHd;AAIMC,gBAAAA,KAJN,GAIc,IAAID,GAAJ,EAJd;AAKEF,gBAAAA,QAAQ,CAAC1D,OAAT,CAAiB,UAACwB,GAAD,EAAS;AACxB,sBAAMG,IAAI,GAAGH,GAAG,CAACG,IAAJ,EAAb;AACA,sBAAIA,IAAI,CAACzK,EAAT,EAAayM,KAAK,CAACG,GAAN,CAAUnC,IAAI,CAACzK,EAAf;AACb,sBAAIyK,IAAI,CAACxK,EAAT,EAAa0M,KAAK,CAACC,GAAN,CAAUnC,IAAI,CAACxK,EAAf;AACd,iBAJD;AAKAwC,gBAAAA,YAAY,oBAAKgK,KAAL,EAAZ;AACA9J,gBAAAA,YAAY,oBAAKgK,KAAL,EAAZ;;AAXF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADc;AAAA;AAAA;;AAcdJ,IAAAA,SAAS;AACV,GAfQ,EAeN,EAfM,CAAT;;AA5VgC,oBA8W9B9P,QAAQ,CAAC,KAAD,CA9WsB;AAAA,MA6WzBoQ,wBA7WyB;AAAA,MA6WC3B,2BA7WD;;AAgXhC1O,EAAAA,SAAS,CAAC,YAAM;AACd,QACE,CAACqQ,wBAAD,KACCvH,UAAU,IAAIJ,sBAAd,IAAwCF,eADzC,CADF,EAGE;AACA,UAAM8H,aAAa,GAAGvO,mBAAmB,CACvC+G,UADuC,EAEvCJ,sBAFuC,EAGvCF,eAHuC,CAAzC,CADA,CAOA;;AACA,UAAI,CAACxD,GAAD,IAAQA,GAAG,KAAK,KAApB,EAA2BC,MAAM,CAACqL,aAAa,CAACtL,GAAf,CAAN;AAC3B,UAAI,CAACE,QAAD,IAAaA,QAAQ,KAAK,KAA9B,EAAqCC,WAAW,CAACmL,aAAa,CAACpL,QAAf,CAAX;AACrC,UAAI,CAACE,KAAD,IAAUA,KAAK,KAAK,KAAxB,EAA+BC,QAAQ,CAACiL,aAAa,CAAClL,KAAf,CAAR;AAE/BsJ,MAAAA,2BAA2B,CAAC,IAAD,CAA3B;AACD;AACF,GAlBQ,EAkBN,CACD5F,UADC,EAEDJ,sBAFC,EAGDF,eAHC,EAID6H,wBAJC,CAlBM,CAAT;;AAhXgC,oBAyYJpQ,QAAQ,CAAC,IAAD,CAzYJ;AAAA,MAyYzBsQ,MAzYyB;AAAA,MAyYjBC,SAzYiB;;AA2YhCxQ,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIkD,MAAM,CAACuJ,OAAX,EAAoB;AAClB+D,MAAAA,SAAS,CAACtN,MAAM,CAACyJ,KAAP,CAAa4D,MAAb,IAAuB,IAAxB,CAAT;AACD;AACF,GAJQ,EAIN,CAACrN,MAAM,CAACuJ,OAAR,EAAiBvJ,MAAM,CAACyJ,KAAP,CAAa4D,MAA9B,CAJM,CAAT,CA3YgC,CAiZhC;AAEA;;AACA,MAAME,cAAc,GAAG,SAAjBA,cAAiB,CAACC,CAAD,EAAO;AAC5B,QAAMC,QAAQ,GAAGD,CAAC,CAACE,MAAF,CAASxF,KAA1B;AACA3G,IAAAA,QAAQ,CAAC,UAAC8J,IAAD,EAAU;AACjB,UAAIsC,SAAS,GAAG9D,KAAK,CAACC,OAAN,CAAcuB,IAAI,CAAC/K,EAAnB,uBAA6B+K,IAAI,CAAC/K,EAAlC,IAAwC,EAAxD;AACAqN,MAAAA,SAAS,CAAC,CAAD,CAAT,GAAeF,QAAf;AACA,6CAAYpC,IAAZ;AAAkB/K,QAAAA,EAAE,EAAEqN;AAAtB;AACD,KAJO,CAAR;AAKD,GAPD;;AASA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,KAAD,EAAQ3F,KAAR,EAAkB;AACvC3G,IAAAA,QAAQ,CAAC,UAAC8J,IAAD,EAAU;AACjB,UAAMjE,KAAK,sBAAOiE,IAAI,CAAC/K,EAAZ,CAAX;;AACA8G,MAAAA,KAAK,CAACyG,KAAD,CAAL,GAAe3F,KAAf;AACA,6CAAYmD,IAAZ;AAAkB/K,QAAAA,EAAE,EAAE8G;AAAtB;AACD,KAJO,CAAR;AAKD,GAND;;AAQA,MAAM0G,KAAK,GAAG,SAARA,KAAQ,GAAM;AAClB,QAAI1G,KAAK,CAAC2G,IAAN,OAAiB,EAArB,EAAyB;AACvBxM,MAAAA,QAAQ,CAAC,UAAC8J,IAAD;AAAA,+CACJA,IADI;AAEP/K,UAAAA,EAAE,+BAAM+K,IAAI,CAAC/K,EAAX,IAAe8G,KAAK,CAAC2G,IAAN,EAAf;AAFK;AAAA,OAAD,CAAR;AAID;;AACD1G,IAAAA,QAAQ,CAAC,EAAD,CAAR;AACAF,IAAAA,cAAc,CAAC,KAAD,CAAd;AACD,GATD,CAragC,CAgbhC;;;AACA,MAAM6G,cAAc,GAAG,SAAjBA,cAAiB,CAACR,CAAD,EAAO;AAC5B,QAAMC,QAAQ,GAAGD,CAAC,CAACE,MAAF,CAASxF,KAA1B;AACA3G,IAAAA,QAAQ,CAAC,UAAC8J,IAAD,EAAU;AACjB,UAAI4C,SAAS,GAAGpE,KAAK,CAACC,OAAN,CAAcuB,IAAI,CAAC9K,EAAnB,uBAA6B8K,IAAI,CAAC9K,EAAlC,IAAwC,EAAxD;AACA0N,MAAAA,SAAS,CAAC,CAAD,CAAT,GAAeR,QAAf;AACA,6CAAYpC,IAAZ;AAAkB9K,QAAAA,EAAE,EAAE0N;AAAtB;AACD,KAJO,CAAR;AAKD,GAPD;;AASA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACL,KAAD,EAAQ3F,KAAR,EAAkB;AACvC3G,IAAAA,QAAQ,CAAC,UAAC8J,IAAD,EAAU;AACjB,UAAM7D,KAAK,sBAAO6D,IAAI,CAAC9K,EAAZ,CAAX;;AACAiH,MAAAA,KAAK,CAACqG,KAAD,CAAL,GAAe3F,KAAf;AACA,6CAAYmD,IAAZ;AAAkB9K,QAAAA,EAAE,EAAEiH;AAAtB;AACD,KAJO,CAAR;AAKD,GAND;;AAQA,MAAM2G,KAAK,GAAG,SAARA,KAAQ,GAAM;AAClB,QAAI3G,KAAK,CAACuG,IAAN,OAAiB,EAArB,EAAyB;AACvBxM,MAAAA,QAAQ,CAAC,UAAC8J,IAAD;AAAA,+CACJA,IADI;AAEP9K,UAAAA,EAAE,+BAAM8K,IAAI,CAAC9K,EAAX,IAAeiH,KAAK,CAACuG,IAAN,EAAf;AAFK;AAAA,OAAD,CAAR;AAID;;AACDtG,IAAAA,QAAQ,CAAC,EAAD,CAAR;AACAF,IAAAA,cAAc,CAAC,KAAD,CAAd;AACD,GATD,CAlcgC,CA6chC;;;AACA,MAAM6G,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAC/B,QAAI1G,cAAc,CAACM,OAAnB,EAA4B;AAC1BN,MAAAA,cAAc,CAACM,OAAf,CAAuBqG,KAAvB;AACD;AACF,GAJD;;AAMA,MAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACd,CAAD,EAAO;AACjC,QAAMe,KAAK,GAAGf,CAAC,CAACE,MAAF,CAASa,KAAvB;;AACA,QAAIA,KAAK,CAACtN,MAAV,EAAkB;AAChB,UAAMuN,SAAS,GAAG,EAAlB;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,KAAK,CAACtN,MAA1B,EAAkCwN,CAAC,EAAnC,EAAuC;AACrCD,QAAAA,SAAS,CAACE,IAAV,CAAe;AACbC,UAAAA,IAAI,EAAEJ,KAAK,CAACE,CAAD,CADE;AAEbG,UAAAA,GAAG,EAAEC,GAAG,CAACC,eAAJ,CAAoBP,KAAK,CAACE,CAAD,CAAzB;AAFQ,SAAf;AAID;;AACD9K,MAAAA,SAAS,CAAC,UAACoL,UAAD;AAAA,4CAAoBA,UAApB,GAAmCP,SAAnC;AAAA,OAAD,CAAT;AACD;;AACDhB,IAAAA,CAAC,CAACE,MAAF,CAASxF,KAAT,GAAiB,EAAjB;AACD,GAbD,CApdgC,CAmehC;;;AACA,MAAM8G,aAAa,GAAG,SAAhBA,aAAgB,CAAClG,GAAD,EAAMF,MAAN,EAAiB;AACrC,QAAIA,MAAJ,EAAY;AACVzC,MAAAA,gBAAgB,CAACyC,MAAD,CAAhB;AACD;AACF,GAJD;;AAMA,MAAMqG,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzB,QAAMC,KAAK,GAAGC,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAd;AACA,QAAMC,MAAM,GAAGF,QAAQ,CAACG,aAAT,CAAuB,QAAvB,CAAf;AACAD,IAAAA,MAAM,CAACnO,KAAP,GAAegO,KAAK,CAACK,UAArB;AACAF,IAAAA,MAAM,CAAClO,MAAP,GAAgB+N,KAAK,CAACM,WAAtB;AACA,QAAMC,OAAO,GAAGJ,MAAM,CAACK,UAAP,CAAkB,IAAlB,CAAhB;AACAD,IAAAA,OAAO,CAACE,SAAR,CAAkBT,KAAlB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+BG,MAAM,CAACnO,KAAtC,EAA6CmO,MAAM,CAAClO,MAApD;AACAkO,IAAAA,MAAM,CAACO,MAAP,CAAc,UAACC,IAAD,EAAU;AACtB1J,MAAAA,gBAAgB,CAAC0J,IAAD,CAAhB;AACD,KAFD,EAEG,WAFH;AAGD,GAVD;;AAYA,MAAMC,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtBnM,IAAAA,SAAS,CAAC,UAACoL,UAAD;AAAA,0CACLA,UADK,IAER;AAAEJ,QAAAA,IAAI,EAAEzI,aAAR;AAAuB0I,QAAAA,GAAG,EAAEC,GAAG,CAACC,eAAJ,CAAoB5I,aAApB;AAA5B,OAFQ;AAAA,KAAD,CAAT;AAIAC,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAtB,IAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACD,GAPD;;AASA,MAAMkL,WAAW,GAAG,SAAdA,WAAc,CAAClC,KAAD,EAAW;AAC7BlK,IAAAA,SAAS,CAACD,MAAM,CAACsM,MAAP,CAAc,UAACC,CAAD,EAAIxB,CAAJ;AAAA,aAAUA,CAAC,KAAKZ,KAAhB;AAAA,KAAd,CAAD,CAAT;AACD,GAFD,CA/fgC,CAmgBhC;;;AACA,MAAMqC,WAAW,GAAG,SAAdA,WAAc;AAAA,WAAMrM,OAAO,CAAC,KAAD,CAAb;AAAA,GAApB;;AACA,MAAMsM,UAAU,GAAG,SAAbA,UAAa;AAAA,WAAMtM,OAAO,CAAC,IAAD,CAAb;AAAA,GAAnB;;AACA,MAAMuM,cAAc,GAAG,SAAjBA,cAAiB;AAAA,WAAMrM,UAAU,CAAC,KAAD,CAAhB;AAAA,GAAvB;;AACA,MAAMsM,aAAa,GAAG,SAAhBA,aAAgB;AAAA,WAAMtM,UAAU,CAAC,IAAD,CAAhB;AAAA,GAAtB;;AACA,MAAMuM,oBAAoB,GAAG,SAAvBA,oBAAuB;AAAA,WAAMvL,gBAAgB,CAAC,KAAD,CAAtB;AAAA,GAA7B;;AACA,MAAMwL,mBAAmB,GAAG,SAAtBA,mBAAsB;AAAA,WAAMxL,gBAAgB,CAAC,IAAD,CAAtB;AAAA,GAA5B;;AACA,MAAMyL,oBAAoB,GAAG,SAAvBA,oBAAuB;AAAA,WAAMrM,gBAAgB,CAAC,KAAD,CAAtB;AAAA,GAA7B;;AACA,MAAMsM,mBAAmB,GAAG,SAAtBA,mBAAsB;AAAA,WAAMtM,gBAAgB,CAAC,IAAD,CAAtB;AAAA,GAA5B;;AACA,MAAMuM,kBAAkB,GAAG,SAArBA,kBAAqB;AAAA,WAAMrM,cAAc,CAAC,KAAD,CAApB;AAAA,GAA3B;;AACA,MAAMsM,iBAAiB,GAAG,SAApBA,iBAAoB;AAAA,WAAMtM,cAAc,CAAC,IAAD,CAApB;AAAA,GAA1B;;AACA,MAAMuM,sBAAsB,GAAG,SAAzBA,sBAAyB;AAAA,WAAMrM,kBAAkB,CAAC,KAAD,CAAxB;AAAA,GAA/B;;AACA,MAAMsM,qBAAqB,GAAG,SAAxBA,qBAAwB;AAAA,WAAMtM,kBAAkB,CAAC,IAAD,CAAxB;AAAA,GAA9B;;AACA,MAAMuM,uBAAuB,GAAG,SAA1BA,uBAA0B;AAAA,WAAMrM,mBAAmB,CAAC,KAAD,CAAzB;AAAA,GAAhC;;AACA,MAAMsM,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAM;AACnCtM,IAAAA,mBAAmB,CAAC,IAAD,CAAnB;AACAF,IAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACD,GAHD;;AAIA,MAAMyM,sBAAsB,GAAG,SAAzBA,sBAAyB;AAAA,WAAMrM,kBAAkB,CAAC,KAAD,CAAxB;AAAA,GAA/B;;AACA,MAAMsM,qBAAqB,GAAG,SAAxBA,qBAAwB;AAAA,WAAMtM,kBAAkB,CAAC,IAAD,CAAxB;AAAA,GAA9B,CAthBgC,CAwhBhC;;;AACA,MAAMuM,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3B9N,IAAAA,eAAe,8BAAKD,YAAL,IAAmB;AAAED,MAAAA,WAAW,EAAE,EAAf;AAAmBzC,MAAAA,IAAI,EAAE;AAAzB,KAAnB,GAAf;AACD,GAFD;;AAIA,MAAM0Q,iBAAiB,GAAG,SAApBA,iBAAoB,CAACtD,KAAD,EAAW;AACnCzK,IAAAA,eAAe,CAACD,YAAY,CAAC6M,MAAb,CAAoB,UAACC,CAAD,EAAIxB,CAAJ;AAAA,aAAUA,CAAC,KAAKZ,KAAhB;AAAA,KAApB,CAAD,CAAf;AACD,GAFD;;AAIA,MAAMuD,uBAAuB,GAAG,SAA1BA,uBAA0B,CAACvD,KAAD,EAAQwD,KAAR,EAAenJ,KAAf,EAAyB;AACvD,QAAMoJ,eAAe,GAAGnO,YAAY,CAACoO,GAAb,CAAiB,UAACC,IAAD,EAAO/C,CAAP;AAAA,aACvCA,CAAC,KAAKZ,KAAN,mCAAmB2D,IAAnB,2BAA0BH,KAA1B,EAAkCnJ,KAAlC,KAA4CsJ,IADL;AAAA,KAAjB,CAAxB;AAGApO,IAAAA,eAAe,CAACkO,eAAD,CAAf;AACD,GALD;;AAOA,MAAMG,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzBlO,IAAAA,aAAa,8BAAKD,UAAL,IAAiB;AAAED,MAAAA,SAAS,EAAE,EAAb;AAAiB5C,MAAAA,IAAI,EAAE;AAAvB,KAAjB,GAAb;AACD,GAFD;;AAIA,MAAMiR,eAAe,GAAG,SAAlBA,eAAkB,CAAC7D,KAAD,EAAW;AACjCtK,IAAAA,aAAa,CAACD,UAAU,CAAC0M,MAAX,CAAkB,UAACC,CAAD,EAAIxB,CAAJ;AAAA,aAAUA,CAAC,KAAKZ,KAAhB;AAAA,KAAlB,CAAD,CAAb;AACD,GAFD;;AAIA,MAAM8D,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAC9D,KAAD,EAAQwD,KAAR,EAAenJ,KAAf,EAAyB;AACrD,QAAM0J,aAAa,GAAGtO,UAAU,CAACiO,GAAX,CAAe,UAACM,EAAD,EAAKpD,CAAL;AAAA,aACnCA,CAAC,KAAKZ,KAAN,mCAAmBgE,EAAnB,2BAAwBR,KAAxB,EAAgCnJ,KAAhC,KAA0C2J,EADP;AAAA,KAAf,CAAtB;AAGAtO,IAAAA,aAAa,CAACqO,aAAD,CAAb;AACD,GALD;;AAOA,MAAME,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC7B3N,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACD,GAFD;;AAIA,MAAM4N,iBAAiB,GAAG,SAApBA,iBAAoB,CAAClE,KAAD,EAAW;AACnC1I,IAAAA,eAAe,CAAC0I,KAAD,CAAf;AACA1J,IAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD,GAHD,CA3jBgC,CAgkBhC;;;AACA,MAAM6N,gBAAgB;AAAA,yEAAG,kBAAOC,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACvB;AACA,kBAAIzL,WAAJ,EAAiB;AACfjB,gBAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACA2M,gBAAAA,mBAAmB,CAAC,KAAD,CAAnB;AACD,eAHD,MAGO;AACLzM,gBAAAA,yBAAyB,CAAC,IAAD,CAAzB;AACA0M,gBAAAA,sBAAsB,CAAC,KAAD,CAAtB;AACD;;AAEKzI,cAAAA,EAViB,GAUZ1L,QAAQ,CAAC2L,SAAT,EAVY;AAAA;AAAA,qBAWCD,EAAE,CAACgB,UAAH,CAAc,QAAd,EAAwBE,GAAxB,CAA4BqH,QAA5B,EAAsCtH,GAAtC,EAXD;;AAAA;AAWjByH,cAAAA,SAXiB;;AAAA,mBAYnBA,SAAS,CAACvH,MAZS;AAAA;AAAA;AAAA;;AAafwH,cAAAA,UAbe,GAaFD,SAAS,CAACrH,IAAV,EAbE;;AAcrB,kBAAIvE,WAAJ,EAAiB;AACfwF,gBAAAA,qBAAqB;AAAGlB,kBAAAA,EAAE,EAAEsH,SAAS,CAACtH;AAAjB,mBAAwBuH,UAAxB,EAArB;AACD,eAFD,MAEO;AACLlG,gBAAAA,wBAAwB;AAAGrB,kBAAAA,EAAE,EAAEsH,SAAS,CAACtH;AAAjB,mBAAwBuH,UAAxB,EAAxB;AACD;;AACD,kBAAIA,UAAU,CAAC7S,IAAX,KAAoB,gBAAxB,EAA0C;AACxC,oBAAIgH,WAAJ,EAAiB0L,mBAAmB,CAAC,IAAD,CAAnB,CAAjB,KACKC,sBAAsB,CAAC,IAAD,CAAtB;AACN,eAtBoB,CAuBrB;;;AACMG,cAAAA,eAxBe,GAwBGD,UAAU,CAACE,QAAX,CAAoBhB,GAApB,CAAwB,UAACiB,UAAD;AAAA,uBAC9CA,UAAU,CAAC7H,GAAX,EAD8C;AAAA,eAAxB,CAxBH;AAAA;AAAA,qBA2BKxL,OAAO,CAACsT,GAAR,CAAYH,eAAZ,CA3BL;;AAAA;AA2BfI,cAAAA,WA3Be;AA4BfH,cAAAA,QA5Be,GA4BJG,WAAW,CAACnB,GAAZ,CAAgB,UAACoB,UAAD;AAAA;AAC/B7H,kBAAAA,EAAE,EAAE6H,UAAU,CAAC7H;AADgB,mBAE5B6H,UAAU,CAAC5H,IAAX,EAF4B;AAAA,eAAhB,CA5BI;AAgCrBhF,cAAAA,iBAAiB,CAACwM,QAAD,CAAjB;AACA3B,cAAAA,sBAAsB;;AAjCD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAhBoB,gBAAgB;AAAA;AAAA;AAAA,KAAtB;;AAqCA,MAAMY,YAAY;AAAA,yEAAG,kBAAOC,SAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACbnJ,cAAAA,EADa,GACR1L,QAAQ,CAAC2L,SAAT,EADQ;AAAA;AAAA,qBAEDD,EAAE,CAACgB,UAAH,CAAc,SAAd,EAAyBE,GAAzB,CAA6BiI,SAA7B,EAAwClI,GAAxC,EAFC;;AAAA;AAEbC,cAAAA,GAFa;;AAAA,mBAGfA,GAAG,CAACC,MAHW;AAAA;AAAA;AAAA;;AAIXiI,cAAAA,WAJW,GAIGlI,GAAG,CAACG,IAAJ,EAJH;AAKjBlF,cAAAA,aAAa,CAACiN,WAAD,CAAb,CALiB,CAOjB;;AACA,kBAAI,CAAChR,GAAD,IAAQA,GAAG,KAAK,KAApB,EACEC,MAAM,CAAC+Q,WAAW,CAAChR,GAAZ,IAAmBgR,WAAW,CAACrH,GAA/B,IAAsC,EAAvC,CAAN;AACF,kBAAI,CAACzJ,QAAD,IAAaA,QAAQ,KAAK,KAA9B,EACEC,WAAW,CAAC6Q,WAAW,CAAC9Q,QAAZ,IAAwB8Q,WAAW,CAACpH,QAApC,IAAgD,EAAjD,CAAX;AACF,kBAAI,CAACxJ,KAAD,IAAUA,KAAK,KAAK,KAAxB,EACEC,QAAQ,CAAC2Q,WAAW,CAAC5Q,KAAZ,IAAqB4Q,WAAW,CAACnH,KAAjC,IAA0C,EAA3C,CAAR,CAbe,CAejB;;AAfiB;AAAA,qBAgBcjC,EAAE,CAC9BgB,UAD4B,CACjB,SADiB,EAE5BqI,KAF4B,CAEtB,OAFsB,EAEb,IAFa,EAEPD,WAAW,CAACnH,KAAZ,IAAqBmH,WAAW,CAAC5Q,KAF1B,EAG5ByI,GAH4B,EAhBd;;AAAA;AAgBXqI,cAAAA,gBAhBW;AAoBjBjM,cAAAA,mBAAmB,CAACiM,gBAAgB,CAACC,IAAlB,CAAnB;AApBiB;AAAA;;AAAA;AAsBjBhI,cAAAA,OAAO,CAACC,KAAR,CAAc,mBAAd;;AAtBiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZ0H,YAAY;AAAA;AAAA;AAAA,KAAlB,CAtmBgC,CAgoBhC;;;AACA,MAAMM,8BAA8B;AAAA,yEAAG,kBAAO5S,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAC/BoJ,cAAAA,EAD+B,GAC1B1L,QAAQ,CAAC2L,SAAT,EAD0B;AAE/BwJ,cAAAA,WAF+B,GAEjB,IAAIzS,IAAJ,EAFiB;AAG/B0S,cAAAA,UAH+B,GAGlB,IAAI1S,IAAJ,EAHkB;AAIrC0S,cAAAA,UAAU,CAACC,WAAX,CAAuBF,WAAW,CAACG,WAAZ,KAA4B,CAAnD;AAJqC;AAAA,qBAKT5J,EAAE,CAC3BgB,UADyB,CACd,MADc,EAEzBqI,KAFyB,CAEnB,IAFmB,EAEb,IAFa,EAEPzS,EAFO,EAGzBqK,GAHyB,EALS;;AAAA;AAK/B4I,cAAAA,aAL+B;AASrC5M,cAAAA,WAAW,CAAC4M,aAAa,CAACN,IAAf,CAAX;AACIrM,cAAAA,aAViC,GAUjB,CAViB;AAWrC2M,cAAAA,aAAa,CAACnK,OAAd,CAAsB,UAACwB,GAAD,EAAS;AAC7B,oBAAM4I,QAAQ,GAAG5I,GAAG,CAACG,IAAJ,EAAjB;AACAyI,gBAAAA,QAAQ,CAAClQ,UAAT,CAAoB8F,OAApB,CAA4B,UAAC/F,SAAD,EAAe;AACzC,sBAAMoQ,aAAa,GAAG,IAAI/S,IAAJ,CAAS2C,SAAS,CAAC5C,IAAnB,CAAtB;;AACA,sBAAIgT,aAAa,IAAIL,UAAjB,IAA+BK,aAAa,IAAIN,WAApD,EAAiE;AAC/DvM,oBAAAA,aAAa;AACd;AACF,iBALD;AAMD,eARD;AASAC,cAAAA,gBAAgB,CAACD,aAAD,CAAhB;;AApBqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAA9BsM,8BAA8B;AAAA;AAAA;AAAA,KAApC,CAjoBgC,CAwpBhC;;;AACA,MAAMQ,YAAY;AAAA,yEAAG,kBAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACbC,cAAAA,UADa,GACA5V,QAAQ,CAAC6V,OAAT,GAAmBpJ,GAAnB,EADA;AAEVgE,cAAAA,CAFU,GAEN,CAFM;;AAAA;AAAA,oBAEHA,CAAC,GAAG/K,MAAM,CAACzC,MAFR;AAAA;AAAA;AAAA;;AAAA,mBAGbyC,MAAM,CAAC+K,CAAD,CAAN,CAAUE,IAHG;AAAA;AAAA;AAAA;;AAITmF,cAAAA,QAJS,GAIEF,UAAU,CAACG,KAAX,iBACNJ,KADM,cACGA,KADH,SACWlF,CAAC,KAAK,CAAN,GAAU,MAAV,cAAuBA,CAAC,GAAG,CAA3B,SADX,EAJF;AAOTuF,cAAAA,QAPS,GAOE;AAAEC,gBAAAA,WAAW,EAAE;AAAf,eAPF;AAAA;AAAA,qBAQTH,QAAQ,CAACI,GAAT,CAAaxQ,MAAM,CAAC+K,CAAD,CAAN,CAAUE,IAAvB,EAA6BqF,QAA7B,CARS;;AAAA;AAAA;AAAA,qBASGF,QAAQ,CAACK,cAAT,EATH;;AAAA;AASTvF,cAAAA,GATS;AAUflL,cAAAA,MAAM,CAAC+K,CAAD,CAAN,CAAUG,GAAV,GAAgBA,GAAhB;;AAVe;AAEgBH,cAAAA,CAAC,EAFjB;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZiF,YAAY;AAAA;AAAA;AAAA,KAAlB,CAzpBgC,CAwqBhC;AACA;;;AAzqBgC,WA0qBjBU,YA1qBiB;AAAA;AAAA;;AAAA;AAAA,6EA0qBhC,mBAA4BC,KAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AACEA,cAAAA,KAAK,CAACC,cAAN;;AADF,kBAEOC,iBAFP;AAAA;AAAA;AAAA;;AAGIpE,cAAAA,UAAU;AAHd;AAAA;;AAAA;AAKIlI,cAAAA,cAAc,CAAC,IAAD,CAAd,CALJ,CAK0B;;AAL1B;AAAA;AAAA,qBAO0BuM,MAAM,EAPhC;;AAAA;AAOYC,cAAAA,KAPZ;;AAQM,kBAAI,CAACA,KAAL,EAAY;AACVxQ,gBAAAA,MAAM,CAAC,gCAAD,CAAN;AACAF,gBAAAA,UAAU,CAAC,IAAD,CAAV;AACD;;AAXP;AAAA;;AAAA;AAAA;AAAA;AAaMkH,cAAAA,OAAO,CAACC,KAAR;AACAjH,cAAAA,MAAM,CAAC,6EAAOyQ,OAAP,KAAkB,cAAnB,CAAN;AACA3Q,cAAAA,UAAU,CAAC,IAAD,CAAV;;AAfN;AAAA;AAiBMkE,cAAAA,cAAc,CAAC,KAAD,CAAd,CAjBN,CAiB6B;;AAjB7B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA1qBgC;AAAA;AAAA;;AAAA,WAgsBjBuM,MAhsBiB;AAAA;AAAA;;AAAA;AAAA,uEAgsBhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAsBG,cAAAA,QAAtB,iEAAiC,IAAjC;AAAuCC,cAAAA,OAAvC,iEAAiD,EAAjD;AACU9J,cAAAA,EADV,GACiB9K,MAAM,CAACyJ,KADxB,CACUqB,EADV;AAEQpB,cAAAA,EAFR,GAEa1L,QAAQ,CAAC2L,SAAT,EAFb;AAAA,kCAG+BiL,OAH/B,CAGUC,QAHV,EAGUA,QAHV,kCAGqB,KAHrB;AAIQC,cAAAA,UAJR,GAIqBD,QAAQ,GAAG,IAAH,GAAWhN,UAAU,IAAIiD,EAAd,IAAoB,IAJ5D,EAME;;AACMiK,cAAAA,WAPR,GAOsB/W,QAAQ,CAACgX,IAAT,GAAgBD,WAPtC;AAQQE,cAAAA,SARR,GAQoBF,WAAW,GAAGA,WAAW,CAACG,KAAf,GAAuB,SARtD,EAUE;;AACMpC,cAAAA,WAXR,mCAYQlN,UAAU,IAAI,EAZtB;AAaI9D,gBAAAA,GAAG,EAAEA,GAbT;AAcIE,gBAAAA,QAAQ,EAAEA,QAdd;AAeIE,gBAAAA,KAAK,EAAEA;AAfX;AAkBQiT,cAAAA,cAlBR,mCAkB8B7T,KAlB9B;AAkBqC6B,gBAAAA,YAAY,EAAZA,YAlBrC;AAkBmDG,gBAAAA,UAAU,EAAVA;AAlBnD,kBAmBE;;AACA6R,cAAAA,cAAc,CAACrU,MAAf,GAAwBQ,KAAK,CAACR,MAAN,IAAgB,EAAxC;AACAqU,cAAAA,cAAc,CAACC,SAAf,GAA2B,CAAC9T,KAAK,CAAC9B,IAAN,IAAc,EAAf,EAAmB6V,WAAnB,EAA3B;AACAF,cAAAA,cAAc,CAACG,UAAf,GAA4BxW,eAAe,CAACwC,KAAK,CAAC9B,IAAP,CAA3C;AACA2V,cAAAA,cAAc,CAACvT,GAAf,GAAqBA,GAArB,CAvBF,CAuB4B;;AACpB2T,cAAAA,WAxBR,GAwBsB5W,mBAAmB,CAAC+D,YAAD,CAxBzC;AAyBQ8S,cAAAA,cAzBR,GAyByB7W,mBAAmB,CAACiE,eAAD,CAzB5C;;AA2BE,kBAAIsG,MAAM,CAACC,IAAP,CAAYoM,WAAZ,EAAyBtU,MAA7B,EAAqC;AACnCkU,gBAAAA,cAAc,CAACzS,YAAf,GAA8B6S,WAA9B;AACAJ,gBAAAA,cAAc,CAACM,YAAf,GAA8B7W,SAAS,CAAC8D,YAAD,CAAT,IAA2B,EAAzD;AACD,eAHD,MAGO;AACLyS,gBAAAA,cAAc,CAACM,YAAf,GAA8B,EAA9B;AACAN,gBAAAA,cAAc,CAACzS,YAAf,GAA8B,EAA9B;AACD;;AAED,kBAAIwG,MAAM,CAACC,IAAP,CAAYqM,cAAZ,EAA4BvU,MAAhC,EAAwC;AACtCkU,gBAAAA,cAAc,CAACvS,eAAf,GAAiC4S,cAAjC;AACAL,gBAAAA,cAAc,CAACO,eAAf,GAAiC9W,SAAS,CAACgE,eAAD,CAAT,IAA8B,EAA/D;AACD,eAHD,MAGO;AACLuS,gBAAAA,cAAc,CAACO,eAAf,GAAiC,EAAjC;AACAP,gBAAAA,cAAc,CAACvS,eAAf,GAAiC,EAAjC;AACD;;AACDuS,cAAAA,cAAc,CAAC1U,IAAf,GAAsBa,KAAK,CAACb,IAAN,IAAc,EAApC;AACA0U,cAAAA,cAAc,CAAC/T,YAAf,GAA8BE,KAAK,CAACF,YAAN,IAAsB,EAApD,CA3CF,CA2C0D;;AACxD+T,cAAAA,cAAc,CAACpU,QAAf,GAA0BO,KAAK,CAACP,QAAN,IAAkB,EAA5C;AACAoU,cAAAA,cAAc,CAACnU,cAAf,GAAgCM,KAAK,CAACN,cAAN,IAAwB,EAAxD;AACAmU,cAAAA,cAAc,CAACvP,UAAf,GAA4BkN,WAAW,IAAI,EAA3C;AACAqC,cAAAA,cAAc,CAAC5J,cAAf,GAAgCjF,YAAhC;AACA6O,cAAAA,cAAc,CAAC9T,OAAf,GAAyBC,KAAK,CAACD,OAA/B,CAhDF,CAkDE;;AACA8T,cAAAA,cAAc,CAACQ,IAAf,GAAsBV,SAAtB;AACAE,cAAAA,cAAc,CAACS,UAAf,GAA4BX,SAA5B,CApDF,CAqDE;;AACAE,cAAAA,cAAc,CAAC7U,EAAf,GAAoB,CAACgB,KAAK,CAAChB,EAAN,IAAY,EAAb,EAAiBiR,GAAjB,CAAqB,UAACrJ,KAAD;AAAA,uBACvCA,KAAK,KAAKoB,SAAV,GAAsB,EAAtB,GAA2BpB,KADY;AAAA,eAArB,CAApB;AAGAiN,cAAAA,cAAc,CAAC5U,EAAf,GAAoB,CAACe,KAAK,CAACf,EAAN,IAAY,EAAb,EAAiBgR,GAAjB,CAAqB,UAACrJ,KAAD;AAAA,uBACvCA,KAAK,KAAKoB,SAAV,GAAsB,EAAtB,GAA2BpB,KADY;AAAA,eAArB,CAApB,CAzDF,CA6DE;;AACA,kBAAI5C,eAAe,IAAIA,eAAe,CAACwF,EAAvC,EAA2C;AACzCqK,gBAAAA,cAAc,CAAC/I,WAAf,GAA6B1C,EAAE,CAC5BgB,UAD0B,CACf,SADe,EAE1BE,GAF0B,CAEtBtF,eAAe,CAACwF,EAFM,CAA7B;AAGD;;AACD,kBAAItF,sBAAsB,IAAIA,sBAAsB,CAACsF,EAArD,EAAyD;AACvDqK,gBAAAA,cAAc,CAAC5I,cAAf,GAAgC7C,EAAE,CAC/BgB,UAD6B,CAClB,SADkB,EAE7BE,GAF6B,CAEzBpF,sBAAsB,CAACsF,EAFE,CAAhC;AAGD,eAvEH,CAyEE;;;AACA,kBAAI+K,kBAAkB,IAAIA,kBAAkB,CAAC/K,EAA7C,EAAiD;AAC/CqK,gBAAAA,cAAc,CAACrJ,UAAf,GAA4BpC,EAAE,CAC3BgB,UADyB,CACd,QADc,EAEzBE,GAFyB,CAErBiL,kBAAkB,CAAC/K,EAFE,CAA5B;AAGD;;AACD,kBAAIgL,qBAAqB,IAAIA,qBAAqB,CAAChL,EAAnD,EAAuD;AACrDqK,gBAAAA,cAAc,CAAClJ,aAAf,GAA+BvC,EAAE,CAC9BgB,UAD4B,CACjB,QADiB,EAE5BE,GAF4B,CAExBkL,qBAAqB,CAAChL,EAFE,CAA/B;AAGD,eAnFH,CAoFE;;;AAEA,kBAAIpF,cAAc,IAAIA,cAAc,CAACoF,EAArC,EAAyC;AACvCqK,gBAAAA,cAAc,CAACvJ,MAAf,GAAwBlC,EAAE,CAACgB,UAAH,CAAc,MAAd,EAAsBE,GAAtB,CAA0BlF,cAAc,CAACoF,EAAzC,CAAxB;AACD,eAxFH,CA0FE;;;AACA,kBAAI,CAACgK,UAAL,EAAiB;AACfK,gBAAAA,cAAc,CAACY,WAAf,GAA6B,IAAIrV,IAAJ,GAAWC,WAAX,GAAyBC,KAAzB,CAA+B,GAA/B,EAAoC,CAApC,CAA7B,CADe,CACsD;AACtE,eA7FH,CA+FE;;;AACI6T,cAAAA,KAhGN,GAgGcK,UAhGd;;AAkGQkB,cAAAA,uBAlGR,GAkGkC,SAA1BA,uBAA0B,CAACC,WAAD,EAAiB;AAC/C,oBAAMC,OAAO,GAAG,EAAhB;;AACA,oBAAI5Q,eAAe,IAAIA,eAAe,CAACwF,EAAvC,EAA2C;AACzCoL,kBAAAA,OAAO,CAACxH,IAAR,CACEhF,EAAE,CACCgB,UADH,CACc,SADd,EAEGE,GAFH,CAEOtF,eAAe,CAACwF,EAFvB,EAGGqL,MAHH,CAGU;AACNC,oBAAAA,eAAe,EAAEpY,QAAQ,CAAC2L,SAAT,CAAmB0M,UAAnB,CAA8BC,UAA9B,CACf5M,EAAE,CAACgB,UAAH,CAAc,MAAd,EAAsBE,GAAtB,CAA0BqL,WAA1B,CADe;AADX,mBAHV,CADF;AAUD;;AACD,oBAAIzQ,sBAAsB,IAAIA,sBAAsB,CAACsF,EAArD,EAAyD;AACvDoL,kBAAAA,OAAO,CAACxH,IAAR,CACEhF,EAAE,CACCgB,UADH,CACc,SADd,EAEGE,GAFH,CAEOpF,sBAAsB,CAACsF,EAF9B,EAGGqL,MAHH,CAGU;AACNC,oBAAAA,eAAe,EAAEpY,QAAQ,CAAC2L,SAAT,CAAmB0M,UAAnB,CAA8BC,UAA9B,CACf5M,EAAE,CAACgB,UAAH,CAAc,MAAd,EAAsBE,GAAtB,CAA0BqL,WAA1B,CADe;AADX,mBAHV,CADF;AAUD;;AACD,oBAAIC,OAAO,CAACjV,MAAZ,EAAoB;AAClB9B,kBAAAA,OAAO,CAACoX,UAAR,CAAmBL,OAAnB,EAA4BrW,IAA5B,CAAiC,UAAC2W,OAAD,EAAa;AAC5CA,oBAAAA,OAAO,CAACpN,OAAR,CAAgB,UAACR,MAAD,EAAY;AAC1B,0BAAIA,MAAM,CAAC9H,MAAP,KAAkB,UAAtB,EAAkC;AAChCmK,wBAAAA,OAAO,CAACC,KAAR,CAAc,iCAAd,EAAiDtC,MAAM,CAAC6N,MAAxD;AACD;AACF,qBAJD;AAKD,mBAND;AAOD;AACF,eArIH;;AAuIQC,cAAAA,gBAvIR,GAuI2B,SAAnBA,gBAAmB,CAACT,WAAD,EAAiB;AACxC,oBAAMU,YAAY,GAAGjT,MAAM,CAACkT,IAAP,CAAY,UAACC,KAAD;AAAA,yBAAWA,KAAK,IAAIA,KAAK,CAAClI,IAA1B;AAAA,iBAAZ,CAArB;AACA,oBAAI,CAACgI,YAAL,EAAmB;AACnBjD,gBAAAA,YAAY,CAACuC,WAAD,CAAZ,UAAgC,UAAC/K,KAAD,EAAW;AACzCD,kBAAAA,OAAO,CAACC,KAAR,CAAc,yBAAd,EAAyCA,KAAzC;AACD,iBAFD;AAGD,eA7IH;;AAAA;;AAAA,mBAgJQuJ,KAhJR;AAAA;AAAA;AAAA;;AAiJM;AACMqC,cAAAA,QAlJZ,GAmJQxV,KAAK,CAACd,OAAN,IAAiBc,KAAK,CAACd,OAAN,CAAcuN,IAAd,OAAyB,EAA1C,GACIzM,KAAK,CAACd,OAAN,CAAcuN,IAAd,EADJ,GAEI0G,KArJZ;;AAAA,oBAsJUA,KAAK,KAAKqC,QAtJpB;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAwJc3O,WAAW,CACfuB,EAAE,CAACgB,UAAH,CAAc,MAAd,EAAsBE,GAAtB,CAA0BkM,QAA1B,EAAoCC,GAApC,CAAwC5B,cAAxC,CADe,EAEf,KAFe,EAGf,gBAHe,CAxJzB;;AAAA;AA8JQa,cAAAA,uBAAuB,CAACc,QAAD,CAAvB;AACAJ,cAAAA,gBAAgB,CAACI,QAAD,CAAhB,CA/JR,CAiKQ;;AAjKR;AAAA;AAAA,qBAmKgB3O,WAAW,CACfuB,EAAE,CAACgB,UAAH,CAAc,MAAd,EAAsBE,GAAtB,CAA0B6J,KAA1B,aADe,EAEf,KAFe,EAGf,iBAHe,CAnK3B;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAyKUxJ,cAAAA,OAAO,CAACC,KAAR,CAAc,0BAAd;;AAzKV;AA4KQ;AACAuJ,cAAAA,KAAK,GAAGqC,QAAR;AA7KR;AAAA;;AAAA;AA+KQ;AACME,cAAAA,mBAhLd,GAgLoCjO,YAAY,CAACoM,cAAD,CAhLhD;AAAA;AAAA,qBAiLchN,WAAW,CACfuB,EAAE,CAACgB,UAAH,CAAc,MAAd,EAAsBE,GAAtB,CAA0B6J,KAA1B,EAAiC0B,MAAjC,CAAwCa,mBAAxC,CADe,EAEf,KAFe,EAGf,gBAHe,CAjLzB;;AAAA;AAuLQhB,cAAAA,uBAAuB,CAACvB,KAAD,CAAvB;AACAiC,cAAAA,gBAAgB,CAACjC,KAAD,CAAhB;;AAxLR;AAAA;AAAA;;AAAA;AA2LM;AACAA,cAAAA,KAAK,GACHnT,KAAK,CAACd,OAAN,IAAiBc,KAAK,CAACd,OAAN,CAAcuN,IAAd,OAAyB,EAA1C,GACIzM,KAAK,CAACd,OAAN,CAAcuN,IAAd,EADJ,GAEIkJ,gBAAgB,EAHtB;AA5LN;AAAA,qBAgMY9O,WAAW,CACfuB,EAAE,CAACgB,UAAH,CAAc,MAAd,EAAsBE,GAAtB,CAA0B6J,KAA1B,EAAiCsC,GAAjC,CAAqC5B,cAArC,CADe,EAEf,KAFe,EAGf,gBAHe,CAhMvB;;AAAA;AAsMMa,cAAAA,uBAAuB,CAACvB,KAAD,CAAvB;AACAiC,cAAAA,gBAAgB,CAACjC,KAAD,CAAhB;;AAvMN;AA0MIxJ,cAAAA,OAAO,CAAC2B,GAAR,CAAY,aAAZ;;AAEA,kBAAI,CAACiI,QAAL,EAAe;AACb/M,gBAAAA,aAAa,CAAC2M,KAAD,CAAb;AACD,eA9ML,CAgNI;;;AACA,kBAAIE,QAAJ,EAAc;AACZ3U,gBAAAA,MAAM,CAAC0O,IAAP,2BAA+B+F,KAA/B;AACD,eAFD,MAEO;AACL;AACAlE,gBAAAA,mBAAmB;AACpB;;AAtNL,iDAuNWkE,KAvNX;;AAAA;AAAA;AAAA;AAyNIxJ,cAAAA,OAAO,CAACC,KAAR,CAAc,oBAAd;AAzNJ,iDA0NW,IA1NX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAhsBgC;AAAA;AAAA;;AA85BhC,MAAMqJ,iBAAiB,GACrB,CAACjT,KAAK,CAAC9B,IAAN,IAAc,EAAf,EAAmBuO,IAAnB,OAA8B,EAA9B,IACA,CAAC,0BAAA5K,YAAY,CAAC+B,YAAD,CAAZ,gFAA4BhC,WAA5B,KAA2C,EAA5C,EAAgD6K,IAAhD,OAA2D,EAF7D;;AAIA,MAAMmJ,WAAW;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACb3C,iBADa;AAAA;AAAA;AAAA;;AAEhBpE,cAAAA,UAAU;AAFM,gDAGT,IAHS;;AAAA;AAAA,mBAKdtI,UALc;AAAA;AAAA;AAAA;;AAAA,gDAKKA,UALL;;AAAA;AAAA;AAAA,qBAME2M,MAAM,CAAC,KAAD,CANR;;AAAA;AAMZC,cAAAA,KANY;;AAOlB,kBAAI,CAACA,KAAL,EAAY;AACVxQ,gBAAAA,MAAM,CAAC,oCAAD,CAAN;AACAF,gBAAAA,UAAU,CAAC,IAAD,CAAV;AACD;;AAViB,gDAWX0Q,KAXW;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAXyC,WAAW;AAAA;AAAA;AAAA,KAAjB,CAl6BgC,CAg7BhC;;;AAh7BgC,oBAi7BUna,QAAQ,CAAC,KAAD,CAj7BlB;AAAA,MAi7BzBoa,aAj7ByB;AAAA,MAi7BVC,gBAj7BU;;AAAA,oBAk7BAra,QAAQ,CAAC,EAAD,CAl7BR;AAAA,MAk7BzBsa,QAl7ByB;AAAA,MAk7BfC,WAl7Be;;AAm7BhC,MAAMC,mBAAmB;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AACpB7N,cAAAA,EADoB,GACf1L,QAAQ,CAAC2L,SAAT,EADe;AAAA;AAGlB8K,cAAAA,KAHkB,GAGV5M,UAAU,IAAI7H,MAAM,CAACyJ,KAAP,CAAaqB,EAHjB;;AAAA,kBAInB2J,KAJmB;AAAA;AAAA;AAAA;;AAKtBxQ,cAAAA,MAAM,CAAC,oCAAD,CAAN;AACAF,cAAAA,UAAU,CAAC,IAAD,CAAV;AANsB;;AAAA;AAAA;AAAA,qBASN2F,EAAE,CAACgB,UAAH,CAAc,MAAd,EAAsBE,GAAtB,CAA0B6J,KAA1B,EAAiC9J,GAAjC,EATM;;AAAA;AASlBC,cAAAA,GATkB;;AAUxB,kBAAIA,GAAG,CAACC,MAAR,EAAgB;AACRE,gBAAAA,IADQ,GACDH,GAAG,CAACG,IAAJ,EADC;AAEduM,gBAAAA,WAAW,CAACvM,IAAI,CAACvL,IAAL,IAAa,KAAd,CAAX;AACA4X,gBAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACD,eAJD,MAIO;AACLnM,gBAAAA,OAAO,CAACC,KAAR,CAAc,gBAAd;AACD;;AAhBuB;AAAA;;AAAA;AAAA;AAAA;AAkBxBD,cAAAA,OAAO,CAACC,KAAR,CAAc,2BAAd;;AAlBwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAnBqM,mBAAmB;AAAA;AAAA;AAAA,KAAzB;;AAqBA,MAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB;AAAA,WAAMJ,gBAAgB,CAAC,KAAD,CAAtB;AAAA,GAA7B;;AAEA,MAAMK,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAM;AACnC5S,IAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACAsB,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACD,GAHD;;AAKA,MAAMuR,YAAY,GAAG,SAAfA,YAAe,CAACrG,KAAD;AAAA,WAAW,UAACgD,KAAD,EAAW;AACzC,UAAMnM,KAAK,GAAGmM,KAAK,CAAC3G,MAAN,GAAe2G,KAAK,CAAC3G,MAAN,CAAaxF,KAA5B,GAAoCmM,KAAK,CAACnM,KAAxD;AACA3G,MAAAA,QAAQ,CAAC,UAACoW,SAAD;AAAA,+CAAqBA,SAArB,2BAAiCtG,KAAjC,EAAyCnJ,KAAzC;AAAA,OAAD,CAAR;AACD,KAHoB;AAAA,GAArB;;AAKA,MAAM0P,mBAAmB,GACvBtU,UAAU,IAAIA,UAAU,CAACrC,MAAX,GAAoB,CAAlC,GACIqC,UAAU,CAACuU,MAAX,CAAkB,UAACC,MAAD,EAAS9P,OAAT,EAAqB;AACrC,QAAM+P,UAAU,GAAG,IAAIrX,IAAJ,CAASoX,MAAM,CAACrX,IAAhB,CAAnB;AACA,QAAM0S,WAAW,GAAG,IAAIzS,IAAJ,CAASsH,OAAO,CAACvH,IAAjB,CAApB;AACA,WAAO0S,WAAW,GAAG4E,UAAd,GAA2B/P,OAA3B,GAAqC8P,MAA5C;AACD,GAJD,EAIGxU,UAAU,CAAC,CAAD,CAJb,CADJ,GAMI,EAPN;;AASA,MAAM0U,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAM;AAClCnT,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACD,GAFD;;AAIA,MAAMoS,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC7B,QAAMgB,SAAS,GAAGvP,IAAI,CAACwP,KAAL,CAAW,QAAQxP,IAAI,CAACyP,MAAL,KAAgB,KAAnC,CAAlB;AACA,wBAAaF,SAAb;AACD,GAHD;;AAKA,MAAMG,WAAW;AAAA,0EAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACElB,WAAW,EADb;;AAAA;AACZzC,cAAAA,KADY;;AAAA,kBAEbA,KAFa;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAIZ4D,cAAAA,OAJY,GAIF;AACd7Y,gBAAAA,IAAI,EAAE8B,KAAK,CAAC9B,IADE;AAEdc,gBAAAA,EAAE,EAAEgB,KAAK,CAAChB,EAFI;AAGdC,gBAAAA,EAAE,EAAEe,KAAK,CAACf,EAHI;AAIdsR,gBAAAA,EAAE,EAAEvO,UAAU,IAAIA,UAAU,CAACrC,MAAX,GAAoB,CAAlC,GAAsCqC,UAAU,CAAC,CAAD,CAAV,CAAcD,SAApD,GAAgE,EAJtD;AAKdvC,gBAAAA,MAAM,EAAEQ,KAAK,CAACR,MALA;AAMdwX,gBAAAA,QAAQ,EAAE7D,KANI;AAOdtR,gBAAAA,YAAY,EAAEA,YAPA;AAQd1C,gBAAAA,IAAI,EAAEa,KAAK,CAACb,IAAN,IAAc,IAAIC,IAAJ,GAAWC,WAAX,GAAyBC,KAAzB,CAA+B,GAA/B,EAAoC,CAApC,CARN;AASdgB,gBAAAA,GAAG,EAAEA,GATS;AAUdE,gBAAAA,GAAG,EAAEA,GAVS;AAWdE,gBAAAA,QAAQ,EAAEA,QAXI;AAYdE,gBAAAA,KAAK,EAAEA,KAZO;AAadnB,gBAAAA,QAAQ,EAAEO,KAAK,CAACP,QAbF;AAcdK,gBAAAA,YAAY,EAAEE,KAAK,CAACF,YAdN;AAedJ,gBAAAA,cAAc,EAAEM,KAAK,CAACN;AAfR,eAJE;AAsBlBiK,cAAAA,OAAO,CAAC2B,GAAR,CAAY,uBAAZ,EAAqCyL,OAArC;AAtBkB;AAAA;AAAA,qBAwBOE,KAAK,CAC1B,uDAD0B,EAE1B;AACEC,gBAAAA,MAAM,EAAE,MADV;AAEEC,gBAAAA,OAAO,EAAE;AAAE,kCAAgB;AAAlB,iBAFX;AAGEC,gBAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeP,OAAf;AAHR,eAF0B,CAxBZ;;AAAA;AAwBVQ,cAAAA,QAxBU;AAAA;AAAA,qBAgCKA,QAAQ,CAACC,IAAT,EAhCL;;AAAA;AAgCVlQ,cAAAA,MAhCU;AAiChBqC,cAAAA,OAAO,CAAC2B,GAAR,CAAY,eAAZ,EAA6BhE,MAA7B;AAjCgB;AAAA;;AAAA;AAAA;AAAA;AAmChBqC,cAAAA,OAAO,CAACC,KAAR,CAAc,uBAAd;;AAnCgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAXkN,WAAW;AAAA;AAAA;AAAA,KAAjB;;AAuCA,MAAMW,kBAAkB;AAAA,0EAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEH7B,WAAW,EAFR;;AAAA;AAEjBzC,cAAAA,KAFiB;;AAAA,kBAGlBA,KAHkB;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAKjBjV,cAAAA,IALiB,GAKV,CAAC8B,KAAK,CAAC9B,IAAN,IAAc,EAAf,EAAmBuO,IAAnB,EALU;;AAAA,kBAMlBvO,IANkB;AAAA;AAAA;AAAA;;AAOrBwZ,cAAAA,KAAK,CAAC,6CAAD,CAAL;AAPqB;;AAAA;AAWjB9V,cAAAA,WAXiB,GAWH,CAAC,2BAAAC,YAAY,CAAC+B,YAAD,CAAZ,kFAA4BhC,WAA5B,KAA2C,EAA5C,EAAgD6K,IAAhD,EAXG;AAYjBkL,cAAAA,SAZiB,GAYLvV,MAAM,CAAC6N,GAAP,CAAW,UAAC2H,CAAD;AAAA,uBAAOA,CAAC,CAACtK,GAAT;AAAA,eAAX,EAAyBoB,MAAzB,CAAgC1E,OAAhC,CAZK;AAajB6N,cAAAA,GAbiB,GAaX1E,KAAK,CAAC2E,QAAN,EAbW;AAejBC,cAAAA,UAfiB,GAeJ/X,KAAK,CAACF,YAAN,GACf,IAAIV,IAAJ,CAASY,KAAK,CAACF,YAAf,EAA6BT,WAA7B,GAA2CyJ,KAA3C,CAAiD,CAAjD,EAAoD,EAApD,CADe,GAEf,EAjBmB;AAmBjBkP,cAAAA,KAnBiB,GAmBTzP,KAAK,CAACC,OAAN,CAAcxI,KAAK,CAAChB,EAApB,IACVgB,KAAK,CAAChB,EAAN,CAAS0P,MAAT,CAAgB1E,OAAhB,EAAyBiO,IAAzB,CAA8B,IAA9B,CADU,GAEVjY,KAAK,CAAChB,EAAN,IAAY,EArBO;AAsBjBkZ,cAAAA,KAtBiB,GAsBT3P,KAAK,CAACC,OAAN,CAAcxI,KAAK,CAACf,EAApB,IACVe,KAAK,CAACf,EAAN,CAASyP,MAAT,CAAgB1E,OAAhB,EAAyBiO,IAAzB,CAA8B,IAA9B,CADU,GAEVjY,KAAK,CAACf,EAAN,IAAY,EAxBO;AA0BjBkZ,cAAAA,YA1BiB,GA2BrBnW,UAAU,SAAV,IAAAA,UAAU,WAAV,IAAAA,UAAU,CAAErC,MAAZ,GACIqC,UAAU,CAACuU,MAAX,CAAkB,UAACC,MAAD,EAAS4B,GAAT;AAAA,uBAChB,IAAIhZ,IAAJ,CAASgZ,GAAG,CAACjZ,IAAb,IAAqB,IAAIC,IAAJ,CAASoX,MAAM,CAACrX,IAAhB,CAArB,GAA6CiZ,GAA7C,GAAmD5B,MADnC;AAAA,eAAlB,CADJ,GAII;AAAEzU,gBAAAA,SAAS,EAAE,EAAb;AAAiB5C,gBAAAA,IAAI,EAAE;AAAvB,eA/BiB;AAiCjBkZ,cAAAA,YAjCiB,GAiCF;AACnBC,gBAAAA,OAAO,EAAE,CAAC9X,GAAG,IAAI,EAAR,EAAYiM,IAAZ,EADU;AAEnB8L,gBAAAA,OAAO,EAAE,CAAC7X,QAAQ,IAAI,EAAb,EAAiB+L,IAAjB,EAFU;AAGnB+L,gBAAAA,OAAO,EAAE,CAAC5X,KAAK,IAAI,EAAV,EAAc6L,IAAd,EAHU;AAInBgM,gBAAAA,OAAO,EAAE,CAAC7W,WAAW,IAAI,EAAhB,EAAoB6K,IAApB,EAJU;AAKnBiM,gBAAAA,OAAO,EAAE,CAACP,YAAY,CAACpW,SAAb,IAA0B,EAA3B,EAA+B0K,IAA/B,EALU;AAMnBkM,gBAAAA,OAAO,EAAE,CAAC,CAAApE,kBAAkB,SAAlB,IAAAA,kBAAkB,WAAlB,YAAAA,kBAAkB,CAAErW,IAApB,KAA4B,EAA7B,EAAiCuO,IAAjC,EANU;AAOnBmM,gBAAAA,OAAO,EAAEZ,KAPU;AAQnBa,gBAAAA,OAAO,EAAEX,KARU;AASnBY,gBAAAA,OAAO,EAAEf,UATU;AAUnBgB,gBAAAA,QAAQ,EAAE,CAAC,CAAAvE,qBAAqB,SAArB,IAAAA,qBAAqB,WAArB,YAAAA,qBAAqB,CAAEtW,IAAvB,KAA+B,EAAhC,EAAoCuO,IAApC;AAVS,eAjCE;AAAA;AAAA,qBA8CDtP,SAAS,CAAC6b,aAAV,CAAwB;AAC5C9a,gBAAAA,IAAI,EAAJA,IAD4C;AAE5C0D,gBAAAA,WAAW,EAAXA,WAF4C;AAG5CiW,gBAAAA,GAAG,EAAHA,GAH4C;AAI5CF,gBAAAA,SAAS,EAATA,SAJ4C;AAK5CU,gBAAAA,YAAY,EAAZA;AAL4C,eAAxB,CA9CC;;AAAA;AA8CjBY,cAAAA,OA9CiB;AAsDvBvB,cAAAA,KAAK,4CAED,CAAAuB,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEC,SAAT,MAAsBD,OAAtB,aAAsBA,OAAtB,uBAAsBA,OAAO,CAAEzP,EAA/B,KAAqC,WAFpC,EAAL;AAtDuB;AAAA;;AAAA;AAAA;AAAA;AA4DvBG,cAAAA,OAAO,CAACC,KAAR;AACA8N,cAAAA,KAAK,CAAC,8BAA8B,cAAItE,OAAnC,CAAL;;AA7DuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAlBqE,kBAAkB;AAAA;AAAA;AAAA,KAAxB;;AAiEA,MAAM0B,sBAAsB;AAAA,0EAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACTvD,WAAW,EADF;;AAAA;AACvBzC,cAAAA,KADuB;;AAAA,kBAExBA,KAFwB;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAIvBiG,cAAAA,gBAJuB,GAK3BpX,UAAU,IAAIA,UAAU,CAACrC,MAAX,GAAoB,CAAlC,GAAsCqC,UAAU,CAAC,CAAD,CAAV,CAAcD,SAApD,GAAgE,EALrC;;AAAA,kBAMxBqX,gBANwB;AAAA;AAAA;AAAA;;AAO3B1B,cAAAA,KAAK,CAAC,mEAAD,CAAL;AAP2B;;AAAA;AAWvBX,cAAAA,OAXuB,GAWb;AACd7Y,gBAAAA,IAAI,EAAE8B,KAAK,CAAC9B,IADE;AAEdc,gBAAAA,EAAE,EAAEgB,KAAK,CAAChB,EAAN,CAAS,CAAT,KAAe,EAFL;AAGdC,gBAAAA,EAAE,EAAEe,KAAK,CAACf,EAAN,CAAS,CAAT,KAAe,EAHL;AAIdO,gBAAAA,MAAM,EAAEQ,KAAK,CAACR,MAJA;AAKdoC,gBAAAA,WAAW,EAAE,2BAAAC,YAAY,CAAC+B,YAAD,CAAZ,kFAA4BhC,WAA5B,KAA2C,EAL1C;AAMdG,gBAAAA,SAAS,EAAEqX,gBANG;AAOdC,gBAAAA,OAAO,EAAElG;AAPK,eAXa;AAAA;AAAA;AAAA,qBAsBJ8D,KAAK,CAC1B,sDAD0B,EAE1B;AACEC,gBAAAA,MAAM,EAAE,MADV;AAEEC,gBAAAA,OAAO,EAAE;AAAE,kCAAgB;AAAlB,iBAFX;AAGEC,gBAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeP,OAAf;AAHR,eAF0B,CAtBD;;AAAA;AAsBrBQ,cAAAA,QAtBqB;AAAA;AAAA,qBA8BNA,QAAQ,CAACC,IAAT,EA9BM;;AAAA;AA8BrBlQ,cAAAA,MA9BqB;AA+B3BoQ,cAAAA,KAAK,CAAC,6CAAD,CAAL;AACA/N,cAAAA,OAAO,CAAC2B,GAAR,CAAY,oBAAZ,EAAkChE,MAAlC;AAhC2B;AAAA;;AAAA;AAAA;AAAA;AAkC3BqC,cAAAA,OAAO,CAACC,KAAR,CAAc,mBAAd;AACA8N,cAAAA,KAAK,CAAC,kCAAD,CAAL;;AAnC2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAtByB,sBAAsB;AAAA;AAAA;AAAA,KAA5B;;AAuCA,MAAMG,gBAAgB;AAAA,0EAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAOC,cAAAA,KAAP,iEAAe,UAAf;AAAA;AAAA;AAAA,qBAED3D,WAAW,EAFV;;AAAA;AAEfzC,cAAAA,KAFe;;AAAA,kBAGhBA,KAHgB;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAKfqG,cAAAA,QALe,GAKJ,CAAC,CAAAxZ,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAE9B,IAAP,KAAeiV,KAAf,IAAwB,UAAzB,EAAqC1G,IAArC,EALI;AAMfgN,cAAAA,KANe,aAMJD,QANI,SAMOrG,KAAK,eAAQA,KAAR,SAAmB,EAN/B;AAQfuG,cAAAA,GARe,GAQTnR,KAAK,CAACC,OAAN,CAAcxI,KAAd,aAAcA,KAAd,uBAAcA,KAAK,CAAEhB,EAArB,IAA2BgB,KAAK,CAAChB,EAAN,CAAS,CAAT,CAA3B,GAAyCgB,KAAzC,aAAyCA,KAAzC,uBAAyCA,KAAK,CAAEhB,EARvC;AASf2a,cAAAA,GATe,GASTpR,KAAK,CAACC,OAAN,CAAcxI,KAAd,aAAcA,KAAd,uBAAcA,KAAK,CAAEf,EAArB,IAA2Be,KAAK,CAACf,EAAN,CAAS,CAAT,CAA3B,GAAyCe,KAAzC,aAAyCA,KAAzC,uBAAyCA,KAAK,CAAEf,EATvC;AAUf2a,cAAAA,KAVe,GAUP,CAACF,GAAG,kBAAWA,GAAX,CAAJ,EAAsBC,GAAG,kBAAWA,GAAX,CAAzB,EACXjL,MADW,CACJ1E,OADI,EAEXiO,IAFW,CAEN,IAFM,CAVO;AAcfE,cAAAA,YAde,GAenBnW,UAAU,IAAIA,UAAU,CAACrC,MAAzB,aACI,mBAAIqC,UAAJ,EAAgB6X,IAAhB,CACE,UAACC,CAAD,EAAIC,CAAJ;AAAA,uBAAU,IAAI3a,IAAJ,CAAS,CAAA2a,CAAC,SAAD,IAAAA,CAAC,WAAD,YAAAA,CAAC,CAAE5a,IAAH,KAAW,CAApB,IAAyB,IAAIC,IAAJ,CAAS,CAAA0a,CAAC,SAAD,IAAAA,CAAC,WAAD,YAAAA,CAAC,CAAE3a,IAAH,KAAW,CAApB,CAAnC;AAAA,eADF,EAEE,CAFF,CADJ,2CACI,OAEM4C,SAHV,GAII,EAnBe;AAqBfH,cAAAA,WArBe,GAsBnBgC,YAAY,IAAI,IAAhB,IAAwB/B,YAAxB,aAAwBA,YAAxB,eAAwBA,YAAY,CAAG+B,YAAH,CAApC,GACI/B,YAAY,CAAC+B,YAAD,CAAZ,CAA2BhC,WAA3B,IAA0C,EAD9C,GAEI,CAAA5B,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAE4B,WAAP,KAAsB,EAxBP;AA0BfoY,cAAAA,QA1Be,sCA0BJha,KA1BI,aA0BJA,KA1BI,uBA0BJA,KAAK,CAAEN,cA1BH,yEA0BqBM,KA1BrB,aA0BqBA,KA1BrB,uBA0BqBA,KAAK,CAAEga,QA1B5B,2CA0BwC,EA1BxC;AA2BfhD,cAAAA,QA3Be,GA2BJ7D,KAAK,KAAInT,KAAJ,aAAIA,KAAJ,uBAAIA,KAAK,CAAEd,OAAX,CAAL,IAA2B,EA3BvB;AA6Bf+a,cAAAA,SA7Be,GA6BH1R,KAAK,CAACC,OAAN,CAAcpG,MAAd,IACdA,MAAM,CAAC6N,GAAP,CAAW,UAAC2H,CAAD;AAAA,uBAAOA,CAAP,aAAOA,CAAP,uBAAOA,CAAC,CAAEtK,GAAV;AAAA,eAAX,EAA0BoB,MAA1B,CAAiC1E,OAAjC,CADc,GAEd,EA/BiB;AAAA;AAAA,qBAiCFiN,KAAK,CAAC,wBAAD,EAA2B;AACjDC,gBAAAA,MAAM,EAAE,MADyC;AAEjDC,gBAAAA,OAAO,EAAE;AAAE,kCAAgB;AAAlB,iBAFwC;AAGjDC,gBAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnB4C,kBAAAA,OAAO,EAAEX,KADU;AAEnBE,kBAAAA,KAAK,EAALA,KAFmB;AAGnBG,kBAAAA,KAAK,EAALA,KAHmB;AAInBO,kBAAAA,UAAU,EAAEhC,YAAY,IAAI,EAJT;AAKnBnB,kBAAAA,QAAQ,EAARA,QALmB;AAMnBgD,kBAAAA,QAAQ,EAARA,QANmB;AAOnBpY,kBAAAA,WAAW,EAAE,CAACA,WAAW,IAAI,EAAhB,EAAoB6K,IAApB,EAPM;AAQnBwN,kBAAAA,SAAS,EAATA;AARmB,iBAAf;AAH2C,eAA3B,CAjCH;;AAAA;AAiCfG,cAAAA,IAjCe;AAAA;AAAA,qBAgDFA,IAAI,CAAC5C,IAAL,EAhDE;;AAAA;AAgDfA,cAAAA,IAhDe;AAiDrB7N,cAAAA,OAAO,CAAC2B,GAAR,CAAY,qCAAZ,EAAmDkM,IAAnD;AACA,kBAAIA,IAAJ,aAAIA,IAAJ,8BAAIA,IAAI,CAAE6C,KAAV,wCAAI,YAAaC,KAAjB,EAAwB3Q,OAAO,CAAC4Q,KAAR,CAAc/C,IAAI,CAAC6C,KAAL,CAAWC,KAAzB;AACxB,kBAAI9C,IAAJ,aAAIA,IAAJ,+BAAIA,IAAI,CAAE6C,KAAV,yCAAI,aAAajY,MAAjB,EAAyBuH,OAAO,CAAC4Q,KAAR,CAAc/C,IAAI,CAAC6C,KAAL,CAAWjY,MAAzB;;AAnDJ,oBAqDjB,CAACgY,IAAI,CAACI,EAAN,IAAY,EAAChD,IAAD,aAACA,IAAD,eAACA,IAAI,CAAEgD,EAAP,CArDK;AAAA;AAAA;AAAA;;AAsDnB7X,cAAAA,MAAM,6BAAsB,CAAA6U,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAE5N,KAAN,KAAe,eAArC,EAAN;AACAnH,cAAAA,UAAU,CAAC,IAAD,CAAV;AAvDmB;;AAAA;AA2DrBiV,cAAAA,KAAK,0BAED6B,KAAK,KAAK,UAAV,GACI,UADJ,GAEIA,KAAK,KAAK,WAAV,GACA,WADA,GAEA,OANH,YAAL;AA3DqB;AAAA;;AAAA;AAAA;AAAA;AAqErB5P,cAAAA,OAAO,CAACC,KAAR;AACAjH,cAAAA,MAAM,CAAC,uBAAD,CAAN;AACAF,cAAAA,UAAU,CAAC,IAAD,CAAV;;AAvEqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAhB6W,gBAAgB;AAAA;AAAA;AAAA,KAAtB;;AA2EA,MAAMmB,wBAAwB;AAAA,0EAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACX7E,WAAW,EADA;;AAAA;AACzBzC,cAAAA,KADyB;;AAAA,kBAE1BA,KAF0B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAIzBuH,cAAAA,IAJyB,GAIlB,CAAC1V,YAJiB;AAK/BC,cAAAA,eAAe,CAACyV,IAAD,CAAf;AAL+B;AAAA;AAAA,qBAOvBhe,QAAQ,CACX2L,SADG,GAEHe,UAFG,CAEQ,MAFR,EAGHE,GAHG,CAGC6J,KAHD,EAIH0B,MAJG,CAII;AAAE5K,gBAAAA,cAAc,EAAEyQ;AAAlB,eAJJ,CAPuB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAa7B/Q,cAAAA,OAAO,CAACC,KAAR,CAAc,gCAAd;;AAb6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAxB6Q,wBAAwB;AAAA;AAAA;AAAA,KAA9B;;AAiBA,MAAME,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3B,QAAI7U,KAAK,CAAC2G,IAAN,OAAiB,EAArB,EAAyB;AACvBxM,MAAAA,QAAQ,CAAC,UAAC8J,IAAD;AAAA,+CACJA,IADI;AAEP/K,UAAAA,EAAE,+BAAM+K,IAAI,CAAC/K,EAAX,IAAe8G,KAAK,CAAC2G,IAAN,EAAf;AAFK;AAAA,OAAD,CAAR;AAID;;AACD1G,IAAAA,QAAQ,CAAC,EAAD,CAAR;AACAF,IAAAA,cAAc,CAAC,KAAD,CAAd;AACD,GATD;;AAWA,MAAM+U,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3B,QAAI1U,KAAK,CAACuG,IAAN,OAAiB,EAArB,EAAyB;AACvBxM,MAAAA,QAAQ,CAAC,UAAC8J,IAAD;AAAA,+CACJA,IADI;AAEP9K,UAAAA,EAAE,+BAAM8K,IAAI,CAAC9K,EAAX,IAAeiH,KAAK,CAACuG,IAAN,EAAf;AAFK;AAAA,OAAD,CAAR;AAID;;AACDtG,IAAAA,QAAQ,CAAC,EAAD,CAAR;AACAF,IAAAA,cAAc,CAAC,KAAD,CAAd;AACD,GATD;;AA5tCgC,oBAuuCgBxK,QAAQ,CAAC,KAAD,CAvuCxB;AAAA,MAuuCzBof,gBAvuCyB;AAAA,MAuuCPjK,mBAvuCO;;AAAA,oBAwuCsBnV,QAAQ,CAAC,KAAD,CAxuC9B;AAAA,MAwuCzBqf,mBAxuCyB;AAAA,MAwuCJjK,sBAxuCI;;AAAA,oBAyuC0BpV,QAAQ,CAAC,KAAD,CAzuClC;AAAA,MAyuCzBsf,qBAzuCyB;AAAA,MAyuCFC,wBAzuCE;;AAAA,oBA2uC9Bvf,QAAQ,CAAC,KAAD,CA3uCsB;AAAA,MA0uCzBwf,wBA1uCyB;AAAA,MA0uCCC,2BA1uCD;;AAAA,WA6uCjBC,WA7uCiB;AAAA;AAAA;;AAAA;AAAA,4EA6uChC,mBAA2BpI,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AACEA,cAAAA,KAAK,CAACC,cAAN;;AADF,kBAEOC,iBAFP;AAAA;AAAA;AAAA;;AAGIpE,cAAAA,UAAU,GAHd,CAGkB;;AAHlB;;AAAA;AAMElI,cAAAA,cAAc,CAAC,IAAD,CAAd;AANF;AAAA;AAAA,qBASwBuM,MAAM,CAAC,KAAD,EAAQ;AAAEK,gBAAAA,QAAQ,EAAE;AAAZ,eAAR,CAT9B;;AAAA;AASUJ,cAAAA,KATV;;AAUI,kBAAI,CAACA,KAAL,EAAY;AACVxQ,gBAAAA,MAAM,CAAC,gCAAD,CAAN;AACAF,gBAAAA,UAAU,CAAC,IAAD,CAAV;AACD,eAHD,MAGO;AACL;AACA+D,gBAAAA,aAAa,CAAC,IAAD,CAAb;AACAvG,gBAAAA,QAAQ,CAAC,UAAC8J,IAAD;AAAA,yDAAgBA,IAAhB;AAAsB7K,oBAAAA,OAAO,EAAE;AAA/B;AAAA,iBAAD,CAAR;AACD;;AAjBL;AAAA;;AAAA;AAAA;AAAA;AAmBIyK,cAAAA,OAAO,CAACC,KAAR;AACAjH,cAAAA,MAAM,CAAC,6EAAKyQ,OAAL,KAAgB,cAAjB,CAAN;AACA3Q,cAAAA,UAAU,CAAC,IAAD,CAAV;;AArBJ;AAAA;AAuBIkE,cAAAA,cAAc,CAAC,KAAD,CAAd;AAvBJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA7uCgC;AAAA;AAAA;;AAwwChC,MAAMyU,SAAS,GAAG,SAAZA,SAAY,CAACld,IAAD,EAAU;AAC1B,WAAOA,IAAI,IAAIA,IAAI,CAAC6V,WAAL,OAAuB,gBAAtC;AACD,GAFD;;AAIA,MAAMsH,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACC,OAAD,EAAa;AAAA;;AAC5C,QAAMC,eAAe,GAAG,kBAAAD,OAAO,CAACpd,IAAR,gEAAc6V,WAAd,QAAgC,gBAAxD;;AACA,QAAI7O,WAAJ,EAAiB;AAAA;;AACfjB,MAAAA,kBAAkB,CAAC;AAAEuF,QAAAA,EAAE,EAAE8R,OAAO,CAAC9R,EAAd;AAAkBtL,QAAAA,IAAI,EAAEod,OAAO,CAACpd;AAAhC,OAAD,CAAlB;AACA0S,MAAAA,mBAAmB,CACjB2K,eAAe,IACb,CAAAhH,kBAAkB,SAAlB,IAAAA,kBAAkB,WAAlB,qCAAAA,kBAAkB,CAAErW,IAApB,gFAA0B6V,WAA1B,QAA4C,gBAF7B,CAAnB;AAID,KAND,MAMO;AAAA;;AACL5P,MAAAA,yBAAyB,CAAC;AAAEqF,QAAAA,EAAE,EAAE8R,OAAO,CAAC9R,EAAd;AAAkBtL,QAAAA,IAAI,EAAEod,OAAO,CAACpd;AAAhC,OAAD,CAAzB;AACA2S,MAAAA,sBAAsB,CACpB0K,eAAe,IACb,CAAA/G,qBAAqB,SAArB,IAAAA,qBAAqB,WAArB,qCAAAA,qBAAqB,CAAEtW,IAAvB,gFAA6B6V,WAA7B,QAA+C,gBAF7B,CAAtB;AAID;;AACDzC,IAAAA,YAAY,CAACgK,OAAO,CAAC9R,EAAT,CAAZ;AACArG,IAAAA,mBAAmB,CAAC,KAAD,CAAnB;AACD,GAjBD;;AA5wCgC,oBA+xCY1H,QAAQ,CAAC,CAAD,CA/xCpB;AAAA,MA+xCzB+f,cA/xCyB;AAAA,MA+xCTC,iBA/xCS;;AAAA,oBAgyCQhgB,QAAQ,CAAC,KAAD,CAhyChB;AAAA,MAgyCzBigB,YAhyCyB;AAAA,MAgyCXC,eAhyCW;;AAAA,oBAiyCYlgB,QAAQ,CAAC,CAAD,CAjyCpB;AAAA,MAiyCzBmgB,cAjyCyB;AAAA,MAiyCTC,iBAjyCS;;AAAA,oBAkyCYpgB,QAAQ,CAAC,KAAD,CAlyCpB;AAAA,MAkyCzBqgB,cAlyCyB;AAAA,MAkyCTC,iBAlyCS;;AAoyChC,MAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAC/B;AACA,QAAMrF,SAAS,GAAGvP,IAAI,CAACwP,KAAL,CAAW,QAAQxP,IAAI,CAACyP,MAAL,KAAgB,KAAnC,CAAlB,CAF+B,CAG/B;;AACAnY,IAAAA,MAAM,CAAC0O,IAAP,gCAAoCuJ,SAApC;AACD,GALD;;AApyCgC,oBA2yCkBlb,QAAQ,CAAC,KAAD,CA3yC1B;AAAA,MA2yCzBwgB,iBA3yCyB;AAAA,MA2yCNC,oBA3yCM;;AAAA,oBA6yCoBzgB,QAAQ,CAAC,IAAD,CA7yC5B;AAAA,MA6yCzB8Y,kBA7yCyB;AAAA,MA6yCL7J,qBA7yCK;;AAAA,oBA8yC0BjP,QAAQ,CAAC,IAAD,CA9yClC;AAAA,MA8yCzB+Y,qBA9yCyB;AAAA,MA8yCF3J,wBA9yCE;;AAgzChCrP,EAAAA,SAAS,CAAC,YAAM;AAAA;;AACdoV,IAAAA,mBAAmB,CACjB,CAAA2D,kBAAkB,SAAlB,IAAAA,kBAAkB,WAAlB,sCAAAA,kBAAkB,CAAErW,IAApB,kFAA0B6V,WAA1B,QAA4C,gBAD3B,CAAnB;AAGD,GAJQ,EAIN,CAACQ,kBAAD,CAJM,CAAT;AAMA/Y,EAAAA,SAAS,CAAC,YAAM;AAAA;;AACdqV,IAAAA,sBAAsB,CACpB,CAAA2D,qBAAqB,SAArB,IAAAA,qBAAqB,WAArB,sCAAAA,qBAAqB,CAAEtW,IAAvB,kFAA6B6V,WAA7B,QAA+C,gBAD3B,CAAtB;AAGD,GAJQ,EAIN,CAACS,qBAAD,CAJM,CAAT;AAMA,SACE,MAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE,MAAC,qBAAD;AACE,IAAA,IAAI,EAAE9Q,qBADR;AAEE,IAAA,WAAW,EAAE;AAAA,aAAMC,wBAAwB,CAAC,KAAD,CAA9B;AAAA,KAFf;AAGE,IAAA,UAAU,EAAE0X,wBAHd;AAIE,IAAA,cAAc,EAAE7W,cAJlB,CAIkC;AAJlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAQE,MAAC,KAAD;AAAO,IAAA,IAAI,EAAElC,IAAb;AAAmB,IAAA,MAAM,EAAEsM,WAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD,CAAO,MAAP;AAAc,IAAA,WAAW,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,CADF,EAIE,MAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAJF,EAKE,MAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,SAAhB;AAA0B,IAAA,OAAO,EAAEA,WAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CALF,CARF,EAoBE,MAAC,KAAD;AAAO,IAAA,IAAI,EAAEpM,OAAb;AAAsB,IAAA,MAAM,EAAEsM,cAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD,CAAO,MAAP;AAAc,IAAA,WAAW,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,CADF,EAIE,MAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAapM,GAAb,CAJF,EAKE,MAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,SAAhB;AAA0B,IAAA,OAAO,EAAEoM,cAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CALF,CApBF,EA+BE,MAAC,KAAD;AAAO,IAAA,IAAI,EAAEtL,aAAb;AAA4B,IAAA,MAAM,EAAEwL,oBAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD,CAAO,MAAP;AAAc,IAAA,WAAW,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,CADF,EAIE,MAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAJF,EAKE,MAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,SAAhB;AAA0B,IAAA,OAAO,EAAEA,oBAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CALF,CA/BF,EA0CE,MAAC,KAAD;AAAO,IAAA,IAAI,EAAEpM,aAAb;AAA4B,IAAA,MAAM,EAAEsM,oBAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD,CAAO,MAAP;AAAc,IAAA,WAAW,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,CADF,EAIE,MAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,SAAhB;AAA0B,IAAA,SAAS,EAAC,MAApC;AAA2C,IAAA,OAAO,EAAEU,cAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,EAIG/N,YAAY,CAACoO,GAAb,CAAiB,UAACC,IAAD,EAAO3D,KAAP;AAAA,WAChB,MAAC,GAAD;AAAK,MAAA,GAAG,EAAEA,KAAV;AAAiB,MAAA,SAAS,EAAC,MAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,MAAD;AACE,MAAA,OAAO,EAAC,mBADV;AAEE,MAAA,SAAS,EAAC,OAFZ;AAGE,MAAA,OAAO,EAAE;AAAA,eAAMkE,iBAAiB,CAAClE,KAAD,CAAvB;AAAA,OAHX;AAIE,MAAA,KAAK,EAAE;AAAE4P,QAAAA,MAAM,EAAE;AAAV,OAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAME;AAAK,MAAA,SAAS,EAAC,gCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAOjM,IAAI,CAACtO,WAAL,IAAoB,aAA3B,CADF,EAEE;AACE,MAAA,KAAK,EAAE;AACLwa,QAAAA,UAAU,EAAE,gBADP;AAELC,QAAAA,WAAW,EAAE;AAFR,OADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAMGnM,IAAI,CAAC/Q,IAAL,IAAa,MANhB,CAFF,CANF,CADF,CADgB;AAAA,GAAjB,CAJH,EA0BE,MAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,SAAhB;AAA0B,IAAA,OAAO,EAAE+P,oBAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UA1BF,CAJF,CA1CF,EA6EE,MAAC,KAAD;AAAO,IAAA,IAAI,EAAEpM,WAAb;AAA0B,IAAA,MAAM,EAAEsM,kBAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD,CAAO,MAAP;AAAc,IAAA,WAAW,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,CADF,EAIE,MAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,SADV;AAEE,IAAA,SAAS,EAAC,MAFZ;AAGE,IAAA,OAAO,EAAEe,YAHX;AAIE,IAAA,KAAK,EAAE;AAAEmM,MAAAA,YAAY,EAAE;AAAhB,KAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EASGta,UAAU,CAACiO,GAAX,CAAe,UAACM,EAAD,EAAKhE,KAAL;AAAA,WACd,MAAC,GAAD;AAAK,MAAA,GAAG,EAAEA,KAAV;AAAiB,MAAA,SAAS,EAAC,MAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,IAAD,CAAM,OAAN;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,WAAW,EAAC,YAFd;AAGE,MAAA,KAAK,EAAEgE,EAAE,CAACxO,SAHZ;AAIE,MAAA,QAAQ,EAAE,kBAACmK,CAAD;AAAA,eACRmE,qBAAqB,CAAC9D,KAAD,EAAQ,WAAR,EAAqBL,CAAC,CAACE,MAAF,CAASxF,KAA9B,CADb;AAAA,OAJZ;AAOE,MAAA,KAAK,EAAE;AAAE0V,QAAAA,YAAY,EAAE;AAAhB,OAPT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,EAYE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,IAAD,CAAM,OAAN;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,WAAW,EAAC,MAFd;AAGE,MAAA,KAAK,EAAE/L,EAAE,CAACpR,IAHZ;AAIE,MAAA,QAAQ,EAAE,kBAAC+M,CAAD;AAAA,eACRmE,qBAAqB,CAAC9D,KAAD,EAAQ,MAAR,EAAgBL,CAAC,CAACE,MAAF,CAASxF,KAAzB,CADb;AAAA,OAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAZF,EAsBE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,QAAhB;AAAyB,MAAA,OAAO,EAAE;AAAA,eAAMwJ,eAAe,CAAC7D,KAAD,CAArB;AAAA,OAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,CAtBF,CADc;AAAA,GAAf,CATH,EAuCE,MAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,SAAhB;AAA0B,IAAA,OAAO,EAAE6C,kBAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAvCF,CAJF,CA7EF,EA8HE,MAAC,eAAD;AACE,IAAA,IAAI,EAAElM,gBADR;AAEE,IAAA,WAAW,EAAEsM,uBAFf;AAGE,IAAA,cAAc,EAAE1L,cAHlB;AAIE,IAAA,cAAc,EAAEU,cAJlB;AAKE,IAAA,kBAAkB,EAAE6W,wBALtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA9HF,EAqIE,MAAC,KAAD;AAAO,IAAA,IAAI,EAAErY,eAAb;AAA8B,IAAA,MAAM,EAAEsM,sBAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD,CAAO,MAAP;AAAc,IAAA,WAAW,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,CADF,EAIE,MAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,WAAD;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,gBAFd;AAGE,IAAA,SAAS,EAAC,MAHZ;AAIE,IAAA,KAAK,EAAE5K,MAJT;AAKE,IAAA,QAAQ,EAAE,kBAACwH,CAAD;AAAA,aAAOvH,SAAS,CAACuH,CAAC,CAACE,MAAF,CAASxF,KAAV,CAAhB;AAAA,KALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAQE,MAAC,WAAD;AACE,IAAA,OAAO,EAAE1E,OAAO,CAACwM,MAAR,CAAe,UAAC6N,MAAD;AAAA,aACtBA,MAAM,CAACre,IAAP,CAAY6V,WAAZ,GAA0ByI,QAA1B,CAAmC9X,MAAM,CAACqP,WAAP,EAAnC,CADsB;AAAA,KAAf,CADX;AAIE,IAAA,cAAc,EAAErD,gBAJlB;AAKE,IAAA,WAAW,EAAEA,gBALf;AAME,IAAA,cAAc,EAAE;AAAA,aAAMA,gBAAgB,CAAC,IAAD,CAAtB;AAAA,KANlB;AAOE,IAAA,WAAW,EAAEsL,kBAPf,CAOmC;AAPnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,CAJF,CArIF,EA6JE,MAAC,WAAD;AACE,IAAA,IAAI,EAAE5Y,eADR;AAEE,IAAA,WAAW,EAAEsM,sBAFf;AAGE,IAAA,iBAAiB,EAAErL,iBAHrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA7JF,EAkKE,MAAC,qBAAD;AACE,IAAA,IAAI,EAAEX,qBADR;AAEE,IAAA,WAAW,EAAE;AAAA,aAAMC,wBAAwB,CAAC,KAAD,CAA9B;AAAA,KAFf;AAGE,IAAA,UAAU,EAAEY,aAHd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAlKF,EAwKE,MAAC,KAAD;AAAO,IAAA,IAAI,EAAEjB,eAAb;AAA8B,IAAA,MAAM,EAAE6S,sBAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD,CAAO,MAAP;AAAc,IAAA,WAAW,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,CADF,EAIE,MAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,CAACvR,aAAD,GACC,MAAC,uBAAD;AACE,IAAA,KAAK,EAAC,MADR;AAEE,IAAA,MAAM,EAAE,GAFV;AAGE,IAAA,QAAQ,EAAE8I,aAHZ;AAIE,IAAA,UAAU,EAAE5I,YAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,GAQC;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,GAAG,EAAEyI,GAAG,CAACC,eAAJ,CAAoB5I,aAApB,CADP;AAEE,IAAA,GAAG,EAAC,UAFN;AAGE,IAAA,KAAK,EAAE;AAAEhF,MAAAA,KAAK,EAAE;AAAT,KAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CATJ,CADF,CAJF,EAwBE,MAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,CAACgF,aAAD,GACC,4BACE,MAAC,MAAD;AACE,IAAA,OAAO,EAAE+I,YADX;AAEE,IAAA,KAAK,EAAE;AACL8O,MAAAA,YAAY,EAAE,KADT;AAEL7c,MAAAA,KAAK,EAAE,MAFF;AAGLC,MAAAA,MAAM,EAAE,MAHH;AAIL6c,MAAAA,QAAQ,EAAE,UAJL;AAKLC,MAAAA,IAAI,EAAE,KALD;AAMLC,MAAAA,SAAS,EAAE,kBANN;AAOLC,MAAAA,MAAM,EAAE;AAPH,KAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAeE,MAAC,MAAD;AACE,IAAA,OAAO,EAAE;AAAA,aACP9X,eAAe,CAAC,UAACgF,IAAD;AAAA,eACdA,IAAI,KAAK,aAAT,GAAyB,MAAzB,GAAkC,aADpB;AAAA,OAAD,CADR;AAAA,KADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAfF,EAwBE,MAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,WAAhB;AAA4B,IAAA,OAAO,EAAEoM,sBAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAxBF,CADD,GA8BC,4BACE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,WADV;AAEE,IAAA,OAAO,EAAE;AAAA,aAAMtR,gBAAgB,CAAC,IAAD,CAAtB;AAAA,KAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAOE,MAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,SAAhB;AAA0B,IAAA,OAAO,EAAE2J,SAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAPF,CA/BJ,CAxBF,CAxKF,EA8OE,MAAC,KAAD;AAAO,IAAA,IAAI,EAAE5L,aAAb;AAA4B,IAAA,MAAM,EAAEsM,oBAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD,CAAO,MAAP;AAAc,IAAA,WAAW,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,CADF,EAIE,MAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,SAAhB;AAA0B,IAAA,SAAS,EAAC,MAApC;AAA2C,IAAA,OAAO,EAAEU,cAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,EAIG/N,YAAY,CAACoO,GAAb,CAAiB,UAACC,IAAD,EAAO3D,KAAP;AAAA,WAChB,MAAC,GAAD;AAAK,MAAA,GAAG,EAAEA,KAAV;AAAiB,MAAA,SAAS,EAAC,MAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,MAAD;AACE,MAAA,OAAO,EAAC,mBADV;AAEE,MAAA,SAAS,EAAC,OAFZ;AAGE,MAAA,OAAO,EAAE;AAAA,eAAMkE,iBAAiB,CAAClE,KAAD,CAAvB;AAAA,OAHX;AAIE,MAAA,KAAK,EAAE;AAAE4P,QAAAA,MAAM,EAAE;AAAV,OAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAME;AAAK,MAAA,SAAS,EAAC,gCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAOjM,IAAI,CAACtO,WAAL,IAAoB,aAA3B,CADF,EAEE;AACE,MAAA,KAAK,EAAE;AACLwa,QAAAA,UAAU,EAAE,gBADP;AAELC,QAAAA,WAAW,EAAE;AAFR,OADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAMGnM,IAAI,CAAC/Q,IAAL,IAAa,MANhB,CAFF,CANF,CADF,CADgB;AAAA,GAAjB,CAJH,EA0BE,MAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,SAAhB;AAA0B,IAAA,OAAO,EAAE+P,oBAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UA1BF,CAJF,CA9OF,EAmRE,MAAC,SAAD;AACE,IAAA,IAAI,EAAE2G,aADR;AAEE,IAAA,WAAW,EAAEK,oBAFf;AAGE,IAAA,QAAQ,EAAElW,KAAK,CAAC9B,IAHlB;AAIE,IAAA,UAAU,YAAK8B,KAAK,CAACL,MAAX,cAAqBK,KAAK,CAACJ,KAA3B,cAAoCI,KAAK,CAACH,MAA1C,CAJZ;AAKE,IAAA,KAAK,EAAEG,KAAK,CAACT,KALf;AAME,IAAA,KAAK,EAAE6F,QANT;AAOE,IAAA,KAAK,EAAEI,gBAPT;AAQE,IAAA,KAAK,EAAEF,aART;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAnRF,EA6RGgB,OAAO,IACN;AACE,IAAA,KAAK,EAAE;AACLoW,MAAAA,QAAQ,EAAE,OADL;AAELI,MAAAA,GAAG,EAAE,CAFA;AAGLH,MAAAA,IAAI,EAAE,CAHD;AAIL/c,MAAAA,KAAK,EAAE,MAJF;AAKLC,MAAAA,MAAM,EAAE,MALH;AAMLkd,MAAAA,eAAe,EAAE,0BANZ;AAOLC,MAAAA,cAAc,EAAE,WAPX;AAQLC,MAAAA,OAAO,EAAE,MARJ;AASLC,MAAAA,UAAU,EAAE,QATP;AAULC,MAAAA,cAAc,EAAE,QAVX;AAWLC,MAAAA,MAAM,EAAE,IAXH,CAWS;;AAXT,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAeE,MAAC,OAAD;AAAS,IAAA,SAAS,EAAC,QAAnB;AAA4B,IAAA,OAAO,EAAC,SAApC;AAA8C,IAAA,IAAI,EAAC,QAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAM,IAAA,SAAS,EAAC,iBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,CAfF,CA9RJ,EAmTE,MAAC,SAAD;AAAW,IAAA,KAAK,MAAhB;AAAiB,IAAA,SAAS,EAAE3f,MAAM,CAAC4f,IAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAE5f,MAAM,CAAC6f,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAM,IAAA,SAAS,EAAE7f,MAAM,CAAC8f,IAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,IAAN;AAAW,IAAA,SAAS,EAAE9f,MAAM,CAAC+f,QAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAE/f,MAAM,CAACggB,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAEhgB,MAAM,CAACigB,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAEE;AAAI,IAAA,SAAS,EAAEjgB,MAAM,CAACgc,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF,EAGE;AAAK,IAAA,SAAS,EAAEhc,MAAM,CAACkgB,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2DAHF,CADF,EAQE,MAAC,IAAD;AAAM,IAAA,QAAQ,EAAE7K,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE,MAAC,GAAD;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAC,MAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,EAEE,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,KAAK,EAAE9S,KAAK,CAAC9B,IAFf;AAGE,IAAA,QAAQ,EAAEkY,YAAY,CAAC,MAAD,CAHxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,CADF,EAWE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAC,IAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EAEE;AAAK,IAAA,KAAK,EAAE;AAAEsG,MAAAA,QAAQ,EAAE;AAAZ,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,KAAK,EAAE1c,KAAK,CAAChB,EAAN,CAASwc,cAAT,KAA4B,EAFrC;AAGE,IAAA,QAAQ,EAAE,kBAACtP,CAAD;AAAA,aACRI,cAAc,CAACkP,cAAD,EAAiBtP,CAAC,CAACE,MAAF,CAASxF,KAA1B,CADN;AAAA,KAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAUE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,mBADV;AAEE,IAAA,OAAO,EAAE;AAAA,aAAM+U,eAAe,CAAC,CAACD,YAAF,CAArB;AAAA,KAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAVF,EAiBE,MAAC,UAAD,CAAY,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,mBADV;AAEE,IAAA,OAAO,EAAE;AAAA,aAAM7V,cAAc,CAAC,IAAD,CAApB;AAAA,KAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF,CAjBF,CADF,EA4BG6V,YAAY,IACX;AACE,IAAA,KAAK,EAAE;AACLgB,MAAAA,QAAQ,EAAE,UADL;AAELI,MAAAA,GAAG,EAAE,MAFA;AAGLH,MAAAA,IAAI,EAAE,CAHD;AAILiB,MAAAA,KAAK,EAAE,CAJF;AAKLb,MAAAA,eAAe,EAAE,OALZ;AAMLc,MAAAA,MAAM,EAAE,gBANH;AAOLT,MAAAA,MAAM,EAAE,IAPH;AAQLU,MAAAA,SAAS,EAAE,OARN;AASLC,MAAAA,SAAS,EAAE;AATN,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAaG/d,KAAK,CAAChB,EAAN,CAASiR,GAAT,CAAa,UAAC+N,QAAD,EAAWC,GAAX;AAAA,WACZ;AACE,MAAA,GAAG,EAAEA,GADP;AAEE,MAAA,KAAK,EAAE;AAAEC,QAAAA,OAAO,EAAE,KAAX;AAAkB/B,QAAAA,MAAM,EAAE;AAA1B,OAFT;AAGE,MAAA,OAAO,EAAE,mBAAM;AACbV,QAAAA,iBAAiB,CAACwC,GAAD,CAAjB;AACAtC,QAAAA,eAAe,CAAC,KAAD,CAAf;AACD,OANH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAQGqC,QARH,CADY;AAAA,GAAb,CAbH,CA7BJ,CAFF,EA4DGpY,WAAW,IACV,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,cAFd;AAGE,IAAA,KAAK,EAAEE,KAHT;AAIE,IAAA,QAAQ,EAAE,kBAACoG,CAAD;AAAA,aAAOnG,QAAQ,CAACmG,CAAC,CAACE,MAAF,CAASxF,KAAV,CAAf;AAAA,KAJZ;AAKE,IAAA,MAAM,EAAE+T,cALV;AAME,IAAA,SAAS,EAAE,mBAACzO,CAAD,EAAO;AAChB,UAAIA,CAAC,CAACnE,GAAF,KAAU,OAAd,EAAuB;AACrB4S,QAAAA,cAAc;AACf;AACF,KAVH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA7DJ,CADF,CAXF,CAFF,EA4FE,MAAC,GAAD;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAC,IAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,EAEE;AAAK,IAAA,KAAK,EAAE;AAAE+B,MAAAA,QAAQ,EAAE;AAAZ,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,KAAK,EAAE1c,KAAK,CAACf,EAAN,CAAS2c,cAAT,KAA4B,EAFrC;AAGE,IAAA,QAAQ,EAAE,kBAAC1P,CAAD;AAAA,aACRU,cAAc,CAACgP,cAAD,EAAiB1P,CAAC,CAACE,MAAF,CAASxF,KAA1B,CADN;AAAA,KAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAUE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,mBADV;AAEE,IAAA,OAAO,EAAE;AAAA,aAAMmV,iBAAiB,CAAC,CAACD,cAAF,CAAvB;AAAA,KAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAVF,EAiBE,MAAC,UAAD,CAAY,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,mBADV;AAEE,IAAA,OAAO,EAAE;AAAA,aAAM7V,cAAc,CAAC,IAAD,CAApB;AAAA,KAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF,CAjBF,CADF,EA4BG6V,cAAc,IACb;AACE,IAAA,KAAK,EAAE;AACLY,MAAAA,QAAQ,EAAE,UADL;AAELI,MAAAA,GAAG,EAAE,MAFA;AAGLH,MAAAA,IAAI,EAAE,CAHD;AAILiB,MAAAA,KAAK,EAAE,CAJF;AAKLb,MAAAA,eAAe,EAAE,OALZ;AAMLc,MAAAA,MAAM,EAAE,gBANH;AAOLT,MAAAA,MAAM,EAAE,IAPH;AAQLU,MAAAA,SAAS,EAAE,OARN;AASLC,MAAAA,SAAS,EAAE;AATN,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAaG/d,KAAK,CAACf,EAAN,CAASgR,GAAT,CAAa,UAACkO,QAAD,EAAWF,GAAX;AAAA,WACZ;AACE,MAAA,GAAG,EAAEA,GADP;AAEE,MAAA,KAAK,EAAE;AAAEC,QAAAA,OAAO,EAAE,KAAX;AAAkB/B,QAAAA,MAAM,EAAE;AAA1B,OAFT;AAGE,MAAA,OAAO,EAAE,mBAAM;AACbN,QAAAA,iBAAiB,CAACoC,GAAD,CAAjB;AACAlC,QAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACD,OANH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAQGoC,QARH,CADY;AAAA,GAAb,CAbH,CA7BJ,CAFF,EA4DGnY,WAAW,IACV,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,cAFd;AAGE,IAAA,KAAK,EAAEE,KAHT;AAIE,IAAA,QAAQ,EAAE,kBAACgG,CAAD;AAAA,aAAO/F,QAAQ,CAAC+F,CAAC,CAACE,MAAF,CAASxF,KAAV,CAAf;AAAA,KAJZ;AAKE,IAAA,MAAM,EAAEgU,cALV;AAME,IAAA,SAAS,EAAE,mBAAC1O,CAAD,EAAO;AAChB,UAAIA,CAAC,CAACnE,GAAF,KAAU,OAAd,EAAuB;AACrB6S,QAAAA,cAAc;AACf;AACF,KAVH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA7DJ,CADF,CADF,EA8EE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAC,QAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAEE,MAAC,IAAD,CAAM,MAAN;AACE,IAAA,KAAK,EAAE5a,KAAK,CAACR,MAAN,IAAgB,EADzB;AAEE,IAAA,QAAQ,EAAE4W,YAAY,CAAC,QAAD,CAFxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIE;AAAQ,IAAA,KAAK,EAAC,EAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAJF,EAKE;AAAQ,IAAA,KAAK,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YALF,EAME;AAAQ,IAAA,KAAK,EAAC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WANF,EAOE;AAAQ,IAAA,KAAK,EAAC,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAPF,CAFF,CADF,CA9EF,CA5FF,EA0LE,MAAC,GAAD;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAC,SAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAEE,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,gBAFd;AAGE,IAAA,KAAK,EAAEpW,KAAK,CAACd,OAAN,IAAiB,EAH1B;AAIE,IAAA,QAAQ,EAAEkX,YAAY,CAAC,SAAD,CAJxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,CADF,EAYE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAC,aAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAEE,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,WAAW,EAAC,oBADd;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,KAAK,EAAEpW,KAAK,CAACF,YAHf;AAIE,IAAA,QAAQ,EAAE,kBAACoM,CAAD,EAAO;AACf,UAAMtF,KAAK,GAAGsF,CAAC,CAACE,MAAF,CAASxF,KAAvB;AACA3G,MAAAA,QAAQ,CAAC,UAAC8J,IAAD;AAAA,+CACJA,IADI;AAEPjK,UAAAA,YAAY,EAAE8G;AAFP;AAAA,OAAD,CAAR;AAID,KAVH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,CAZF,EA6BE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAC,gBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,EAEE,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,WAAW,EAAC,iBADd;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,KAAK,EAAE5G,KAAK,CAACN,cAHf;AAIE,IAAA,QAAQ,EAAE0W,YAAY,CAAC,gBAAD,CAJxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,CA7BF,CA1LF,EAoOE,MAAC,GAAD;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAC,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADF,EAEE,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,KAFd;AAGE,IAAA,KAAK,EAAE5V,GAHT;AAIE,IAAA,QAAQ,EAAE,kBAAC0L,CAAD;AAAA,aAAOzL,MAAM,CAACyL,CAAC,CAACE,MAAF,CAASxF,KAAV,CAAb;AAAA,KAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,CADF,EAYE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAC,UAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAEE,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,UAFd;AAGE,IAAA,KAAK,EAAElG,QAHT;AAIE,IAAA,QAAQ,EAAE,kBAACwL,CAAD;AAAA,aAAOvL,WAAW,CAACuL,CAAC,CAACE,MAAF,CAASxF,KAAV,CAAlB;AAAA,KAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,CAZF,EAuBE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAC,OAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,EAEE,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,OAFd;AAGE,IAAA,KAAK,EAAEhG,KAHT;AAIE,IAAA,QAAQ,EAAE,kBAACsL,CAAD;AAAA,aAAOrL,QAAQ,CAACqL,CAAC,CAACE,MAAF,CAASxF,KAAV,CAAf;AAAA,KAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,CAvBF,CApOF,EAwQE;AAAK,IAAA,KAAK,EAAE;AAAE0V,MAAAA,YAAY,EAAE,MAAhB;AAAwB8B,MAAAA,SAAS,EAAE;AAAnC,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,mBADV;AAEE,IAAA,OAAO,EAAE/O,iBAFX;AAGE,IAAA,SAAS,EAAC,MAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,EAQGrN,UAAU,CAACrC,MAAX,GAAoB,CAApB,IACC;AAAK,IAAA,SAAS,EAAC,sCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAEE,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,wBAFd;AAGE,IAAA,KAAK,EAAE,CAAA2W,mBAAmB,SAAnB,IAAAA,mBAAmB,WAAnB,YAAAA,mBAAmB,CAAEvU,SAArB,KAAkC,EAH3C;AAIE,IAAA,QAAQ,EAAE,kBAACmK,CAAD;AAAA,aACRmE,qBAAqB,CACnBrO,UAAU,CAACqc,OAAX,CAAmB/H,mBAAnB,CADmB,EAEnB,WAFmB,EAGnBpK,CAAC,CAACE,MAAF,CAASxF,KAHU,CADb;AAAA,KAJZ;AAWE,IAAA,KAAK,EAAE;AAAE0V,MAAAA,YAAY,EAAE;AAAhB,KAXT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAeE,MAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAfF,EAgBE,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,iBAFd;AAGE,IAAA,KAAK,EAAE,CAAAhG,mBAAmB,SAAnB,IAAAA,mBAAmB,WAAnB,YAAAA,mBAAmB,CAAEnX,IAArB,KAA6B,EAHtC;AAIE,IAAA,QAAQ,EAAE,kBAAC+M,CAAD;AAAA,aACRmE,qBAAqB,CACnBrO,UAAU,CAACqc,OAAX,CAAmB/H,mBAAnB,CADmB,EAEnB,MAFmB,EAGnBpK,CAAC,CAACE,MAAF,CAASxF,KAHU,CADb;AAAA,KAJZ;AAWE,IAAA,KAAK,EAAE;AAAE0V,MAAAA,YAAY,EAAE;AAAhB,KAXT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAhBF,CATJ,CADF,CAxQF,EAoTE;AAAK,IAAA,KAAK,EAAE;AAAEA,MAAAA,YAAY,EAAE;AAAhB,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAC,MAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,mBADV;AAEE,IAAA,OAAO,EAAE9L,gBAFX;AAGE,IAAA,SAAS,EAAC,WAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,EAQE,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,EAAE,EAAC,UADL;AAEE,IAAA,IAAI,EAAE,CAFR;AAGE,IAAA,WAAW,EAAC,mBAHd;AAIE,IAAA,KAAK,EAAE,2BAAA3O,YAAY,CAAC+B,YAAD,CAAZ,kFAA4BhC,WAA5B,KAA2C,EAJpD;AAKE,IAAA,QAAQ,EAAE,kBAACsK,CAAD;AAAA,aACR4D,uBAAuB,CACrBlM,YADqB,EAErB,aAFqB,EAGrBsI,CAAC,CAACE,MAAF,CAASxF,KAHY,CADf;AAAA,KALZ;AAYE,IAAA,KAAK,EAAE;AAAE0V,MAAAA,YAAY,EAAE;AAAhB,KAZT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,EAsBE,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,KAAK,EAAE,2BAAAza,YAAY,CAAC+B,YAAD,CAAZ,kFAA4BzE,IAA5B,KAAoC,EAF7C;AAGE,IAAA,QAAQ,EAAE,kBAAC+M,CAAD;AAAA,aACR4D,uBAAuB,CACrBlM,YADqB,EAErB,MAFqB,EAGrBsI,CAAC,CAACE,MAAF,CAASxF,KAHY,CADf;AAAA,KAHZ;AAUE,IAAA,KAAK,EAAE;AAAEwX,MAAAA,SAAS,EAAE,QAAb;AAAuB9B,MAAAA,YAAY,EAAE;AAArC,KAVT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAtBF,CADF,CApTF,EA0VE;AAAK,IAAA,KAAK,EAAE;AAAEA,MAAAA,YAAY,EAAE;AAAhB,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,GAAD;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,mBADV;AAEE,IAAA,OAAO,EAAE,mBAAM;AACbnX,MAAAA,cAAc,CAAC,IAAD,CAAd;AACAoK,MAAAA,qBAAqB;AACtB,KALH;AAME,IAAA,SAAS,EAAC,MANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAWGgF,kBAAkB,IACjB;AACE,IAAA,KAAK,EAAE;AACLsJ,MAAAA,MAAM,EAAE,gBADH;AAELK,MAAAA,OAAO,EAAE,SAFJ;AAGLzB,MAAAA,YAAY,EAAE,KAHT;AAILH,MAAAA,YAAY,EAAE;AAJT,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BADF,EAC2C,GAD3C,EAEG/H,kBAAkB,CAACrW,IAFtB,CARF,EAYE;AAAK,IAAA,KAAK,EAAE;AAAEkgB,MAAAA,SAAS,EAAE;AAAb,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,mBADV;AAEE,IAAA,OAAO,EAAE;AAAA,aAAMjb,mBAAmB,CAAC,IAAD,CAAzB;AAAA,KAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAIsBoR,kBAAkB,CAACrW,IAJzC,CADF,EAOG8F,eAAe,IACd,4BACE;AAAG,IAAA,KAAK,EAAE;AAAEoa,MAAAA,SAAS,EAAE;AAAb,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADF,EAC4C,GAD5C,EAEGpa,eAAe,CAAC9F,IAFnB,CADF,EAKG2c,gBAAgB,IACf,4BACE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,mBADV;AAEE,IAAA,OAAO,EAAE;AAAA,aACPG,wBAAwB,CAAC,IAAD,CADjB;AAAA,KAFX;AAKE,IAAA,SAAS,EAAC,YALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOG,CACC5Z,YAAY,CAACN,MADd,EAEC,0BAAAM,YAAY,CAACL,OAAb,gFAAsBC,MAAtB,+BACEI,YAAY,CAACL,OADf,2DACE,uBAAsBE,MADxB,CAFD,EAICG,YAAY,CAACF,GAAb,eACME,YAAY,CAACF,GADnB,CAJD,EAMCE,YAAY,CAACD,MAAb,eACMC,YAAY,CAACD,MADnB,CAND,EASEuN,MATF,CASS1E,OATT,EAUEiO,IAVF,CAUO,GAVP,KAUe,oBAjBlB,CADF,EAoBE,MAAC,KAAD;AACE,IAAA,IAAI,EAAE8C,qBADR;AAEE,IAAA,MAAM,EAAE;AAAA,aACNC,wBAAwB,CAAC,KAAD,CADlB;AAAA,KAFV;AAKE,IAAA,QAAQ,MALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOE,MAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,CAPF,EAYE,MAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,QAAD;AACE,IAAA,cAAc,EAAEzG,kBADlB;AAEE,IAAA,YAAY,EAAEwG,qBAFhB;AAGE,IAAA,KAAK,EAAE3Z,YAHT;AAIE,IAAA,QAAQ,EAAEC,eAJZ;AAKE,IAAA,MAAM,EAAE,gBAACuW,CAAD,EAAO;AACbvW,MAAAA,eAAe,CAACuW,CAAD,CAAf;AACAoD,MAAAA,wBAAwB,CAAC,KAAD,CAAxB;AACD,KARH;AASE,IAAA,QAAQ,EAAE;AAAA,aACRA,wBAAwB,CAAC,KAAD,CADhB;AAAA,KATZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAZF,CApBF,CANJ,CARJ,CAZF,CAZJ,CADF,EA+FE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,mBADV;AAEE,IAAA,OAAO,EAAE,mBAAM;AACb7V,MAAAA,cAAc,CAAC,KAAD,CAAd;AACAoK,MAAAA,qBAAqB;AACtB,KALH;AAME,IAAA,SAAS,EAAC,MANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EAWGiF,qBAAqB,IACpB;AACE,IAAA,KAAK,EAAE;AACLqJ,MAAAA,MAAM,EAAE,gBADH;AAELK,MAAAA,OAAO,EAAE,SAFJ;AAGLzB,MAAAA,YAAY,EAAE,KAHT;AAILH,MAAAA,YAAY,EAAE;AAJT,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF,EAC8C,GAD9C,EAEG9H,qBAAqB,CAACtW,IAFzB,CARF,EAYE;AAAK,IAAA,KAAK,EAAE;AAAEkgB,MAAAA,SAAS,EAAE;AAAb,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,mBADV;AAEE,IAAA,OAAO,EAAE;AAAA,aAAMjb,mBAAmB,CAAC,IAAD,CAAzB;AAAA,KAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAIsBqR,qBAAqB,CAACtW,IAJ5C,CADF,EAOGgG,sBAAsB,IACrB,4BACE;AAAG,IAAA,KAAK,EAAE;AAAEka,MAAAA,SAAS,EAAE;AAAb,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCADF,EAC+C,GAD/C,EAEGla,sBAAsB,CAAChG,IAF1B,CADF,EAKG4c,mBAAmB,IAClB,4BACE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,mBADV;AAEE,IAAA,OAAO,EAAE;AAAA,aACPI,2BAA2B,CAAC,IAAD,CADpB;AAAA,KAFX;AAKE,IAAA,SAAS,EAAC,YALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOG,CACC5Z,eAAe,CAACR,MADjB,EAEC,0BAAAQ,eAAe,CAACP,OAAhB,gFAAyBC,MAAzB,+BACEM,eAAe,CAACP,OADlB,2DACE,uBAAyBE,MAD3B,CAFD,EAICK,eAAe,CAACJ,GAAhB,eACMI,eAAe,CAACJ,GADtB,CAJD,EAMCI,eAAe,CAACH,MAAhB,eACMG,eAAe,CAACH,MADtB,CAND,EASEuN,MATF,CASS1E,OATT,EAUEiO,IAVF,CAUO,GAVP,KAUe,oBAjBlB,CADF,EAoBE,MAAC,KAAD;AACE,IAAA,IAAI,EAAEgD,wBADR;AAEE,IAAA,MAAM,EAAE;AAAA,aACNC,2BAA2B,CAAC,KAAD,CADrB;AAAA,KAFV;AAKE,IAAA,QAAQ,MALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOE,MAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADF,CAPF,EAYE,MAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,QAAD;AACE,IAAA,cAAc,EAAE1G,qBADlB;AAEE,IAAA,YAAY,EACVyG,wBAHJ;AAKE,IAAA,KAAK,EAAE3Z,eALT;AAME,IAAA,QAAQ,EAAEC,kBANZ;AAOE,IAAA,MAAM,EAAE,gBAACqW,CAAD,EAAO;AACbrW,MAAAA,kBAAkB,CAACqW,CAAD,CAAlB;AACAsD,MAAAA,2BAA2B,CAAC,KAAD,CAA3B;AACD,KAVH;AAWE,IAAA,QAAQ,EAAE;AAAA,aACRA,2BAA2B,CAAC,KAAD,CADnB;AAAA,KAXZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAZF,CApBF,CANJ,CARJ,CAZF,CAZJ,CA/FF,EA+LE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,mBADV;AAEE,IAAA,OAAO,EAAEvL,qBAFX;AAGE,IAAA,SAAS,EAAC,MAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,EAQGvL,cAAc,IACb,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,iBAFd;AAGE,IAAA,KAAK,EAAEA,cAAc,CAAClG,IAHxB;AAIE,IAAA,QAAQ,MAJV;AAKE,IAAA,KAAK,EAAE;AAAEie,MAAAA,MAAM,EAAE,SAAV;AAAqBiC,MAAAA,SAAS,EAAE;AAAhC,KALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATJ,CA/LF,CADF,CA1VF,EA+iBE;AAAK,IAAA,KAAK,EAAE;AAAE9B,MAAAA,YAAY,EAAE;AAAhB,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,GAAD;AAAK,IAAA,SAAS,iBAAU7e,MAAM,CAAC6gB,eAAjB,CAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,GAAD;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,EAAE,EAAE,CAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,mBADV;AAEE,IAAA,OAAO,EAAE5H,qBAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAOE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,mBADV;AAEE,IAAA,OAAO,EAAE5J,kBAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAPF,CADF,CADF,EAiBE,MAAC,GAAD;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,EAAE,EAAE,CAAjB;AAAoB,IAAA,SAAS,EAAErP,MAAM,CAAC8gB,iBAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,SADV;AAEE,IAAA,OAAO,EAAE9G,kBAFX;AAGE,IAAA,QAAQ,EAAE,CAACxE,iBAHb;AAIE,IAAA,KAAK,EAAE;AAAEuL,MAAAA,UAAU,EAAE;AAAd,KAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EASE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,WADV;AAEE,IAAA,OAAO,EAAErF,sBAFX;AAGE,IAAA,QAAQ,EAAE,CAAClG,iBAHb;AAIE,IAAA,KAAK,EAAE;AAAEuL,MAAAA,UAAU,EAAE,QAAd;AAAwBC,MAAAA,WAAW,EAAE;AAArC,KAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBATF,EAiBE,MAAC,MAAD;AACE,IAAA,OAAO,EAAEzZ,YAAY,GAAG,SAAH,GAAe,iBADtC;AAEE,IAAA,OAAO,EAAEyV,wBAFX;AAGE,IAAA,QAAQ,EAAE,CAACxH,iBAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKGjO,YAAY,GAAG,kBAAH,GAAwB,gBALvC,CAjBF,EAwBE,MAAC,IAAD,CAAM,KAAN;AACE,IAAA,IAAI,EAAC,UADP;AAEE,IAAA,EAAE,EAAC,eAFL;AAGE,IAAA,KAAK,EAAC,MAHR;AAIE,IAAA,OAAO,EAAE,CAAChF,KAAK,CAACD,OAJlB;AAKE,IAAA,QAAQ,EAAE,kBAACmM,CAAD,EAAO;AACf,UAAMwS,QAAQ,GAAGxS,CAAC,CAACyS,aAAF,CAAgBC,OAAjC;AACA3e,MAAAA,QAAQ,CAAC,UAAC8J,IAAD;AAAA,+CACJA,IADI;AAEPhK,UAAAA,OAAO,EAAE,CAAC2e;AAFH;AAAA,OAAD,CAAR;AAID,KAXH;AAYE,IAAA,SAAS,EAAC,MAZZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAxBF,CAjBF,CADF,EA0DE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,MAAM,EAAC,SAFT;AAGE,IAAA,QAAQ,MAHV;AAIE,IAAA,GAAG,EAAEtY,cAJP;AAKE,IAAA,KAAK,EAAE;AAAE6W,MAAAA,OAAO,EAAE;AAAX,KALT;AAME,IAAA,QAAQ,EAAEjQ,mBANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA1DF,CA/iBF,EAmnBE;AAAK,IAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG5K,MAAM,CAAC6N,GAAP,CAAW,UAACsF,KAAD,EAAQhJ,KAAR;AAAA,WACV;AACE,MAAA,GAAG,EAAEA,KADP;AAEE,MAAA,SAAS,EAAC,iDAFZ;AAGE,MAAA,KAAK,EAAE;AACL3M,QAAAA,KAAK,EAAE,OADF;AAELC,QAAAA,MAAM,EAAE,OAFH;AAGL6c,QAAAA,QAAQ,EAAE;AAHL,OAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OASE;AACE,MAAA,GAAG,EAAEnH,KAAK,CAACjI,GADb;AAEE,MAAA,GAAG,kBAAWf,KAAK,GAAG,CAAnB,CAFL;AAGE,MAAA,KAAK,EAAE;AACL3M,QAAAA,KAAK,EAAE,MADF;AAELC,QAAAA,MAAM,EAAE,MAFH;AAGLgf,QAAAA,SAAS,EAAE;AAHN,OAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATF,EAkBGtJ,KAAK,CAAClI,IAAN,IACC,MAAC,MAAD;AACE,MAAA,OAAO,EAAC,QADV;AAEE,MAAA,IAAI,EAAC,IAFP;AAGE,MAAA,KAAK,EAAE;AACLqP,QAAAA,QAAQ,EAAE,UADL;AAELI,QAAAA,GAAG,EAAE,CAFA;AAGLc,QAAAA,KAAK,EAAE,CAHF;AAILM,QAAAA,OAAO,EAAE;AAJJ,OAHT;AASE,MAAA,OAAO,EAAE;AAAA,eAAMzP,WAAW,CAAClC,KAAD,CAAjB;AAAA,OATX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAnBJ,CADU;AAAA,GAAX,CADH,CAnnBF,EA4pBE;AAAK,IAAA,SAAS,qDAA8C9O,MAAM,CAACqhB,SAArD,CAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,SADV;AAEE,IAAA,IAAI,EAAC,QAFP;AAGE,IAAA,KAAK,EAAE;AAAEL,MAAAA,WAAW,EAAE;AAAf,KAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,EAQE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,MADV;AAEE,IAAA,OAAO,EAAEtD,WAFX;AAGE,IAAA,KAAK,EAAE;AAAEsD,MAAAA,WAAW,EAAE;AAAf,KAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aARF,EAeE,MAAC,aAAD;AACE,IAAA,IAAI,EAAC,WADP;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,KAAK,EAAC,sBAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAfF,EAoBG7f,kBAAkB,IACjB;AACE,IAAA,KAAK,EAAE;AACLqe,MAAAA,OAAO,EAAE,MADJ;AAEL8B,MAAAA,aAAa,EAAE,QAFV;AAGLP,MAAAA,UAAU,EAAE;AAHP,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOE;AACE,IAAA,KAAK,EAAE;AACLQ,MAAAA,QAAQ,EAAE,EADL;AAELC,MAAAA,UAAU,EAAE,MAFP;AAGLC,MAAAA,SAAS,EAAE;AAHN,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAPF,EAgBE;AACE,IAAA,KAAK,EAAE;AACLjC,MAAAA,OAAO,EAAE,MADJ;AAELY,MAAAA,MAAM,EAAE,mBAFH;AAGLpB,MAAAA,YAAY,EAAE,CAHT;AAIL0C,MAAAA,QAAQ,EAAE;AAJL,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,iBADV;AAEE,IAAA,OAAO,EAAE;AAAA,aAAM7F,gBAAgB,CAAC,WAAD,CAAtB;AAAA,KAFX;AAGE,IAAA,QAAQ,EAAE,CAACrG,iBAHb;AAIE,IAAA,KAAK,EAAE;AACL4K,MAAAA,MAAM,EAAE,MADH;AAELuB,MAAAA,WAAW,EAAE;AAFR,KAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBARF,EAmBE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,iBADV;AAEE,IAAA,OAAO,EAAE;AAAA,aAAM9F,gBAAgB,CAAC,UAAD,CAAtB;AAAA,KAFX;AAGE,IAAA,QAAQ,EAAE,CAACrG,iBAHb;AAIE,IAAA,KAAK,EAAE;AAAE4K,MAAAA,MAAM,EAAE;AAAV,KAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAnBF,CAhBF,CArBJ,EAmEE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,MADV;AAEE,IAAA,OAAO,EAAE/G,WAFX;AAGE,IAAA,QAAQ,EAAE,CAAC7D,iBAHb;AAIE,IAAA,KAAK,EAAE;AAAEuL,MAAAA,UAAU,EAAE;AAAd,KAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAnEF,CA5pBF,EAwuBE;AAAK,IAAA,KAAK,EAAE;AAAEU,MAAAA,SAAS,EAAE,QAAb;AAAuBG,MAAAA,MAAM,EAAE;AAA/B,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,OAAO,EAAC,MADV;AAEE,IAAA,KAAK,EAAE;AACLC,MAAAA,cAAc,EAAE,MADX;AAELC,MAAAA,KAAK,EAAE,OAFF;AAGLP,MAAAA,QAAQ,EAAE;AAHL,KAFT;AAOE,IAAA,OAAO,EAAE;AAAA,aAAMrZ,YAAY,CAAC,CAACD,SAAF,CAAlB;AAAA,KAPX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAxuBF,EAqvBE,MAAC,QAAD;AAAU,UAAIA,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,EAAE,EAAC,gBAAR;AAAyB,IAAA,SAAS,EAAC,MAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAY,IAAA,EAAE,EAAE1J,GAAhB;AAAqB,IAAA,SAAS,EAAC,YAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADF,EAEE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,WAAW,EAAC,QADd;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,KAAK,EAAEgE,KAAK,CAACL,MAHf;AAIE,IAAA,QAAQ,EAAEyW,YAAY,CAAC,QAAD,CAJxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,OAUE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,WAAW,EAAC,OADd;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,KAAK,EAAEpW,KAAK,CAACJ,KAHf;AAIE,IAAA,QAAQ,EAAEwW,YAAY,CAAC,OAAD,CAJxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAVF,OAmBE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,WAAW,EAAC,QADd;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,KAAK,EAAEpW,KAAK,CAACH,MAHf;AAIE,IAAA,QAAQ,EAAEuW,YAAY,CAAC,QAAD,CAJxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAnBF,CAFF,CADF,EAgCE,MAAC,IAAD,CAAM,KAAN;AAAY,IAAA,EAAE,EAAEpa,GAAhB;AAAqB,IAAA,SAAS,EAAC,OAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,EAEE,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,WAAW,EAAC,OADd;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,KAAK,EAAEgE,KAAK,CAACT,KAHf;AAIE,IAAA,QAAQ,EAAE6W,YAAY,CAAC,OAAD,CAJxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAhCF,CADF,EA2CE,MAAC,GAAD;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAY,IAAA,EAAE,EAAEpa,GAAhB;AAAqB,IAAA,SAAS,EAAC,KAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCADF,EAEE,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,WAAW,EAAC,WADd;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,KAAK,EAAEsE,GAHT;AAIE,IAAA,QAAQ,EAAE,kBAAC4L,CAAD;AAAA,aAAO3L,MAAM,CAAC2L,CAAC,CAACE,MAAF,CAASxF,KAAV,CAAb;AAAA,KAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,CA3CF,EAsDE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAY,IAAA,EAAE,EAAE5K,GAAhB;AAAqB,IAAA,SAAS,EAAC,UAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAEE,MAAC,IAAD,CAAM,OAAN;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,WAFd;AAGE,IAAA,KAAK,EAAEgE,KAAK,CAACP,QAAN,IAAkB,EAH3B;AAIE,IAAA,QAAQ,EAAE2W,YAAY,CAAC,UAAD,CAJxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,CAtDF,CADF,CArvBF,CARF,CADF,CADF,CADF,CAnTF,CADF;AA+nCD;;IA37EuB3X,O;UACP7B,S,EACKH,O;;;MAFEgC,O","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport {\n  Form,\n  Button,\n  Card,\n  Container,\n  Row,\n  Col,\n  Modal,\n  FormControl,\n  Collapse,\n  InputGroup,\n  ButtonGroup,\n  Spinner,\n} from \"react-bootstrap\";\nimport Link from \"next/link\";\nimport dynamic from \"next/dynamic\";\nimport { useAuth } from \"../../../context/AuthUserContext\";\nimport firebase from \"../../../context/Firebase\";\nimport LoggedIn from \"../../LoggedIn\";\nimport { useRouter } from \"next/router\";\nimport { fetchClients } from \"../../../utils/fetchAssociations\";\nimport ClientTable from \"../../../utils/ClientTable\";\nimport ClientInfoModal from \"../ClientInfoModal\";\nimport ParentModal from \"./parentModal\";\nimport MachineSelectionModal from \"../item/[id]/MachineSelectionModal\";\nimport InfoModal from \"../InfoModal\";\nimport InflowAPI from \"../../../utils/inflowAPI\";\nimport NewLocal from \"../item/[id]/NewLocal\";\nimport {\n  buildLocalLocObject,\n  formatLoc,\n  updateMachineFields,\n  buildNameTokens,\n} from \"../../../utils/itemFormShared\";\nimport styles from \"./NewItem.module.css\";\n\n// Load BarcodeScannerComponent only on the client-side.\nconst BarcodeScannerComponent = dynamic(\n  () => import(\"react-qr-barcode-scanner\"),\n  { ssr: false }\n);\n\n// Simulate network delay.\nfunction simulateNetworkRequest() {\n  return new Promise((resolve) => setTimeout(resolve, 2000));\n}\n\n// Custom LoadingButton component.\nfunction LoadingButton({ type, name, route }) {\n  const [isLoading, setLoading] = useState(false);\n  useEffect(() => {\n    if (isLoading) {\n      let cancelled = false;\n      simulateNetworkRequest().then(() => {\n        if (!cancelled) setLoading(false);\n      });\n      return () => {\n        cancelled = true;\n      };\n    }\n  }, [isLoading]);\n  const handleClick = () => setLoading(true);\n  return (\n    <Link href={`/${route}`}>\n      <a\n        className={`btn btn-${type}`}\n        disabled={isLoading}\n        onClick={!isLoading ? handleClick : null}\n      >\n        {isLoading ? \"Loading…\" : name}\n      </a>\n    </Link>\n  );\n}\n\nexport default function NewItem() {\n  const router = useRouter();\n  const { signOut } = useAuth();\n  const SHOW_SLACK_BUTTONS =\n    process.env.NEXT_PUBLIC_SHOW_SLACK_BUTTONS === \"true\";\n  // Initialize item state – for a new item, these start empty.\n  // We store PN and SN as arrays.\n  const [items, setItems] = useState({\n    name: \"\",\n    pn: [\"\"],\n    sn: [\"\"], // This will be overridden on submit.\n    localSN: \"\", // NEW FIELD: holds user input for a local serial number.\n    date: new Date().toISOString().split(\"T\")[0], // auto-fill current date\n    price: \"\",\n    status: \"\",\n    poNumber: \"\",\n    trackingNumber: \"\",\n    length: \"\",\n    width: \"\",\n    height: \"\",\n    arrival_date: \"\", // NEW FIELD: Arrival Date\n    visible: true,\n  });\n\n  const [editingPn, setEditingPn] = useState(true);\n  // const [newPn, setNewPn] = useState(\"\"); // for the input value when editing\n\n  const [editingSn, setEditingSn] = useState(true);\n  // const [newSn, setNewSn] = useState(\"\");\n\n  // DOM is the Date of Manufacture input (user provided).\n  const [DOM, setDOM] = useState(\"\");\n  // OEM, Modality, Model fields.\n  const [oem, setOem] = useState(\"\");\n  const [modality, setModality] = useState(\"\");\n  const [model, setModel] = useState(\"\");\n\n  // Local location states.\n  const [newLocalFrom, setNewLocalFrom] = useState({\n    region: \"\",\n    section: { letter: \"\", number: \"\" },\n    bin: \"\",\n    pallet: \"\",\n  });\n  const [newLocalCurrent, setNewLocalCurrent] = useState({\n    region: \"\",\n    section: { letter: \"\", number: \"\" },\n    bin: \"\",\n    pallet: \"\",\n  });\n\n  // Other states.\n  const [pnOptions, setPnOptions] = useState([]);\n  const [snOptions, setSnOptions] = useState([]);\n  const [descriptions, setDescriptions] = useState([\n    { description: \"\", date: \"\" },\n  ]);\n  const [workOrders, setWorkOrders] = useState([{ workOrder: \"\", date: \"\" }]);\n  const [clients, setClients] = useState([]);\n  const [photos, setPhotos] = useState([]);\n  const [show, setShow] = useState(false); // error modal for missing required fields\n  const [showErr, setShowErr] = useState(false);\n  const [Err, setErr] = useState(\n    \"Missing required field: Name and Description\"\n  );\n  const [showDescModal, setShowDescModal] = useState(false);\n  const [showWoModal, setShowWoModal] = useState(false);\n  const [showClientModal, setShowClientModal] = useState(false);\n  const [showMachineModal, setShowMachineModal] = useState(false);\n  const [showParentModal, setShowParentModal] = useState(false);\n  const [showCameraModal, setShowCameraModal] = useState(false);\n  const [showSaveModal, setShowSaveModal] = useState(false);\n  const [machineSelectionModal, setMachineSelectionModal] = useState(false);\n  const [selectedDesc, setSelectedDesc] = useState(0);\n  const [selectedClient, setSelectedClient] = useState(null);\n  const [selectedMachine, setSelectedMachine] = useState(null);\n  const [selectedCurrentMachine, setSelectedCurrentMachine] = useState(null);\n  const [selectedParent, setSelectedParent] = useState(null);\n  const [TheMachine, setTheMachine] = useState(null);\n  const [machineOptions, setMachineOptions] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  const [capturedPhoto, setCapturedPhoto] = useState(null);\n  const [cameraFacing, setCameraFacing] = useState(\"environment\");\n  const [addToWebsite, setAddToWebsite] = useState(false);\n  const [machinePick, setMachinePick] = useState(false);\n  const [freqItem, setFreqItem] = useState(0);\n  const [usagePastYear, setUsagePastYear] = useState(0);\n  const [machineFrequency, setMachineFrequency] = useState(0);\n  // For extra (dimensions/price/DOM) section collapse.\n  const [showExtra, setShowExtra] = useState(false);\n\n  // For PN/SN \"add new\" functionality.\n  const [addingNewPn, setAddingNewPn] = useState(false);\n  const [newPn, setNewPn] = useState(\"\");\n  const [addingNewSn, setAddingNewSn] = useState(false);\n  const [newSn, setNewSn] = useState(\"\");\n\n  // For browsing photos.\n  const browseInputRef = useRef(null);\n  const cloneSeedRef = useRef(null);\n\n  // Inside your NewItem component:\n  const [loading, setLoading] = useState(false);\n  const [savedDocId, setSavedDocId] = useState(null);\n  const isMountedRef = useRef(true);\n\n  useEffect(() => {\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, []);\n\n  const safeSetLoading = (value) => {\n    if (isMountedRef.current) setLoading(value);\n  };\n\n  const withTimeout = (promise, ms, label = \"Operation\") =>\n    new Promise((resolve, reject) => {\n      const timer = setTimeout(() => {\n        reject(new Error(`${label} timed out after ${Math.ceil(ms / 1000)}s`));\n      }, ms);\n      promise\n        .then((result) => {\n          clearTimeout(timer);\n          resolve(result);\n        })\n        .catch((err) => {\n          clearTimeout(timer);\n          reject(err);\n        });\n    });\n\n  const shallowClean = (obj) => {\n    const newObj = {};\n    Object.keys(obj || {}).forEach((key) => {\n      newObj[key] = obj[key] === undefined ? \"\" : obj[key];\n    });\n    return newObj;\n  };\n\n  useEffect(() => {\n    if (!router.isReady) return;\n    const cloneFrom = router.query.cloneFrom;\n    if (!cloneFrom || cloneSeedRef.current === cloneFrom) return;\n    cloneSeedRef.current = cloneFrom;\n\n    let cancelled = false;\n    const db = firebase.firestore();\n\n    const toArray = (value) => {\n      if (Array.isArray(value)) return value;\n      if (value === null || value === undefined || value === \"\") return [\"\"];\n      return [value];\n    };\n\n    const toDateString = (value) => {\n      if (!value) return \"\";\n      if (value?.toDate) {\n        const d = value.toDate();\n        return isNaN(d.getTime()) ? \"\" : d.toISOString().slice(0, 10);\n      }\n      if (value instanceof Date) {\n        return isNaN(value.getTime()) ? \"\" : value.toISOString().slice(0, 10);\n      }\n      if (typeof value === \"string\") {\n        if (/^\\d{4}-\\d{2}-\\d{2}/.test(value)) return value.slice(0, 10);\n        const parsed = Date.parse(value);\n        if (!isNaN(parsed)) return new Date(parsed).toISOString().slice(0, 10);\n      }\n      return \"\";\n    };\n\n    const resolveDoc = async (ref, collection) => {\n      if (!ref) return null;\n      try {\n        if (typeof ref.get === \"function\") {\n          const doc = await ref.get();\n          return doc.exists ? { id: doc.id, ...doc.data() } : null;\n        }\n        if (typeof ref === \"string\") {\n          const doc = await db.collection(collection).doc(ref).get();\n          return doc.exists ? { id: doc.id, ...doc.data() } : null;\n        }\n        if (ref?.id) {\n          const doc = await db.collection(collection).doc(ref.id).get();\n          return doc.exists ? { id: doc.id, ...doc.data() } : null;\n        }\n        if (ref?.path) {\n          const doc = await db.doc(ref.path).get();\n          return doc.exists ? { id: doc.id, ...doc.data() } : null;\n        }\n      } catch (error) {\n        console.error(`Clone ref lookup failed (${collection})`, error);\n      }\n      return null;\n    };\n\n    (async () => {\n      try {\n        const doc = await db.collection(\"Test\").doc(cloneFrom).get();\n        if (!doc.exists) {\n          if (!cancelled) {\n            setErr(\"Clone source not found.\");\n            setShowErr(true);\n          }\n          return;\n        }\n\n        const data = doc.data() || {};\n        const dateValue = toDateString(data.date);\n        const arrivalValue =\n          toDateString(data.arrival_date) ||\n          (typeof data.arrival_date === \"string\" ? data.arrival_date : \"\");\n\n        if (!cancelled) {\n          setItems((prev) => ({\n            ...prev,\n            name: data.name || \"\",\n            pn: toArray(data.pn),\n            sn: toArray(data.sn),\n            localSN: \"\",\n            date: dateValue || prev.date || \"\",\n            price: data.price ?? \"\",\n            status: data.status ?? \"\",\n            poNumber: data.poNumber ?? \"\",\n            trackingNumber: data.trackingNumber ?? \"\",\n            length: data.length ?? \"\",\n            width: data.width ?? \"\",\n            height: data.height ?? \"\",\n            arrival_date: arrivalValue || \"\",\n            visible: data.visible !== undefined ? data.visible : true,\n          }));\n          setDescriptions(\n            Array.isArray(data.descriptions) && data.descriptions.length\n              ? data.descriptions\n              : [{ description: \"\", date: \"\" }]\n          );\n          setWorkOrders(\n            Array.isArray(data.workOrders) && data.workOrders.length\n              ? data.workOrders\n              : [{ workOrder: \"\", date: \"\" }]\n          );\n          setDOM(data.DOM || \"\");\n          setNewLocalFrom(\n            data.newLocalFrom || {\n              region: \"\",\n              section: { letter: \"\", number: \"\" },\n              bin: \"\",\n              pallet: \"\",\n            }\n          );\n          setNewLocalCurrent(\n            data.newLocalCurrent || {\n              region: \"\",\n              section: { letter: \"\", number: \"\" },\n              bin: \"\",\n              pallet: \"\",\n            }\n          );\n          setAddToWebsite(Boolean(data.addedToWebsite));\n          setSavedDocId(null);\n          setSelectedDesc(0);\n        }\n\n        if (data.TheMachine && !cancelled) {\n          setTheMachine(data.TheMachine);\n          setMachineFieldsInitialized(false);\n          if (!oem || oem === \"N/A\")\n            setOem(data.TheMachine.oem || data.TheMachine.OEM || \"\");\n          if (!modality || modality === \"N/A\")\n            setModality(data.TheMachine.modality || data.TheMachine.Modality || \"\");\n          if (!model || model === \"N/A\")\n            setModel(data.TheMachine.model || data.TheMachine.Model || \"\");\n        }\n\n        const parentDoc = await resolveDoc(data.Parent, \"Test\");\n        if (parentDoc && !cancelled) {\n          setSelectedParent({ id: parentDoc.id, name: parentDoc.name || \"\" });\n        }\n\n        const clientFromDoc = await resolveDoc(data.ClientFrom, \"Client\");\n        if (clientFromDoc && !cancelled) {\n          setSelectedClientFrom({ id: clientFromDoc.id, ...clientFromDoc });\n        }\n\n        const clientCurrentDoc = await resolveDoc(data.ClientCurrent, \"Client\");\n        if (clientCurrentDoc && !cancelled) {\n          setSelectedClientCurrent({ id: clientCurrentDoc.id, ...clientCurrentDoc });\n        }\n\n        const machineFromDoc = await resolveDoc(\n          data.MachineFrom || data.Machine,\n          \"Machine\"\n        );\n        if (machineFromDoc && !cancelled) {\n          setSelectedMachine({\n            id: machineFromDoc.id,\n            name: machineFromDoc.name || machineFromDoc.Model || \"\",\n          });\n          if (!data.TheMachine) {\n            setTheMachine(machineFromDoc);\n            setMachineFieldsInitialized(false);\n          }\n        }\n\n        const machineCurrentDoc = await resolveDoc(\n          data.MachineCurrent || data.CurrentMachine,\n          \"Machine\"\n        );\n        if (machineCurrentDoc && !cancelled) {\n          setSelectedCurrentMachine({\n            id: machineCurrentDoc.id,\n            name: machineCurrentDoc.name || machineCurrentDoc.Model || \"\",\n          });\n          if (!data.TheMachine && !machineFromDoc) {\n            setTheMachine(machineCurrentDoc);\n            setMachineFieldsInitialized(false);\n          }\n        }\n      } catch (error) {\n        console.error(\"Clone load failed:\", error);\n        if (!cancelled) {\n          setErr(\"Failed to load clone data.\");\n          setShowErr(true);\n        }\n      }\n    })();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [router.isReady, router.query.cloneFrom, oem, modality, model]);\n\n  // -------------------- Since this is \"add\" mode, we do not fetch an existing document.\n  // However, we still fetch global PN and SN options and clients for selection.\n  useEffect(() => {\n    async function fetchClientsData() {\n      try {\n        const clientsData = await fetchClients();\n        console.log(\"Clients:\", clientsData);\n        setClients(clientsData);\n      } catch (error) {\n        console.error(\"Error fetching clients: \", error);\n      }\n    }\n    fetchClientsData();\n  }, []);\n\n  useEffect(() => {\n    async function fetchPnSn() {\n      const db = firebase.firestore();\n      const snapshot = await db.collection(\"Test\").get();\n      let pnSet = new Set();\n      let snSet = new Set();\n      snapshot.forEach((doc) => {\n        const data = doc.data();\n        if (data.pn) pnSet.add(data.pn);\n        if (data.sn) snSet.add(data.sn);\n      });\n      setPnOptions([...pnSet]);\n      setSnOptions([...snSet]);\n    }\n    fetchPnSn();\n  }, []);\n\n  const [machineFieldsInitialized, setMachineFieldsInitialized] =\n    useState(false);\n\n  useEffect(() => {\n    if (\n      !machineFieldsInitialized &&\n      (TheMachine || selectedCurrentMachine || selectedMachine)\n    ) {\n      const updatedFields = updateMachineFields(\n        TheMachine,\n        selectedCurrentMachine,\n        selectedMachine\n      );\n\n      // Only set fields if they are empty or \"N/A\"\n      if (!oem || oem === \"N/A\") setOem(updatedFields.oem);\n      if (!modality || modality === \"N/A\") setModality(updatedFields.modality);\n      if (!model || model === \"N/A\") setModel(updatedFields.model);\n\n      setMachineFieldsInitialized(true);\n    }\n  }, [\n    TheMachine,\n    selectedCurrentMachine,\n    selectedMachine,\n    machineFieldsInitialized,\n  ]);\n\n  const [signal, setSignal] = useState(null);\n\n  useEffect(() => {\n    if (router.isReady) {\n      setSignal(router.query.signal || null);\n    }\n  }, [router.isReady, router.query.signal]);\n\n  // -------------------- Handlers for PN and SN dropdowns\n\n  // PN: when a user selects an existing PN value.\n  const handlePnSelect = (e) => {\n    const selected = e.target.value;\n    setItems((prev) => {\n      let updatedPn = Array.isArray(prev.pn) ? [...prev.pn] : [];\n      updatedPn[0] = selected;\n      return { ...prev, pn: updatedPn };\n    });\n  };\n\n  const handlePnChange = (index, value) => {\n    setItems((prev) => {\n      const newPn = [...prev.pn];\n      newPn[index] = value;\n      return { ...prev, pn: newPn };\n    });\n  };\n\n  const addPn = () => {\n    if (newPn.trim() !== \"\") {\n      setItems((prev) => ({\n        ...prev,\n        pn: [...prev.pn, newPn.trim()],\n      }));\n    }\n    setNewPn(\"\");\n    setAddingNewPn(false);\n  };\n\n  // SN: when a user selects an existing SN value.\n  const handleSnSelect = (e) => {\n    const selected = e.target.value;\n    setItems((prev) => {\n      let updatedSn = Array.isArray(prev.sn) ? [...prev.sn] : [];\n      updatedSn[0] = selected;\n      return { ...prev, sn: updatedSn };\n    });\n  };\n\n  const handleSnChange = (index, value) => {\n    setItems((prev) => {\n      const newSn = [...prev.sn];\n      newSn[index] = value;\n      return { ...prev, sn: newSn };\n    });\n  };\n\n  const addSn = () => {\n    if (newSn.trim() !== \"\") {\n      setItems((prev) => ({\n        ...prev,\n        sn: [...prev.sn, newSn.trim()],\n      }));\n    }\n    setNewSn(\"\");\n    setAddingNewSn(false);\n  };\n\n  // -------------------- Photo Browse Handlers\n  const handleBrowsePhotos = () => {\n    if (browseInputRef.current) {\n      browseInputRef.current.click();\n    }\n  };\n\n  const handleFilesSelected = (e) => {\n    const files = e.target.files;\n    if (files.length) {\n      const newPhotos = [];\n      for (let i = 0; i < files.length; i++) {\n        newPhotos.push({\n          file: files[i],\n          url: URL.createObjectURL(files[i]),\n        });\n      }\n      setPhotos((prevPhotos) => [...prevPhotos, ...newPhotos]);\n    }\n    e.target.value = \"\";\n  };\n\n  // -------------------- Photo Capture Handlers remain as in your index.js\n  const handleCapture = (err, result) => {\n    if (result) {\n      setCapturedPhoto(result);\n    }\n  };\n\n  const capturePhoto = () => {\n    const video = document.querySelector(\"video\");\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    const context = canvas.getContext(\"2d\");\n    context.drawImage(video, 0, 0, canvas.width, canvas.height);\n    canvas.toBlob((blob) => {\n      setCapturedPhoto(blob);\n    }, \"image/png\");\n  };\n\n  const savePhoto = () => {\n    setPhotos((prevPhotos) => [\n      ...prevPhotos,\n      { file: capturedPhoto, url: URL.createObjectURL(capturedPhoto) },\n    ]);\n    setCapturedPhoto(null);\n    setShowCameraModal(false);\n  };\n\n  const removePhoto = (index) => {\n    setPhotos(photos.filter((_, i) => i !== index));\n  };\n\n  // -------------------- Modal Handlers\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n  const handleCloseErr = () => setShowErr(false);\n  const handleShowErr = () => setShowErr(true);\n  const handleCloseSaveModal = () => setShowSaveModal(false);\n  const handleShowSaveModal = () => setShowSaveModal(true);\n  const handleCloseDescModal = () => setShowDescModal(false);\n  const handleShowDescModal = () => setShowDescModal(true);\n  const handleCloseWoModal = () => setShowWoModal(false);\n  const handleShowWoModal = () => setShowWoModal(true);\n  const handleCloseClientModal = () => setShowClientModal(false);\n  const handleShowClientModal = () => setShowClientModal(true);\n  const handleCloseMachineModal = () => setShowMachineModal(false);\n  const handleShowMachineModal = () => {\n    setShowMachineModal(true);\n    setShowClientModal(false);\n  };\n  const handleCloseParentModal = () => setShowParentModal(false);\n  const handleShowParentModal = () => setShowParentModal(true);\n\n  // -------------------- Work Orders / Descriptions Handlers (unchanged)\n  const addDescription = () => {\n    setDescriptions([...descriptions, { description: \"\", date: \"\" }]);\n  };\n\n  const removeDescription = (index) => {\n    setDescriptions(descriptions.filter((_, i) => i !== index));\n  };\n\n  const handleDescriptionChange = (index, field, value) => {\n    const newDescriptions = descriptions.map((desc, i) =>\n      i === index ? { ...desc, [field]: value } : desc\n    );\n    setDescriptions(newDescriptions);\n  };\n\n  const addWorkOrder = () => {\n    setWorkOrders([...workOrders, { workOrder: \"\", date: \"\" }]);\n  };\n\n  const removeWorkOrder = (index) => {\n    setWorkOrders(workOrders.filter((_, i) => i !== index));\n  };\n\n  const handleWorkOrderChange = (index, field, value) => {\n    const newWorkOrders = workOrders.map((wo, i) =>\n      i === index ? { ...wo, [field]: value } : wo\n    );\n    setWorkOrders(newWorkOrders);\n  };\n\n  const listDescriptions = () => {\n    setShowDescModal(true);\n  };\n\n  const selectDescription = (index) => {\n    setSelectedDesc(index);\n    setShowDescModal(false);\n  };\n\n  // -------------------- Machine Selection (unchanged)\n  const handleClientInfo = async (clientId) => {\n    // Clear any previously selected machine/local loc for the branch\n    if (machinePick) {\n      setSelectedMachine(null);\n      setShowLocalLocFrom(false);\n    } else {\n      setSelectedCurrentMachine(null);\n      setShowLocalLocCurrent(false);\n    }\n\n    const db = firebase.firestore();\n    const clientDoc = await db.collection(\"Client\").doc(clientId).get();\n    if (clientDoc.exists) {\n      const clientData = clientDoc.data();\n      if (machinePick) {\n        setSelectedClientFrom({ id: clientDoc.id, ...clientData });\n      } else {\n        setSelectedClientCurrent({ id: clientDoc.id, ...clientData });\n      }\n      if (clientData.name === \"SoCalWarehouse\") {\n        if (machinePick) setShowLocalLocFrom(true);\n        else setShowLocalLocCurrent(true);\n      }\n      // Fetch machines for this client:\n      const machinePromises = clientData.machines.map((machineRef) =>\n        machineRef.get()\n      );\n      const machineDocs = await Promise.all(machinePromises);\n      const machines = machineDocs.map((machineDoc) => ({\n        id: machineDoc.id,\n        ...machineDoc.data(),\n      }));\n      setMachineOptions(machines);\n      handleCloseClientModal();\n    }\n  };\n\n  const fetchMachine = async (machineId) => {\n    const db = firebase.firestore();\n    const doc = await db.collection(\"Machine\").doc(machineId).get();\n    if (doc.exists) {\n      const machineData = doc.data();\n      setTheMachine(machineData);\n\n      // Ensure OEM, Modality, and Model update properly only if necessary\n      if (!oem || oem === \"N/A\")\n        setOem(machineData.oem || machineData.OEM || \"\");\n      if (!modality || modality === \"N/A\")\n        setModality(machineData.modality || machineData.Modality || \"\");\n      if (!model || model === \"N/A\")\n        setModel(machineData.model || machineData.Model || \"\");\n\n      // Set machine frequency count\n      const machinesSnapshot = await db\n        .collection(\"Machine\")\n        .where(\"Model\", \"==\", machineData.Model || machineData.model)\n        .get();\n      setMachineFrequency(machinesSnapshot.size);\n    } else {\n      console.error(\"Machine not found\");\n    }\n  };\n\n  // -------------------- Frequency/Usage (unchanged)\n  const calculateItemFrequencyAndUsage = async (pn) => {\n    const db = firebase.firestore();\n    const currentDate = new Date();\n    const oneYearAgo = new Date();\n    oneYearAgo.setFullYear(currentDate.getFullYear() - 1);\n    const itemsSnapshot = await db\n      .collection(\"Test\")\n      .where(\"pn\", \"==\", pn)\n      .get();\n    setFreqItem(itemsSnapshot.size);\n    let usagePastYear = 0;\n    itemsSnapshot.forEach((doc) => {\n      const itemData = doc.data();\n      itemData.workOrders.forEach((workOrder) => {\n        const workOrderDate = new Date(workOrder.date);\n        if (workOrderDate >= oneYearAgo && workOrderDate <= currentDate) {\n          usagePastYear++;\n        }\n      });\n    });\n    setUsagePastYear(usagePastYear);\n  };\n\n  // -------------------- Photo Upload (unchanged)\n  const uploadPhotos = async (docID) => {\n    const storageRef = firebase.storage().ref();\n    for (let i = 0; i < photos.length; i++) {\n      if (photos[i].file) {\n        const photoRef = storageRef.child(\n          `Parts/${docID}/${docID}${i === 0 ? \".jpg\" : `.${i + 1}.jpg`}`\n        );\n        const metadata = { contentType: \"image/png\" };\n        await photoRef.put(photos[i].file, metadata);\n        const url = await photoRef.getDownloadURL();\n        photos[i].url = url;\n      }\n    }\n  };\n\n  // -------------------- Submission Handler\n  // For NewItem, only require Name and Description.\n  async function handleSubmit(event) {\n    event.preventDefault();\n    if (!isReadyForActions) {\n      handleShow();\n    } else {\n      safeSetLoading(true); // start loading before async work\n      try {\n        const docId = await toSend();\n        if (!docId) {\n          setErr(\"Save failed. Please try again.\");\n          setShowErr(true);\n        }\n      } catch (error) {\n        console.error(error);\n        setErr(error?.message || \"Save failed.\");\n        setShowErr(true);\n      } finally {\n        safeSetLoading(false); // end loading after async work completes\n      }\n    }\n  }\n\n  async function toSend(redirect = true, options = {}) {\n    const { id } = router.query;\n    const db = firebase.firestore();\n    const { forceNew = false } = options;\n    const existingId = forceNew ? null : (savedDocId || id || null);\n\n    // Get the current authenticated user\n    const currentUser = firebase.auth().currentUser;\n    const userEmail = currentUser ? currentUser.email : \"unknown\";\n\n    // Always use the current state values for OEM, modality, and model.\n    const machineData = {\n      ...(TheMachine || {}),\n      oem: oem,\n      modality: modality,\n      model: model,\n    };\n\n    const formattedItems = { ...items, descriptions, workOrders };\n    // Remove any unused fields.\n    formattedItems.status = items.status || \"\";\n    formattedItems.nameLower = (items.name || \"\").toLowerCase();\n    formattedItems.nameTokens = buildNameTokens(items.name);\n    formattedItems.DOM = DOM; // Date of Manufacture\n    const fromDetails = buildLocalLocObject(newLocalFrom);\n    const currentDetails = buildLocalLocObject(newLocalCurrent);\n\n    if (Object.keys(fromDetails).length) {\n      formattedItems.newLocalFrom = fromDetails;\n      formattedItems.localLocFrom = formatLoc(newLocalFrom) || \"\";\n    } else {\n      formattedItems.localLocFrom = \"\";\n      formattedItems.newLocalFrom = {};\n    }\n\n    if (Object.keys(currentDetails).length) {\n      formattedItems.newLocalCurrent = currentDetails;\n      formattedItems.localLocCurrent = formatLoc(newLocalCurrent) || \"\";\n    } else {\n      formattedItems.localLocCurrent = \"\";\n      formattedItems.newLocalCurrent = {};\n    }\n    formattedItems.date = items.date || \"\";\n    formattedItems.arrival_date = items.arrival_date || \"\"; // NEW: Arrival Date\n    formattedItems.poNumber = items.poNumber || \"\";\n    formattedItems.trackingNumber = items.trackingNumber || \"\";\n    formattedItems.TheMachine = machineData || {};\n    formattedItems.addedToWebsite = addToWebsite;\n    formattedItems.visible = items.visible;\n\n    // Add the current user's email under the \"user\" field\n    formattedItems.user = userEmail;\n    formattedItems.lastEdited = userEmail;\n    // Clean pn and sn arrays to replace undefined values with an empty string.\n    formattedItems.pn = (items.pn || []).map((value) =>\n      value === undefined ? \"\" : value\n    );\n    formattedItems.sn = (items.sn || []).map((value) =>\n      value === undefined ? \"\" : value\n    );\n\n    // Set machine references for each branch.\n    if (selectedMachine && selectedMachine.id) {\n      formattedItems.MachineFrom = db\n        .collection(\"Machine\")\n        .doc(selectedMachine.id);\n    }\n    if (selectedCurrentMachine && selectedCurrentMachine.id) {\n      formattedItems.MachineCurrent = db\n        .collection(\"Machine\")\n        .doc(selectedCurrentMachine.id);\n    }\n\n    // ***** NEW: Set client references for each branch *****\n    if (selectedClientFrom && selectedClientFrom.id) {\n      formattedItems.ClientFrom = db\n        .collection(\"Client\")\n        .doc(selectedClientFrom.id);\n    }\n    if (selectedClientCurrent && selectedClientCurrent.id) {\n      formattedItems.ClientCurrent = db\n        .collection(\"Client\")\n        .doc(selectedClientCurrent.id);\n    }\n    // ******************************************************\n\n    if (selectedParent && selectedParent.id) {\n      formattedItems.Parent = db.collection(\"Test\").doc(selectedParent.id);\n    }\n\n    // Only add dateCreated if this is a new document\n    if (!existingId) {\n      formattedItems.dateCreated = new Date().toISOString().split(\"T\")[0]; // \"YYYY-MM-DD\"\n    }\n\n    // --- LOCAL SN LOGIC ---\n    let docId = existingId;\n\n    const queueAssociationUpdates = (targetDocId) => {\n      const updates = [];\n      if (selectedMachine && selectedMachine.id) {\n        updates.push(\n          db\n            .collection(\"Machine\")\n            .doc(selectedMachine.id)\n            .update({\n              associatedParts: firebase.firestore.FieldValue.arrayUnion(\n                db.collection(\"Test\").doc(targetDocId)\n              ),\n            })\n        );\n      }\n      if (selectedCurrentMachine && selectedCurrentMachine.id) {\n        updates.push(\n          db\n            .collection(\"Machine\")\n            .doc(selectedCurrentMachine.id)\n            .update({\n              associatedParts: firebase.firestore.FieldValue.arrayUnion(\n                db.collection(\"Test\").doc(targetDocId)\n              ),\n            })\n        );\n      }\n      if (updates.length) {\n        Promise.allSettled(updates).then((results) => {\n          results.forEach((result) => {\n            if (result.status === \"rejected\") {\n              console.error(\"Error updating associatedParts:\", result.reason);\n            }\n          });\n        });\n      }\n    };\n\n    const queuePhotoUpload = (targetDocId) => {\n      const hasNewPhotos = photos.some((photo) => photo && photo.file);\n      if (!hasNewPhotos) return;\n      uploadPhotos(targetDocId).catch((error) => {\n        console.error(\"Error uploading photos:\", error);\n      });\n    };\n\n    try {\n      if (docId) {\n        // Check if a localSN is provided and if it differs from the current docId.\n        const newDocId =\n          items.localSN && items.localSN.trim() !== \"\"\n            ? items.localSN.trim()\n            : docId;\n        if (docId !== newDocId) {\n          // Migrate: Create a new document with the newDocId.\n          await withTimeout(\n            db.collection(\"Test\").doc(newDocId).set(formattedItems),\n            45000,\n            \"Firestore save\"\n          );\n\n          queueAssociationUpdates(newDocId);\n          queuePhotoUpload(newDocId);\n\n          // Delete the old document.\n          try {\n            await withTimeout(\n              db.collection(\"Test\").doc(docId).delete(),\n              20000,\n              \"Delete old item\"\n            );\n          } catch (deleteError) {\n            console.error(\"Error deleting old item:\", deleteError);\n          }\n\n          // Set docId to the new document ID.\n          docId = newDocId;\n        } else {\n          // Deep-clean the formattedItems to remove any undefined nested values.\n          const cleanFormattedItems = shallowClean(formattedItems);\n          await withTimeout(\n            db.collection(\"Test\").doc(docId).update(cleanFormattedItems),\n            45000,\n            \"Firestore save\"\n          );\n\n          queueAssociationUpdates(docId);\n          queuePhotoUpload(docId);\n        }\n      } else {\n        // For a new item, if localSN is provided, use it; otherwise, generate a custom ID.\n        docId =\n          items.localSN && items.localSN.trim() !== \"\"\n            ? items.localSN.trim()\n            : generateCustomID();\n        await withTimeout(\n          db.collection(\"Test\").doc(docId).set(formattedItems),\n          45000,\n          \"Firestore save\"\n        );\n\n        queueAssociationUpdates(docId);\n        queuePhotoUpload(docId);\n      }\n\n      console.log(\"Item saved!\");\n\n      if (!forceNew) {\n        setSavedDocId(docId);\n      }\n\n      // Redirect to the new URL using the new document id.\n      if (redirect) {\n        router.push(`/NewSearch/item/${docId}`);\n      } else {\n        // Optionally, show a save confirmation modal.\n        handleShowSaveModal();\n      }\n      return docId;\n    } catch (error) {\n      console.error(\"Error saving data:\", error);\n      return null;\n    }\n  }\n\n  const isReadyForActions =\n    (items.name || \"\").trim() !== \"\" &&\n    (descriptions[selectedDesc]?.description || \"\").trim() !== \"\";\n\n  const ensureSaved = async () => {\n    if (!isReadyForActions) {\n      handleShow();\n      return null;\n    }\n    if (savedDocId) return savedDocId;\n    const docId = await toSend(false);\n    if (!docId) {\n      setErr(\"Failed to save item before action.\");\n      setShowErr(true);\n    }\n    return docId;\n  };\n\n  // -------------------- Info Modal Handlers (unchanged)\n  const [showInfoModal, setShowInfoModal] = useState(false);\n  const [itemName, setItemName] = useState(\"\");\n  const handleShowInfoModal = async () => {\n    const db = firebase.firestore();\n    try {\n      const docId = savedDocId || router.query.id;\n      if (!docId) {\n        setErr(\"Save the item before viewing info.\");\n        setShowErr(true);\n        return;\n      }\n      const doc = await db.collection(\"Test\").doc(docId).get();\n      if (doc.exists) {\n        const data = doc.data();\n        setItemName(data.name || \"N/A\");\n        setShowInfoModal(true);\n      } else {\n        console.error(\"Item not found\");\n      }\n    } catch (error) {\n      console.error(\"Error fetching item info:\", error);\n    }\n  };\n  const handleCloseInfoModal = () => setShowInfoModal(false);\n\n  const handleCloseCameraModal = () => {\n    setShowCameraModal(false);\n    setCapturedPhoto(null);\n  };\n\n  const handleChange = (field) => (event) => {\n    const value = event.target ? event.target.value : event.value;\n    setItems((prevItems) => ({ ...prevItems, [field]: value }));\n  };\n\n  const mostRecentWorkOrder =\n    workOrders && workOrders.length > 0\n      ? workOrders.reduce((latest, current) => {\n          const latestDate = new Date(latest.date);\n          const currentDate = new Date(current.date);\n          return currentDate > latestDate ? current : latest;\n        }, workOrders[0])\n      : {};\n\n  const handleShowCameraModal = () => {\n    setShowCameraModal(true);\n  };\n\n  const generateCustomID = () => {\n    const randomNum = Math.floor(10000 + Math.random() * 90000);\n    return `AIS${randomNum}`;\n  };\n\n  const handlePrint = async () => {\n    const docId = await ensureSaved();\n    if (!docId) return;\n\n    const payload = {\n      name: items.name,\n      pn: items.pn,\n      sn: items.sn,\n      wo: workOrders && workOrders.length > 0 ? workOrders[0].workOrder : \"\",\n      status: items.status,\n      local_sn: docId,\n      descriptions: descriptions,\n      date: items.date || new Date().toISOString().split(\"T\")[0],\n      DOM: DOM,\n      oem: oem,\n      modality: modality,\n      model: model,\n      poNumber: items.poNumber,\n      arrival_date: items.arrival_date,\n      trackingNumber: items.trackingNumber,\n    };\n\n    console.log(\"Payload for printing:\", payload);\n    try {\n      const response = await fetch(\n        \"https://9d70-174-76-22-138.ngrok-free.app/print-label\",\n        {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(payload),\n        }\n      );\n      const result = await response.json();\n      console.log(\"Print result:\", result);\n    } catch (error) {\n      console.error(\"Error printing label:\", error);\n    }\n  };\n\n  const handleSendToInflow = async () => {\n    try {\n      const docId = await ensureSaved();\n      if (!docId) return;\n\n      const name = (items.name || \"\").trim();\n      if (!name) {\n        alert(\"Item needs a name before sending to inFlow.\");\n        return;\n      }\n\n      const description = (descriptions[selectedDesc]?.description || \"\").trim();\n      const imageUrls = photos.map((p) => p.url).filter(Boolean);\n      const sku = docId.toString();\n\n      const arrivalISO = items.arrival_date\n        ? new Date(items.arrival_date).toISOString().slice(0, 10)\n        : \"\";\n\n      const pnStr = Array.isArray(items.pn)\n        ? items.pn.filter(Boolean).join(\", \")\n        : items.pn || \"\";\n      const snStr = Array.isArray(items.sn)\n        ? items.sn.filter(Boolean).join(\", \")\n        : items.sn || \"\";\n\n      const mostRecentWO =\n        workOrders?.length\n          ? workOrders.reduce((latest, cur) =>\n              new Date(cur.date) > new Date(latest.date) ? cur : latest\n            )\n          : { workOrder: \"\", date: \"\" };\n\n      const customFields = {\n        custom1: (oem || \"\").trim(),\n        custom2: (modality || \"\").trim(),\n        custom3: (model || \"\").trim(),\n        custom4: (description || \"\").trim(),\n        custom5: (mostRecentWO.workOrder || \"\").trim(),\n        custom6: (selectedClientFrom?.name || \"\").trim(),\n        custom7: pnStr,\n        custom8: snStr,\n        custom9: arrivalISO,\n        custom10: (selectedClientCurrent?.name || \"\").trim(),\n      };\n\n      const created = await InflowAPI.upsertProduct({\n        name,\n        description,\n        sku,\n        imageUrls,\n        customFields,\n      });\n\n      alert(\n        `Sent to inFlow successfully. ID: ${\n          created?.productId || created?.id || \"(unknown)\"\n        }`\n      );\n    } catch (err) {\n      console.error(err);\n      alert(\"Error sending to inFlow: \" + err.message);\n    }\n  };\n\n  const handleBluefolderButton = async () => {\n    const docId = await ensureSaved();\n    if (!docId) return;\n\n    const currentWorkOrder =\n      workOrders && workOrders.length > 0 ? workOrders[0].workOrder : \"\";\n    if (!currentWorkOrder) {\n      alert(\"Please fill out the work order field before adding to BlueFolder.\");\n      return;\n    }\n\n    const payload = {\n      name: items.name,\n      pn: items.pn[0] || \"\",\n      sn: items.sn[0] || \"\",\n      status: items.status,\n      description: descriptions[selectedDesc]?.description || \"\",\n      workOrder: currentWorkOrder,\n      localsn: docId,\n    };\n\n    try {\n      const response = await fetch(\n        \"https://9d70-174-76-22-138.ngrok-free.app/bluefolder\",\n        {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(payload),\n        }\n      );\n      const result = await response.json();\n      alert(\"BlueFolder service item added successfully!\");\n      console.log(\"BlueFolder result:\", result);\n    } catch (error) {\n      console.error(\"BlueFolder error:\", error);\n      alert(\"Error adding data to BlueFolder.\");\n    }\n  };\n\n  const handleAddToSlack = async (which = \"shipping\") => {\n    try {\n      const docId = await ensureSaved();\n      if (!docId) return;\n\n      const safeName = (items?.name || docId || \"Untitled\").trim();\n      const title = `${safeName}${docId ? ` (${docId})` : \"\"}`;\n\n      const pn0 = Array.isArray(items?.pn) ? items.pn[0] : items?.pn;\n      const sn0 = Array.isArray(items?.sn) ? items.sn[0] : items?.sn;\n      const pn_sn = [pn0 && `PN: ${pn0}`, sn0 && `SN: ${sn0}`]\n        .filter(Boolean)\n        .join(\"  \");\n\n      const mostRecentWO =\n        workOrders && workOrders.length\n          ? [...workOrders].sort(\n              (a, b) => new Date(b?.date || 0) - new Date(a?.date || 0)\n            )[0]?.workOrder\n          : \"\";\n\n      const description =\n        selectedDesc != null && descriptions?.[selectedDesc]\n          ? descriptions[selectedDesc].description || \"\"\n          : items?.description || \"\";\n\n      const tracking = items?.trackingNumber ?? items?.tracking ?? \"\";\n      const local_sn = docId || items?.localSN || \"\";\n\n      const photoUrls = Array.isArray(photos)\n        ? photos.map((p) => p?.url).filter(Boolean)\n        : [];\n\n      const resp = await fetch(\"/api/slack/add-to-list\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          listKey: which,\n          title,\n          pn_sn,\n          work_order: mostRecentWO || \"\",\n          local_sn,\n          tracking,\n          description: (description || \"\").trim(),\n          photoUrls,\n        }),\n      });\n\n      const json = await resp.json();\n      console.log(\"[SLACK][handleAddToSlack] response:\", json);\n      if (json?.debug?.steps) console.table(json.debug.steps);\n      if (json?.debug?.photos) console.table(json.debug.photos);\n\n      if (!resp.ok || !json?.ok) {\n        setErr(`Slack add failed: ${json?.error || \"unknown error\"}`);\n        setShowErr(true);\n        return;\n      }\n\n      alert(\n        `Added to Slack ${\n          which === \"shipping\"\n            ? \"Shipping\"\n            : which === \"receiving\"\n            ? \"Receiving\"\n            : \"Tasks\"\n        } list.`\n      );\n    } catch (e) {\n      console.error(e);\n      setErr(\"Error adding to Slack\");\n      setShowErr(true);\n    }\n  };\n\n  const handleToggleAddToWebsite = async () => {\n    const docId = await ensureSaved();\n    if (!docId) return;\n\n    const next = !addToWebsite;\n    setAddToWebsite(next);\n    try {\n      await firebase\n        .firestore()\n        .collection(\"Test\")\n        .doc(docId)\n        .update({ addedToWebsite: next });\n    } catch (error) {\n      console.error(\"Error updating addedToWebsite:\", error);\n    }\n  };\n\n  const handleAddNewPn = () => {\n    if (newPn.trim() !== \"\") {\n      setItems((prev) => ({\n        ...prev,\n        pn: [...prev.pn, newPn.trim()],\n      }));\n    }\n    setNewPn(\"\");\n    setAddingNewPn(false);\n  };\n\n  const handleAddNewSn = () => {\n    if (newSn.trim() !== \"\") {\n      setItems((prev) => ({\n        ...prev,\n        sn: [...prev.sn, newSn.trim()],\n      }));\n    }\n    setNewSn(\"\");\n    setAddingNewSn(false);\n  };\n\n  const [showLocalLocFrom, setShowLocalLocFrom] = useState(false);\n  const [showLocalLocCurrent, setShowLocalLocCurrent] = useState(false);\n  const [showNewLocalModalFrom, setShowNewLocalModalFrom] = useState(false);\n  const [showNewLocalModalCurrent, setShowNewLocalModalCurrent] =\n    useState(false);\n\n  async function handleClone(event) {\n    event.preventDefault();\n    if (!isReadyForActions) {\n      handleShow(); // your existing error modal\n      return;\n    }\n    safeSetLoading(true);\n    try {\n      // save but don’t redirect\n      const docId = await toSend(false, { forceNew: true });\n      if (!docId) {\n        setErr(\"Save failed. Please try again.\");\n        setShowErr(true);\n      } else {\n        // Prepare for the next clone without overwriting the last one.\n        setSavedDocId(null);\n        setItems((prev) => ({ ...prev, localSN: \"\" }));\n      }\n    } catch (err) {\n      console.error(err);\n      setErr(err?.message || \"Save failed.\");\n      setShowErr(true);\n    } finally {\n      safeSetLoading(false);\n    }\n  }\n\n  const condition = (name) => {\n    return name && name.toLowerCase() === \"interior socal\";\n  };\n\n  const handleSetSelectedMachine = (machine) => {\n    const isSocalInterior = machine.name?.toLowerCase() === \"interior socal\";\n    if (machinePick) {\n      setSelectedMachine({ id: machine.id, name: machine.name });\n      setShowLocalLocFrom(\n        isSocalInterior ||\n          selectedClientFrom?.name?.toLowerCase() === \"socalwarehouse\"\n      );\n    } else {\n      setSelectedCurrentMachine({ id: machine.id, name: machine.name });\n      setShowLocalLocCurrent(\n        isSocalInterior ||\n          selectedClientCurrent?.name?.toLowerCase() === \"socalwarehouse\"\n      );\n    }\n    fetchMachine(machine.id);\n    setShowMachineModal(false);\n  };\n\n  const [currentPnIndex, setCurrentPnIndex] = useState(0);\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [currentSnIndex, setCurrentSnIndex] = useState(0);\n  const [showSnDropdown, setShowSnDropdown] = useState(false);\n\n  const handleAddNewClient = () => {\n    // Generate a random client number as part of the URL.\n    const randomNum = Math.floor(10000 + Math.random() * 90000);\n    // When pushing, include a query parameter (from=item) and the current item id if available.\n    router.push(`/NewSearch/client/AIS${randomNum}/addClient?from=addItem`);\n  };\n\n  const [showMachineSelect, setShowMachineSelect] = useState(false);\n\n  const [selectedClientFrom, setSelectedClientFrom] = useState(null);\n  const [selectedClientCurrent, setSelectedClientCurrent] = useState(null);\n\n  useEffect(() => {\n    setShowLocalLocFrom(\n      selectedClientFrom?.name?.toLowerCase() === \"socalwarehouse\"\n    );\n  }, [selectedClientFrom]);\n\n  useEffect(() => {\n    setShowLocalLocCurrent(\n      selectedClientCurrent?.name?.toLowerCase() === \"socalwarehouse\"\n    );\n  }, [selectedClientCurrent]);\n\n  return (\n    <LoggedIn>\n      {/* Error Modal */}\n      <MachineSelectionModal\n        show={machineSelectionModal}\n        handleClose={() => setMachineSelectionModal(false)}\n        setMachine={handleSetSelectedMachine}\n        machineOptions={machineOptions} // if your modal needs the list of machines\n      />\n      <Modal show={show} onHide={handleClose}>\n        <Modal.Header closeButton>\n          <Modal.Title>Error</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>Missing required field: Name and Description</Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"primary\" onClick={handleClose}>\n            Ok\n          </Button>\n        </Modal.Footer>\n      </Modal>\n      {/* Other Modals: showErr, showSaveModal, Descriptions, Work Orders, etc. */}\n      <Modal show={showErr} onHide={handleCloseErr}>\n        <Modal.Header closeButton>\n          <Modal.Title>Error</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>{Err}</Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"primary\" onClick={handleCloseErr}>\n            Ok\n          </Button>\n        </Modal.Footer>\n      </Modal>\n      <Modal show={showSaveModal} onHide={handleCloseSaveModal}>\n        <Modal.Header closeButton>\n          <Modal.Title>Save Confirmation</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>Data has been saved successfully.</Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"primary\" onClick={handleCloseSaveModal}>\n            Ok\n          </Button>\n        </Modal.Footer>\n      </Modal>\n      <Modal show={showDescModal} onHide={handleCloseDescModal}>\n        <Modal.Header closeButton>\n          <Modal.Title>Descriptions</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Button variant=\"primary\" className=\"mb-3\" onClick={addDescription}>\n            Add Description\n          </Button>\n          {descriptions.map((desc, index) => (\n            <Row key={index} className=\"mb-3\">\n              <Button\n                variant=\"outline-secondary\"\n                className=\"w-100\"\n                onClick={() => selectDescription(index)}\n                style={{ cursor: \"pointer\" }}\n              >\n                <div className=\"d-flex justify-content-between\">\n                  <span>{desc.description || \"Description\"}</span>\n                  <span\n                    style={{\n                      borderLeft: \"1px solid #ccc\",\n                      paddingLeft: \"10px\",\n                    }}\n                  >\n                    {desc.date || \"Date\"}\n                  </span>\n                </div>\n              </Button>\n            </Row>\n          ))}\n          <Button variant=\"primary\" onClick={handleCloseDescModal}>\n            OK\n          </Button>\n        </Modal.Body>\n      </Modal>\n      <Modal show={showWoModal} onHide={handleCloseWoModal}>\n        <Modal.Header closeButton>\n          <Modal.Title>Work Orders</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Button\n            variant=\"primary\"\n            className=\"mb-3\"\n            onClick={addWorkOrder}\n            style={{ marginBottom: \"1rem\" }}\n          >\n            Add Work Order\n          </Button>\n          {workOrders.map((wo, index) => (\n            <Row key={index} className=\"mb-3\">\n              <Col>\n                <Form.Control\n                  type=\"text\"\n                  placeholder=\"Work Order\"\n                  value={wo.workOrder}\n                  onChange={(e) =>\n                    handleWorkOrderChange(index, \"workOrder\", e.target.value)\n                  }\n                  style={{ marginBottom: \"0.5rem\" }}\n                />\n              </Col>\n              <Col>\n                <Form.Control\n                  type=\"date\"\n                  placeholder=\"Date\"\n                  value={wo.date}\n                  onChange={(e) =>\n                    handleWorkOrderChange(index, \"date\", e.target.value)\n                  }\n                />\n              </Col>\n              <Col>\n                <Button variant=\"danger\" onClick={() => removeWorkOrder(index)}>\n                  Remove\n                </Button>\n              </Col>\n            </Row>\n          ))}\n          <Button variant=\"primary\" onClick={handleCloseWoModal}>\n            OK\n          </Button>\n        </Modal.Body>\n      </Modal>\n      {/* Machine Selection Modal */}\n      <ClientInfoModal\n        show={showMachineModal}\n        handleClose={handleCloseMachineModal}\n        selectedClient={selectedClient}\n        machineOptions={machineOptions}\n        setSelectedMachine={handleSetSelectedMachine}\n      />\n      <Modal show={showClientModal} onHide={handleCloseClientModal}>\n        <Modal.Header closeButton>\n          <Modal.Title>Select Client</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <FormControl\n            type=\"text\"\n            placeholder=\"Search by name\"\n            className=\"mb-3\"\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n          />\n          <ClientTable\n            clients={clients.filter((client) =>\n              client.name.toLowerCase().includes(search.toLowerCase())\n            )}\n            onSelectClient={handleClientInfo}\n            onInfoClick={handleClientInfo}\n            clearSelection={() => handleClientInfo(null)}\n            onAddClient={handleAddNewClient} // new prop\n          />\n        </Modal.Body>\n      </Modal>\n\n      <ParentModal\n        show={showParentModal}\n        handleClose={handleCloseParentModal}\n        setSelectedParent={setSelectedParent}\n      />\n      <MachineSelectionModal\n        show={machineSelectionModal}\n        handleClose={() => setMachineSelectionModal(false)}\n        setMachine={setTheMachine}\n      />\n      {/* Camera Modal */}\n      <Modal show={showCameraModal} onHide={handleCloseCameraModal}>\n        <Modal.Header closeButton>\n          <Modal.Title>Take a Photo</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <div className=\"camera\">\n            {!capturedPhoto ? (\n              <BarcodeScannerComponent\n                width=\"100%\"\n                height={300}\n                onUpdate={handleCapture}\n                facingMode={cameraFacing}\n              />\n            ) : (\n              <div className=\"photo-preview\">\n                <img\n                  src={URL.createObjectURL(capturedPhoto)}\n                  alt=\"captured\"\n                  style={{ width: \"100%\" }}\n                />\n              </div>\n            )}\n          </div>\n        </Modal.Body>\n        <Modal.Footer>\n          {!capturedPhoto ? (\n            <>\n              <Button\n                onClick={capturePhoto}\n                style={{\n                  borderRadius: \"50%\",\n                  width: \"60px\",\n                  height: \"60px\",\n                  position: \"absolute\",\n                  left: \"50%\",\n                  transform: \"translateX(-50%)\",\n                  bottom: \"10px\",\n                }}\n              >\n                📷\n              </Button>\n              <Button\n                onClick={() =>\n                  setCameraFacing((prev) =>\n                    prev === \"environment\" ? \"user\" : \"environment\"\n                  )\n                }\n              >\n                Flip Camera\n              </Button>\n              <Button variant=\"secondary\" onClick={handleCloseCameraModal}>\n                Cancel\n              </Button>\n            </>\n          ) : (\n            <>\n              <Button\n                variant=\"secondary\"\n                onClick={() => setCapturedPhoto(null)}\n              >\n                Retake\n              </Button>\n              <Button variant=\"primary\" onClick={savePhoto}>\n                OK\n              </Button>\n            </>\n          )}\n        </Modal.Footer>\n      </Modal>\n      {/* Descriptions Modal */}\n      <Modal show={showDescModal} onHide={handleCloseDescModal}>\n        <Modal.Header closeButton>\n          <Modal.Title>Descriptions</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Button variant=\"primary\" className=\"mb-3\" onClick={addDescription}>\n            Add Description\n          </Button>\n          {descriptions.map((desc, index) => (\n            <Row key={index} className=\"mb-3\">\n              <Button\n                variant=\"outline-secondary\"\n                className=\"w-100\"\n                onClick={() => selectDescription(index)}\n                style={{ cursor: \"pointer\" }}\n              >\n                <div className=\"d-flex justify-content-between\">\n                  <span>{desc.description || \"Description\"}</span>\n                  <span\n                    style={{\n                      borderLeft: \"1px solid #ccc\",\n                      paddingLeft: \"10px\",\n                    }}\n                  >\n                    {desc.date || \"Date\"}\n                  </span>\n                </div>\n              </Button>\n            </Row>\n          ))}\n          <Button variant=\"primary\" onClick={handleCloseDescModal}>\n            OK\n          </Button>\n        </Modal.Body>\n      </Modal>\n\n      {/* Info Modal */}\n      <InfoModal\n        show={showInfoModal}\n        handleClose={handleCloseInfoModal}\n        itemName={items.name}\n        dimensions={`${items.length},${items.width},${items.height}`}\n        price={items.price}\n        freqI={freqItem}\n        freqM={machineFrequency}\n        usage={usagePastYear}\n      />\n      {loading && (\n        <div\n          style={{\n            position: \"fixed\",\n            top: 0,\n            left: 0,\n            width: \"100%\",\n            height: \"100%\",\n            backgroundColor: \"rgba(255, 255, 255, 0.7)\",\n            backdropFilter: \"blur(5px)\",\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            zIndex: 9999, // Make sure it's above everything else\n          }}\n        >\n          <Spinner animation=\"border\" variant=\"primary\" role=\"status\">\n            <span className=\"visually-hidden\">Loading...</span>\n          </Spinner>\n        </div>\n      )}\n      {/* Main Form */}\n      <Container fluid className={styles.page}>\n        <div className={styles.shell}>\n          <Card className={styles.card}>\n            <Card.Body className={styles.cardBody}>\n              <div className={styles.header}>\n                <div className={styles.kicker}>New Item</div>\n                <h2 className={styles.title}>Add New Item</h2>\n                <div className={styles.subtitle}>\n                  Capture details, photos, and routing before saving.\n                </div>\n              </div>\n              <Form onSubmit={handleSubmit}>\n                {/* Row for Name and PN */}\n                <Row className=\"mb-3\">\n                  <Col>\n                    <Form.Group controlId=\"name\">\n                      <Form.Label>Name</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        value={items.name}\n                        onChange={handleChange(\"name\")}\n                      />\n                    </Form.Group>\n                  </Col>\n                  <Col>\n                    <Form.Group controlId=\"pn\">\n                      <Form.Label>Product Number</Form.Label>\n                      <div style={{ position: \"relative\" }}>\n                        <InputGroup>\n                          {/* Editable input field displaying the current PN */}\n                          <Form.Control\n                            type=\"text\"\n                            value={items.pn[currentPnIndex] || \"\"}\n                            onChange={(e) =>\n                              handlePnChange(currentPnIndex, e.target.value)\n                            }\n                          />\n                          {/* Arrow button to toggle dropdown */}\n                          <Button\n                            variant=\"outline-secondary\"\n                            onClick={() => setShowDropdown(!showDropdown)}\n                          >\n                            &#9662;\n                          </Button>\n                          {/* Plus button to add a new PN */}\n                          <InputGroup.Text>\n                            <Button\n                              variant=\"outline-secondary\"\n                              onClick={() => setAddingNewPn(true)}\n                            >\n                              +\n                            </Button>\n                          </InputGroup.Text>\n                        </InputGroup>\n                        {/* Dropdown list showing only the current item's PN options */}\n                        {showDropdown && (\n                          <div\n                            style={{\n                              position: \"absolute\",\n                              top: \"100%\",\n                              left: 0,\n                              right: 0,\n                              backgroundColor: \"white\",\n                              border: \"1px solid #ccc\",\n                              zIndex: 1000,\n                              maxHeight: \"150px\",\n                              overflowY: \"auto\",\n                            }}\n                          >\n                            {items.pn.map((pnOption, idx) => (\n                              <div\n                                key={idx}\n                                style={{ padding: \"8px\", cursor: \"pointer\" }}\n                                onClick={() => {\n                                  setCurrentPnIndex(idx);\n                                  setShowDropdown(false);\n                                }}\n                              >\n                                {pnOption}\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                      {/* Input for adding a new PN, if triggered */}\n                      {addingNewPn && (\n                        <Form.Control\n                          type=\"text\"\n                          placeholder=\"Enter new PN\"\n                          value={newPn}\n                          onChange={(e) => setNewPn(e.target.value)}\n                          onBlur={handleAddNewPn}\n                          onKeyDown={(e) => {\n                            if (e.key === \"Enter\") {\n                              handleAddNewPn();\n                            }\n                          }}\n                        />\n                      )}\n                    </Form.Group>\n                  </Col>\n                </Row>\n                {/* Row for SN */}\n                <Row className=\"mb-3\">\n                  <Col>\n                    <Form.Group controlId=\"sn\">\n                      <Form.Label>Serial Number</Form.Label>\n                      <div style={{ position: \"relative\" }}>\n                        <InputGroup>\n                          {/* Inline editable input showing the currently selected SN */}\n                          <Form.Control\n                            type=\"text\"\n                            value={items.sn[currentSnIndex] || \"\"}\n                            onChange={(e) =>\n                              handleSnChange(currentSnIndex, e.target.value)\n                            }\n                          />\n                          {/* Arrow button to toggle SN dropdown */}\n                          <Button\n                            variant=\"outline-secondary\"\n                            onClick={() => setShowSnDropdown(!showSnDropdown)}\n                          >\n                            &#9662;\n                          </Button>\n                          {/* Plus button to add a new SN */}\n                          <InputGroup.Text>\n                            <Button\n                              variant=\"outline-secondary\"\n                              onClick={() => setAddingNewSn(true)}\n                            >\n                              +\n                            </Button>\n                          </InputGroup.Text>\n                        </InputGroup>\n                        {/* Dropdown list for SN options */}\n                        {showSnDropdown && (\n                          <div\n                            style={{\n                              position: \"absolute\",\n                              top: \"100%\",\n                              left: 0,\n                              right: 0,\n                              backgroundColor: \"white\",\n                              border: \"1px solid #ccc\",\n                              zIndex: 1000,\n                              maxHeight: \"150px\",\n                              overflowY: \"auto\",\n                            }}\n                          >\n                            {items.sn.map((snOption, idx) => (\n                              <div\n                                key={idx}\n                                style={{ padding: \"8px\", cursor: \"pointer\" }}\n                                onClick={() => {\n                                  setCurrentSnIndex(idx);\n                                  setShowSnDropdown(false);\n                                }}\n                              >\n                                {snOption}\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                      {/* Input for adding a completely new SN */}\n                      {addingNewSn && (\n                        <Form.Control\n                          type=\"text\"\n                          placeholder=\"Enter new SN\"\n                          value={newSn}\n                          onChange={(e) => setNewSn(e.target.value)}\n                          onBlur={handleAddNewSn}\n                          onKeyDown={(e) => {\n                            if (e.key === \"Enter\") {\n                              handleAddNewSn();\n                            }\n                          }}\n                        />\n                      )}\n                    </Form.Group>\n                  </Col>\n                  <Col>\n                    <Form.Group controlId=\"status\">\n                      <Form.Label>Status</Form.Label>\n                      <Form.Select\n                        value={items.status || \"\"}\n                        onChange={handleChange(\"status\")}\n                      >\n                        <option value=\"\">Select status</option>\n                        <option value=\"Good\">Good</option>\n                        <option value=\"Bad\">Bad</option>\n                        <option value=\"Unknown\">Unknown</option>\n                      </Form.Select>\n                    </Form.Group>\n                  </Col>\n                </Row>\n                {/* Row for Local SN, Arrival Date, Tracking */}\n                <Row className=\"mb-3\">\n                  <Col>\n                    <Form.Group controlId=\"localSN\">\n                      <Form.Label>Local SN</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        placeholder=\"Enter Local SN\"\n                        value={items.localSN || \"\"}\n                        onChange={handleChange(\"localSN\")}\n                      />\n                    </Form.Group>\n                  </Col>\n                  <Col>\n                    <Form.Group controlId=\"arrivalDate\">\n                      <Form.Label>Arrival Date</Form.Label>\n                      <Form.Control\n                        placeholder=\"Enter Arrival Date\"\n                        type=\"date\"\n                        value={items.arrival_date}\n                        onChange={(e) => {\n                          const value = e.target.value;\n                          setItems((prev) => ({\n                            ...prev,\n                            arrival_date: value,\n                          }));\n                        }}\n                      />\n                    </Form.Group>\n                  </Col>\n                  <Col>\n                    <Form.Group controlId=\"trackingNumber\">\n                      <Form.Label>Tracking Number</Form.Label>\n                      <Form.Control\n                        placeholder=\"Tracking Number\"\n                        type=\"text\"\n                        value={items.trackingNumber}\n                        onChange={handleChange(\"trackingNumber\")}\n                      />\n                    </Form.Group>\n                  </Col>\n                </Row>\n                {/* Row for OEM, Modality, Model */}\n                <Row className=\"mb-3\">\n                  <Col>\n                    <Form.Group controlId=\"oem\">\n                      <Form.Label>OEM</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        placeholder=\"OEM\"\n                        value={oem}\n                        onChange={(e) => setOem(e.target.value)}\n                      />\n                    </Form.Group>\n                  </Col>\n                  <Col>\n                    <Form.Group controlId=\"modality\">\n                      <Form.Label>Modality</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        placeholder=\"Modality\"\n                        value={modality}\n                        onChange={(e) => setModality(e.target.value)}\n                      />\n                    </Form.Group>\n                  </Col>\n                  <Col>\n                    <Form.Group controlId=\"model\">\n                      <Form.Label>Model</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        placeholder=\"Model\"\n                        value={model}\n                        onChange={(e) => setModel(e.target.value)}\n                      />\n                    </Form.Group>\n                  </Col>\n                </Row>\n                {/* Work Orders and Descriptions Section */}\n                <div style={{ marginBottom: \"1rem\", marginTop: \"1rem\" }}>\n                  <div className=\"d-flex align-items-center\">\n                    <Button\n                      variant=\"outline-secondary\"\n                      onClick={handleShowWoModal}\n                      className=\"me-2\"\n                    >\n                      Manage Work Orders\n                    </Button>\n                    {workOrders.length > 0 && (\n                      <div className=\"d-flex flex-column align-items-start\">\n                        <Form.Label>Work Order</Form.Label>\n                        <Form.Control\n                          type=\"text\"\n                          placeholder=\"Most Recent Work Order\"\n                          value={mostRecentWorkOrder?.workOrder || \"\"}\n                          onChange={(e) =>\n                            handleWorkOrderChange(\n                              workOrders.indexOf(mostRecentWorkOrder),\n                              \"workOrder\",\n                              e.target.value\n                            )\n                          }\n                          style={{ marginBottom: \"0.5rem\" }}\n                        />\n                        <Form.Label>Date</Form.Label>\n                        <Form.Control\n                          type=\"date\"\n                          placeholder=\"Work Order Date\"\n                          value={mostRecentWorkOrder?.date || \"\"}\n                          onChange={(e) =>\n                            handleWorkOrderChange(\n                              workOrders.indexOf(mostRecentWorkOrder),\n                              \"date\",\n                              e.target.value\n                            )\n                          }\n                          style={{ marginBottom: \"0.5rem\" }}\n                        />\n                      </div>\n                    )}\n                  </div>\n                </div>\n                {/* Description Editing */}\n                <div style={{ marginBottom: \"1rem\" }}>\n                  <Form.Group controlId=\"desc\">\n                    <Button\n                      variant=\"outline-secondary\"\n                      onClick={listDescriptions}\n                      className=\"mb-2 me-2\"\n                    >\n                      List Descriptions\n                    </Button>\n                    <Form.Control\n                      as=\"textarea\"\n                      rows={3}\n                      placeholder=\"Enter description\"\n                      value={descriptions[selectedDesc]?.description || \"\"}\n                      onChange={(e) =>\n                        handleDescriptionChange(\n                          selectedDesc,\n                          \"description\",\n                          e.target.value\n                        )\n                      }\n                      style={{ marginBottom: \"0.5rem\" }}\n                    />\n                    <Form.Control\n                      type=\"date\"\n                      value={descriptions[selectedDesc]?.date || \"\"}\n                      onChange={(e) =>\n                        handleDescriptionChange(\n                          selectedDesc,\n                          \"date\",\n                          e.target.value\n                        )\n                      }\n                      style={{ marginTop: \"0.5rem\", marginBottom: \"0.5rem\" }}\n                    />\n                  </Form.Group>\n                </div>\n                {/* Machine Selection Row with Local Loc Inputs */}\n                <div style={{ marginBottom: \"1rem\" }}>\n                  <Row className=\"mb-3\">\n                    <Col>\n                      <Button\n                        variant=\"outline-secondary\"\n                        onClick={() => {\n                          setMachinePick(true);\n                          handleShowClientModal();\n                        }}\n                        className=\"me-2\"\n                      >\n                        Select From\n                      </Button>\n                      {selectedClientFrom && (\n                        <div\n                          style={{\n                            border: \"1px solid #ccc\",\n                            padding: \"0.75rem\",\n                            borderRadius: \"4px\",\n                            marginBottom: \"1rem\",\n                          }}\n                        >\n                          <p>\n                            <strong>Selected Client (From):</strong>{\" \"}\n                            {selectedClientFrom.name}\n                          </p>\n                          <div style={{ marginTop: \"0.5rem\" }}>\n                            <Button\n                              variant=\"outline-secondary\"\n                              onClick={() => setShowMachineModal(true)}\n                            >\n                              Select Machine for {selectedClientFrom.name}\n                            </Button>\n                            {selectedMachine && (\n                              <>\n                                <p style={{ marginTop: \"0.5rem\" }}>\n                                  <strong>Selected Machine (From):</strong>{\" \"}\n                                  {selectedMachine.name}\n                                </p>\n                                {showLocalLocFrom && (\n                                  <>\n                                    <Button\n                                      variant=\"outline-secondary\"\n                                      onClick={() =>\n                                        setShowNewLocalModalFrom(true)\n                                      }\n                                      className=\"w-100 mb-2\"\n                                    >\n                                      {[\n                                        newLocalFrom.region,\n                                        newLocalFrom.section?.letter +\n                                          newLocalFrom.section?.number,\n                                        newLocalFrom.bin &&\n                                          `B${newLocalFrom.bin}`,\n                                        newLocalFrom.pallet &&\n                                          `P${newLocalFrom.pallet}`,\n                                      ]\n                                        .filter(Boolean)\n                                        .join(\"-\") || \"Set Local Location\"}\n                                    </Button>\n                                    <Modal\n                                      show={showNewLocalModalFrom}\n                                      onHide={() =>\n                                        setShowNewLocalModalFrom(false)\n                                      }\n                                      centered\n                                    >\n                                      <Modal.Header>\n                                        <Modal.Title>\n                                          Edit Local Loc (From)\n                                        </Modal.Title>\n                                      </Modal.Header>\n                                      <Modal.Body>\n                                        <NewLocal\n                                          selectedClient={selectedClientFrom}\n                                          showLocalLoc={showNewLocalModalFrom}\n                                          value={newLocalFrom}\n                                          onChange={setNewLocalFrom}\n                                          onSave={(p) => {\n                                            setNewLocalFrom(p);\n                                            setShowNewLocalModalFrom(false);\n                                          }}\n                                          onCancel={() =>\n                                            setShowNewLocalModalFrom(false)\n                                          }\n                                        />\n                                      </Modal.Body>\n                                    </Modal>\n                                  </>\n                                )}\n                              </>\n                            )}\n                          </div>\n                        </div>\n                      )}\n                    </Col>\n                    <Col>\n                      <Button\n                        variant=\"outline-secondary\"\n                        onClick={() => {\n                          setMachinePick(false);\n                          handleShowClientModal();\n                        }}\n                        className=\"me-2\"\n                      >\n                        Select Current\n                      </Button>\n                      {selectedClientCurrent && (\n                        <div\n                          style={{\n                            border: \"1px solid #ccc\",\n                            padding: \"0.75rem\",\n                            borderRadius: \"4px\",\n                            marginBottom: \"1rem\",\n                          }}\n                        >\n                          <p>\n                            <strong>Selected Client (Current):</strong>{\" \"}\n                            {selectedClientCurrent.name}\n                          </p>\n                          <div style={{ marginTop: \"0.5rem\" }}>\n                            <Button\n                              variant=\"outline-secondary\"\n                              onClick={() => setShowMachineModal(true)}\n                            >\n                              Select Machine for {selectedClientCurrent.name}\n                            </Button>\n                            {selectedCurrentMachine && (\n                              <>\n                                <p style={{ marginTop: \"0.5rem\" }}>\n                                  <strong>Selected Machine (Current):</strong>{\" \"}\n                                  {selectedCurrentMachine.name}\n                                </p>\n                                {showLocalLocCurrent && (\n                                  <>\n                                    <Button\n                                      variant=\"outline-secondary\"\n                                      onClick={() =>\n                                        setShowNewLocalModalCurrent(true)\n                                      }\n                                      className=\"w-100 mb-2\"\n                                    >\n                                      {[\n                                        newLocalCurrent.region,\n                                        newLocalCurrent.section?.letter +\n                                          newLocalCurrent.section?.number,\n                                        newLocalCurrent.bin &&\n                                          `B${newLocalCurrent.bin}`,\n                                        newLocalCurrent.pallet &&\n                                          `P${newLocalCurrent.pallet}`,\n                                      ]\n                                        .filter(Boolean)\n                                        .join(\"-\") || \"Set Local Location\"}\n                                    </Button>\n                                    <Modal\n                                      show={showNewLocalModalCurrent}\n                                      onHide={() =>\n                                        setShowNewLocalModalCurrent(false)\n                                      }\n                                      centered\n                                    >\n                                      <Modal.Header>\n                                        <Modal.Title>\n                                          Edit Local Loc (Current)\n                                        </Modal.Title>\n                                      </Modal.Header>\n                                      <Modal.Body>\n                                        <NewLocal\n                                          selectedClient={selectedClientCurrent}\n                                          showLocalLoc={\n                                            showNewLocalModalCurrent\n                                          }\n                                          value={newLocalCurrent}\n                                          onChange={setNewLocalCurrent}\n                                          onSave={(p) => {\n                                            setNewLocalCurrent(p);\n                                            setShowNewLocalModalCurrent(false);\n                                          }}\n                                          onCancel={() =>\n                                            setShowNewLocalModalCurrent(false)\n                                          }\n                                        />\n                                      </Modal.Body>\n                                    </Modal>\n                                  </>\n                                )}\n                              </>\n                            )}\n                          </div>\n                        </div>\n                      )}\n                    </Col>\n                    <Col>\n                      <Button\n                        variant=\"outline-secondary\"\n                        onClick={handleShowParentModal}\n                        className=\"me-2\"\n                      >\n                        Select Parent\n                      </Button>\n                      {selectedParent && (\n                        <Form.Control\n                          type=\"text\"\n                          placeholder=\"Selected Parent\"\n                          value={selectedParent.name}\n                          readOnly\n                          style={{ cursor: \"default\", marginTop: \"0.5rem\" }}\n                        />\n                      )}\n                    </Col>\n                  </Row>\n                </div>\n                {/* Photo Action Row */}\n                <div style={{ marginBottom: \"1rem\" }}>\n                  <Row className={`mb-3 ${styles.photoActionsRow}`}>\n                    <Col xs={12} md={6}>\n                      <ButtonGroup>\n                        <Button\n                          variant=\"outline-secondary\"\n                          onClick={handleShowCameraModal}\n                        >\n                          Take Photo\n                        </Button>\n                        <Button\n                          variant=\"outline-secondary\"\n                          onClick={handleBrowsePhotos}\n                        >\n                          Browse\n                        </Button>\n                      </ButtonGroup>\n                    </Col>\n                    <Col xs={12} md={6} className={styles.photoActionsRight}>\n                      <Button\n                        variant=\"success\"\n                        onClick={handleSendToInflow}\n                        disabled={!isReadyForActions}\n                        style={{ marginLeft: \"auto\" }}\n                      >\n                        Send to inFlow\n                      </Button>\n                      <Button\n                        variant=\"secondary\"\n                        onClick={handleBluefolderButton}\n                        disabled={!isReadyForActions}\n                        style={{ marginLeft: \"0.5rem\", marginRight: \".5rem\" }}\n                      >\n                        BlueFolder\n                      </Button>\n                      <Button\n                        variant={addToWebsite ? \"primary\" : \"outline-primary\"}\n                        onClick={handleToggleAddToWebsite}\n                        disabled={!isReadyForActions}\n                      >\n                        {addToWebsite ? \"Added to Website\" : \"Add to Website\"}\n                      </Button>\n                      <Form.Check\n                        type=\"checkbox\"\n                        id=\"hide-checkbox\"\n                        label=\"Hide\"\n                        checked={!items.visible}\n                        onChange={(e) => {\n                          const isHidden = e.currentTarget.checked;\n                          setItems((prev) => ({\n                            ...prev,\n                            visible: !isHidden,\n                          }));\n                        }}\n                        className=\"ms-3\"\n                      />\n                    </Col>\n                  </Row>\n                  <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    multiple\n                    ref={browseInputRef}\n                    style={{ display: \"none\" }}\n                    onChange={handleFilesSelected}\n                  />\n                </div>\n                {/* Photo Gallery */}\n                <div className=\"mt-3 d-flex flex-wrap\">\n                  {photos.map((photo, index) => (\n                    <div\n                      key={index}\n                      className=\"d-flex flex-column align-items-center mb-2 me-2\"\n                      style={{\n                        width: \"100px\",\n                        height: \"100px\",\n                        position: \"relative\",\n                      }}\n                    >\n                      <img\n                        src={photo.url}\n                        alt={`Photo ${index + 1}`}\n                        style={{\n                          width: \"100%\",\n                          height: \"100%\",\n                          objectFit: \"cover\",\n                        }}\n                      />\n                      {photo.file && (\n                        <Button\n                          variant=\"danger\"\n                          size=\"sm\"\n                          style={{\n                            position: \"absolute\",\n                            top: 0,\n                            right: 0,\n                            padding: \"0 5px\",\n                          }}\n                          onClick={() => removePhoto(index)}\n                        >\n                          X\n                        </Button>\n                      )}\n                    </div>\n                  ))}\n                </div>\n                {/* Extra Section: Dimensions, Price, and DOM */}\n\n                {/* Submit Row */}\n                <div className={`mt-3 d-flex flex-wrap align-items-center ${styles.actionRow}`}>\n                  <Button\n                    variant=\"primary\"\n                    type=\"submit\"\n                    style={{ marginRight: \"1rem\" }}\n                  >\n                    Save\n                  </Button>\n                  <Button\n                    variant=\"info\"\n                    onClick={handleClone}\n                    style={{ marginRight: \"1rem\" }}\n                  >\n                    Clone\n                  </Button>\n                  <LoadingButton\n                    type=\"secondary\"\n                    name=\"Back\"\n                    route=\"NewSearch/mainSearch\"\n                  />\n                  {SHOW_SLACK_BUTTONS && (\n                    <div\n                      style={{\n                        display: \"flex\",\n                        flexDirection: \"column\",\n                        marginLeft: \".5rem\",\n                      }}\n                    >\n                      <span\n                        style={{\n                          fontSize: 12,\n                          lineHeight: \"12px\",\n                          textAlign: \"center\",\n                        }}\n                      >\n                        Slack\n                      </span>\n                      <div\n                        style={{\n                          display: \"flex\",\n                          border: \"1px solid #ced4da\",\n                          borderRadius: 6,\n                          overflow: \"hidden\",\n                        }}\n                      >\n                        <Button\n                          variant=\"outline-primary\"\n                          onClick={() => handleAddToSlack(\"receiving\")}\n                          disabled={!isReadyForActions}\n                          style={{\n                            border: \"none\",\n                            borderRight: \"1px solid #ced4da\",\n                          }}\n                        >\n                          Receiving\n                        </Button>\n                        <Button\n                          variant=\"outline-primary\"\n                          onClick={() => handleAddToSlack(\"shipping\")}\n                          disabled={!isReadyForActions}\n                          style={{ border: \"none\" }}\n                        >\n                          Shipping\n                        </Button>\n                      </div>\n                    </div>\n                  )}\n                  <Button\n                    variant=\"info\"\n                    onClick={handlePrint}\n                    disabled={!isReadyForActions}\n                    style={{ marginLeft: \"auto\" }}\n                  >\n                    Print Label\n                  </Button>\n                </div>\n                <div style={{ textAlign: \"center\", margin: \"1rem 0\" }}>\n                  <Button\n                    variant=\"link\"\n                    style={{\n                      textDecoration: \"none\",\n                      color: \"black\",\n                      fontSize: \"24px\",\n                    }}\n                    onClick={() => setShowExtra(!showExtra)}\n                  >\n                    ▼\n                  </Button>\n                </div>\n                <Collapse in={showExtra}>\n                  <div id=\"extra-collapse\" className=\"mt-3\">\n                    <Row>\n                      <Form.Group as={Col} controlId=\"dimensions\">\n                        <Form.Label>Dimensions (L x W x H)</Form.Label>\n                        <Row>\n                          <Col>\n                            <Form.Control\n                              placeholder=\"Length\"\n                              type=\"text\"\n                              value={items.length}\n                              onChange={handleChange(\"length\")}\n                            />\n                          </Col>\n                          x\n                          <Col>\n                            <Form.Control\n                              placeholder=\"Width\"\n                              type=\"text\"\n                              value={items.width}\n                              onChange={handleChange(\"width\")}\n                            />\n                          </Col>\n                          x\n                          <Col>\n                            <Form.Control\n                              placeholder=\"Height\"\n                              type=\"text\"\n                              value={items.height}\n                              onChange={handleChange(\"height\")}\n                            />\n                          </Col>\n                        </Row>\n                      </Form.Group>\n                      <Form.Group as={Col} controlId=\"price\">\n                        <Form.Label>Price</Form.Label>\n                        <Form.Control\n                          placeholder=\"Price\"\n                          type=\"text\"\n                          value={items.price}\n                          onChange={handleChange(\"price\")}\n                        />\n                      </Form.Group>\n                    </Row>\n                    <Row className=\"mt-3\">\n                      <Form.Group as={Col} controlId=\"DOM\">\n                        <Form.Label>DOM (Date of Manufacture)</Form.Label>\n                        <Form.Control\n                          placeholder=\"Enter DOM\"\n                          type=\"date\"\n                          value={DOM}\n                          onChange={(e) => setDOM(e.target.value)}\n                        />\n                      </Form.Group>\n                    </Row>\n                    <Row>\n                      <Form.Group as={Col} controlId=\"poNumber\">\n                        <Form.Label>PO Number</Form.Label>\n                        <Form.Control\n                          type=\"text\"\n                          placeholder=\"PO Number\"\n                          value={items.poNumber || \"\"}\n                          onChange={handleChange(\"poNumber\")}\n                        />\n                      </Form.Group>\n                    </Row>\n                  </div>\n                </Collapse>\n              </Form>\n            </Card.Body>\n          </Card>\n        </div>\n      </Container>\n    </LoggedIn>\n  );\n}\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}