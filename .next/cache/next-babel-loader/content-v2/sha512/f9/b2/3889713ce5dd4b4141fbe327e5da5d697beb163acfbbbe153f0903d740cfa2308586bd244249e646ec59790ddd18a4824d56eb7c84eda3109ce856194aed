{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/mack2/Desktop/code/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"C:/Users/mack2/Desktop/code/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"C:/Users/mack2/Desktop/code/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState, useRef } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { Form, Button, Card, Container, Row, Col } from \"react-bootstrap\";\nimport styles from \"../../styles/Home.module.css\";\nimport Link from \"next/link\";\nimport { useAuth } from \"../../context/AuthUserContext\";\nimport firebase from \"../../context/Firebase\";\nimport LoggedIn from \"../LoggedIn\";\nimport Modal from \"react-bootstrap/Modal\";\nimport { useRouter } from \"next/router\";\n\nfunction simulateNetworkRequest() {\n  return new Promise(function (resolve) {\n    return setTimeout(resolve, 2000);\n  });\n}\n\nfunction LoadingButton(type, name, route) {\n  var _useState = useState({\n    name: false\n  }),\n      isLoading = _useState[0],\n      setLoading = _useState[1];\n\n  useEffect(function () {\n    if (isLoading.name) {\n      simulateNetworkRequest().then(function () {\n        setLoading({\n          name: false\n        });\n      });\n    }\n  }, [isLoading.name]);\n\n  var handleClick = function handleClick() {\n    return setLoading({\n      name: true\n    });\n  };\n\n  return __jsx(Link, {\n    href: \"/\".concat(route)\n  }, __jsx(\"a\", {\n    className: \"btn btn-\".concat(type),\n    disabled: isLoading.name,\n    onClick: !isLoading.name ? handleClick : null\n  }, isLoading.name ? \"Loadingâ€¦\" : name));\n}\n\nexport default function dashboard() {\n  var router = useRouter();\n\n  var _useAuth = useAuth(),\n      signOut = _useAuth.signOut;\n\n  var _useState2 = useState({}),\n      items = _useState2[0],\n      setItems = _useState2[1];\n\n  var _useState3 = useState(false),\n      show = _useState3[0],\n      setShow = _useState3[1];\n\n  var handleClose = function handleClose() {\n    return setShow(false);\n  };\n\n  var handleShow = function handleShow() {\n    return setShow(true);\n  };\n\n  var _useState4 = useState(false),\n      showErr = _useState4[0],\n      setShowErr = _useState4[1];\n\n  var _useState5 = useState(\"N/A\"),\n      Err = _useState5[0],\n      setErr = _useState5[1];\n\n  var handleCloseErr = function handleCloseErr() {\n    return setShowErr(false);\n  };\n\n  var handleShowErr = function handleShowErr() {\n    return setShowErr(true);\n  };\n\n  function toSend() {\n    return _toSend.apply(this, arguments);\n  }\n\n  function _toSend() {\n    _toSend = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var db, tempDate, _tempDate$split$map, _tempDate$split$map2, year, month, day, returnData;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              db = firebase.firestore();\n              tempDate = items.date;\n              _tempDate$split$map = tempDate.split(\"-\").map(Number), _tempDate$split$map2 = _slicedToArray(_tempDate$split$map, 3), year = _tempDate$split$map2[0], month = _tempDate$split$map2[1], day = _tempDate$split$map2[2];\n              tempDate = new Date(year, month - 1, day); // Note: month is 0-indexed in JavaScript\n\n              returnData = Object.assign({}, items, {\n                date: tempDate\n              });\n              console.log(returnData.date.toString());\n              _context.next = 8;\n              return db.collection(\"Test\").add(returnData).then(function () {\n                console.log(\"Items added!\"); // router.reload(\"WarehouseList\")\n\n                router.push(\"WarehouseList\");\n              }).then(function () {\n                console.log(\"Items updated successfully!\"); // setErr(\"Success\");\n                // handleShowErr();\n              })[\"catch\"](function (error) {\n                console.error(\"Error updating data: \", error); // setErr(\"Fail\");\n                // handleShowErr();\n              });\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _toSend.apply(this, arguments);\n  }\n\n  function handleSubmit(_x) {\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  function _handleSubmit() {\n    _handleSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event) {\n      var check;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              // const router = useRouter()\n              event.preventDefault();\n              console.log(\"enter handle submit\");\n              console.log(items);\n              check = false;\n\n              if (items[\"name\"] == \"\") {\n                console.log(\"error!!!!! name\");\n                check = true;\n              }\n\n              if (items[\"wo\"] == \"\") {\n                console.log(\"error!!!!! work order\");\n                check = true;\n              }\n\n              if (items[\"pn\"] == \"\") {\n                console.log(\"error!!!!! product number\");\n                check = true;\n              }\n\n              if (items[\"sn\"] == \"\") {\n                console.log(\"error!!!!! serial number\");\n                check = true;\n              } // if (items[\"date\"] == \"\") {\n              //   console.log(\"error!!!!! date\");\n              //   check = true;\n              // }\n\n\n              if (items[\"desc\"] == \"\") {\n                console.log(\"error!!!!! description\");\n                check = true;\n              }\n\n              if (check) {\n                console.log(\"entered\");\n                handleShow();\n              } else {\n                console.log(\"try submit\");\n                console.log(items);\n                toSend();\n              }\n\n              event.preventDefault();\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  var nameChangeHandler = function nameChangeHandler(event) {\n    setItems(Object.assign({}, items, {\n      name: event.target.value\n    })); // setItems(prevState => {\n    //   let jasper = Object.assign({}, prevState.jasper);  // creating copy of state variable jasper\n    //   jasper.name = event.target.value;                     // update the name property, assign a new value\n    //   return { jasper };                                 // return new object jasper object\n    // })\n  };\n\n  var woChangeHandler = function woChangeHandler(event) {\n    setItems(Object.assign({}, items, {\n      wo: event.target.value\n    })); // setItems(prevState => {\n    //   let jasper = Object.assign({}, prevState.jasper);  // creating copy of state variable jasper\n    //   jasper.wo = event.target.value;                     // update the name property, assign a new value\n    //   return { jasper };                                 // return new object jasper object\n    // })\n  };\n\n  var pnChangeHandler = function pnChangeHandler(event) {\n    setItems(Object.assign({}, items, {\n      pn: event.target.value\n    })); // setItems(prevState => {\n    //   let jasper = Object.assign({}, prevState.jasper);  // creating copy of state variable jasper\n    //   jasper.pn = event.target.value;                     // update the name property, assign a new value\n    //   return { jasper };                                 // return new object jasper object\n    // })\n  };\n\n  var snChangeHandler = function snChangeHandler(event) {\n    setItems(Object.assign({}, items, {\n      sn: event.target.value\n    })); // setItems(prevState => {\n    //   let jasper = Object.assign({}, prevState.jasper);  // creating copy of state variable jasper\n    //   jasper.sn = event.target.value;                     // update the name property, assign a new value\n    //   return { jasper };                                 // return new object jasper object\n    // })\n  };\n\n  var dateChangeHandler = function dateChangeHandler(event) {\n    setItems(Object.assign({}, items, {\n      date: event.target.value\n    }));\n    console.log(items.date); // setItems(prevState => {\n    //   let jasper = Object.assign({}, prevState.jasper);  // creating copy of state variable jasper\n    //   // jasper.date = event.target.value;                     // update the name property, assign a new value\n    //   const date = new Date(Date.UTC(2012, 11, 20, 3, 0, 0))\n    //   jasper.date = date\n    //   return { jasper };                                 // return new object jasper object\n    // })\n  };\n\n  var descChangeHandler = function descChangeHandler(event) {\n    setItems(Object.assign({}, items, {\n      desc: event.target.value\n    })); // setItems(prevState => {\n    //   let jasper = Object.assign({}, prevState.jasper);  // creating copy of state variable jasper\n    //   jasper.desc = event.target.value;                     // update the name property, assign a new value\n    //   return { jasper };                                 // return new object jasper object\n    // })\n  };\n\n  return __jsx(LoggedIn, null, __jsx(Modal, {\n    show: show,\n    onHide: handleClose\n  }, __jsx(Modal.Header, {\n    closeButton: true\n  }, __jsx(Modal.Title, null, \"Error\")), __jsx(Modal.Body, null, \"Missing field\"), __jsx(Modal.Footer, null, __jsx(Button, {\n    variant: \"primary\",\n    onClick: handleClose\n  }, \"Ok\"))), __jsx(Modal, {\n    show: showErr,\n    onHide: handleCloseErr\n  }, __jsx(Modal.Header, {\n    closeButton: true\n  }, __jsx(Modal.Title, null, \"Error\")), __jsx(Modal.Body, null, Err), __jsx(Modal.Footer, null, __jsx(Button, {\n    variant: \"primary\",\n    onClick: handleCloseErr\n  }, \"Ok\"))), __jsx(Container, {\n    className: \"d-flex align-items-center justify-content-center\",\n    style: {\n      minHeight: \"100vh\"\n    }\n  }, __jsx(\"div\", {\n    className: \"w-100\",\n    style: {\n      maxWidth: \"400px\"\n    }\n  }, __jsx(Card, {\n    className: \"align-items-center justify-content-center\"\n  }, __jsx(Card.Body, null, __jsx(\"h2\", {\n    className: \"text-center mb-4\"\n  }, \"Item\"), __jsx(Form, {\n    onSubmit: handleSubmit\n  }, __jsx(Row, {\n    className: \"mb-3\"\n  }, __jsx(Form.Group, {\n    as: Col,\n    controlId: \"name\"\n  }, __jsx(Form.Label, null, \"Name\"), __jsx(Form.Control, {\n    type: \"text\",\n    value: items[\"name\"],\n    onChange: nameChangeHandler\n  })), __jsx(Form.Group, {\n    as: Col,\n    controlId: \"wo\"\n  }, __jsx(Form.Label, null, \"Work Order\"), __jsx(Form.Control, {\n    type: \"text\",\n    value: items[\"wo\"],\n    onChange: woChangeHandler\n  }))), __jsx(Row, {\n    className: \"mb-3\"\n  }, __jsx(Form.Group, {\n    as: Col,\n    controlId: \"pn\"\n  }, __jsx(Form.Label, null, \"Product Number\"), __jsx(Form.Control, {\n    type: \"text\",\n    value: items[\"pn\"],\n    onChange: pnChangeHandler\n  })), __jsx(Form.Group, {\n    as: Col,\n    controlId: \"sn\"\n  }, __jsx(Form.Label, null, \"Serial Number\"), __jsx(Form.Control, {\n    type: \"text\",\n    value: items[\"sn\"],\n    onChange: snChangeHandler\n  }))), __jsx(Form.Group, {\n    as: Col,\n    controlId: \"date\"\n  }, __jsx(Form.Label, null, \"Date\"), __jsx(Form.Control, {\n    type: \"date\",\n    value: items[\"date\"],\n    onChange: dateChangeHandler\n  })), __jsx(Form.Label, null), __jsx(Form.Group, {\n    className: \"mb-3\",\n    controlId: \"desc\"\n  }, __jsx(Form.Label, null, \"Description\"), __jsx(Form.Control, {\n    type: \"text\",\n    value: items[\"desc\"],\n    onChange: descChangeHandler\n  })), __jsx(Button, {\n    variant: \"primary\",\n    type: \"submit\"\n  }, \"Submit\"), __jsx(Link, {\n    href: \"WarehouseList\"\n  }, __jsx(Button, {\n    className: \"m-3\",\n    variant: \"secondary\"\n  }, \"Go Back\"))))))));\n}","map":null,"metadata":{},"sourceType":"module"}