{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Table, Button, Form } from \"react-bootstrap\";\nimport { formatDate } from \"./fetchAssociations\";\nimport styles from \"../styles/PartTable.module.css\";\nexport default function PartTable({\n  info,\n  labels,\n  ids,\n  hoverStyle,\n  sortCheckAll,\n  checkDelete,\n  isDeleting,\n  rowSelect,\n  setHoverIndex,\n  hoverIndex,\n  selectedItems,\n  setSelectedItems,\n  minRows = 10\n}) {\n  // const [selectedItems, setSelectedItems] = useState([]);\n  const {\n    0: longPressName,\n    1: setLongPressName\n  } = useState(null);\n  const {\n    0: isMobile,\n    1: setIsMobile\n  } = useState(false);\n  const pressTimerRef = useRef(null);\n  const longPressTriggeredRef = useRef(false);\n  useEffect(() => {\n    if (true) return undefined;\n    const media = window.matchMedia(\"(max-width: 640px)\");\n\n    const update = () => setIsMobile(media.matches);\n\n    update();\n\n    if (media.addEventListener) {\n      media.addEventListener(\"change\", update);\n      return () => media.removeEventListener(\"change\", update);\n    }\n\n    media.addListener(update);\n    return () => media.removeListener(update);\n  }, []); // Toggle selection of items\n\n  const handleSelectItem = id => {\n    setSelectedItems(prevSelectedItems => prevSelectedItems.includes(id) ? prevSelectedItems.filter(itemId => itemId !== id) : [...prevSelectedItems, id]);\n  }; // Handle delete button click for selected items\n\n\n  const handleDeleteSelected = () => {\n    if (selectedItems.length > 0) {\n      checkDelete(null, null, selectedItems, \"selected items\");\n    }\n  };\n\n  const startLongPress = name => () => {\n    if (!isMobile) return;\n\n    if (pressTimerRef.current) {\n      clearTimeout(pressTimerRef.current);\n    }\n\n    pressTimerRef.current = setTimeout(() => {\n      longPressTriggeredRef.current = true;\n      setLongPressName(name);\n    }, 450);\n  };\n\n  const cancelLongPress = () => {\n    if (pressTimerRef.current) {\n      clearTimeout(pressTimerRef.current);\n      pressTimerRef.current = null;\n    }\n  };\n\n  const dismissLongPress = () => {\n    longPressTriggeredRef.current = false;\n    setLongPressName(null);\n  };\n\n  const paddingCount = Math.max(0, minRows - info.length);\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: styles.scrollableTable\n  }, __jsx(Table, {\n    striped: true,\n    bordered: true,\n    hover: true,\n    size: \"sm\",\n    className: `mb-0 ${styles.fixedTable}`\n  }, __jsx(\"thead\", {\n    className: styles.stickyHeader\n  }, __jsx(\"tr\", null, labels.map((item, index) => __jsx(\"th\", {\n    style: hoverStyle(index),\n    onMouseOver: () => setHoverIndex(index),\n    onMouseOut: () => setHoverIndex(null),\n    onClick: () => sortCheckAll(index),\n    key: index\n  }, item)), __jsx(\"th\", {\n    className: styles.actionCol,\n    style: {\n      textAlign: \"center\"\n    }\n  }, selectedItems.length > 0 ? __jsx(Button, {\n    variant: \"danger\",\n    onClick: handleDeleteSelected,\n    disabled: isDeleting,\n    size: \"sm\"\n  }, \"Delete Selected (\", selectedItems.length, \")\") : \"select\"))), __jsx(\"tbody\", null, info.map((item, index) => __jsx(\"tr\", {\n    key: index,\n    onClick: e => {\n      if (longPressTriggeredRef.current) {\n        longPressTriggeredRef.current = false;\n        return;\n      } // Only trigger rowSelect if the target is not a checkbox\n\n\n      if (e.target.type !== \"checkbox\") {\n        rowSelect(item);\n      }\n    },\n    onTouchStart: startLongPress(item.name),\n    onTouchEnd: cancelLongPress,\n    onTouchCancel: cancelLongPress,\n    onTouchMove: cancelLongPress,\n    className: \"clickable-row\"\n  }, __jsx(\"td\", {\n    style: {\n      textAlign: \"center\",\n      cursor: \"default\"\n    }\n  }, __jsx(\"div\", {\n    className: styles.cellClamp,\n    title: item.name\n  }, item.name)), __jsx(\"td\", {\n    style: {\n      textAlign: \"center\",\n      cursor: \"default\"\n    }\n  }, __jsx(\"div\", {\n    className: styles.cellClamp,\n    title: formatDate(item.date)\n  }, formatDate(item.date))), __jsx(\"td\", {\n    style: {\n      textAlign: \"center\",\n      cursor: \"default\"\n    }\n  }, __jsx(\"div\", {\n    className: styles.cellClamp,\n    title: item.workOrders && item.workOrders.length > 0 ? item.workOrders[item.workOrders.length - 1].workOrder : \"N/A\"\n  }, item.workOrders && item.workOrders.length > 0 ? item.workOrders[item.workOrders.length - 1].workOrder : \"N/A\")), __jsx(\"td\", {\n    style: {\n      textAlign: \"center\",\n      cursor: \"default\"\n    }\n  }, __jsx(\"div\", {\n    className: styles.cellClamp,\n    title: item.pn\n  }, item.pn)), __jsx(\"td\", {\n    style: {\n      textAlign: \"center\",\n      cursor: \"default\"\n    }\n  }, __jsx(\"div\", {\n    className: styles.cellClamp,\n    title: item.sn\n  }, item.sn)), __jsx(\"td\", {\n    className: styles.actionCol,\n    style: {\n      textAlign: \"center\"\n    }\n  }, __jsx(Form.Check, {\n    type: \"checkbox\",\n    checked: selectedItems.includes(item.id),\n    onChange: e => {\n      e.stopPropagation(); // Prevent row click when checkbox is clicked\n      // Toggle selection using item.id directly\n\n      setSelectedItems(prevSelectedItems => prevSelectedItems.includes(item.id) ? prevSelectedItems.filter(id => id !== item.id) : [...prevSelectedItems, item.id]);\n    },\n    \"aria-label\": `Select ${item.name}`\n  })))), paddingCount > 0 && Array.from({\n    length: paddingCount\n  }).map((_, index) => __jsx(\"tr\", {\n    key: `empty-${index}`\n  }, __jsx(\"td\", {\n    colSpan: labels.length + 1,\n    style: {\n      textAlign: \"center\"\n    }\n  }, \"\\xA0\")))))), isMobile && longPressName && __jsx(\"div\", {\n    className: styles.longPressOverlay,\n    onClick: dismissLongPress,\n    role: \"button\",\n    tabIndex: 0\n  }, __jsx(\"div\", {\n    className: styles.longPressCard\n  }, longPressName)));\n}","map":null,"metadata":{},"sourceType":"module"}