{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/mack2/Desktop/code/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/mack2/Desktop/code/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport Firebase, { auth } from \"./Firebase\";\n\nvar formatAuthUser = function formatAuthUser(user) {\n  return {\n    uid: user.uid,\n    email: user.email\n  };\n};\n\nexport default function useFirebaseAuth() {\n  _s();\n\n  var _useState = useState(null),\n      authUser = _useState[0],\n      setAuthUser = _useState[1];\n\n  var _useState2 = useState(true),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var authStateChanged = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(authState) {\n      var formattedUser;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (authState) {\n                _context.next = 4;\n                break;\n              }\n\n              setAuthUser(null);\n              setLoading(false);\n              return _context.abrupt(\"return\");\n\n            case 4:\n              setLoading(true);\n              formattedUser = formatAuthUser(authState);\n              setAuthUser(formattedUser);\n              setLoading(false);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function authStateChanged(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var clear = function clear() {\n    setAuthUser(null);\n    setLoading(true);\n  }; //sign in with google\n\n\n  var signInWithGoogle = function signInWithGoogle() {\n    var provider = new Firebase.auth.GoogleAuthProvider();\n    provider.setCustomParameters({\n      prompt: \"select_account\"\n    });\n    return auth.signInWithRedirect(provider)[\"catch\"](function (error) {\n      console.error(\"Google Sign-In Error:\", error);\n      throw error;\n    });\n  };\n\n  var signOut = function signOut() {\n    return auth.signOut().then(clear);\n  }; // Listen for Firebase auth state changes\n  // useEffect(() => {\n  //   const unsubscribe = auth.onAuthStateChanged(authStateChanged);\n  //   return () => unsubscribe();\n  // }, []);\n\n\n  useEffect(function () {\n    var unsubscribe;\n    auth.setPersistence(Firebase.auth.Auth.Persistence.LOCAL).then(function () {\n      // Now set up the listener\n      unsubscribe = auth.onAuthStateChanged(authStateChanged);\n    })[\"catch\"](function (error) {\n      return console.error(\"Error setting persistence:\", error);\n    });\n    return function () {\n      if (unsubscribe) {\n        unsubscribe();\n      }\n    };\n  }, []);\n  return {\n    authUser: authUser,\n    loading: loading,\n    signInWithGoogle: signInWithGoogle,\n    signOut: signOut\n  };\n}\n\n_s(useFirebaseAuth, \"QGefB/j9oX4TYsutdTquhksUQuw=\");","map":{"version":3,"sources":["C:/Users/mack2/Desktop/code/context/useFirebaseAuth.js"],"names":["useState","useEffect","Firebase","auth","formatAuthUser","user","uid","email","useFirebaseAuth","authUser","setAuthUser","loading","setLoading","authStateChanged","authState","formattedUser","clear","signInWithGoogle","provider","GoogleAuthProvider","setCustomParameters","prompt","signInWithRedirect","error","console","signOut","then","unsubscribe","setPersistence","Auth","Persistence","LOCAL","onAuthStateChanged"],"mappings":";;;;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,QAAP,IAAmBC,IAAnB,QAA+B,YAA/B;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,IAAD;AAAA,SAAW;AAChCC,IAAAA,GAAG,EAAED,IAAI,CAACC,GADsB;AAEhCC,IAAAA,KAAK,EAAEF,IAAI,CAACE;AAFoB,GAAX;AAAA,CAAvB;;AAKA,eAAe,SAASC,eAAT,GAA2B;AAAA;;AAAA,kBACRR,QAAQ,CAAC,IAAD,CADA;AAAA,MACjCS,QADiC;AAAA,MACvBC,WADuB;;AAAA,mBAEVV,QAAQ,CAAC,IAAD,CAFE;AAAA,MAEjCW,OAFiC;AAAA,MAExBC,UAFwB;;AAIxC,MAAMC,gBAAgB;AAAA,wEAAG,iBAAOC,SAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAClBA,SADkB;AAAA;AAAA;AAAA;;AAErBJ,cAAAA,WAAW,CAAC,IAAD,CAAX;AACAE,cAAAA,UAAU,CAAC,KAAD,CAAV;AAHqB;;AAAA;AAOvBA,cAAAA,UAAU,CAAC,IAAD,CAAV;AACMG,cAAAA,aARiB,GAQDX,cAAc,CAACU,SAAD,CARb;AASvBJ,cAAAA,WAAW,CAACK,aAAD,CAAX;AACAH,cAAAA,UAAU,CAAC,KAAD,CAAV;;AAVuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAhBC,gBAAgB;AAAA;AAAA;AAAA,KAAtB;;AAaA,MAAMG,KAAK,GAAG,SAARA,KAAQ,GAAM;AAClBN,IAAAA,WAAW,CAAC,IAAD,CAAX;AACAE,IAAAA,UAAU,CAAC,IAAD,CAAV;AACD,GAHD,CAjBwC,CAsBxC;;;AACA,MAAMK,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC7B,QAAMC,QAAQ,GAAG,IAAIhB,QAAQ,CAACC,IAAT,CAAcgB,kBAAlB,EAAjB;AACAD,IAAAA,QAAQ,CAACE,mBAAT,CAA6B;AAAEC,MAAAA,MAAM,EAAE;AAAV,KAA7B;AAEA,WAAOlB,IAAI,CAACmB,kBAAL,CAAwBJ,QAAxB,WAAwC,UAACK,KAAD,EAAW;AACxDC,MAAAA,OAAO,CAACD,KAAR,CAAc,uBAAd,EAAuCA,KAAvC;AACA,YAAMA,KAAN;AACD,KAHM,CAAP;AAID,GARD;;AAUA,MAAME,OAAO,GAAG,SAAVA,OAAU;AAAA,WAAMtB,IAAI,CAACsB,OAAL,GAAeC,IAAf,CAAoBV,KAApB,CAAN;AAAA,GAAhB,CAjCwC,CAmCxC;AACA;AACA;AACA;AACA;;;AACAf,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI0B,WAAJ;AACAxB,IAAAA,IAAI,CACDyB,cADH,CACkB1B,QAAQ,CAACC,IAAT,CAAc0B,IAAd,CAAmBC,WAAnB,CAA+BC,KADjD,EAEGL,IAFH,CAEQ,YAAM;AACV;AACAC,MAAAA,WAAW,GAAGxB,IAAI,CAAC6B,kBAAL,CAAwBnB,gBAAxB,CAAd;AACD,KALH,WAMS,UAACU,KAAD;AAAA,aAAWC,OAAO,CAACD,KAAR,CAAc,4BAAd,EAA4CA,KAA5C,CAAX;AAAA,KANT;AAQA,WAAO,YAAM;AACX,UAAII,WAAJ,EAAiB;AACfA,QAAAA,WAAW;AACZ;AACF,KAJD;AAKD,GAfQ,EAeN,EAfM,CAAT;AAiBA,SAAO;AACLlB,IAAAA,QAAQ,EAARA,QADK;AAELE,IAAAA,OAAO,EAAPA,OAFK;AAGLM,IAAAA,gBAAgB,EAAhBA,gBAHK;AAILQ,IAAAA,OAAO,EAAPA;AAJK,GAAP;AAMD;;GA/DuBjB,e","sourcesContent":["import { useState, useEffect } from \"react\";\nimport Firebase, { auth } from \"./Firebase\";\n\nconst formatAuthUser = (user) => ({\n  uid: user.uid,\n  email: user.email,\n});\n\nexport default function useFirebaseAuth() {\n  const [authUser, setAuthUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const authStateChanged = async (authState) => {\n    if (!authState) {\n      setAuthUser(null);\n      setLoading(false);\n      return;\n    }\n\n    setLoading(true);\n    const formattedUser = formatAuthUser(authState);\n    setAuthUser(formattedUser);\n    setLoading(false);\n  };\n\n  const clear = () => {\n    setAuthUser(null);\n    setLoading(true);\n  };\n\n  //sign in with google\n  const signInWithGoogle = () => {\n    const provider = new Firebase.auth.GoogleAuthProvider();\n    provider.setCustomParameters({ prompt: \"select_account\" });\n\n    return auth.signInWithRedirect(provider).catch((error) => {\n      console.error(\"Google Sign-In Error:\", error);\n      throw error;\n    });\n  };\n\n  const signOut = () => auth.signOut().then(clear);\n\n  // Listen for Firebase auth state changes\n  // useEffect(() => {\n  //   const unsubscribe = auth.onAuthStateChanged(authStateChanged);\n  //   return () => unsubscribe();\n  // }, []);\n  useEffect(() => {\n    let unsubscribe;\n    auth\n      .setPersistence(Firebase.auth.Auth.Persistence.LOCAL)\n      .then(() => {\n        // Now set up the listener\n        unsubscribe = auth.onAuthStateChanged(authStateChanged);\n      })\n      .catch((error) => console.error(\"Error setting persistence:\", error));\n\n    return () => {\n      if (unsubscribe) {\n        unsubscribe();\n      }\n    };\n  }, []);\n\n  return {\n    authUser,\n    loading,\n    signInWithGoogle,\n    signOut,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}