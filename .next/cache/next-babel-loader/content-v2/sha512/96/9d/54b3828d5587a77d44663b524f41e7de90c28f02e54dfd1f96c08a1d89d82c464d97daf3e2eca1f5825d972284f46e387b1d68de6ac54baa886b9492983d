{"ast":null,"code":"import _defineProperty from \"C:/Users/mack2/Desktop/code/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\mack2\\\\Desktop\\\\code\\\\pages\\\\NewSearch\\\\inventory\\\\inventoryManage.js\",\n    _s2 = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState, useMemo } from \"react\";\nimport LoggedIn from \"../../LoggedIn\";\nimport firebase from \"../../../context/Firebase\";\nimport { Table, Form, Button, Container, Row, Col, Spinner } from \"react-bootstrap\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { formatLoc } from \"../../../utils/itemFormShared\";\nexport default function InventoryManage() {\n  _s2();\n\n  var _s = $RefreshSig$(),\n      _this = this;\n\n  var router = useRouter();\n\n  var _useState = useState([]),\n      items = _useState[0],\n      setItems = _useState[1];\n\n  var _useState2 = useState(true),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(new Set()),\n      selectedIds = _useState3[0],\n      setSelectedIds = _useState3[1];\n\n  var _useState4 = useState({\n    region: \"\",\n    sectionLetter: \"\",\n    sectionNumber: \"\",\n    bin: \"\",\n    pallet: \"\",\n    localSN: \"\"\n  }),\n      filters = _useState4[0],\n      setFilters = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      bulkField = _useState5[0],\n      setBulkField = _useState5[1];\n\n  var _useState6 = useState(\"\"),\n      bulkValue = _useState6[0],\n      setBulkValue = _useState6[1]; // ---- load data once ----\n\n\n  useEffect(function () {\n    var db = firebase.firestore();\n    db.collection(\"Test\").get().then(function (snap) {\n      var data = snap.docs.map(function (d) {\n        var _loc$region$toString, _loc$region, _loc$bin$toString, _loc$bin, _loc$pallet$toString, _loc$pallet;\n\n        var doc = d.data();\n        var loc = doc.newLocalCurrent || {};\n        var sectionLetter = \"\";\n        var sectionNumber = \"\";\n\n        if (typeof loc.section === \"string\") {\n          sectionLetter = loc.section.slice(0, 1);\n          sectionNumber = loc.section.slice(1);\n        } else if (loc.section) {\n          sectionLetter = loc.section.letter || \"\";\n          sectionNumber = loc.section.number !== undefined && loc.section.number !== null ? String(loc.section.number) : \"\";\n        }\n\n        return {\n          id: d.id,\n          name: doc.name || \"\",\n          pn: doc.pn || \"\",\n          sn: doc.sn || \"\",\n          localSN: doc.localSN || \"\",\n          region: (_loc$region$toString = (_loc$region = loc.region) === null || _loc$region === void 0 ? void 0 : _loc$region.toString()) !== null && _loc$region$toString !== void 0 ? _loc$region$toString : \"\",\n          sectionLetter: sectionLetter,\n          sectionNumber: sectionNumber,\n          bin: (_loc$bin$toString = (_loc$bin = loc.bin) === null || _loc$bin === void 0 ? void 0 : _loc$bin.toString()) !== null && _loc$bin$toString !== void 0 ? _loc$bin$toString : \"\",\n          pallet: (_loc$pallet$toString = (_loc$pallet = loc.pallet) === null || _loc$pallet === void 0 ? void 0 : _loc$pallet.toString()) !== null && _loc$pallet$toString !== void 0 ? _loc$pallet$toString : \"\"\n        };\n      });\n      setItems(data);\n    })[\"finally\"](function () {\n      return setLoading(false);\n    });\n  }, []);\n  useEffect(function () {\n    if (!router.isReady) return;\n    var qp = router.query;\n\n    var getParam = function getParam(key) {\n      return Array.isArray(qp[key]) ? qp[key][0] : qp[key];\n    };\n\n    setFilters(function (prev) {\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        region: getParam(\"region\") || \"\",\n        sectionLetter: getParam(\"sectionLetter\") || \"\",\n        sectionNumber: getParam(\"sectionNumber\") || \"\",\n        bin: getParam(\"bin\") || \"\",\n        pallet: getParam(\"pallet\") || \"\",\n        localSN: getParam(\"localSN\") || \"\"\n      });\n    });\n  }, [router.isReady]); // ---- derive distinct filter options ----\n\n  var distinct = function distinct(arr) {\n    return Array.from(new Set(arr.filter(function (v) {\n      return v;\n    }))).sort();\n  };\n\n  var regions = useMemo(function () {\n    return distinct(items.map(function (i) {\n      return i.region;\n    }));\n  }, [items]);\n  var sectionLetters = useMemo(function () {\n    return distinct(items.map(function (i) {\n      return i.sectionLetter;\n    }));\n  }, [items]);\n  var sectionNumbers = useMemo(function () {\n    return distinct(items.map(function (i) {\n      return i.sectionNumber;\n    }));\n  }, [items]);\n  var bins = useMemo(function () {\n    return distinct(items.map(function (i) {\n      return i.bin;\n    }));\n  }, [items]);\n  var pallets = useMemo(function () {\n    return distinct(items.map(function (i) {\n      return i.pallet;\n    }));\n  }, [items]); // ---- toggles ----\n\n  var toggleSelect = function toggleSelect(id) {\n    setSelectedIds(function (prev) {\n      var next = new Set(prev);\n      next.has(id) ? next[\"delete\"](id) : next.add(id);\n      return next;\n    });\n  };\n\n  var toggleSelectAll = function toggleSelectAll() {\n    var visibleIds = filteredItems.map(function (i) {\n      return i.id;\n    });\n    setSelectedIds(function (prev) {\n      var next = new Set(prev);\n\n      if (visibleIds.every(function (id) {\n        return next.has(id);\n      })) {\n        visibleIds.forEach(function (id) {\n          return next[\"delete\"](id);\n        });\n      } else {\n        visibleIds.forEach(function (id) {\n          return next.add(id);\n        });\n      }\n\n      return next;\n    });\n  }; // ---- filtered list ----\n\n\n  var filteredItems = items.filter(function (it) {\n    return [\"region\", \"sectionLetter\", \"sectionNumber\", \"bin\", \"pallet\", \"localSN\"].every(function (f) {\n      return !filters[f] || it[f] === filters[f];\n    });\n  }); // ---- bulk update handler ----\n\n  var applyBulkUpdate = function applyBulkUpdate() {\n    if (!bulkField || !bulkValue) return;\n    var db = firebase.firestore();\n    var updates = Array.from(selectedIds).map(function (id) {\n      var orig = items.find(function (i) {\n        return i.id === id;\n      }) || {};\n      var newRegion = bulkField === \"region\" ? bulkValue : orig.region;\n      var newSectionLetter = bulkField === \"sectionLetter\" ? bulkValue : orig.sectionLetter;\n      var newSectionNumber = bulkField === \"sectionNumber\" ? bulkValue : orig.sectionNumber;\n      var newBin = bulkField === \"bin\" ? bulkValue : orig.bin;\n      var newPallet = bulkField === \"pallet\" ? bulkValue : orig.pallet;\n      var newLocString = formatLoc({\n        region: newRegion,\n        section: newSectionLetter && newSectionNumber ? {\n          letter: newSectionLetter,\n          number: newSectionNumber\n        } : undefined,\n        bin: newBin,\n        pallet: newPallet\n      });\n      var updateObj = {\n        region: newRegion,\n        bin: newBin,\n        pallet: newPallet,\n        localLocCurrent: newLocString,\n        newLocalCurrent: {\n          region: newRegion,\n          bin: newBin,\n          pallet: newPallet\n        }\n      };\n\n      if (newSectionLetter && newSectionNumber) {\n        updateObj.section = {\n          letter: newSectionLetter,\n          number: newSectionNumber\n        };\n        updateObj.newLocalCurrent.section = {\n          letter: newSectionLetter,\n          number: newSectionNumber\n        };\n      }\n\n      return db.collection(\"Test\").doc(id).update(updateObj).then(function () {\n        setItems(function (prev) {\n          return prev.map(function (item) {\n            return item.id === id ? _objectSpread(_objectSpread({}, item), {}, {\n              region: newRegion,\n              sectionLetter: newSectionLetter,\n              sectionNumber: newSectionNumber,\n              bin: newBin,\n              pallet: newPallet\n            }) : item;\n          });\n        });\n      });\n    });\n    Promise.all(updates).then(function () {\n      setSelectedIds(new Set());\n      setBulkField(\"\");\n      setBulkValue(\"\");\n    });\n  }; // ---- loading state ----\n\n\n  if (loading) {\n    return __jsx(Container, {\n      className: \"py-5 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 7\n      }\n    }, __jsx(Spinner, {\n      animation: \"border\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  function LoadingButton(_ref) {\n    _s();\n\n    var type = _ref.type,\n        name = _ref.name,\n        route = _ref.route;\n\n    var _useState7 = useState(false),\n        isLoading = _useState7[0],\n        setLoading = _useState7[1];\n\n    useEffect(function () {\n      if (isLoading) {\n        simulateNetworkRequest().then(function () {\n          return setLoading(false);\n        });\n      }\n    }, [isLoading]);\n\n    var handleClick = function handleClick() {\n      return setLoading(true);\n    };\n\n    return __jsx(Link, {\n      href: \"/\".concat(route),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }\n    }, __jsx(\"a\", {\n      className: \"btn btn-\".concat(type),\n      disabled: isLoading,\n      onClick: !isLoading ? handleClick : null,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 17\n      }\n    }, isLoading ? \"Loadingâ€¦\" : name));\n  }\n\n  _s(LoadingButton, \"LHJkidtbt8bk0SOCXf2Y2viet6g=\");\n\n  function simulateNetworkRequest() {\n    return new Promise(function (resolve) {\n      return setTimeout(resolve, 2000);\n    });\n  }\n\n  return __jsx(LoggedIn, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 9\n    }\n  }, __jsx(Container, {\n    className: \"py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 13\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 17\n    }\n  }, \"Inventory Management\"), __jsx(LoadingButton, {\n    type: \"primary\",\n    name: \"Back\",\n    route: \"Warehousedb/WarehouseSelect\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 17\n    }\n  }), __jsx(Row, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 17\n    }\n  }, __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 25\n    }\n  }, \"Region\"), __jsx(Form.Select, {\n    value: filters.region,\n    onChange: function onChange(e) {\n      var v = e.target.value;\n      setFilters(function (p) {\n        return _objectSpread(_objectSpread({}, p), {}, {\n          region: v\n        });\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 25\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 15\n    }\n  }, \"All regions\"), regions.map(function (r) {\n    return __jsx(\"option\", {\n      key: r,\n      value: r,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 17\n      }\n    }, r);\n  }))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 13\n    }\n  }, \"Section Letter\"), __jsx(Form.Select, {\n    value: filters.sectionLetter,\n    onChange: function onChange(e) {\n      var v = e.target.value;\n      setFilters(function (p) {\n        return _objectSpread(_objectSpread({}, p), {}, {\n          sectionLetter: v\n        });\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 13\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 15\n    }\n  }, \"All letters\"), sectionLetters.map(function (s) {\n    return __jsx(\"option\", {\n      key: s,\n      value: s,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 17\n      }\n    }, s);\n  }))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 13\n    }\n  }, \"Section Number\"), __jsx(Form.Select, {\n    value: filters.sectionNumber,\n    onChange: function onChange(e) {\n      var v = e.target.value;\n      setFilters(function (p) {\n        return _objectSpread(_objectSpread({}, p), {}, {\n          sectionNumber: v\n        });\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 13\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 15\n    }\n  }, \"All numbers\"), sectionNumbers.map(function (s) {\n    return __jsx(\"option\", {\n      key: s,\n      value: s,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 17\n      }\n    }, s);\n  }))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 13\n    }\n  }, \"Bin\"), __jsx(Form.Select, {\n    value: filters.bin,\n    onChange: function onChange(e) {\n      var v = e.target.value;\n      setFilters(function (p) {\n        return _objectSpread(_objectSpread({}, p), {}, {\n          bin: v\n        });\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 13\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 15\n    }\n  }, \"All bins\"), bins.map(function (b) {\n    return __jsx(\"option\", {\n      key: b,\n      value: b,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 17\n      }\n    }, b);\n  }))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 13\n    }\n  }, \"Pallet\"), __jsx(Form.Select, {\n    value: filters.pallet,\n    onChange: function onChange(e) {\n      var v = e.target.value;\n      setFilters(function (p) {\n        return _objectSpread(_objectSpread({}, p), {}, {\n          pallet: v\n        });\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 13\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 15\n    }\n  }, \"All pallets\"), pallets.map(function (p) {\n    return __jsx(\"option\", {\n      key: p,\n      value: p,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 17\n      }\n    }, p);\n  }))), __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 13\n    }\n  }, \"Local SN\"), __jsx(Form.Control, {\n    placeholder: \"Search SN\",\n    value: filters.localSN,\n    onChange: function onChange(e) {\n      var v = e.target.value;\n      setFilters(function (p) {\n        return _objectSpread(_objectSpread({}, p), {}, {\n          localSN: v\n        });\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 13\n    }\n  }))), __jsx(\"div\", {\n    className: \"d-flex mb-2 align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 9\n    }\n  }, __jsx(Form.Check, {\n    type: \"checkbox\",\n    label: \"Select All\",\n    onChange: toggleSelectAll,\n    checked: filteredItems.length > 0 && filteredItems.every(function (i) {\n      return selectedIds.has(i.id);\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 11\n    }\n  }), selectedIds.size > 0 && __jsx(React.Fragment, null, __jsx(Form.Select, {\n    className: \"mx-2\",\n    value: bulkField,\n    onChange: function onChange(e) {\n      return setBulkField(e.target.value);\n    },\n    style: {\n      width: \"150px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 15\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 17\n    }\n  }, \"Change\\u2026\"), __jsx(\"option\", {\n    value: \"region\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 17\n    }\n  }, \"Region\"), __jsx(\"option\", {\n    value: \"sectionLetter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 17\n    }\n  }, \"Section Letter\"), __jsx(\"option\", {\n    value: \"sectionNumber\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 17\n    }\n  }, \"Section Number\"), __jsx(\"option\", {\n    value: \"bin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 17\n    }\n  }, \"Bin\"), __jsx(\"option\", {\n    value: \"pallet\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 17\n    }\n  }, \"Pallet\")), __jsx(Form.Control, {\n    style: {\n      width: \"100px\"\n    },\n    placeholder: \"New value\",\n    value: bulkValue,\n    onChange: function onChange(e) {\n      return setBulkValue(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 15\n    }\n  }), __jsx(Button, {\n    className: \"ms-2\",\n    onClick: applyBulkUpdate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 15\n    }\n  }, \"Apply\"))), __jsx(Table, {\n    bordered: true,\n    hover: true,\n    responsive: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 9\n    }\n  }, __jsx(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 11\n    }\n  }, __jsx(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 13\n    }\n  }, __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 15\n    }\n  }), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 15\n    }\n  }, \"Name\"), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 15\n    }\n  }, \"PN\"), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 15\n    }\n  }, \"SN\"), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 15\n    }\n  }, \"LocalSN\"), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 15\n    }\n  }, \"Region\"), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 15\n    }\n  }, \"Section\"), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 15\n    }\n  }, \"Bin\"), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 15\n    }\n  }, \"Pallet\"))), __jsx(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 11\n    }\n  }, filteredItems.map(function (it) {\n    return __jsx(\"tr\", {\n      key: it.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 15\n      }\n    }, __jsx(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 17\n      }\n    }, __jsx(Form.Check, {\n      type: \"checkbox\",\n      checked: selectedIds.has(it.id),\n      onChange: function onChange() {\n        return toggleSelect(it.id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 19\n      }\n    })), __jsx(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 17\n      }\n    }, it.name), __jsx(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 17\n      }\n    }, it.pn), __jsx(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 17\n      }\n    }, it.sn), __jsx(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 17\n      }\n    }, it.localSN), __jsx(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 17\n      }\n    }, it.region), __jsx(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 17\n      }\n    }, it.sectionLetter, it.sectionNumber), __jsx(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 17\n      }\n    }, it.bin), __jsx(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 17\n      }\n    }, it.pallet));\n  })))));\n}\n\n_s2(InventoryManage, \"o0O+lMtwmCKCT8q1LUYA02Eo/Hw=\", false, function () {\n  return [useRouter];\n});\n\n_c = InventoryManage;\n\nvar _c;\n\n$RefreshReg$(_c, \"InventoryManage\");","map":{"version":3,"sources":["C:/Users/mack2/Desktop/code/pages/NewSearch/inventory/inventoryManage.js"],"names":["React","useEffect","useState","useMemo","LoggedIn","firebase","Table","Form","Button","Container","Row","Col","Spinner","Link","useRouter","formatLoc","InventoryManage","router","items","setItems","loading","setLoading","Set","selectedIds","setSelectedIds","region","sectionLetter","sectionNumber","bin","pallet","localSN","filters","setFilters","bulkField","setBulkField","bulkValue","setBulkValue","db","firestore","collection","get","then","snap","data","docs","map","d","doc","loc","newLocalCurrent","section","slice","letter","number","undefined","String","id","name","pn","sn","toString","isReady","qp","query","getParam","key","Array","isArray","prev","distinct","arr","from","filter","v","sort","regions","i","sectionLetters","sectionNumbers","bins","pallets","toggleSelect","next","has","add","toggleSelectAll","visibleIds","filteredItems","every","forEach","it","f","applyBulkUpdate","updates","orig","find","newRegion","newSectionLetter","newSectionNumber","newBin","newPallet","newLocString","updateObj","localLocCurrent","update","item","Promise","all","LoadingButton","type","route","isLoading","simulateNetworkRequest","handleClick","resolve","setTimeout","e","target","value","p","r","s","b","length","size","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useMemo } from \"react\";\nimport LoggedIn from \"../../LoggedIn\";\nimport firebase from \"../../../context/Firebase\";\nimport {\n  Table,\n  Form,\n  Button,\n  Container,\n  Row,\n  Col,\n  Spinner,\n} from \"react-bootstrap\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { formatLoc } from \"../../../utils/itemFormShared\";\n\n\nexport default function InventoryManage() {\n  const router = useRouter();\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedIds, setSelectedIds] = useState(new Set());\n  const [filters, setFilters] = useState({\n    region: \"\",\n    sectionLetter: \"\",\n    sectionNumber: \"\",\n    bin: \"\",\n    pallet: \"\",\n    localSN: \"\",\n  });\n  const [bulkField, setBulkField] = useState(\"\");\n  const [bulkValue, setBulkValue] = useState(\"\");\n\n  // ---- load data once ----\n  useEffect(() => {\n    const db = firebase.firestore();\n    db.collection(\"Test\")\n      .get()\n      .then((snap) => {\n        const data = snap.docs.map((d) => {\n          const doc = d.data();\n          const loc = doc.newLocalCurrent || {};\n          let sectionLetter = \"\";\n          let sectionNumber = \"\";\n          if (typeof loc.section === \"string\") {\n            sectionLetter = loc.section.slice(0, 1);\n            sectionNumber = loc.section.slice(1);\n          } else if (loc.section) {\n            sectionLetter = loc.section.letter || \"\";\n            sectionNumber =\n              loc.section.number !== undefined && loc.section.number !== null\n                ? String(loc.section.number)\n                : \"\";\n          }\n          return {\n            id: d.id,\n            name: doc.name || \"\",\n            pn: doc.pn || \"\",\n            sn: doc.sn || \"\",\n            localSN: doc.localSN || \"\",\n            region: loc.region?.toString() ?? \"\",\n            sectionLetter,\n            sectionNumber,\n            bin: loc.bin?.toString() ?? \"\",\n            pallet: loc.pallet?.toString() ?? \"\",\n          };\n        });\n        setItems(data);\n      })\n      .finally(() => setLoading(false));\n  }, []);\n\n  useEffect(() => {\n    if (!router.isReady) return;\n    const qp = router.query;\n    const getParam = (key) =>\n      Array.isArray(qp[key]) ? qp[key][0] : qp[key];\n    setFilters((prev) => ({\n      ...prev,\n      region: getParam(\"region\") || \"\",\n      sectionLetter: getParam(\"sectionLetter\") || \"\",\n      sectionNumber: getParam(\"sectionNumber\") || \"\",\n      bin: getParam(\"bin\") || \"\",\n      pallet: getParam(\"pallet\") || \"\",\n      localSN: getParam(\"localSN\") || \"\",\n    }));\n  }, [router.isReady]);\n\n  // ---- derive distinct filter options ----\n  const distinct = (arr) =>\n    Array.from(new Set(arr.filter((v) => v))).sort();\n  const regions  = useMemo(() => distinct(items.map((i) => i.region)),  [items]);\n  const sectionLetters = useMemo(\n    () => distinct(items.map((i) => i.sectionLetter)),\n    [items]\n  );\n  const sectionNumbers = useMemo(\n    () => distinct(items.map((i) => i.sectionNumber)),\n    [items]\n  );\n  const bins     = useMemo(() => distinct(items.map((i) => i.bin)),     [items]);\n  const pallets  = useMemo(() => distinct(items.map((i) => i.pallet)),  [items]);\n\n  // ---- toggles ----\n  const toggleSelect = (id) => {\n    setSelectedIds((prev) => {\n      const next = new Set(prev);\n      next.has(id) ? next.delete(id) : next.add(id);\n      return next;\n    });\n  };\n  const toggleSelectAll = () => {\n    const visibleIds = filteredItems.map((i) => i.id);\n    setSelectedIds((prev) => {\n      const next = new Set(prev);\n      if (visibleIds.every((id) => next.has(id))) {\n        visibleIds.forEach((id) => next.delete(id));\n      } else {\n        visibleIds.forEach((id) => next.add(id));\n      }\n      return next;\n    });\n  };\n\n  // ---- filtered list ----\n  const filteredItems = items.filter((it) =>\n    [\"region\", \"sectionLetter\", \"sectionNumber\", \"bin\", \"pallet\", \"localSN\"].every(\n      (f) => !filters[f] || it[f] === filters[f]\n    )\n  );\n\n  // ---- bulk update handler ----\n  const applyBulkUpdate = () => {\n    if (!bulkField || !bulkValue) return;\n    const db = firebase.firestore();\n\n    const updates = Array.from(selectedIds).map((id) => {\n      const orig = items.find((i) => i.id === id) || {};\n      const newRegion  = bulkField === \"region\"  ? bulkValue : orig.region;\n      const newSectionLetter =\n        bulkField === \"sectionLetter\" ? bulkValue : orig.sectionLetter;\n      const newSectionNumber =\n        bulkField === \"sectionNumber\" ? bulkValue : orig.sectionNumber;\n      const newBin     = bulkField === \"bin\"     ? bulkValue : orig.bin;\n      const newPallet  = bulkField === \"pallet\"  ? bulkValue : orig.pallet;\n\n      const newLocString = formatLoc({\n        region: newRegion,\n        section:\n          newSectionLetter && newSectionNumber\n            ? { letter: newSectionLetter, number: newSectionNumber }\n            : undefined,\n        bin: newBin,\n        pallet: newPallet,\n      });\n\n      const updateObj = {\n        region: newRegion,\n        bin: newBin,\n        pallet: newPallet,\n        localLocCurrent: newLocString,\n        newLocalCurrent: {\n          region: newRegion,\n          bin: newBin,\n          pallet: newPallet,\n        },\n      };\n      if (newSectionLetter && newSectionNumber) {\n        updateObj.section = { letter: newSectionLetter, number: newSectionNumber };\n        updateObj.newLocalCurrent.section = {\n          letter: newSectionLetter,\n          number: newSectionNumber,\n        };\n      }\n\n      return db\n        .collection(\"Test\")\n        .doc(id)\n        .update(updateObj)\n        .then(() => {\n          setItems((prev) =>\n            prev.map((item) =>\n              item.id === id\n                ? {\n                    ...item,\n                    region: newRegion,\n                    sectionLetter: newSectionLetter,\n                    sectionNumber: newSectionNumber,\n                    bin: newBin,\n                    pallet: newPallet,\n                  }\n                : item\n            )\n          );\n        });\n    });\n\n    Promise.all(updates).then(() => {\n      setSelectedIds(new Set());\n      setBulkField(\"\");\n      setBulkValue(\"\");\n    });\n  };\n\n  // ---- loading state ----\n  if (loading) {\n    return (\n      <Container className=\"py-5 text-center\">\n        <Spinner animation=\"border\" />\n            </Container>\n        );\n    }\n\n    function LoadingButton({ type, name, route }) {\n      const [isLoading, setLoading] = useState(false);\n    \n      useEffect(() => {\n        if (isLoading) {\n          simulateNetworkRequest().then(() => setLoading(false));\n        }\n      }, [isLoading]);\n    \n      const handleClick = () => setLoading(true);\n    \n      return (\n        <Link href={`/${route}`}>\n                <a\n                    className={`btn btn-${type}`}\n                    disabled={isLoading}\n                    onClick={!isLoading ? handleClick : null}\n                >\n                    {isLoading ? \"Loadingâ€¦\" : name}\n                </a>\n            </Link>\n        );\n    }\n\n    function simulateNetworkRequest() {\n        return new Promise(resolve => setTimeout(resolve, 2000));\n    }\n\n    return (\n        <LoggedIn>\n            <Container className=\"py-4\">\n                <h2>Inventory Management</h2>\n                <LoadingButton\n                    type=\"primary\"\n                    name=\"Back\"\n                    route=\"Warehousedb/WarehouseSelect\"\n                />\n                {/* dropdown filters */}\n                <Row className=\"mb-3\">\n                    <Col>\n                        <Form.Label>Region</Form.Label>\n                        <Form.Select\n                            value={filters.region}\n                            onChange={(e) => {\n                const v = e.target.value;\n                setFilters((p) => ({ ...p, region: v }));\n              }}\n            >\n              <option value=\"\">All regions</option>\n              {regions.map((r) => (\n                <option key={r} value={r}>{r}</option>\n              ))}\n            </Form.Select>\n          </Col>\n          <Col>\n            <Form.Label>Section Letter</Form.Label>\n            <Form.Select\n              value={filters.sectionLetter}\n              onChange={(e) => {\n                const v = e.target.value;\n                setFilters((p) => ({ ...p, sectionLetter: v }));\n              }}\n            >\n              <option value=\"\">All letters</option>\n              {sectionLetters.map((s) => (\n                <option key={s} value={s}>{s}</option>\n              ))}\n            </Form.Select>\n          </Col>\n          <Col>\n            <Form.Label>Section Number</Form.Label>\n            <Form.Select\n              value={filters.sectionNumber}\n              onChange={(e) => {\n                const v = e.target.value;\n                setFilters((p) => ({ ...p, sectionNumber: v }));\n              }}\n            >\n              <option value=\"\">All numbers</option>\n              {sectionNumbers.map((s) => (\n                <option key={s} value={s}>{s}</option>\n              ))}\n            </Form.Select>\n          </Col>\n          <Col>\n            <Form.Label>Bin</Form.Label>\n            <Form.Select\n              value={filters.bin}\n              onChange={(e) => {\n                const v = e.target.value;\n                setFilters((p) => ({ ...p, bin: v }));\n              }}\n            >\n              <option value=\"\">All bins</option>\n              {bins.map((b) => (\n                <option key={b} value={b}>{b}</option>\n              ))}\n            </Form.Select>\n          </Col>\n          <Col>\n            <Form.Label>Pallet</Form.Label>\n            <Form.Select\n              value={filters.pallet}\n              onChange={(e) => {\n                const v = e.target.value;\n                setFilters((p) => ({ ...p, pallet: v }));\n              }}\n            >\n              <option value=\"\">All pallets</option>\n              {pallets.map((p) => (\n                <option key={p} value={p}>{p}</option>\n              ))}\n            </Form.Select>\n          </Col>\n          <Col>\n            <Form.Label>Local SN</Form.Label>\n            <Form.Control\n              placeholder=\"Search SN\"\n              value={filters.localSN}\n              onChange={(e) => {\n                const v = e.target.value;\n                setFilters((p) => ({ ...p, localSN: v }));\n              }}\n            />\n          </Col>\n        </Row>\n\n        {/* bulk action bar */}\n        <div className=\"d-flex mb-2 align-items-center\">\n          <Form.Check\n            type=\"checkbox\"\n            label=\"Select All\"\n            onChange={toggleSelectAll}\n            checked={\n              filteredItems.length > 0 &&\n              filteredItems.every((i) => selectedIds.has(i.id))\n            }\n          />\n          {selectedIds.size > 0 && (\n            <>\n              <Form.Select\n                className=\"mx-2\"\n                value={bulkField}\n                onChange={(e) => setBulkField(e.target.value)}\n                style={{ width: \"150px\" }}\n              >\n                <option value=\"\">Changeâ€¦</option>\n                <option value=\"region\">Region</option>\n                <option value=\"sectionLetter\">Section Letter</option>\n                <option value=\"sectionNumber\">Section Number</option>\n                <option value=\"bin\">Bin</option>\n                <option value=\"pallet\">Pallet</option>\n              </Form.Select>\n              <Form.Control\n                style={{ width: \"100px\" }}\n                placeholder=\"New value\"\n                value={bulkValue}\n                onChange={(e) => setBulkValue(e.target.value)}\n              />\n              <Button className=\"ms-2\" onClick={applyBulkUpdate}>\n                Apply\n              </Button>\n            </>\n          )}\n        </div>\n\n        {/* data table */}\n        <Table bordered hover responsive>\n          <thead>\n            <tr>\n              <th></th>\n              <th>Name</th>\n              <th>PN</th>\n              <th>SN</th>\n              <th>LocalSN</th>\n              <th>Region</th>\n              <th>Section</th>\n              <th>Bin</th>\n              <th>Pallet</th>\n            </tr>\n          </thead>\n          <tbody>\n            {filteredItems.map((it) => (\n              <tr key={it.id}>\n                <td>\n                  <Form.Check\n                    type=\"checkbox\"\n                    checked={selectedIds.has(it.id)}\n                    onChange={() => toggleSelect(it.id)}\n                  />\n                </td>\n                <td>{it.name}</td>\n                <td>{it.pn}</td>\n                <td>{it.sn}</td>\n                <td>{it.localSN}</td>\n                <td>{it.region}</td>\n                <td>{it.sectionLetter}{it.sectionNumber}</td>\n                <td>{it.bin}</td>\n                <td>{it.pallet}</td>\n              </tr>\n            ))}\n          </tbody>\n        </Table>\n      </Container>\n    </LoggedIn>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}