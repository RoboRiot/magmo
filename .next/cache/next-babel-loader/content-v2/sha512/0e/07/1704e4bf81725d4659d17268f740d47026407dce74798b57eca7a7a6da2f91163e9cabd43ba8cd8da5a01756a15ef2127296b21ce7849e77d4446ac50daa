{"ast":null,"code":"export default async function handler(req, res) {\n  if (req.method !== \"POST\") {\n    // If something hits this route with GET, don't explode. Just explain.\n    return res.status(405).json({\n      error: \"Method not allowed. Send POST with { question }.\"\n    });\n  }\n\n  try {\n    const {\n      question\n    } = req.body || {};\n\n    if (!question || typeof question !== \"string\") {\n      return res.status(400).json({\n        error: \"Missing or invalid 'question' in request body.\"\n      });\n    } // For now we're mocking an answer.\n    // Later this is where you'll:\n    // 1. run embeddings search on knowledge_store.json\n    // 2. build context\n    // 3. call OpenAI\n\n\n    const fakeAnswer = `You asked: \"${question}\". This is where Magmo will answer using internal service docs.`;\n    return res.status(200).json({\n      answer: fakeAnswer\n    });\n  } catch (err) {\n    console.error(\"AskMagmo API error:\", err);\n    return res.status(500).json({\n      error: \"Internal Server Error\"\n    });\n  }\n}","map":{"version":3,"sources":["C:/Users/mack2/OneDrive/Desktop/code/pages/api/gpt/AskMagmo.js"],"names":["handler","req","res","method","status","json","error","question","body","fakeAnswer","answer","err","console"],"mappings":"AAAA,eAAe,eAAeA,OAAf,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;AAC9C,MAAID,GAAG,CAACE,MAAJ,KAAe,MAAnB,EAA2B;AACzB;AACA,WAAOD,GAAG,CACPE,MADI,CACG,GADH,EAEJC,IAFI,CAEC;AAAEC,MAAAA,KAAK,EAAE;AAAT,KAFD,CAAP;AAGD;;AAED,MAAI;AACF,UAAM;AAAEC,MAAAA;AAAF,QAAeN,GAAG,CAACO,IAAJ,IAAY,EAAjC;;AAEA,QAAI,CAACD,QAAD,IAAa,OAAOA,QAAP,KAAoB,QAArC,EAA+C;AAC7C,aAAOL,GAAG,CACPE,MADI,CACG,GADH,EAEJC,IAFI,CAEC;AAAEC,QAAAA,KAAK,EAAE;AAAT,OAFD,CAAP;AAGD,KAPC,CASF;AACA;AACA;AACA;AACA;;;AACA,UAAMG,UAAU,GAAI,eAAcF,QAAS,iEAA3C;AAEA,WAAOL,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BK,MAAAA,MAAM,EAAED;AADkB,KAArB,CAAP;AAGD,GAnBD,CAmBE,OAAOE,GAAP,EAAY;AACZC,IAAAA,OAAO,CAACN,KAAR,CAAc,qBAAd,EAAqCK,GAArC;AACA,WAAOT,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,KAAK,EAAE;AAAT,KAArB,CAAP;AACD;AACF","sourcesContent":["export default async function handler(req, res) {\r\n  if (req.method !== \"POST\") {\r\n    // If something hits this route with GET, don't explode. Just explain.\r\n    return res\r\n      .status(405)\r\n      .json({ error: \"Method not allowed. Send POST with { question }.\" });\r\n  }\r\n\r\n  try {\r\n    const { question } = req.body || {};\r\n\r\n    if (!question || typeof question !== \"string\") {\r\n      return res\r\n        .status(400)\r\n        .json({ error: \"Missing or invalid 'question' in request body.\" });\r\n    }\r\n\r\n    // For now we're mocking an answer.\r\n    // Later this is where you'll:\r\n    // 1. run embeddings search on knowledge_store.json\r\n    // 2. build context\r\n    // 3. call OpenAI\r\n    const fakeAnswer = `You asked: \"${question}\". This is where Magmo will answer using internal service docs.`;\r\n\r\n    return res.status(200).json({\r\n      answer: fakeAnswer,\r\n    });\r\n  } catch (err) {\r\n    console.error(\"AskMagmo API error:\", err);\r\n    return res.status(500).json({ error: \"Internal Server Error\" });\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}